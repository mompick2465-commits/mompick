/*! For license information please see main.a9b7aaf2.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},89:(e,t,n)=>{n.d(t,{cc:()=>a,hN:()=>o,iO:()=>d});var s=n(281),r=n(801);async function a(e){try{const t="https://fxkftrczarwuytnufprv.supabase.co";if(!t)throw new Error("Supabase URL\uc774 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.");const n="".concat(t,"/functions/v1/childcare-api");console.log("\uc5b4\ub9b0\uc774\uc9d1 Edge Function \ud638\ucd9c:",n);const s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4a2Z0cmN6YXJ3dXl0bnVmcHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODM5NzgsImV4cCI6MjA3MTY1OTk3OH0.L0zzO_KooHRwJdf6z92Cla05pSH8UF7PRGVDK8lS3Ns")},body:JSON.stringify({action:"fetch",arcode:e})});if(!s.ok)throw new Error("Edge Function \ud638\ucd9c \uc2e4\ud328: ".concat(s.status));const r=await s.json();if(console.log("Edge Function \uc751\ub2f5:",r),r.error)throw new Error(r.error);return r.success&&r.data?r.data.map(i):[]}catch(t){throw console.error("\uc804\uad6d\uc5b4\ub9b0\uc774\uc9d1 \ud3ec\ud138 API \ud638\ucd9c \uc624\ub958:",t),new Error("\uc5b4\ub9b0\uc774\uc9d1 \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294\ub370 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(t instanceof Error?t.message:"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958"))}}const i=e=>(console.log("\ud83d\udd04 transformChildcareData \uc2dc\uc791:",e),console.log("\ud83c\udd94 stcode \uac12:",e.stcode),console.log("\ud83c\udfe2 arcode \uac12:",e.arcode),{crname:e.crname||"",crtypename:"\ubbfc\uac04",crstatus:"\uc815\uc0c1",crtelno:e.crtelno||"",craddr:e.craddr||"",crpostno:"",lttdcdnt:"",lngtcdnt:"",crcapat:e.crcapat?e.crcapat.toString():"0",crchcnt:"0",crspec:"\uc77c\ubc18\ubcf4\uc721",crspecdt:"",crfaclt:"",crfacltdt:"",crfacltetc:"",crtime:"",crtimeetc:"",crurl:e.crhome||"",crfaxno:e.crfaxno||"",crceoname:"",crceotellno:"",sidoname:"",sigunname:"",dongname:"",crcode:e.stcode||"",crtype:"",sido:"",sigun:e.arcode||"",dong:""});async function o(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;try{const{reverseGeocodeWithCache:r}=await Promise.resolve().then(n.bind(n,281)),i=await r(e,t),o=(null===i||void 0===i?void 0:i.childcareArcode)||l(e,t);console.log("\uc704\uce58 \uae30\ubc18 \uc2dc\uad70\uad6c\ucf54\ub4dc:",o,"(".concat(null===i||void 0===i?void 0:i.sidoName," ").concat(null===i||void 0===i?void 0:i.sggName,")"));const d=await a(o);console.log("\ubc1b\uc740 \uc5b4\ub9b0\uc774\uc9d1 \ub370\uc774\ud130:",d.length,"\uac1c");const u=d.filter(n=>{const r=parseFloat(n.lttdcdnt),a=parseFloat(n.lngtcdnt);if(isNaN(r)||isNaN(a)||0===r||0===a)return!0;return c(e,t,r,a)<=s});return console.log("\ud544\ud130\ub9c1\ub41c \uc5b4\ub9b0\uc774\uc9d1 \ub370\uc774\ud130:",u.length,"\uac1c"),u}catch(r){return console.error("\uadfc\ucc98 \uc5b4\ub9b0\uc774\uc9d1 \uac80\uc0c9 \uc624\ub958:",r),[]}}const l=(e,t)=>e>=37.49&&e<=37.56&&t>=127.02&&t<=127.13?"11680":e>=37.47&&e<=37.52&&t>=126.95&&t<=127.05?"11650":e>=37.55&&e<=37.65&&t>=126.95&&t<=127.1?"11140":e>=37.57&&e<=37.61&&t>=126.96&&t<=127.03?"11110":e>=37.52&&e<=37.56&&t>=126.96&&t<=127.02?"11170":e>=37.55&&e<=37.58&&t>=127.02&&t<=127.08?"11200":e>=37.53&&e<=37.58&&t>=127.08&&t<=127.12?"11215":e>=37.57&&e<=37.61&&t>=127.03&&t<=127.08?"11230":e>=37.59&&e<=37.65&&t>=127.08&&t<=127.15?"11260":e>=37.59&&e<=37.65&&t>=127&&t<=127.1?"11290":e>=37.64&&e<=37.68&&t>=127&&t<=127.05?"11305":e>=37.66&&e<=37.7&&t>=127.03&&t<=127.08?"11320":e>=37.64&&e<=37.7&&t>=127.05&&t<=127.12?"11350":e>=37.6&&e<=37.66&&t>=126.9&&t<=127?"11380":e>=37.56&&e<=37.6&&t>=126.9&&t<=126.96?"11410":e>=37.52&&e<=37.58&&t>=126.9&&t<=126.96?"11440":e>=37.51&&e<=37.55&&t>=126.83&&t<=126.9?"11470":e>=37.54&&e<=37.58&&t>=126.8&&t<=126.9?"11500":e>=37.48&&e<=37.52&&t>=126.85&&t<=126.95?"11530":e>=37.45&&e<=37.5&&t>=126.9&&t<=126.95?"11545":e>=37.5&&e<=37.55&&t>=126.9&&t<=126.95?"11560":e>=37.48&&e<=37.52&&t>=126.95&&t<=127.02?"11590":e>=37.45&&e<=37.5&&t>=126.95&&t<=127.02?"11620":e>=37.49&&e<=37.55&&t>=127.1&&t<=127.18?"11710":e>=37.52&&e<=37.58&&t>=127.12&&t<=127.2?"11740":(console.log("\uc704\uce58 \ub9e4\ud551 \uc2e4\ud328, \uac15\ub0a8\uad6c\ub85c fallback:",e,t),"11680");const c=(e,t,n,s)=>{const r=(n-e)*Math.PI/180,a=(s-t)*Math.PI/180,i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))};async function d(e,t,n,a){var i;console.log("\ud83d\udd04 transformToMapData \uc2dc\uc791:",e.crname,e.crcode);let o=parseFloat(e.lttdcdnt),l=parseFloat(e.lngtcdnt);if(isNaN(o)||isNaN(l)||0===o||0===l){const t=e.craddr||"";console.log("\uce90\uc2dc \uae30\ubc18 \uc9c0\uc624\ucf54\ub529 \uc2dc\ub3c4: ".concat(e.crname," - ").concat(t));try{const n=await(0,s.ox)(t);n?(o=n.lat,l=n.lng,console.log("\uce90\uc2dc \uc9c0\uc624\ucf54\ub529 \uc131\uacf5: ".concat(e.crname," -> ").concat(o,", ").concat(l))):(console.log("\uce90\uc2dc \uc9c0\uc624\ucf54\ub529 \uc2e4\ud328: ".concat(e.crname,", \uae30\ubcf8 \uc88c\ud45c \uc0ac\uc6a9")),t.includes("\uac15\ub0a8\uad6c")?(o=37.5172+.02*(Math.random()-.5),l=127.0473+.02*(Math.random()-.5)):t.includes("\uc11c\ucd08\uad6c")?(o=37.4945+.02*(Math.random()-.5),l=127.0256+.02*(Math.random()-.5)):t.includes("\uc911\uad6c")?(o=37.5636+.02*(Math.random()-.5),l=126.997+.02*(Math.random()-.5)):t.includes("\uc6a9\uc0b0\uad6c")?(o=37.5384+.02*(Math.random()-.5),l=126.9654+.02*(Math.random()-.5)):t.includes("\uc131\ub3d9\uad6c")?(o=37.5633+.02*(Math.random()-.5),l=127.0366+.02*(Math.random()-.5)):(o=37.5665+.1*(Math.random()-.5),l=126.978+.1*(Math.random()-.5)))}catch(m){console.error("\uce90\uc2dc \uc9c0\uc624\ucf54\ub529 \uc624\ub958 (".concat(e.crname,"):"),m),o=37.5665+.1*(Math.random()-.5),l=126.978+.1*(Math.random()-.5)}}const d=e.crcode&&""!==e.crcode.trim()?e.crcode:"childcare_".concat(e.crname.replace(/[^a-zA-Z0-9\uac00-\ud7a3]/g,"_"),"_").concat(Math.random().toString(36).substr(2,9));console.log("\ud83c\udd94 \uc5b4\ub9b0\uc774\uc9d1 ID \uc124\uc815:",e.crname,"->",d),console.log("\ud83d\udd04 \uc6d0\ubcf8 \ub370\uc774\ud130 - crcode:",e.crcode,"sigun:",e.sigun),console.log("\ud83d\udd04 sigun \ud0c0\uc785:",typeof e.sigun,"\uae38\uc774:",null===(i=e.sigun)||void 0===i?void 0:i.length),console.log("\ud83d\udd04 metaArcode:",a);const u=parseInt(e.sigun)||parseInt(a||"")||0;console.log("\ud83c\udfe2 sggCode \uc124\uc815:",e.sigun,"metaArcode:",a,"->",u);const h={id:d,code:e.crcode,name:e.crname,address:e.craddr,lat:o,lng:l,type:"childcare",establishment:e.crtypename,officeedu:e.sidoname+" "+e.sigunname,telno:e.crtelno,opertime:e.crtime,prmstfcnt:parseInt(e.crcapat)||0,ag3fpcnt:0,ag4fpcnt:0,ag5fpcnt:0,hpaddr:e.crurl,rating:0,distance:t&&n?c(t,n,o,l):0,image:void 0,sidoCode:parseInt(e.sido)||0,sggCode:u,crcode:e.crcode,crtype:e.crtype,crstatus:e.crstatus,crceoname:e.crceoname,crceotellno:e.crceotellno,crspec:e.crspec,crfaclt:e.crfaclt};try{if(e.crcode){const{data:t}=await r.supabase.from("childcare_custom_info").select("building_images").eq("facility_code",e.crcode).maybeSingle();t&&Array.isArray(t.building_images)&&t.building_images.length>0&&(h.image=t.building_images[0])}}catch(f){console.warn("\uc5b4\ub9b0\uc774\uc9d1 \ucee4\uc2a4\ud140 \uc774\ubbf8\uc9c0 \uc870\ud68c \uc2e4\ud328:",f)}return console.log("\u2705 transformToMapData \uc644\ub8cc:",h.name,"type:",h.type,"id:",h.id),h}},153:(e,t,n)=>{var s=n(43),r=Symbol.for("react.element"),a=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,o=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var s,a={},c=null,d=null;for(s in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,s)&&!l.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:r,type:e,key:c,ref:d,props:a,_owner:o.current}}t.Fragment=a,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),s=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.iterator;var f={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,p={};function x(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||f}function v(){}function y(e,t,n){this.props=e,this.context=t,this.refs=p,this.updater=n||f}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=x.prototype;var b=y.prototype=new v;b.constructor=y,g(b,x.prototype),b.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,_={current:null},N={key:!0,ref:!0,__self:!0,__source:!0};function k(e,t,s){var r,a={},i=null,o=null;if(null!=t)for(r in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,r)&&!N.hasOwnProperty(r)&&(a[r]=t[r]);var l=arguments.length-2;if(1===l)a.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(r in l=e.defaultProps)void 0===a[r]&&(a[r]=l[r]);return{$$typeof:n,type:e,key:i,ref:o,props:a,_owner:_.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var S=/\/+/g;function E(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,r,a,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case s:l=!0}}if(l)return i=i(l=e),e=""===a?"."+E(l,0):a,w(i)?(r="",null!=e&&(r=e.replace(S,"$&/")+"/"),P(i,t,r,"",function(e){return e})):null!=i&&(C(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,r+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(S,"$&/")+"/")+e)),t.push(i)),1;if(l=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var d=a+E(o=e[c],c);l+=P(o,t,r,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=m&&e[m]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=P(o=o.value,t,r,d=a+E(o,c++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function A(e,t,n){if(null==e)return e;var s=[],r=0;return P(e,s,"","",function(e){return t.call(n,e,r++)}),s}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var I={current:null},M={transition:null},L={ReactCurrentDispatcher:I,ReactCurrentBatchConfig:M,ReactCurrentOwner:_};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=r,t.Profiler=i,t.PureComponent=y,t.StrictMode=a,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.act=R,t.cloneElement=function(e,t,s){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=g({},e.props),a=e.key,i=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,o=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!N.hasOwnProperty(c)&&(r[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)r.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:n,type:e.type,key:a,ref:i,props:r,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=k,t.createFactory=function(e){var t=k.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return I.current.useCallback(e,t)},t.useContext=function(e){return I.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return I.current.useDeferredValue(e)},t.useEffect=function(e,t){return I.current.useEffect(e,t)},t.useId=function(){return I.current.useId()},t.useImperativeHandle=function(e,t,n){return I.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return I.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return I.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return I.current.useMemo(e,t)},t.useReducer=function(e,t,n){return I.current.useReducer(e,t,n)},t.useRef=function(e){return I.current.useRef(e)},t.useState=function(e){return I.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return I.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return I.current.useTransition()},t.version="18.3.1"},210:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(829)),a=s(n(736));class i{constructor(e){let{headers:t={},schema:n,fetch:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=new Headers(t),this.schemaName=n,this.fetch=s}from(e){const t=new URL("".concat(this.url,"/").concat(e));return new r.default(t,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new i(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{head:n=!1,get:s=!1,count:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var i;let o;const l=new URL("".concat(this.url,"/rpc/").concat(e));let c;n||s?(o=n?"HEAD":"GET",Object.entries(t).filter(e=>{let[t,n]=e;return void 0!==n}).map(e=>{let[t,n]=e;return[t,Array.isArray(n)?"{".concat(n.join(","),"}"):"".concat(n)]}).forEach(e=>{let[t,n]=e;l.searchParams.append(t,n)})):(o="POST",c=t);const d=new Headers(this.headers);return r&&d.set("Prefer","count=".concat(r)),new a.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}t.default=i},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var s=n-1>>>1,r=e[s];if(!(0<a(r,t)))break e;e[s]=t,e[n]=r,n=s}}function s(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var s=0,r=e.length,i=r>>>1;s<i;){var o=2*(s+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,n))c<r&&0>a(d,l)?(e[s]=d,e[c]=n,s=c):(e[s]=l,e[o]=n,s=o);else{if(!(c<r&&0>a(d,n)))break e;e[s]=d,e[c]=n,s=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,m=3,f=!1,g=!1,p=!1,x="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=s(d);null!==t;){if(null===t.callback)r(d);else{if(!(t.startTime<=e))break;r(d),t.sortIndex=t.expirationTime,n(c,t)}t=s(d)}}function w(e){if(p=!1,b(e),!g)if(null!==s(c))g=!0,M(j);else{var t=s(d);null!==t&&L(w,t.startTime-e)}}function j(e,n){g=!1,p&&(p=!1,v(C),C=-1),f=!0;var a=m;try{for(b(n),h=s(c);null!==h&&(!(h.expirationTime>n)||e&&!P());){var i=h.callback;if("function"===typeof i){h.callback=null,m=h.priorityLevel;var o=i(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===s(c)&&r(c),b(n)}else r(c);h=s(c)}if(null!==h)var l=!0;else{var u=s(d);null!==u&&L(w,u.startTime-n),l=!1}return l}finally{h=null,m=a,f=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,N=!1,k=null,C=-1,S=5,E=-1;function P(){return!(t.unstable_now()-E<S)}function A(){if(null!==k){var e=t.unstable_now();E=e;var n=!0;try{n=k(!0,e)}finally{n?_():(N=!1,k=null)}}else N=!1}if("function"===typeof y)_=function(){y(A)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,I=T.port2;T.port1.onmessage=A,_=function(){I.postMessage(null)}}else _=function(){x(A,0)};function M(e){k=e,N||(N=!0,_())}function L(e,n){C=x(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||f||(g=!0,M(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(e){switch(m){case 1:case 2:case 3:var t=3;break;default:t=m}var n=m;m=t;try{return e()}finally{m=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=m;m=e;try{return t()}finally{m=n}},t.unstable_scheduleCallback=function(e,r,a){var i=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?i+a:i:a=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,n(d,e),null===s(c)&&e===s(d)&&(p?(v(C),C=-1):p=!0,L(w,a-i))):(e.sortIndex=o,n(c,e),g||f||(g=!0,M(j))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=m;return function(){var n=m;m=t;try{return e.apply(this,arguments)}finally{m=n}}}},281:(e,t,n)=>{n.d(t,{ox:()=>o,reverseGeocodeWithCache:()=>c});var s=n(801);class r{static encode(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6,s=[-90,90],r=[-180,180],a="",i=0,o=0,l=!0;for(;a.length<n;){if(l){const e=(r[0]+r[1])/2;t>=e?(o=1+(o<<1),r[0]=e):(o<<=1,r[1]=e)}else{const t=(s[0]+s[1])/2;e>=t?(o=1+(o<<1),s[0]=t):(o<<=1,s[1]=t)}l=!l,5===++i&&(a+=this.base32[o],i=0,o=0)}return a}}function a(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6;return r.encode(e,t,n)}async function i(e,t){try{var n,r,i;const l=a(e,t,6);console.log("\uc5ed\uc9c0\uc624\ucf54\ub529 \ud0c0\uc77c \ud0a4: ".concat(l," (").concat(e,", ").concat(t,")"));const{data:c,error:d}=await s.supabase.from("rgc_cache").select("*").eq("tile_key",l).maybeSingle();if(!d&&c)return console.log("\ud83c\udfaf \uc5ed\uc9c0\uc624\ucf54\ub529 \uce90\uc2dc \ud788\ud2b8! (".concat(l,") \u2192"),c.sido_name,c.sgg_name),{tilKey:c.tile_key,hcode:c.hcode,sidoName:c.sido_name,sggName:c.sgg_name,dongName:c.dong_name,addressName:c.address_name,kindergartenSidoCode:c.kindergarten_sido_code,kindergartenSggCode:c.kindergarten_sgg_code,childcareArcode:c.childcare_arcode};var o;if(d)"PGRST116"===d.code?console.log("\ud83d\udccd \uc5ed\uc9c0\uc624\ucf54\ub529 \uce90\uc2dc \uc5c6\uc74c (".concat(l,") - \uc0c8\ub85c \uc800\uc7a5 \uc608\uc815")):"406"===d.code||null!==(o=d.message)&&void 0!==o&&o.includes("406")?console.log("\ud83d\udccd \uc5ed\uc9c0\uc624\ucf54\ub529 \uce90\uc2dc \uc870\ud68c \uc2e4\ud328 (RLS) (".concat(l,") - \uc0c8\ub85c \uc800\uc7a5 \uc608\uc815")):console.warn("\uc5ed\uc9c0\uc624\ucf54\ub529 \uce90\uc2dc \uc870\ud68c \uc624\ub958:",d.code,d.message);console.log("\ud83d\udd04 \uc5ed\uc9c0\uc624\ucf54\ub529 API \ud638\ucd9c \uc2dc\uc791 (".concat(l,")"));const u=await async function(e,t){const n="5f0dbbbe9e62053d846a67003eadab91",s=await fetch("https://dapi.kakao.com/v2/local/geo/coord2regioncode.json?x=".concat(t,"&y=").concat(e),{headers:{Authorization:"KakaoAK ".concat(n)}});if(!s.ok)throw new Error("\uce74\uce74\uc624 \uc5ed\uc9c0\uc624\ucf54\ub529 API \uc624\ub958: ".concat(s.status));return await s.json()}(e,t);if(!u.documents||0===u.documents.length)throw new Error("\uc5ed\uc9c0\uc624\ucf54\ub529 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");const h=u.documents.find(e=>"H"===e.region_type)||u.documents[0],{data:m,error:f}=await s.supabase.from("region_code_mapping").select("*").eq("sido_name",h.region_1depth_name).eq("sgg_name",h.region_2depth_name).maybeSingle();if(f||!m){console.warn("\ucf54\ub4dc \ub9e4\ud551\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4: ".concat(h.region_1depth_name," ").concat(h.region_2depth_name));const e={tilKey:l,hcode:h.code,sidoName:h.region_1depth_name,sggName:h.region_2depth_name,dongName:h.region_3depth_name||"",addressName:h.address_name||"".concat(h.region_1depth_name," ").concat(h.region_2depth_name),kindergartenSidoCode:11,kindergartenSggCode:11140,childcareArcode:"11140"};return await s.supabase.from("rgc_cache").upsert({tile_key:l,hcode:e.hcode,sido_name:e.sidoName,sgg_name:e.sggName,dong_name:e.dongName,address_name:e.addressName,kindergarten_sido_code:e.kindergartenSidoCode,kindergarten_sgg_code:e.kindergartenSggCode,childcare_arcode:e.childcareArcode}),e}const g={tilKey:l,hcode:h.code,sidoName:h.region_1depth_name,sggName:h.region_2depth_name,dongName:h.region_3depth_name||"",addressName:h.address_name||"".concat(h.region_1depth_name," ").concat(h.region_2depth_name),kindergartenSidoCode:null!==(n=null===m||void 0===m?void 0:m.kindergarten_sido_code)&&void 0!==n?n:11,kindergartenSggCode:null!==(r=null===m||void 0===m?void 0:m.kindergarten_sgg_code)&&void 0!==r?r:11140,childcareArcode:null!==(i=null===m||void 0===m?void 0:m.childcare_arcode)&&void 0!==i?i:"11140"},{error:p}=await s.supabase.from("rgc_cache").upsert({tile_key:l,hcode:g.hcode,sido_name:g.sidoName,sgg_name:g.sggName,dong_name:g.dongName,address_name:g.addressName,kindergarten_sido_code:g.kindergartenSidoCode,kindergarten_sgg_code:g.kindergartenSggCode,childcare_arcode:g.childcareArcode});return p?console.warn("\uc5ed\uc9c0\uc624\ucf54\ub529 \uce90\uc2dc \uc800\uc7a5 \uc2e4\ud328:",p.code,p.message):console.log("\ud83d\udcbe \uc5ed\uc9c0\uc624\ucf54\ub529 \uce90\uc2dc \uc800\uc7a5 \uc644\ub8cc: (".concat(l,") \u2192 ").concat(g.sidoName," ").concat(g.sggName)),g}catch(l){return console.error("\uc5ed\uc9c0\uc624\ucf54\ub529 \uc624\ub958:",l),null}}async function o(e){try{const n=function(e){return e?e.replace(/\s+/g," ").replace(/\([^)]*\)/g,"").replace(/\d+\ub3d9\s*\d+\ud638.*$/g,"").replace(/\d+\uce35.*$/g,"").replace(/,\s*$/,"").trim():""}(e);if(!n)return console.warn("\ube48 \uc8fc\uc18c\uc785\ub2c8\ub2e4:",e),null;console.log('\uc9c0\uc624\ucf54\ub529: "'.concat(e,'" \u2192 "').concat(n,'"'));const{data:r,error:a}=await s.supabase.from("geocode_cache").select("*").eq("address_norm",n).maybeSingle();if(!a&&r)return console.log('\ud83c\udfaf \uc9c0\uc624\ucf54\ub529 \uce90\uc2dc \ud788\ud2b8! "'.concat(r.address_norm,'" \u2192 ').concat(r.lat,", ").concat(r.lng)),{lat:r.lat,lng:r.lng,provider:r.provider,accuracy:r.accuracy,addressType:r.address_type};var t;if(a)"PGRST116"===a.code?console.log('\ud83d\udccd \uc9c0\uc624\ucf54\ub529 \uce90\uc2dc \uc5c6\uc74c "'.concat(n,'" - \uc0c8\ub85c \uc800\uc7a5 \uc608\uc815')):"406"===a.code||null!==(t=a.message)&&void 0!==t&&t.includes("406")?console.log('\ud83d\udccd \uc9c0\uc624\ucf54\ub529 \uce90\uc2dc \uc870\ud68c \uc2e4\ud328 (RLS) "'.concat(n,'" - \uc0c8\ub85c \uc800\uc7a5 \uc608\uc815')):console.warn("\uc9c0\uc624\ucf54\ub529 \uce90\uc2dc \uc870\ud68c \uc624\ub958:",a.code,a.message);console.log('\ud83d\udd04 \uc9c0\uc624\ucf54\ub529 API \ud638\ucd9c \uc2dc\uc791: "'.concat(n,'"'));const i=await async function(e){const t="5f0dbbbe9e62053d846a67003eadab91",n=await fetch("https://dapi.kakao.com/v2/local/search/address.json?query=".concat(encodeURIComponent(e)),{headers:{Authorization:"KakaoAK ".concat(t)}});if(!n.ok)throw new Error("\uce74\uce74\uc624 \uc9c0\uc624\ucf54\ub529 API \uc624\ub958: ".concat(n.status));return await n.json()}(n);if(!i.documents||0===i.documents.length)return console.warn("\uc9c0\uc624\ucf54\ub529 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4:",n),null;const o=i.documents[0],l={lat:parseFloat(o.y),lng:parseFloat(o.x),provider:"kakao",accuracy:o.accuracy||"UNKNOWN",addressType:o.address_type||"UNKNOWN"},{error:c}=await s.supabase.from("geocode_cache").upsert({address_norm:n,original_address:e,lat:l.lat,lng:l.lng,provider:l.provider,accuracy:l.accuracy,address_type:l.addressType});return c?console.warn("\uc9c0\uc624\ucf54\ub529 \uce90\uc2dc \uc800\uc7a5 \uc2e4\ud328:",c.code,c.message):console.log('\ud83d\udcbe \uc9c0\uc624\ucf54\ub529 \uce90\uc2dc \uc800\uc7a5 \uc644\ub8cc: "'.concat(n,'" \u2192 ').concat(l.lat,", ").concat(l.lng)),l}catch(n){return console.error("\uc9c0\uc624\ucf54\ub529 \uc624\ub958:",n),null}}function l(e,t){return e>=37.49&&e<=37.56&&t>=127.02&&t<=127.13?{tilKey:a(e,t),hcode:"1168000000",sidoName:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sggName:"\uac15\ub0a8\uad6c",dongName:"",addressName:"\uc11c\uc6b8 \uac15\ub0a8\uad6c",kindergartenSidoCode:11,kindergartenSggCode:11680,childcareArcode:"11680"}:e>=37.47&&e<=37.52&&t>=126.95&&t<=127.05?{tilKey:a(e,t),hcode:"1165000000",sidoName:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sggName:"\uc11c\ucd08\uad6c",dongName:"",addressName:"\uc11c\uc6b8 \uc11c\ucd08\uad6c",kindergartenSidoCode:11,kindergartenSggCode:11650,childcareArcode:"11650"}:{tilKey:a(e,t),hcode:"1114000000",sidoName:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sggName:"\uc911\uad6c",dongName:"",addressName:"\uc11c\uc6b8 \uc911\uad6c",kindergartenSidoCode:11,kindergartenSggCode:11140,childcareArcode:"11140"}}async function c(e,t){try{const n=await i(e,t);return n||(console.log("\uc5ed\uc9c0\uc624\ucf54\ub529 API \uc2e4\ud328, \ud558\ub4dc\ucf54\ub529 \ud3f4\ubc31 \uc0ac\uc6a9"),l(e,t))}catch(n){return console.error("\uc5ed\uc9c0\uc624\ucf54\ub529 \uc804\uccb4 \uc2e4\ud328:",n),l(e,t)}}r.base32="0123456789bcdefghjkmnpqrstuvwxyz"},286:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(630)),a=s(n(611));t.default=class{constructor(e){var t,n;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(n=e.isMaybeSingle)&&void 0!==n&&n,e.fetch?this.fetch=e.fetch:"undefined"===typeof fetch?this.fetch=r.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,s,r;let i=null,o=null,l=null,c=e.status,d=e.statusText;if(e.ok){if("HEAD"!==this.method){const n=await e.text();""===n||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(t=this.headers.get("Accept"))||void 0===t?void 0:t.includes("application/vnd.pgrst.plan+text"))?n:JSON.parse(n))}const r=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),a=null===(s=e.headers.get("content-range"))||void 0===s?void 0:s.split("/");r&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:"Results contain ".concat(o.length," rows, application/vnd.pgrst.object+json requires 1 row"),hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,d="Not Acceptable"):o=1===o.length?o[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(o=[],i=null,c=200,d="OK")}catch(u){404===e.status&&""===t?(c=204,d="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(r=null===i||void 0===i?void 0:i.details)||void 0===r?void 0:r.includes("0 rows"))&&(i=null,c=200,d="OK"),i&&this.shouldThrowOnError)throw new a.default(i)}return{error:i,data:o,count:l,status:c,statusText:d}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,s;return{error:{message:"".concat(null!==(t=null===e||void 0===e?void 0:e.name)&&void 0!==t?t:"FetchError",": ").concat(null===e||void 0===e?void 0:e.message),details:"".concat(null!==(n=null===e||void 0===e?void 0:e.stack)&&void 0!==n?n:""),hint:"",code:"".concat(null!==(s=null===e||void 0===e?void 0:e.code)&&void 0!==s?s:"")},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}}},374:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(286));class a extends r.default{select(e){let t=!1;const n=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(e){let{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:r=s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=r?"".concat(r,".order"):"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,"".concat(i?"".concat(i,","):"").concat(e,".").concat(t?"asc":"desc").concat(void 0===n?"":n?".nullsfirst":".nullslast")),this}limit(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="undefined"===typeof n?"limit":"".concat(n,".limit");return this.url.searchParams.set(s,"".concat(e)),this}range(e,t){let{foreignTable:n,referencedTable:s=n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r="undefined"===typeof s?"offset":"".concat(s,".offset"),a="undefined"===typeof s?"limit":"".concat(s,".limit");return this.url.searchParams.set(r,"".concat(e)),this.url.searchParams.set(a,"".concat(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain(){let{analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:a="text"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var i;const o=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept","application/vnd.pgrst.plan+".concat(a,'; for="').concat(l,'"; options=').concat(o,";")),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer","max-affected=".concat(e)),this}}t.default=a},391:(e,t,n)=>{var s=n(950);t.H=s.createRoot,s.hydrateRoot},478:(e,t,n)=>{n.d(t,{smartChildcareLoader:()=>l});var s=n(801);const r="https://fxkftrczarwuytnufprv.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4a2Z0cmN6YXJ3dXl0bnVmcHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODM5NzgsImV4cCI6MjA3MTY1OTk3OH0.L0zzO_KooHRwJdf6z92Cla05pSH8UF7PRGVDK8lS3Ns";console.log("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \ud658\uacbd \ubcc0\uc218 \ud655\uc778:",{supabaseUrl:r?"\uc124\uc815\ub428":"\uc124\uc815\ub418\uc9c0 \uc54a\uc74c",supabaseKey:a?"\uc124\uc815\ub428":"\uc124\uc815\ub418\uc9c0 \uc54a\uc74c"});const i=new class{constructor(){this.supabase=s.supabase,this.bucketName="childcare-cache",this.cacheExpiryDays=7}parseArcode(e){if(5!==e.length)throw new Error("\uc798\ubabb\ub41c arcode \ud615\uc2dd: ".concat(e));return{sidoCode:e.substring(0,2),sggCode:e}}pathPrefixByCode(e){const{sidoCode:t,sggCode:n}=this.parseArcode(e);return"regions/".concat(t,"/").concat(n)}latestPathByCode(e){return"".concat(this.pathPrefixByCode(e),"/latest.json")}snapshotPathByCode(e,t){return"".concat(this.pathPrefixByCode(e),"/").concat(t,".json")}async getCachedDataByCode(e){try{const t=this.latestPathByCode(e),{data:n,error:s}=await this.supabase.storage.from(this.bucketName).list(this.pathPrefixByCode(e));if(s||!n||0===n.length){const{sidoCode:t,sggCode:n}=this.parseArcode(e);return console.log("\ud83d\udcc1 \uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc5c6\uc74c: ".concat(t,"/").concat(n," (").concat(e,")")),null}if(!n.some(e=>"latest.json"===e.name)){const{sidoCode:t,sggCode:n}=this.parseArcode(e);return console.log("\ud83d\udcc1 \uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc5c6\uc74c: ".concat(t,"/").concat(n," (").concat(e,")")),null}const{data:r,error:a}=await this.supabase.storage.from(this.bucketName).download(t);if(a||!r){const{sidoCode:t,sggCode:n}=this.parseArcode(e);return console.log("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc77d\uae30 \uc2e4\ud328: ".concat(t,"/").concat(n," (").concat(e,")")),null}const i=await r.text(),o=JSON.parse(i),l=new Date(o.meta.lastSyncedAt).getTime(),c=(Date.now()-l)/864e5;if(c>this.cacheExpiryDays){const{sidoCode:t,sggCode:n}=this.parseArcode(e);return console.log("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \ub9cc\ub8cc: ".concat(t,"/").concat(n," (").concat(e,") - ").concat(c.toFixed(1),"\uc77c \uacbd\uacfc")),null}const{sidoCode:d,sggCode:u}=this.parseArcode(e);return console.log("\u2705 \uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc0ac\uc6a9: ".concat(d,"/").concat(u," (").concat(e,") - ").concat(o.data.length,"\uac1c \ub370\uc774\ud130, ").concat(c.toFixed(1),"\uc77c \uc804")),o.data}catch(t){return console.error("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc870\ud68c \uc624\ub958:",t),null}}async saveCachedData(e,t,n){try{const s=(new Date).toISOString(),r={meta:{arcode:e,region:t,lastSyncedAt:s,itemCount:n.length,apiVersion:"1.0"},data:n},a=JSON.stringify(r,null,2),i=new Blob([a],{type:"application/json"}),o=this.latestPathByCode(e),{error:l}=await this.supabase.storage.from(this.bucketName).upload(o,i,{upsert:!0});if(l)throw l;const c=this.snapshotPathByCode(e,s.replace(/[:.]/g,"-"));await this.supabase.storage.from(this.bucketName).upload(c,i,{upsert:!0});const{sidoCode:d,sggCode:u}=this.parseArcode(e);console.log("\ud83d\udcbe \uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc800\uc7a5 \uc644\ub8cc: ".concat(d,"/").concat(u," (").concat(e,") - ").concat(n.length,"\uac1c \ub370\uc774\ud130"))}catch(s){throw console.error("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc800\uc7a5 \uc624\ub958:",s),s}}async getCacheMetadata(e){try{const t=this.pathPrefixByCode(e),{data:n,error:s}=await this.supabase.storage.from(this.bucketName).list(t,{limit:1,sortBy:{column:"updated_at",order:"desc"}});if(s||!n||0===n.length)return null;const r=n[0],a=new Date(r.updated_at),i=(Date.now()-a.getTime())/864e5;return{arcode:e,region:"",lastUpdated:r.updated_at,dataCount:0,filePath:"".concat(t,"/").concat(r.name),isExpired:i>this.cacheExpiryDays}}catch(t){return console.error("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uba54\ud0c0\ub370\uc774\ud130 \uc870\ud68c \uc624\ub958:",t),null}}async deleteCache(e){try{const t=this.pathPrefixByCode(e),{data:n}=await this.supabase.storage.from(this.bucketName).list(t);if(!n||0===n.length){const{sidoCode:t,sggCode:n}=this.parseArcode(e);return void console.log("\uc0ad\uc81c\ud560 \uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc5c6\uc74c: ".concat(t,"/").concat(n," (").concat(e,")"))}const s=n.map(e=>"".concat(t,"/").concat(e.name)),{error:r}=await this.supabase.storage.from(this.bucketName).remove(s);if(r)throw r;const{sidoCode:a,sggCode:i}=this.parseArcode(e);console.log("\ud83d\uddd1\ufe0f \uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc0ad\uc81c \uc644\ub8cc: ".concat(a,"/").concat(i," (").concat(e,") - ").concat(s.length,"\uac1c \ud30c\uc77c"))}catch(t){throw console.error("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc0ad\uc81c \uc624\ub958:",t),t}}async cleanupOldCache(e){try{const t=e?this.pathPrefixByCode(e):"regions",{data:n}=await this.supabase.storage.from(this.bucketName).list(t,{limit:1e3});if(!n)return;const s=Date.now()-24*this.cacheExpiryDays*60*60*1e3,r=[];for(const e of n){new Date(e.updated_at).getTime()<s&&"latest.json"!==e.name&&r.push("".concat(t,"/").concat(e.name))}r.length>0&&(await this.supabase.storage.from(this.bucketName).remove(r),console.log("\ud83e\uddf9 \uc5b4\ub9b0\uc774\uc9d1 \uc624\ub798\ub41c \uce90\uc2dc \uc815\ub9ac \uc644\ub8cc: ".concat(r.length,"\uac1c \ud30c\uc77c \uc0ad\uc81c")))}catch(t){console.error("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc815\ub9ac \uc624\ub958:",t)}}async getCacheStats(){try{const{data:e}=await this.supabase.storage.from(this.bucketName).list("regions",{limit:1e3});if(!e)return{totalRegions:0,validCaches:0,expiredCaches:0,totalFiles:0};const t=e.filter(e=>"latest.json"===e.name),n=Date.now()-24*this.cacheExpiryDays*60*60*1e3;let s=0,r=0;for(const a of t){new Date(a.updated_at).getTime()>n?s++:r++}return{totalRegions:t.length,validCaches:s,expiredCaches:r,totalFiles:e.length}}catch(e){return console.error("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \ud1b5\uacc4 \uc870\ud68c \uc624\ub958:",e),{totalRegions:0,validCaches:0,expiredCaches:0,totalFiles:0}}}};var o=n(89);const l=new class{constructor(){this.loadingPromises=new Map}async loadChildcareData(e,t){const n=e;if(this.loadingPromises.has(n))return console.log("\u23f3 \uc5b4\ub9b0\uc774\uc9d1 \ub85c\ub529 \ub300\uae30 \uc911: ".concat(e)),this.loadingPromises.get(n);const s=this._loadChildcareDataInternal(e,t);this.loadingPromises.set(n,s);try{return await s}finally{this.loadingPromises.delete(n)}}async _loadChildcareDataInternal(e,t){const n=Date.now();try{const r=e.substring(0,2),a="".concat(r,"/").concat(e);console.log("\ud83d\udd0d \uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc870\ud68c: ".concat(a));const l=await i.getCachedDataByCode(e);if(l&&l.length>0){const e=Date.now()-n;return console.log("\u26a1 \uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \ud788\ud2b8: ".concat(a," (").concat(l.length,"\uac1c, ").concat(e,"ms)")),{data:l,source:"cache",loadTime:e}}console.log("\ud83c\udf10 \uc5b4\ub9b0\uc774\uc9d1 API \ud638\ucd9c: ".concat(a));const c=await(0,o.cc)(e);if(!c||0===c.length)return console.warn("\u26a0\ufe0f \uc5b4\ub9b0\uc774\uc9d1 \ub370\uc774\ud130 \uc5c6\uc74c: ".concat(a)),{data:[],source:"api",error:"\ub370\uc774\ud130 \uc5c6\uc74c",loadTime:Date.now()-n};try{const n=t||"\uc9c0\uc5ed\ucf54\ub4dc_".concat(e);await i.saveCachedData(e,n,c),console.log("\ud83d\udcbe \uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc800\uc7a5: ".concat(a," (").concat(c.length,"\uac1c)"))}catch(s){console.warn("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc800\uc7a5 \uc2e4\ud328:",s)}const d=Date.now()-n;return console.log("\u2705 \uc5b4\ub9b0\uc774\uc9d1 API \ub85c\ub529 \uc644\ub8cc: ".concat(a," (").concat(c.length,"\uac1c, ").concat(d,"ms)")),{data:c,source:"api",loadTime:d}}catch(r){const t=Date.now()-n,s=e.substring(0,2),a="".concat(s,"/").concat(e);return console.error("\u274c \uc5b4\ub9b0\uc774\uc9d1 \ub85c\ub529 \uc2e4\ud328: ".concat(a),r),{data:[],source:"error",error:r instanceof Error?r.message:"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958",loadTime:t}}}async loadMultipleChildcareData(e,t){console.log("\ud83d\udd04 \uc5ec\ub7ec \uc5b4\ub9b0\uc774\uc9d1 \uc9c0\uc5ed \ub85c\ub529: ".concat(e.join(", ")));const n=await Promise.allSettled(e.map(async(e,n)=>{const s=null===t||void 0===t?void 0:t[n];return{arcode:e,result:await this.loadChildcareData(e,s)}})),s={};n.forEach((t,n)=>{const r=e[n];var a;"fulfilled"===t.status?s[r]=t.value.result:(console.error("\uc5b4\ub9b0\uc774\uc9d1 \ub85c\ub529 \uc2e4\ud328: ".concat(r),t.reason),s[r]={data:[],source:"error",error:(null===(a=t.reason)||void 0===a?void 0:a.message)||"\ub85c\ub529 \uc2e4\ud328"})});const r=Object.values(s).reduce((e,t)=>e+t.data.length,0),a=Object.values(s).filter(e=>"cache"===e.source).length;return console.log("\ud83d\udcca \uc5b4\ub9b0\uc774\uc9d1 \uba40\ud2f0 \ub85c\ub529 \uc644\ub8cc: ".concat(r,"\uac1c \ub370\uc774\ud130, ").concat(a,"/").concat(e.length," \uce90\uc2dc \ud788\ud2b8")),s}async forceRefresh(e,t){console.log("\ud83d\udd04 \uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uac15\uc81c \uc0c8\ub85c\uace0\uce68: ".concat(e));try{return await i.deleteCache(e),await this.loadChildcareData(e,t)}catch(n){return console.error("\uc5b4\ub9b0\uc774\uc9d1 \uac15\uc81c \uc0c8\ub85c\uace0\uce68 \uc2e4\ud328: ".concat(e),n),{data:[],source:"error",error:n instanceof Error?n.message:"\uac15\uc81c \uc0c8\ub85c\uace0\uce68 \uc2e4\ud328"}}}async getCacheStatus(e){try{const t=await i.getCacheMetadata(e);return{exists:!!t,metadata:t,isExpired:null===t||void 0===t?void 0:t.isExpired}}catch(t){return console.error("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc0c1\ud0dc \ud655\uc778 \uc2e4\ud328:",t),{exists:!1}}}getLoadingStats(){return{activeLoads:this.loadingPromises.size,cacheKeys:Array.from(this.loadingPromises.keys())}}cancelAllLoading(){console.log("\ud83d\uded1 \ubaa8\ub4e0 \uc5b4\ub9b0\uc774\uc9d1 \ub85c\ub529 \ucde8\uc18c: ".concat(this.loadingPromises.size,"\uac1c")),this.loadingPromises.clear()}}},498:(e,t,n)=>{n.d(t,{fZ:()=>c,J6:()=>o,G:()=>l,createReviewLikeNotification:()=>d,qn:()=>f,deleteReviewLikeNotification:()=>m,ul:()=>g});var s=n(555),r=n(801);const a=async(e,t,n,s)=>{try{const{data:a,error:i}=await r.supabase.functions.invoke("send-fcm-push",{body:{userId:e,title:t,body:n,data:s}});return i?(console.error("\u274c \ud478\uc2dc \uc54c\ub9bc \uc804\uc1a1 \uc624\ub958:",i),!1):(console.log("\ud83d\udce4 \ud478\uc2dc \uc54c\ub9bc \uc804\uc1a1 \uacb0\uacfc:",a),a&&a.failed>0&&(console.error("\u274c \ud478\uc2dc \uc54c\ub9bc \uc804\uc1a1 \uc2e4\ud328 \uc0c1\uc138:"),console.error("  - \uc131\uacf5:",a.sent),console.error("  - \uc2e4\ud328:",a.failed),console.error("  - \uc804\uccb4 \ud1a0\ud070 \uc218:",a.tokensCount),a.failures&&a.failures.length>0&&(console.error("  - \uc2e4\ud328 \uc0c1\uc138:"),a.failures.forEach((e,t)=>{console.error("    [".concat(t+1,"] \ud50c\ub7ab\ud3fc: ").concat(e.platform)),console.error("         \uc624\ub958: ".concat(e.error))}))),(null===a||void 0===a?void 0:a.sent)>0)}catch(a){return console.error("\ud478\uc2dc \uc54c\ub9bc \uc804\uc1a1 \uc911 \uc624\ub958:",a),!1}},i=async(e,t,n,i,o,l,c)=>{try{let d=l;if(36===l.length&&l.includes("-")){const{data:e}=await r.supabase.from("profiles").select("id, auth_user_id, full_name").eq("auth_user_id",l).maybeSingle();e&&(d=e.id)}if(n===d)return void console.log("\uc790\uae30 \uc790\uc2e0\uc5d0\uac8c\ub294 \uc54c\ub9bc\uc744 \ubcf4\ub0b4\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");const{data:{user:m}}=await r.supabase.auth.getUser(),f=null===m||void 0===m?void 0:m.id;if(!f)return console.error("\uc778\uc99d\ub41c \uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),null;const{data:g,error:p}=await r.supabase.from("profiles").select("id").eq("auth_user_id",f).single();if(p||!g)return console.error("\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4:",p),null;const x=g.id;if(console.log("=== \uc54c\ub9bc \uc0dd\uc131 \ub514\ubc84\uae45 ==="),console.log("currentAuthUserId:",f),console.log("currentProfileId:",x),console.log("fromUserId (\ud30c\ub77c\ubbf8\ud130):",n),console.log("toUserId:",l),console.log("toUserId \ud0c0\uc785 \ucd94\uc815:",36===l.length&&l.includes("-")?"UUID (auth_user_id \ub610\ub294 id)":"Profile ID"),console.log("type:",e),console.log("postId:",t),d=l,36===l.length&&l.includes("-")){console.log("UUID \ud615\uc2dd \uac10\uc9c0, \uc815\ud655\ud55c \ud0c0\uc785 \ud655\uc778 \uc911:",l);const{data:e,error:t}=await r.supabase.from("profiles").select("id, auth_user_id, full_name").eq("auth_user_id",l).maybeSingle();if(e)d=e.id,console.log("Auth UID\ub97c Profile ID\ub85c \ubcc0\ud658:",l,"->",d);else{const{data:e,error:n}=await r.supabase.from("profiles").select("id, auth_user_id, full_name").eq("id",l).maybeSingle();if(!e)return console.error("\ub300\uc0c1 \uc0ac\uc6a9\uc790\uc758 \ud504\ub85c\ud544\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4:",l),console.error("auth_user_id \uc870\ud68c \uc624\ub958:",t),console.error("id \uc870\ud68c \uc624\ub958:",n),null;d=e.id,console.log("\uc774\ubbf8 Profile ID\uc600\uc74c:",l)}}else console.log("Profile ID\ub85c \ud310\ub2e8\ub428:",l);let v=r.supabase.from("notifications").select("id").eq("type",e).eq("post_id",t).eq("from_user_id",x).eq("to_user_id",d).eq("is_read",!1);"reply"===e&&c&&(v=v.eq("comment_id",c));const{data:y}=await v.maybeSingle();if(y)return void console.log("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc54c\ub9bc\uc774 \uc788\uc2b5\ub2c8\ub2e4.");const b={type:e,post_id:t,comment_id:c,from_user_id:x,to_user_id:d,payload:{from_user_name:i,from_user_profile_image:o,post_title:"",comment_content:""},is_read:!1};console.log("\uc0bd\uc785\ud560 \ub370\uc774\ud130:",b);const{data:w,error:j}=await r.supabase.from("notifications").insert(b).select().single();if(j)return console.error("\uc54c\ub9bc \uc0dd\uc131 \uc624\ub958:",j),null;console.log("\uc54c\ub9bc \uc0dd\uc131 \uc131\uacf5:",w);const _=u(e,i),N=h(e,i,b.payload);return a(d,_,N,(0,s.A)({notificationId:w.id,type:e,postId:t},c&&{commentId:c})).catch(e=>{console.error("FCM \ud478\uc2dc \uc54c\ub9bc \uc804\uc1a1 \uc2e4\ud328:",e)}),w}catch(d){return console.error("\uc54c\ub9bc \uc0dd\uc131 \uc624\ub958:",d),null}},o=async(e,t,n,s,r)=>await i("like",e,t,n,s,r),l=async(e,t,n,s,r,a)=>await i("reply",e,n,s,r,a,t),c=async(e,t,n,s,r,a)=>await i("comment",e,n,s,r,a,t),d=async(e,t,n,s,i,o)=>{try{if(n===o)return void console.log("\uc790\uae30 \uc790\uc2e0\uc5d0\uac8c\ub294 \uc54c\ub9bc\uc744 \ubcf4\ub0b4\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4.");const{data:{user:l}}=await r.supabase.auth.getUser(),c=null===l||void 0===l?void 0:l.id;if(!c)return console.error("\uc778\uc99d\ub41c \uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),null;const{data:d,error:u}=await r.supabase.from("profiles").select("id").eq("auth_user_id",c).single();if(u||!d)return console.error("\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4:",u),null;const h=d.id;let m=o;if(36===o.length&&o.includes("-")){const{data:e,error:t}=await r.supabase.from("profiles").select("id, auth_user_id, full_name").eq("auth_user_id",o).maybeSingle();if(e)m=e.id;else{const{data:e,error:t}=await r.supabase.from("profiles").select("id, auth_user_id, full_name").eq("id",o).maybeSingle();if(!e)return console.error("\ub300\uc0c1 \uc0ac\uc6a9\uc790\uc758 \ud504\ub85c\ud544\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4:",o),null;m=e.id}}const{data:f}=await r.supabase.from("notifications").select("id").eq("type","review_like").eq("comment_id",e).eq("from_user_id",h).eq("to_user_id",m).eq("is_read",!1).maybeSingle();if(f)return void console.log("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc\uc774 \uc788\uc2b5\ub2c8\ub2e4.");const g={type:"review_like",post_id:null,comment_id:e,from_user_id:h,to_user_id:m,payload:{from_user_name:s,from_user_profile_image:i,kindergarten_name:t,message:"".concat(t," \uce6d\ucc2c\uc5d0 ").concat(s,"\ub2d8\uc774 \ud558\ud2b8\ub97c \ub20c\ub800\uc2b5\ub2c8\ub2e4.")},is_read:!1};console.log("\ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc \uc0dd\uc131:",g);const{data:p,error:x}=await r.supabase.from("notifications").insert(g).select().single();if(x)return console.error("\ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc \uc0dd\uc131 \uc624\ub958:",x),null;console.log("\ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc \uc0dd\uc131 \uc131\uacf5:",p);const v="".concat(s,"\ub2d8\uc774 \ud558\ud2b8\ub97c \ub20c\ub800\uc2b5\ub2c8\ub2e4"),y="".concat(t," \uce6d\ucc2c\uc5d0 ").concat(s,"\ub2d8\uc774 \ud558\ud2b8\ub97c \ub20c\ub800\uc2b5\ub2c8\ub2e4.");return a(m,v,y,{notificationId:p.id,type:"review_like",reviewId:e}).catch(e=>{console.error("FCM \ud478\uc2dc \uc54c\ub9bc \uc804\uc1a1 \uc2e4\ud328:",e)}),p}catch(l){return console.error("\ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc \uc0dd\uc131 \uc624\ub958:",l),null}},u=(e,t)=>{switch(e){case"like":return"\uc0c8\ub85c\uc6b4 \uc88b\uc544\uc694";case"reply":return"\uc0c8\ub85c\uc6b4 \ub2f5\uae00";case"comment":return"\uc0c8\ub85c\uc6b4 \ub313\uae00";case"review_like":return"\uc0c8\ub85c\uc6b4 \ud558\ud2b8";default:return"\uc0c8\ub85c\uc6b4 \uc54c\ub9bc"}},h=(e,t,n)=>{switch(e){case"like":return"".concat(t,"\ub2d8\uc774 \ud68c\uc6d0\ub2d8\uc758 \uac8c\uc2dc\uae00\uc5d0 \ud558\ud2b8\ub97c \ub20c\ub800\uc2b5\ub2c8\ub2e4.");case"reply":return"".concat(t,"\ub2d8\uc774 \ud68c\uc6d0\ub2d8\uc758 \ub313\uae00\uc5d0 \ub2f5\uae00\uc744 \ub2ec\uc558\uc2b5\ub2c8\ub2e4.");case"comment":return"".concat(t,"\ub2d8\uc774 \ud68c\uc6d0\ub2d8\uc758 \uac8c\uc2dc\uae00\uc5d0 \ub313\uae00\uc744 \ub2ec\uc558\uc2b5\ub2c8\ub2e4.");case"review_like":return"".concat(n.kindergarten_name||""," \uce6d\ucc2c\uc5d0 ").concat(t,"\ub2d8\uc774 \ud558\ud2b8\ub97c \ub20c\ub800\uc2b5\ub2c8\ub2e4.");default:return"".concat(t,"\ub2d8\uc73c\ub85c\ubd80\ud130 \uc0c8\ub85c\uc6b4 \uc54c\ub9bc\uc774 \uc788\uc2b5\ub2c8\ub2e4.")}},m=async(e,t,n)=>{try{console.log("=== \ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc \uc0ad\uc81c \ub514\ubc84\uae45 ==="),console.log("reviewId:",e),console.log("fromUserId:",t),console.log("toUserId:",n);let s=n;if(36===n.length&&n.includes("-")){const{data:e,error:t}=await r.supabase.from("profiles").select("id, auth_user_id, full_name").eq("auth_user_id",n).maybeSingle();if(e)s=e.id;else{const{data:e,error:t}=await r.supabase.from("profiles").select("id, auth_user_id, full_name").eq("id",n).maybeSingle();if(!e)return console.error("\ub300\uc0c1 \uc0ac\uc6a9\uc790\uc758 \ud504\ub85c\ud544\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4:",n),null;s=e.id}}const{data:{user:a}}=await r.supabase.auth.getUser(),i=null===a||void 0===a?void 0:a.id;if(!i)return console.error("\uc778\uc99d\ub41c \uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),null;const{data:o,error:l}=await r.supabase.from("profiles").select("id").eq("auth_user_id",i).single();if(l||!o)return console.error("\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4:",l),null;const c=o.id,{error:d}=await r.supabase.from("notifications").delete().eq("type","review_like").eq("comment_id",e).eq("from_user_id",c).eq("to_user_id",s);return d?(console.error("\ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc \uc0ad\uc81c \uc624\ub958:",d),null):(console.log("\ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc \uc0ad\uc81c \uc131\uacf5"),!0)}catch(s){return console.error("\ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc \uc0ad\uc81c \uc624\ub958:",s),null}},f=async(e,t,n)=>{try{console.log("=== \uc88b\uc544\uc694 \uc54c\ub9bc \uc0ad\uc81c \ub514\ubc84\uae45 ==="),console.log("postId:",e),console.log("fromUserId:",t),console.log("toUserId:",n);let s=n;if(36===n.length&&n.includes("-")){console.log("UUID \ud615\uc2dd \uac10\uc9c0, \uc815\ud655\ud55c \ud0c0\uc785 \ud655\uc778 \uc911:",n);const{data:e,error:t}=await r.supabase.from("profiles").select("id, auth_user_id, full_name").eq("auth_user_id",n).maybeSingle();if(e)s=e.id,console.log("Auth UID\ub97c Profile ID\ub85c \ubcc0\ud658:",n,"->",s);else{const{data:e,error:t}=await r.supabase.from("profiles").select("id, auth_user_id, full_name").eq("id",n).maybeSingle();if(!e)return console.error("\ub300\uc0c1 \uc0ac\uc6a9\uc790\uc758 \ud504\ub85c\ud544\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4:",n),null;s=e.id,console.log("\uc774\ubbf8 Profile ID\uc600\uc74c:",n)}}const{data:{user:a}}=await r.supabase.auth.getUser(),i=null===a||void 0===a?void 0:a.id;if(!i)return console.error("\uc778\uc99d\ub41c \uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),null;const{data:o,error:l}=await r.supabase.from("profiles").select("id").eq("auth_user_id",i).single();if(l||!o)return console.error("\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4:",l),null;const c=o.id,{error:d}=await r.supabase.from("notifications").delete().eq("type","like").eq("post_id",e).eq("from_user_id",c).eq("to_user_id",s);return d?(console.error("\uc88b\uc544\uc694 \uc54c\ub9bc \uc0ad\uc81c \uc624\ub958:",d),null):(console.log("\uc88b\uc544\uc694 \uc54c\ub9bc \uc0ad\uc81c \uc131\uacf5"),!0)}catch(s){return console.error("\uc88b\uc544\uc694 \uc54c\ub9bc \uc0ad\uc81c \uc624\ub958:",s),null}},g=async e=>{try{const{count:t,error:n}=await r.supabase.from("notifications").select("*",{count:"exact",head:!0}).eq("to_user_id",e).eq("is_read",!1);return n?(console.error("\uc54c\ub9bc \uac1c\uc218 \uc870\ud68c \uc624\ub958:",n),0):t||0}catch(t){return console.error("\uc54c\ub9bc \uac1c\uc218 \uc870\ud68c \uc624\ub958:",t),0}}},555:(e,t,n)=>{function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function r(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function a(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){a(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}n.d(t,{A:()=>o})},579:(e,t,n)=>{e.exports=n(153)},611:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});class n extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}t.default=n},630:(e,t,n)=>{n.r(t),n.d(t,{Headers:()=>i,Request:()=>o,Response:()=>l,default:()=>a,fetch:()=>r});var s=function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("unable to locate global object")}();const r=s.fetch,a=s.fetch.bind(s),i=s.Headers,o=s.Request,l=s.Response},730:(e,t,n)=>{var s=n(43),r=n(853);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,m={},f={};function g(e,t,n,s,r,a,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=i}var p={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){p[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];p[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){p[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){p[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){p[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){p[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){p[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){p[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){p[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function y(e,t,n,s){var r=p.hasOwnProperty(t)?p[t]:null;(null!==r?0!==r.type:s||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,s){if(null===t||"undefined"===typeof t||function(e,t,n,s){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!s&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,s))return!0;if(s)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,r,s)&&(n=null),s||null===r?function(e){return!!u.call(f,e)||!u.call(m,e)&&(h.test(e)?f[e]=!0:(m[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):r.mustUseProperty?e[r.propertyName]=null===n?3!==r.type&&"":n:(t=r.attributeName,s=r.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(r=r.type)||4===r&&!0===n?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,v);p[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,v);p[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,v);p[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){p[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),p.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){p[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),S=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),I=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var L=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=L&&e[L]||e["@@iterator"])?e:null}var O,D=Object.assign;function z(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var U=!1;function F(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var s=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){s=c}e.call(t.prototype)}else{try{throw Error()}catch(c){s=c}e()}}catch(c){if(c&&s&&"string"===typeof c.stack){for(var r=c.stack.split("\n"),a=s.stack.split("\n"),i=r.length-1,o=a.length-1;1<=i&&0<=o&&r[i]!==a[o];)o--;for(;1<=i&&0<=o;i--,o--)if(r[i]!==a[o]){if(1!==i||1!==o)do{if(i--,0>--o||r[i]!==a[o]){var l="\n"+r[i].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=i&&0<=o);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function q(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=F(e.type,!1);case 11:return e=F(e.type.render,!1);case 1:return e=F(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case j:return"Portal";case k:return"Profiler";case N:return"StrictMode";case P:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case S:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case E:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case I:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function W(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function Y(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var r=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){s=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(e){s=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=H(e)?e.checked?"true":"false":e.value),(e=s)!==n&&(t.setValue(e),!0)}function J(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var n=t.checked;return D({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,s=null!=t.checked?t.checked:t.defaultChecked;n=W(null!=t.value?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Z(e,t){$(e,t);var n=W(t.value),s=t.type;if(null!=n)"number"===s?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===s||"reset"===s)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,W(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!("submit"!==s&&"reset"!==s||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&J(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,s){if(e=e.options,t){t={};for(var r=0;r<n.length;r++)t["$"+n[r]]=!0;for(n=0;n<e.length;n++)r=t.hasOwnProperty("$"+e[n].value),e[n].selected!==r&&(e[n].selected=r),r&&s&&(e[n].defaultSelected=!0)}else{for(n=""+W(n),t=null,r=0;r<e.length;r++){if(e[r].value===n)return e[r].selected=!0,void(s&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function se(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return D({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:W(n)}}function ae(e,t){var n=W(t.value),s=W(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=s&&(e.defaultValue=""+s)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,s){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function pe(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var s=0===n.indexOf("--"),r=ge(n,t[n],s);"float"===n&&(n="cssFloat"),s?e.setProperty(n,r):e[n]=r}}Object.keys(me).forEach(function(e){fe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var xe=D({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ye(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,_e=null,Ne=null;function ke(e){if(e=yr(e)){if("function"!==typeof je)throw Error(a(280));var t=e.stateNode;t&&(t=wr(t),je(e.stateNode,e.type,t))}}function Ce(e){_e?Ne?Ne.push(e):Ne=[e]:_e=e}function Se(){if(_e){var e=_e,t=Ne;if(Ne=_e=null,ke(e),t)for(e=0;e<t.length;e++)ke(t[e])}}function Ee(e,t){return e(t)}function Pe(){}var Ae=!1;function Te(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ee(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ne)&&(Pe(),Se())}}function Ie(e,t){var n=e.stateNode;if(null===n)return null;var s=wr(n);if(null===s)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Me=!1;if(d)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch(de){Me=!1}function Re(e,t,n,s,r,a,i,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Oe=!1,De=null,ze=!1,Ue=null,Fe={onError:function(e){Oe=!0,De=e}};function qe(e,t,n,s,r,a,i,o,l){Oe=!1,De=null,Re.apply(Fe,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Be(e)!==e)throw Error(a(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,s=t;;){var r=n.return;if(null===r)break;var i=r.alternate;if(null===i){if(null!==(s=r.return)){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return We(r),e;if(i===s)return We(r),t;i=i.sibling}throw Error(a(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,s=i;break}if(l===s){o=!0,s=r,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=r;break}if(l===s){o=!0,s=i,n=r;break}l=l.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==s)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?Ye(e):null}function Ye(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ye(e);if(null!==t)return t;e=e.sibling}return null}var Ke=r.unstable_scheduleCallback,Je=r.unstable_cancelCallback,Ge=r.unstable_shouldYield,Xe=r.unstable_requestPaint,$e=r.unstable_now,Ze=r.unstable_getCurrentPriorityLevel,Qe=r.unstable_ImmediatePriority,et=r.unstable_UserBlockingPriority,tt=r.unstable_NormalPriority,nt=r.unstable_LowPriority,st=r.unstable_IdlePriority,rt=null,at=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var s=0,r=e.suspendedLanes,a=e.pingedLanes,i=268435455&n;if(0!==i){var o=i&~r;0!==o?s=ut(o):0!==(a&=i)&&(s=ut(a))}else 0!==(i=n&~r)?s=ut(i):0!==a&&(s=ut(a));if(0===s)return 0;if(0!==t&&t!==s&&0===(t&r)&&((r=s&-s)>=(a=t&-t)||16===r&&0!==(4194240&a)))return t;if(0!==(4&s)&&(s|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=s;0<t;)r=1<<(n=31-it(t)),s|=e[n],t&=~r;return s}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function ft(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function pt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-it(n),r=1<<s;r&t|e[s]&t&&(e[s]|=t),n&=~r}}var yt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,_t,Nt,kt,Ct=!1,St=[],Et=null,Pt=null,At=null,Tt=new Map,It=new Map,Mt=[],Lt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Et=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":It.delete(t.pointerId)}}function Ot(e,t,n,s,r,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:a,targetContainers:[r]},null!==t&&(null!==(t=yr(t))&&jt(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Dt(e){var t=vr(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void kt(e.priority,function(){_t(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Gt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yr(n))&&jt(t),e.blockedOn=n,!1;var s=new(n=e.nativeEvent).constructor(n.type,n);be=s,n.target.dispatchEvent(s),be=null,t.shift()}return!0}function Ut(e,t,n){zt(e)&&n.delete(t)}function Ft(){Ct=!1,null!==Et&&zt(Et)&&(Et=null),null!==Pt&&zt(Pt)&&(Pt=null),null!==At&&zt(At)&&(At=null),Tt.forEach(Ut),It.forEach(Ut)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Ft)))}function Bt(e){function t(t){return qt(t,e)}if(0<St.length){qt(St[0],e);for(var n=1;n<St.length;n++){var s=St[n];s.blockedOn===e&&(s.blockedOn=null)}}for(null!==Et&&qt(Et,e),null!==Pt&&qt(Pt,e),null!==At&&qt(At,e),Tt.forEach(t),It.forEach(t),n=0;n<Mt.length;n++)(s=Mt[n]).blockedOn===e&&(s.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Dt(n),null===n.blockedOn&&Mt.shift()}var Vt=b.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,n,s){var r=yt,a=Vt.transition;Vt.transition=null;try{yt=1,Kt(e,t,n,s)}finally{yt=r,Vt.transition=a}}function Yt(e,t,n,s){var r=yt,a=Vt.transition;Vt.transition=null;try{yt=4,Kt(e,t,n,s)}finally{yt=r,Vt.transition=a}}function Kt(e,t,n,s){if(Wt){var r=Gt(e,t,n,s);if(null===r)Ws(e,t,s,Jt,n),Rt(e,s);else if(function(e,t,n,s,r){switch(t){case"focusin":return Et=Ot(Et,e,t,n,s,r),!0;case"dragenter":return Pt=Ot(Pt,e,t,n,s,r),!0;case"mouseover":return At=Ot(At,e,t,n,s,r),!0;case"pointerover":var a=r.pointerId;return Tt.set(a,Ot(Tt.get(a)||null,e,t,n,s,r)),!0;case"gotpointercapture":return a=r.pointerId,It.set(a,Ot(It.get(a)||null,e,t,n,s,r)),!0}return!1}(r,e,t,n,s))s.stopPropagation();else if(Rt(e,s),4&t&&-1<Lt.indexOf(e)){for(;null!==r;){var a=yr(r);if(null!==a&&wt(a),null===(a=Gt(e,t,n,s))&&Ws(e,t,s,Jt,n),a===r)break;r=a}null!==r&&s.stopPropagation()}else Ws(e,t,s,null,n)}}var Jt=null;function Gt(e,t,n,s){if(Jt=null,null!==(e=vr(e=we(s))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case Qe:return 1;case et:return 4;case tt:case nt:return 16;case st:return 536870912;default:return 16}default:return 16}}var $t=null,Zt=null,Qt=null;function en(){if(Qt)return Qt;var e,t,n=Zt,s=n.length,r="value"in $t?$t.value:$t.textContent,a=r.length;for(e=0;e<s&&n[e]===r[e];e++);var i=s-e;for(t=1;t<=i&&n[s-t]===r[a-t];t++);return Qt=r.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function sn(){return!1}function rn(e){function t(t,n,s,r,a){for(var i in this._reactName=t,this._targetInst=s,this.type=n,this.nativeEvent=r,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(r):r[i]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?nn:sn,this.isPropagationStopped=sn,this}return D(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=rn(cn),un=D({},cn,{view:0,detail:0}),hn=rn(un),mn=D({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:kn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),fn=rn(mn),gn=rn(D({},mn,{dataTransfer:0})),pn=rn(D({},un,{relatedTarget:0})),xn=rn(D({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=D({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),yn=rn(vn),bn=rn(D({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Nn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function kn(){return Nn}var Cn=D({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:kn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Sn=rn(Cn),En=rn(D({},mn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=rn(D({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:kn})),An=rn(D({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=D({},mn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),In=rn(Tn),Mn=[9,13,27,32],Ln=d&&"CompositionEvent"in window,Rn=null;d&&"documentMode"in document&&(Rn=document.documentMode);var On=d&&"TextEvent"in window&&!Rn,Dn=d&&(!Ln||Rn&&8<Rn&&11>=Rn),zn=String.fromCharCode(32),Un=!1;function Fn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Hn(e,t,n,s){Ce(s),0<(t=Ys(t,"onChange")).length&&(n=new dn("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Yn=null,Kn=null;function Jn(e){zs(e,0)}function Gn(e){if(K(br(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(d){var Zn;if(d){var Qn="oninput"in document;if(!Qn){var es=document.createElement("div");es.setAttribute("oninput","return;"),Qn="function"===typeof es.oninput}Zn=Qn}else Zn=!1;$n=Zn&&(!document.documentMode||9<document.documentMode)}function ts(){Yn&&(Yn.detachEvent("onpropertychange",ns),Kn=Yn=null)}function ns(e){if("value"===e.propertyName&&Gn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Te(Jn,t)}}function ss(e,t,n){"focusin"===e?(ts(),Kn=n,(Yn=t).attachEvent("onpropertychange",ns)):"focusout"===e&&ts()}function rs(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gn(Kn)}function as(e,t){if("click"===e)return Gn(t)}function is(e,t){if("input"===e||"change"===e)return Gn(t)}var os="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ls(e,t){if(os(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!u.call(t,r)||!os(e[r],t[r]))return!1}return!0}function cs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ds(e,t){var n,s=cs(e);for(e=0;s;){if(3===s.nodeType){if(n=e+s.textContent.length,e<=t&&n>=t)return{node:s,offset:t-e};e=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=cs(s)}}function us(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?us(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hs(){for(var e=window,t=J();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(s){n=!1}if(!n)break;t=J((e=t.contentWindow).document)}return t}function ms(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function fs(e){var t=hs(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&us(n.ownerDocument.documentElement,n)){if(null!==s&&ms(n))if(t=s.start,void 0===(e=s.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=n.textContent.length,a=Math.min(s.start,r);s=void 0===s.end?a:Math.min(s.end,r),!e.extend&&a>s&&(r=s,s=a,a=r),r=ds(n,a);var i=ds(n,s);r&&i&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),a>s?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gs=d&&"documentMode"in document&&11>=document.documentMode,ps=null,xs=null,vs=null,ys=!1;function bs(e,t,n){var s=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ys||null==ps||ps!==J(s)||("selectionStart"in(s=ps)&&ms(s)?s={start:s.selectionStart,end:s.selectionEnd}:s={anchorNode:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset},vs&&ls(vs,s)||(vs=s,0<(s=Ys(xs,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=ps)))}function ws(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var js={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionend:ws("Transition","TransitionEnd")},_s={},Ns={};function ks(e){if(_s[e])return _s[e];if(!js[e])return e;var t,n=js[e];for(t in n)if(n.hasOwnProperty(t)&&t in Ns)return _s[e]=n[t];return e}d&&(Ns=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);var Cs=ks("animationend"),Ss=ks("animationiteration"),Es=ks("animationstart"),Ps=ks("transitionend"),As=new Map,Ts="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Is(e,t){As.set(e,t),l(t,[e])}for(var Ms=0;Ms<Ts.length;Ms++){var Ls=Ts[Ms];Is(Ls.toLowerCase(),"on"+(Ls[0].toUpperCase()+Ls.slice(1)))}Is(Cs,"onAnimationEnd"),Is(Ss,"onAnimationIteration"),Is(Es,"onAnimationStart"),Is("dblclick","onDoubleClick"),Is("focusin","onFocus"),Is("focusout","onBlur"),Is(Ps,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Os=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rs));function Ds(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,s,r,i,o,l,c){if(qe.apply(this,arguments),Oe){if(!Oe)throw Error(a(198));var d=De;Oe=!1,De=null,ze||(ze=!0,Ue=d)}}(s,t,void 0,e),e.currentTarget=null}function zs(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var s=e[n],r=s.event;s=s.listeners;e:{var a=void 0;if(t)for(var i=s.length-1;0<=i;i--){var o=s[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&r.isPropagationStopped())break e;Ds(r,o,c),a=l}else for(i=0;i<s.length;i++){if(l=(o=s[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&r.isPropagationStopped())break e;Ds(r,o,c),a=l}}}if(ze)throw e=Ue,ze=!1,Ue=null,e}function Us(e,t){var n=t[gr];void 0===n&&(n=t[gr]=new Set);var s=e+"__bubble";n.has(s)||(Vs(t,e,2,!1),n.add(s))}function Fs(e,t,n){var s=0;t&&(s|=4),Vs(n,e,s,t)}var qs="_reactListening"+Math.random().toString(36).slice(2);function Bs(e){if(!e[qs]){e[qs]=!0,i.forEach(function(t){"selectionchange"!==t&&(Os.has(t)||Fs(t,!1,e),Fs(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[qs]||(t[qs]=!0,Fs("selectionchange",!1,t))}}function Vs(e,t,n,s){switch(Xt(t)){case 1:var r=Ht;break;case 4:r=Yt;break;default:r=Kt}n=r.bind(null,t,n,e),r=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),s?void 0!==r?e.addEventListener(t,n,{capture:!0,passive:r}):e.addEventListener(t,n,!0):void 0!==r?e.addEventListener(t,n,{passive:r}):e.addEventListener(t,n,!1)}function Ws(e,t,n,s,r){var a=s;if(0===(1&t)&&0===(2&t)&&null!==s)e:for(;;){if(null===s)return;var i=s.tag;if(3===i||4===i){var o=s.stateNode.containerInfo;if(o===r||8===o.nodeType&&o.parentNode===r)break;if(4===i)for(i=s.return;null!==i;){var l=i.tag;if((3===l||4===l)&&((l=i.stateNode.containerInfo)===r||8===l.nodeType&&l.parentNode===r))return;i=i.return}for(;null!==o;){if(null===(i=vr(o)))return;if(5===(l=i.tag)||6===l){s=a=i;continue e}o=o.parentNode}}s=s.return}Te(function(){var s=a,r=we(n),i=[];e:{var o=As.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Sn;break;case"focusin":c="focus",l=pn;break;case"focusout":c="blur",l=pn;break;case"beforeblur":case"afterblur":l=pn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=fn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Pn;break;case Cs:case Ss:case Es:l=xn;break;case Ps:l=An;break;case"scroll":l=hn;break;case"wheel":l=In;break;case"copy":case"cut":case"paste":l=yn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=En}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var m,f=s;null!==f;){var g=(m=f).stateNode;if(5===m.tag&&null!==g&&(m=g,null!==h&&(null!=(g=Ie(f,h))&&d.push(Hs(f,g,m)))),u)break;f=f.return}0<d.length&&(o=new l(o,c,null,n,r),i.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!vr(c)&&!c[fr])&&(l||o)&&(o=r.window===r?r:(o=r.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=s,null!==(c=(c=n.relatedTarget||n.toElement)?vr(c):null)&&(c!==(u=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=s),l!==c)){if(d=fn,g="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(d=En,g="onPointerLeave",h="onPointerEnter",f="pointer"),u=null==l?o:br(l),m=null==c?o:br(c),(o=new d(g,f+"leave",l,n,r)).target=u,o.relatedTarget=m,g=null,vr(r)===s&&((d=new d(h,f+"enter",c,n,r)).target=m,d.relatedTarget=u,g=d),u=g,l&&c)e:{for(h=c,f=0,m=d=l;m;m=Ks(m))f++;for(m=0,g=h;g;g=Ks(g))m++;for(;0<f-m;)d=Ks(d),f--;for(;0<m-f;)h=Ks(h),m--;for(;f--;){if(d===h||null!==h&&d===h.alternate)break e;d=Ks(d),h=Ks(h)}d=null}else d=null;null!==l&&Js(i,o,l,d,!1),null!==c&&null!==u&&Js(i,u,c,d,!0)}if("select"===(l=(o=s?br(s):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var p=Xn;else if(Wn(o))if($n)p=is;else{p=rs;var x=ss}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(p=as);switch(p&&(p=p(e,s))?Hn(i,p,n,r):(x&&x(e,o,s),"focusout"===e&&(x=o._wrapperState)&&x.controlled&&"number"===o.type&&ee(o,"number",o.value)),x=s?br(s):window,e){case"focusin":(Wn(x)||"true"===x.contentEditable)&&(ps=x,xs=s,vs=null);break;case"focusout":vs=xs=ps=null;break;case"mousedown":ys=!0;break;case"contextmenu":case"mouseup":case"dragend":ys=!1,bs(i,n,r);break;case"selectionchange":if(gs)break;case"keydown":case"keyup":bs(i,n,r)}var v;if(Ln)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Bn?Fn(e,n)&&(y="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(y="onCompositionStart");y&&(Dn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==y?"onCompositionEnd"===y&&Bn&&(v=en()):(Zt="value"in($t=r)?$t.value:$t.textContent,Bn=!0)),0<(x=Ys(s,y)).length&&(y=new bn(y,e,null,n,r),i.push({event:y,listeners:x}),v?y.data=v:null!==(v=qn(n))&&(y.data=v))),(v=On?function(e,t){switch(e){case"compositionend":return qn(t);case"keypress":return 32!==t.which?null:(Un=!0,zn);case"textInput":return(e=t.data)===zn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Ln&&Fn(e,t)?(e=en(),Qt=Zt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Dn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(s=Ys(s,"onBeforeInput")).length&&(r=new bn("onBeforeInput","beforeinput",null,n,r),i.push({event:r,listeners:s}),r.data=v))}zs(i,t)})}function Hs(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Ys(e,t){for(var n=t+"Capture",s=[];null!==e;){var r=e,a=r.stateNode;5===r.tag&&null!==a&&(r=a,null!=(a=Ie(e,n))&&s.unshift(Hs(e,a,r)),null!=(a=Ie(e,t))&&s.push(Hs(e,a,r))),e=e.return}return s}function Ks(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Js(e,t,n,s,r){for(var a=t._reactName,i=[];null!==n&&n!==s;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===s)break;5===o.tag&&null!==c&&(o=c,r?null!=(l=Ie(n,a))&&i.unshift(Hs(n,l,o)):r||null!=(l=Ie(n,a))&&i.push(Hs(n,l,o))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Gs=/\r\n?/g,Xs=/\u0000|\uFFFD/g;function $s(e){return("string"===typeof e?e:""+e).replace(Gs,"\n").replace(Xs,"")}function Zs(e,t,n){if(t=$s(t),$s(e)!==t&&n)throw Error(a(425))}function Qs(){}var er=null,tr=null;function nr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var sr="function"===typeof setTimeout?setTimeout:void 0,rr="function"===typeof clearTimeout?clearTimeout:void 0,ar="function"===typeof Promise?Promise:void 0,ir="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ar?function(e){return ar.resolve(null).then(e).catch(or)}:sr;function or(e){setTimeout(function(){throw e})}function lr(e,t){var n=t,s=0;do{var r=n.nextSibling;if(e.removeChild(n),r&&8===r.nodeType)if("/$"===(n=r.data)){if(0===s)return e.removeChild(r),void Bt(t);s--}else"$"!==n&&"$?"!==n&&"$!"!==n||s++;n=r}while(n);Bt(t)}function cr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function dr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ur=Math.random().toString(36).slice(2),hr="__reactFiber$"+ur,mr="__reactProps$"+ur,fr="__reactContainer$"+ur,gr="__reactEvents$"+ur,pr="__reactListeners$"+ur,xr="__reactHandles$"+ur;function vr(e){var t=e[hr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fr]||n[hr]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=dr(e);null!==e;){if(n=e[hr])return n;e=dr(e)}return t}n=(e=n).parentNode}return null}function yr(e){return!(e=e[hr]||e[fr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function br(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wr(e){return e[mr]||null}var jr=[],_r=-1;function Nr(e){return{current:e}}function kr(e){0>_r||(e.current=jr[_r],jr[_r]=null,_r--)}function Cr(e,t){_r++,jr[_r]=e.current,e.current=t}var Sr={},Er=Nr(Sr),Pr=Nr(!1),Ar=Sr;function Tr(e,t){var n=e.type.contextTypes;if(!n)return Sr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var r,a={};for(r in n)a[r]=t[r];return s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ir(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mr(){kr(Pr),kr(Er)}function Lr(e,t,n){if(Er.current!==Sr)throw Error(a(168));Cr(Er,t),Cr(Pr,n)}function Rr(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,"function"!==typeof s.getChildContext)return n;for(var r in s=s.getChildContext())if(!(r in t))throw Error(a(108,V(e)||"Unknown",r));return D({},n,s)}function Or(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Sr,Ar=Er.current,Cr(Er,e),Cr(Pr,Pr.current),!0}function Dr(e,t,n){var s=e.stateNode;if(!s)throw Error(a(169));n?(e=Rr(e,t,Ar),s.__reactInternalMemoizedMergedChildContext=e,kr(Pr),kr(Er),Cr(Er,e)):kr(Pr),Cr(Pr,n)}var zr=null,Ur=!1,Fr=!1;function qr(e){null===zr?zr=[e]:zr.push(e)}function Br(){if(!Fr&&null!==zr){Fr=!0;var e=0,t=yt;try{var n=zr;for(yt=1;e<n.length;e++){var s=n[e];do{s=s(!0)}while(null!==s)}zr=null,Ur=!1}catch(r){throw null!==zr&&(zr=zr.slice(e+1)),Ke(Qe,Br),r}finally{yt=t,Fr=!1}}return null}var Vr=[],Wr=0,Hr=null,Yr=0,Kr=[],Jr=0,Gr=null,Xr=1,$r="";function Zr(e,t){Vr[Wr++]=Yr,Vr[Wr++]=Hr,Hr=e,Yr=t}function Qr(e,t,n){Kr[Jr++]=Xr,Kr[Jr++]=$r,Kr[Jr++]=Gr,Gr=e;var s=Xr;e=$r;var r=32-it(s)-1;s&=~(1<<r),n+=1;var a=32-it(t)+r;if(30<a){var i=r-r%5;a=(s&(1<<i)-1).toString(32),s>>=i,r-=i,Xr=1<<32-it(t)+r|n<<r|s,$r=a+e}else Xr=1<<a|n<<r|s,$r=e}function ea(e){null!==e.return&&(Zr(e,1),Qr(e,1,0))}function ta(e){for(;e===Hr;)Hr=Vr[--Wr],Vr[Wr]=null,Yr=Vr[--Wr],Vr[Wr]=null;for(;e===Gr;)Gr=Kr[--Jr],Kr[Jr]=null,$r=Kr[--Jr],Kr[Jr]=null,Xr=Kr[--Jr],Kr[Jr]=null}var na=null,sa=null,ra=!1,aa=null;function ia(e,t){var n=Tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function oa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,sa=cr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,sa=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Gr?{id:Xr,overflow:$r}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,sa=null,!0);default:return!1}}function la(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ra){var t=sa;if(t){var n=t;if(!oa(e,t)){if(la(e))throw Error(a(418));t=cr(n.nextSibling);var s=na;t&&oa(e,t)?ia(s,n):(e.flags=-4097&e.flags|2,ra=!1,na=e)}}else{if(la(e))throw Error(a(418));e.flags=-4097&e.flags|2,ra=!1,na=e}}}function da(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function ua(e){if(e!==na)return!1;if(!ra)return da(e),ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!nr(e.type,e.memoizedProps)),t&&(t=sa)){if(la(e))throw ha(),Error(a(418));for(;t;)ia(e,t),t=cr(t.nextSibling)}if(da(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){sa=cr(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}sa=null}}else sa=na?cr(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=sa;e;)e=cr(e.nextSibling)}function ma(){sa=na=null,ra=!1}function fa(e){null===aa?aa=[e]:aa.push(e)}var ga=b.ReactCurrentBatchConfig;function pa(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var s=n.stateNode}if(!s)throw Error(a(147,e));var r=s,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=r.refs;null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function xa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function va(e){return(0,e._init)(e._payload)}function ya(e){function t(t,n){if(e){var s=t.deletions;null===s?(t.deletions=[n],t.flags|=16):s.push(n)}}function n(n,s){if(!e)return null;for(;null!==s;)t(n,s),s=s.sibling;return null}function s(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function i(t,n,s){return t.index=s,e?null!==(s=t.alternate)?(s=s.index)<n?(t.flags|=2,n):s:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,s){return null===t||6!==t.tag?((t=Dc(n,e.mode,s)).return=e,t):((t=r(t,n)).return=e,t)}function c(e,t,n,s){var a=n.type;return a===_?u(e,t,n.props.children,s,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===I&&va(a)===t.type)?((s=r(t,n.props)).ref=pa(e,t,n),s.return=e,s):((s=Lc(n.type,n.key,n.props,null,e.mode,s)).ref=pa(e,t,n),s.return=e,s)}function d(e,t,n,s){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,s)).return=e,t):((t=r(t,n.children||[])).return=e,t)}function u(e,t,n,s,a){return null===t||7!==t.tag?((t=Rc(n,e.mode,s,a)).return=e,t):((t=r(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Dc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=pa(e,null,t),n.return=e,n;case j:return(t=zc(t,e.mode,n)).return=e,t;case I:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rc(t,e.mode,n,null)).return=e,t;xa(e,t)}return null}function m(e,t,n,s){var r=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==r?null:l(e,t,""+n,s);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===r?c(e,t,n,s):null;case j:return n.key===r?d(e,t,n,s):null;case I:return m(e,t,(r=n._init)(n._payload),s)}if(te(n)||R(n))return null!==r?null:u(e,t,n,s,null);xa(e,n)}return null}function f(e,t,n,s,r){if("string"===typeof s&&""!==s||"number"===typeof s)return l(t,e=e.get(n)||null,""+s,r);if("object"===typeof s&&null!==s){switch(s.$$typeof){case w:return c(t,e=e.get(null===s.key?n:s.key)||null,s,r);case j:return d(t,e=e.get(null===s.key?n:s.key)||null,s,r);case I:return f(e,t,n,(0,s._init)(s._payload),r)}if(te(s)||R(s))return u(t,e=e.get(n)||null,s,r,null);xa(t,s)}return null}function g(r,a,o,l){for(var c=null,d=null,u=a,g=a=0,p=null;null!==u&&g<o.length;g++){u.index>g?(p=u,u=null):p=u.sibling;var x=m(r,u,o[g],l);if(null===x){null===u&&(u=p);break}e&&u&&null===x.alternate&&t(r,u),a=i(x,a,g),null===d?c=x:d.sibling=x,d=x,u=p}if(g===o.length)return n(r,u),ra&&Zr(r,g),c;if(null===u){for(;g<o.length;g++)null!==(u=h(r,o[g],l))&&(a=i(u,a,g),null===d?c=u:d.sibling=u,d=u);return ra&&Zr(r,g),c}for(u=s(r,u);g<o.length;g++)null!==(p=f(u,r,g,o[g],l))&&(e&&null!==p.alternate&&u.delete(null===p.key?g:p.key),a=i(p,a,g),null===d?c=p:d.sibling=p,d=p);return e&&u.forEach(function(e){return t(r,e)}),ra&&Zr(r,g),c}function p(r,o,l,c){var d=R(l);if("function"!==typeof d)throw Error(a(150));if(null==(l=d.call(l)))throw Error(a(151));for(var u=d=null,g=o,p=o=0,x=null,v=l.next();null!==g&&!v.done;p++,v=l.next()){g.index>p?(x=g,g=null):x=g.sibling;var y=m(r,g,v.value,c);if(null===y){null===g&&(g=x);break}e&&g&&null===y.alternate&&t(r,g),o=i(y,o,p),null===u?d=y:u.sibling=y,u=y,g=x}if(v.done)return n(r,g),ra&&Zr(r,p),d;if(null===g){for(;!v.done;p++,v=l.next())null!==(v=h(r,v.value,c))&&(o=i(v,o,p),null===u?d=v:u.sibling=v,u=v);return ra&&Zr(r,p),d}for(g=s(r,g);!v.done;p++,v=l.next())null!==(v=f(g,r,p,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?p:v.key),o=i(v,o,p),null===u?d=v:u.sibling=v,u=v);return e&&g.forEach(function(e){return t(r,e)}),ra&&Zr(r,p),d}return function e(s,a,i,l){if("object"===typeof i&&null!==i&&i.type===_&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=a;null!==d;){if(d.key===c){if((c=i.type)===_){if(7===d.tag){n(s,d.sibling),(a=r(d,i.props.children)).return=s,s=a;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===I&&va(c)===d.type){n(s,d.sibling),(a=r(d,i.props)).ref=pa(s,d,i),a.return=s,s=a;break e}n(s,d);break}t(s,d),d=d.sibling}i.type===_?((a=Rc(i.props.children,s.mode,l,i.key)).return=s,s=a):((l=Lc(i.type,i.key,i.props,null,s.mode,l)).ref=pa(s,a,i),l.return=s,s=l)}return o(s);case j:e:{for(d=i.key;null!==a;){if(a.key===d){if(4===a.tag&&a.stateNode.containerInfo===i.containerInfo&&a.stateNode.implementation===i.implementation){n(s,a.sibling),(a=r(a,i.children||[])).return=s,s=a;break e}n(s,a);break}t(s,a),a=a.sibling}(a=zc(i,s.mode,l)).return=s,s=a}return o(s);case I:return e(s,a,(d=i._init)(i._payload),l)}if(te(i))return g(s,a,i,l);if(R(i))return p(s,a,i,l);xa(s,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==a&&6===a.tag?(n(s,a.sibling),(a=r(a,i)).return=s,s=a):(n(s,a),(a=Dc(i,s.mode,l)).return=s,s=a),o(s)):n(s,a)}}var ba=ya(!0),wa=ya(!1),ja=Nr(null),_a=null,Na=null,ka=null;function Ca(){ka=Na=_a=null}function Sa(e){var t=ja.current;kr(ja),e._currentValue=t}function Ea(e,t,n){for(;null!==e;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==s&&(s.childLanes|=t)):null!==s&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function Pa(e,t){_a=e,ka=Na=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(yo=!0),e.firstContext=null)}function Aa(e){var t=e._currentValue;if(ka!==e)if(e={context:e,memoizedValue:t,next:null},null===Na){if(null===_a)throw Error(a(308));Na=e,_a.dependencies={lanes:0,firstContext:e}}else Na=Na.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ma(e,t,n,s){var r=t.interleaved;return null===r?(n.next=n,Ia(t)):(n.next=r.next,r.next=n),t.interleaved=n,La(e,s)}function La(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ra=!1;function Oa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Da(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function za(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Ua(e,t,n){var s=e.updateQueue;if(null===s)return null;if(s=s.shared,0!==(2&El)){var r=s.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),s.pending=t,La(e,n)}return null===(r=s.interleaved)?(t.next=t,Ia(s)):(t.next=r.next,r.next=t),s.interleaved=t,La(e,n)}function Fa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,vt(e,n)}}function qa(e,t){var n=e.updateQueue,s=e.alternate;if(null!==s&&n===(s=s.updateQueue)){var r=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?r=a=i:a=a.next=i,n=n.next}while(null!==n);null===a?r=a=t:a=a.next=t}else r=a=t;return n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:s.shared,effects:s.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ba(e,t,n,s){var r=e.updateQueue;Ra=!1;var a=r.firstBaseUpdate,i=r.lastBaseUpdate,o=r.shared.pending;if(null!==o){r.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var u=r.baseState;for(i=0,d=c=l=null,o=a;;){var h=o.lane,m=o.eventTime;if((s&h)===h){null!==d&&(d=d.next={eventTime:m,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var f=e,g=o;switch(h=t,m=n,g.tag){case 1:if("function"===typeof(f=g.payload)){u=f.call(m,u,h);break e}u=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null===(h="function"===typeof(f=g.payload)?f.call(m,u,h):f)||void 0===h)break e;u=D({},u,h);break e;case 2:Ra=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=r.effects)?r.effects=[o]:h.push(o))}else m={eventTime:m,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=m,l=u):d=d.next=m,i|=h;if(null===(o=o.next)){if(null===(o=r.shared.pending))break;o=(h=o).next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}if(null===d&&(l=u),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=d,null!==(t=r.shared.interleaved)){r=t;do{i|=r.lane,r=r.next}while(r!==t)}else null===a&&(r.shared.lanes=0);Ol|=i,e.lanes=i,e.memoizedState=u}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var s=e[t],r=s.callback;if(null!==r){if(s.callback=null,s=n,"function"!==typeof r)throw Error(a(191,r));r.call(s)}}}var Wa={},Ha=Nr(Wa),Ya=Nr(Wa),Ka=Nr(Wa);function Ja(e){if(e===Wa)throw Error(a(174));return e}function Ga(e,t){switch(Cr(Ka,t),Cr(Ya,e),Cr(Ha,Wa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}kr(Ha),Cr(Ha,t)}function Xa(){kr(Ha),kr(Ya),kr(Ka)}function $a(e){Ja(Ka.current);var t=Ja(Ha.current),n=le(t,e.type);t!==n&&(Cr(Ya,e),Cr(Ha,n))}function Za(e){Ya.current===e&&(kr(Ha),kr(Ya))}var Qa=Nr(0);function ei(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ti=[];function ni(){for(var e=0;e<ti.length;e++)ti[e]._workInProgressVersionPrimary=null;ti.length=0}var si=b.ReactCurrentDispatcher,ri=b.ReactCurrentBatchConfig,ai=0,ii=null,oi=null,li=null,ci=!1,di=!1,ui=0,hi=0;function mi(){throw Error(a(321))}function fi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!os(e[n],t[n]))return!1;return!0}function gi(e,t,n,s,r,i){if(ai=i,ii=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,si.current=null===e||null===e.memoizedState?Zi:Qi,e=n(s,r),di){i=0;do{if(di=!1,ui=0,25<=i)throw Error(a(301));i+=1,li=oi=null,t.updateQueue=null,si.current=eo,e=n(s,r)}while(di)}if(si.current=$i,t=null!==oi&&null!==oi.next,ai=0,li=oi=ii=null,ci=!1,t)throw Error(a(300));return e}function pi(){var e=0!==ui;return ui=0,e}function xi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===li?ii.memoizedState=li=e:li=li.next=e,li}function vi(){if(null===oi){var e=ii.alternate;e=null!==e?e.memoizedState:null}else e=oi.next;var t=null===li?ii.memoizedState:li.next;if(null!==t)li=t,oi=e;else{if(null===e)throw Error(a(310));e={memoizedState:(oi=e).memoizedState,baseState:oi.baseState,baseQueue:oi.baseQueue,queue:oi.queue,next:null},null===li?ii.memoizedState=li=e:li=li.next=e}return li}function yi(e,t){return"function"===typeof t?t(e):t}function bi(e){var t=vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var s=oi,r=s.baseQueue,i=n.pending;if(null!==i){if(null!==r){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(null!==r){i=r.next,s=s.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((ai&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=s):c=c.next=h,ii.lanes|=u,Ol|=u}d=d.next}while(null!==d&&d!==i);null===c?o=s:c.next=l,os(s,t.memoizedState)||(yo=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(null!==(e=n.interleaved)){r=e;do{i=r.lane,ii.lanes|=i,Ol|=i,r=r.next}while(r!==e)}else null===r&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wi(e){var t=vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var s=n.dispatch,r=n.pending,i=t.memoizedState;if(null!==r){n.pending=null;var o=r=r.next;do{i=e(i,o.action),o=o.next}while(o!==r);os(i,t.memoizedState)||(yo=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function ji(){}function _i(e,t){var n=ii,s=vi(),r=t(),i=!os(s.memoizedState,r);if(i&&(s.memoizedState=r,yo=!0),s=s.queue,Ri(Ci.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||null!==li&&1&li.memoizedState.tag){if(n.flags|=2048,Ai(9,ki.bind(null,n,s,r,t),void 0,null),null===Pl)throw Error(a(349));0!==(30&ai)||Ni(n,t,r)}return r}function Ni(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function ki(e,t,n,s){t.value=n,t.getSnapshot=s,Si(t)&&Ei(e)}function Ci(e,t,n){return n(function(){Si(t)&&Ei(e)})}function Si(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!os(e,n)}catch(s){return!0}}function Ei(e){var t=La(e,1);null!==t&&nc(t,e,1,-1)}function Pi(e){var t=xi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yi,lastRenderedState:e},t.queue=e,e=e.dispatch=Ki.bind(null,ii,e),[t.memoizedState,e]}function Ai(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},null===(t=ii.updateQueue)?(t={lastEffect:null,stores:null},ii.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e),e}function Ti(){return vi().memoizedState}function Ii(e,t,n,s){var r=xi();ii.flags|=e,r.memoizedState=Ai(1|t,n,void 0,void 0===s?null:s)}function Mi(e,t,n,s){var r=vi();s=void 0===s?null:s;var a=void 0;if(null!==oi){var i=oi.memoizedState;if(a=i.destroy,null!==s&&fi(s,i.deps))return void(r.memoizedState=Ai(t,n,a,s))}ii.flags|=e,r.memoizedState=Ai(1|t,n,a,s)}function Li(e,t){return Ii(8390656,8,e,t)}function Ri(e,t){return Mi(2048,8,e,t)}function Oi(e,t){return Mi(4,2,e,t)}function Di(e,t){return Mi(4,4,e,t)}function zi(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ui(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mi(4,4,zi.bind(null,t,e),n)}function Fi(){}function qi(e,t){var n=vi();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&fi(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Bi(e,t){var n=vi();t=void 0===t?null:t;var s=n.memoizedState;return null!==s&&null!==t&&fi(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function Vi(e,t,n){return 0===(21&ai)?(e.baseState&&(e.baseState=!1,yo=!0),e.memoizedState=n):(os(n,t)||(n=gt(),ii.lanes|=n,Ol|=n,e.baseState=!0),t)}function Wi(e,t){var n=yt;yt=0!==n&&4>n?n:4,e(!0);var s=ri.transition;ri.transition={};try{e(!1),t()}finally{yt=n,ri.transition=s}}function Hi(){return vi().memoizedState}function Yi(e,t,n){var s=tc(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Ji(e))Gi(t,n);else if(null!==(n=Ma(e,t,n,s))){nc(n,e,s,ec()),Xi(n,t,s)}}function Ki(e,t,n){var s=tc(e),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ji(e))Gi(t,r);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,n);if(r.hasEagerState=!0,r.eagerState=o,os(o,i)){var l=t.interleaved;return null===l?(r.next=r,Ia(t)):(r.next=l.next,l.next=r),void(t.interleaved=r)}}catch(c){}null!==(n=Ma(e,t,r,s))&&(nc(n,e,s,r=ec()),Xi(n,t,s))}}function Ji(e){var t=e.alternate;return e===ii||null!==t&&t===ii}function Gi(e,t){di=ci=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Xi(e,t,n){if(0!==(4194240&n)){var s=t.lanes;n|=s&=e.pendingLanes,t.lanes=n,vt(e,n)}}var $i={readContext:Aa,useCallback:mi,useContext:mi,useEffect:mi,useImperativeHandle:mi,useInsertionEffect:mi,useLayoutEffect:mi,useMemo:mi,useReducer:mi,useRef:mi,useState:mi,useDebugValue:mi,useDeferredValue:mi,useTransition:mi,useMutableSource:mi,useSyncExternalStore:mi,useId:mi,unstable_isNewReconciler:!1},Zi={readContext:Aa,useCallback:function(e,t){return xi().memoizedState=[e,void 0===t?null:t],e},useContext:Aa,useEffect:Li,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ii(4194308,4,zi.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ii(4,2,e,t)},useMemo:function(e,t){var n=xi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=xi();return t=void 0!==n?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Yi.bind(null,ii,e),[s.memoizedState,e]},useRef:function(e){return e={current:e},xi().memoizedState=e},useState:Pi,useDebugValue:Fi,useDeferredValue:function(e){return xi().memoizedState=e},useTransition:function(){var e=Pi(!1),t=e[0];return e=Wi.bind(null,e[1]),xi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=ii,r=xi();if(ra){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Pl)throw Error(a(349));0!==(30&ai)||Ni(s,t,n)}r.memoizedState=n;var i={value:n,getSnapshot:t};return r.queue=i,Li(Ci.bind(null,s,i,e),[e]),s.flags|=2048,Ai(9,ki.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=xi(),t=Pl.identifierPrefix;if(ra){var n=$r;t=":"+t+"R"+(n=(Xr&~(1<<32-it(Xr)-1)).toString(32)+n),0<(n=ui++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=hi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Qi={readContext:Aa,useCallback:qi,useContext:Aa,useEffect:Ri,useImperativeHandle:Ui,useInsertionEffect:Oi,useLayoutEffect:Di,useMemo:Bi,useReducer:bi,useRef:Ti,useState:function(){return bi(yi)},useDebugValue:Fi,useDeferredValue:function(e){return Vi(vi(),oi.memoizedState,e)},useTransition:function(){return[bi(yi)[0],vi().memoizedState]},useMutableSource:ji,useSyncExternalStore:_i,useId:Hi,unstable_isNewReconciler:!1},eo={readContext:Aa,useCallback:qi,useContext:Aa,useEffect:Ri,useImperativeHandle:Ui,useInsertionEffect:Oi,useLayoutEffect:Di,useMemo:Bi,useReducer:wi,useRef:Ti,useState:function(){return wi(yi)},useDebugValue:Fi,useDeferredValue:function(e){var t=vi();return null===oi?t.memoizedState=e:Vi(t,oi.memoizedState,e)},useTransition:function(){return[wi(yi)[0],vi().memoizedState]},useMutableSource:ji,useSyncExternalStore:_i,useId:Hi,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=D({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,s){n=null===(n=n(s,t=e.memoizedState))||void 0===n?t:D({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var so={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=ec(),r=tc(e),a=za(s,r);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ua(e,a,r))&&(nc(t,e,r,s),Fa(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=ec(),r=tc(e),a=za(s,r);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Ua(e,a,r))&&(nc(t,e,r,s),Fa(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),s=tc(e),r=za(n,s);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Ua(e,r,s))&&(nc(t,e,s,n),Fa(t,e,s))}};function ro(e,t,n,s,r,a,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(s,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!ls(n,s)||!ls(r,a))}function ao(e,t,n){var s=!1,r=Sr,a=t.contextType;return"object"===typeof a&&null!==a?a=Aa(a):(r=Ir(t)?Ar:Er.current,a=(s=null!==(s=t.contextTypes)&&void 0!==s)?Tr(e,r):Sr),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=so,e.stateNode=t,t._reactInternals=e,s&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=a),t}function io(e,t,n,s){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,s),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&so.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,s){var r=e.stateNode;r.props=n,r.state=e.memoizedState,r.refs={},Oa(e);var a=t.contextType;"object"===typeof a&&null!==a?r.context=Aa(a):(a=Ir(t)?Ar:Er.current,r.context=Tr(e,a)),r.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(no(e,t,a,n),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&so.enqueueReplaceState(r,r.state,null),Ba(e,n,r,s),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",s=t;do{n+=q(s),s=s.return}while(s);var r=n}catch(a){r="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:r,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function mo(e,t,n){(n=za(-1,n)).tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){Wl||(Wl=!0,Hl=s),uo(0,t)},n}function fo(e,t,n){(n=za(-1,n)).tag=3;var s=e.type.getDerivedStateFromError;if("function"===typeof s){var r=t.value;n.payload=function(){return s(r)},n.callback=function(){uo(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof s&&(null===Yl?Yl=new Set([this]):Yl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var s=e.pingCache;if(null===s){s=e.pingCache=new ho;var r=new Set;s.set(t,r)}else void 0===(r=s.get(t))&&(r=new Set,s.set(t,r));r.has(n)||(r.add(n),e=kc.bind(null,e,t,n),t.then(e,e))}function po(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function xo(e,t,n,s,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=za(-1,1)).tag=2,Ua(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var vo=b.ReactCurrentOwner,yo=!1;function bo(e,t,n,s){t.child=null===e?wa(t,null,n,s):ba(t,e.child,n,s)}function wo(e,t,n,s,r){n=n.render;var a=t.ref;return Pa(t,r),s=gi(e,t,n,s,a,r),n=pi(),null===e||yo?(ra&&n&&ea(t),t.flags|=1,bo(e,t,s,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function jo(e,t,n,s,r){if(null===e){var a=n.type;return"function"!==typeof a||Ic(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,s,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,_o(e,t,a,s,r))}if(a=e.child,0===(e.lanes&r)){var i=a.memoizedProps;if((n=null!==(n=n.compare)?n:ls)(i,s)&&e.ref===t.ref)return Wo(e,t,r)}return t.flags|=1,(e=Mc(a,s)).ref=t.ref,e.return=t,t.child=e}function _o(e,t,n,s,r){if(null!==e){var a=e.memoizedProps;if(ls(a,s)&&e.ref===t.ref){if(yo=!1,t.pendingProps=s=a,0===(e.lanes&r))return t.lanes=e.lanes,Wo(e,t,r);0!==(131072&e.flags)&&(yo=!0)}}return Co(e,t,n,s,r)}function No(e,t,n){var s=t.pendingProps,r=s.children,a=null!==e?e.memoizedState:null;if("hidden"===s.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Cr(Ml,Il),Il|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Cr(Ml,Il),Il|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=null!==a?a.baseLanes:n,Cr(Ml,Il),Il|=s}else null!==a?(s=a.baseLanes|n,t.memoizedState=null):s=n,Cr(Ml,Il),Il|=s;return bo(e,t,r,n),t.child}function ko(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Co(e,t,n,s,r){var a=Ir(n)?Ar:Er.current;return a=Tr(t,a),Pa(t,r),n=gi(e,t,n,s,a,r),s=pi(),null===e||yo?(ra&&s&&ea(t),t.flags|=1,bo(e,t,n,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Wo(e,t,r))}function So(e,t,n,s,r){if(Ir(n)){var a=!0;Or(t)}else a=!1;if(Pa(t,r),null===t.stateNode)Vo(e,t),ao(t,n,s),oo(t,n,s,r),s=!0;else if(null===e){var i=t.stateNode,o=t.memoizedProps;i.props=o;var l=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Aa(c):c=Tr(t,c=Ir(n)?Ar:Er.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==s||l!==c)&&io(t,i,s,c),Ra=!1;var h=t.memoizedState;i.state=h,Ba(t,s,i,r),l=t.memoizedState,o!==s||h!==l||Pr.current||Ra?("function"===typeof d&&(no(t,n,d,s),l=t.memoizedState),(o=Ra||ro(t,n,o,s,h,l,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=l),i.props=s,i.state=l,i.context=c,s=o):("function"===typeof i.componentDidMount&&(t.flags|=4194308),s=!1)}else{i=t.stateNode,Da(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),i.props=c,u=t.pendingProps,h=i.context,"object"===typeof(l=n.contextType)&&null!==l?l=Aa(l):l=Tr(t,l=Ir(n)?Ar:Er.current);var m=n.getDerivedStateFromProps;(d="function"===typeof m||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o!==u||h!==l)&&io(t,i,s,l),Ra=!1,h=t.memoizedState,i.state=h,Ba(t,s,i,r);var f=t.memoizedState;o!==u||h!==f||Pr.current||Ra?("function"===typeof m&&(no(t,n,m,s),f=t.memoizedState),(c=Ra||ro(t,n,c,s,h,f,l)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(s,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(s,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=f),i.props=s,i.state=f,i.context=l,s=c):("function"!==typeof i.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return Eo(e,t,n,s,a,r)}function Eo(e,t,n,s,r,a){ko(e,t);var i=0!==(128&t.flags);if(!s&&!i)return r&&Dr(t,n,!1),Wo(e,t,a);s=t.stateNode,vo.current=t;var o=i&&"function"!==typeof n.getDerivedStateFromError?null:s.render();return t.flags|=1,null!==e&&i?(t.child=ba(t,e.child,null,a),t.child=ba(t,null,o,a)):bo(e,t,o,a),t.memoizedState=s.state,r&&Dr(t,n,!0),t.child}function Po(e){var t=e.stateNode;t.pendingContext?Lr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Lr(0,t.context,!1),Ga(e,t.containerInfo)}function Ao(e,t,n,s,r){return ma(),fa(r),t.flags|=256,bo(e,t,n,s),t.child}var To,Io,Mo,Lo,Ro={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Do(e,t,n){var s,r=t.pendingProps,i=Qa.current,o=!1,l=0!==(128&t.flags);if((s=l)||(s=(null===e||null!==e.memoizedState)&&0!==(2&i)),s?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Cr(Qa,1&i),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=r.children,e=r.fallback,o?(r=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&r)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Oc(l,r,0,null),e=Rc(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(n),t.memoizedState=Ro,e):zo(t,l));if(null!==(i=e.memoizedState)&&null!==(s=i.dehydrated))return function(e,t,n,s,r,i,o){if(n)return 256&t.flags?(t.flags&=-257,Uo(e,t,o,s=co(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(i=s.fallback,r=t.mode,s=Oc({mode:"visible",children:s.children},r,0,null),(i=Rc(i,r,o,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,0!==(1&t.mode)&&ba(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=Ro,i);if(0===(1&t.mode))return Uo(e,t,o,null);if("$!"===r.data){if(s=r.nextSibling&&r.nextSibling.dataset)var l=s.dgst;return s=l,Uo(e,t,o,s=co(i=Error(a(419)),s,void 0))}if(l=0!==(o&e.childLanes),yo||l){if(null!==(s=Pl)){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(s.suspendedLanes|o))?0:r)&&r!==i.retryLane&&(i.retryLane=r,La(e,r),nc(s,e,r,-1))}return gc(),Uo(e,t,o,s=co(Error(a(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Sc.bind(null,e),r._reactRetry=t,null):(e=i.treeContext,sa=cr(r.nextSibling),na=t,ra=!0,aa=null,null!==e&&(Kr[Jr++]=Xr,Kr[Jr++]=$r,Kr[Jr++]=Gr,Xr=e.id,$r=e.overflow,Gr=t),t=zo(t,s.children),t.flags|=4096,t)}(e,t,l,r,s,i,n);if(o){o=r.fallback,l=t.mode,s=(i=e.child).sibling;var c={mode:"hidden",children:r.children};return 0===(1&l)&&t.child!==i?((r=t.child).childLanes=0,r.pendingProps=c,t.deletions=null):(r=Mc(i,c)).subtreeFlags=14680064&i.subtreeFlags,null!==s?o=Mc(s,o):(o=Rc(o,l,n,null)).flags|=2,o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,l=null===(l=e.child.memoizedState)?Oo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ro,r}return e=(o=e.child).sibling,r=Mc(o,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=n),r.return=t,r.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function zo(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Uo(e,t,n,s){return null!==s&&fa(s),ba(t,e.child,null,n),(e=zo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Fo(e,t,n){e.lanes|=t;var s=e.alternate;null!==s&&(s.lanes|=t),Ea(e.return,t,n)}function qo(e,t,n,s,r){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=s,a.tail=n,a.tailMode=r)}function Bo(e,t,n){var s=t.pendingProps,r=s.revealOrder,a=s.tail;if(bo(e,t,s.children,n),0!==(2&(s=Qa.current)))s=1&s|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Fo(e,n,t);else if(19===e.tag)Fo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Cr(Qa,s),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(n=t.child,r=null;null!==n;)null!==(e=n.alternate)&&null===ei(e)&&(r=n),n=n.sibling;null===(n=r)?(r=t.child,t.child=null):(r=n.sibling,n.sibling=null),qo(t,!1,r,n,a);break;case"backwards":for(n=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===ei(e)){t.child=r;break}e=r.sibling,r.sibling=n,n=r,r=e}qo(t,!0,n,null,a);break;case"together":qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Wo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;null!==n;)null!==n.alternate&&(s=n),n=n.sibling;null===s?t||null===e.tail?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Yo(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,s=0;if(t)for(var r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=14680064&r.subtreeFlags,s|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function Ko(e,t,n){var s=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(t),null;case 1:case 17:return Ir(t.type)&&Mr(),Yo(t),null;case 3:return s=t.stateNode,Xa(),kr(Pr),kr(Er),ni(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),null!==e&&null!==e.child||(ua(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(ic(aa),aa=null))),Io(e,t),Yo(t),null;case 5:Za(t);var r=Ja(Ka.current);if(n=t.type,null!==e&&null!=t.stateNode)Mo(e,t,n,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(null===t.stateNode)throw Error(a(166));return Yo(t),null}if(e=Ja(Ha.current),ua(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[hr]=t,s[mr]=i,e=0!==(1&t.mode),n){case"dialog":Us("cancel",s),Us("close",s);break;case"iframe":case"object":case"embed":Us("load",s);break;case"video":case"audio":for(r=0;r<Rs.length;r++)Us(Rs[r],s);break;case"source":Us("error",s);break;case"img":case"image":case"link":Us("error",s),Us("load",s);break;case"details":Us("toggle",s);break;case"input":X(s,i),Us("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},Us("invalid",s);break;case"textarea":re(s,i),Us("invalid",s)}for(var l in ve(n,i),r=null,i)if(i.hasOwnProperty(l)){var c=i[l];"children"===l?"string"===typeof c?s.textContent!==c&&(!0!==i.suppressHydrationWarning&&Zs(s.textContent,c,e),r=["children",c]):"number"===typeof c&&s.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Zs(s.textContent,c,e),r=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Us("scroll",s)}switch(n){case"input":Y(s),Q(s,i,!0);break;case"textarea":Y(s),ie(s);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(s.onclick=Qs)}s=r,t.updateQueue=s,null!==s&&(t.flags|=4)}else{l=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof s.is?e=l.createElement(n,{is:s.is}):(e=l.createElement(n),"select"===n&&(l=e,s.multiple?l.multiple=!0:s.size&&(l.size=s.size))):e=l.createElementNS(e,n),e[hr]=t,e[mr]=s,To(e,t,!1,!1),t.stateNode=e;e:{switch(l=ye(n,s),n){case"dialog":Us("cancel",e),Us("close",e),r=s;break;case"iframe":case"object":case"embed":Us("load",e),r=s;break;case"video":case"audio":for(r=0;r<Rs.length;r++)Us(Rs[r],e);r=s;break;case"source":Us("error",e),r=s;break;case"img":case"image":case"link":Us("error",e),Us("load",e),r=s;break;case"details":Us("toggle",e),r=s;break;case"input":X(e,s),r=G(e,s),Us("invalid",e);break;case"option":default:r=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},r=D({},s,{value:void 0}),Us("invalid",e);break;case"textarea":re(e,s),r=se(e,s),Us("invalid",e)}for(i in ve(n,r),c=r)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?pe(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(o.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Us("scroll",e):null!=d&&y(e,i,d,l))}switch(n){case"input":Y(e),Q(e,s,!1);break;case"textarea":Y(e),ie(e);break;case"option":null!=s.value&&e.setAttribute("value",""+W(s.value));break;case"select":e.multiple=!!s.multiple,null!=(i=s.value)?ne(e,!!s.multiple,i,!1):null!=s.defaultValue&&ne(e,!!s.multiple,s.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=Qs)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Yo(t),null;case 6:if(e&&null!=t.stateNode)Lo(e,t,e.memoizedProps,s);else{if("string"!==typeof s&&null===t.stateNode)throw Error(a(166));if(n=Ja(Ka.current),Ja(Ha.current),ua(t)){if(s=t.stateNode,n=t.memoizedProps,s[hr]=t,(i=s.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Zs(s.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zs(s.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(s=(9===n.nodeType?n:n.ownerDocument).createTextNode(s))[hr]=t,t.stateNode=s}return Yo(t),null;case 13:if(kr(Qa),s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ra&&null!==sa&&0!==(1&t.mode)&&0===(128&t.flags))ha(),ma(),t.flags|=98560,i=!1;else if(i=ua(t),null!==s&&null!==s.dehydrated){if(null===e){if(!i)throw Error(a(318));if(!(i=null!==(i=t.memoizedState)?i.dehydrated:null))throw Error(a(317));i[hr]=t}else ma(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Yo(t),i=!1}else null!==aa&&(ic(aa),aa=null),i=!0;if(!i)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((s=null!==s)!==(null!==e&&null!==e.memoizedState)&&s&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Qa.current)?0===Ll&&(Ll=3):gc())),null!==t.updateQueue&&(t.flags|=4),Yo(t),null);case 4:return Xa(),Io(e,t),null===e&&Bs(t.stateNode.containerInfo),Yo(t),null;case 10:return Sa(t.type._context),Yo(t),null;case 19:if(kr(Qa),null===(i=t.memoizedState))return Yo(t),null;if(s=0!==(128&t.flags),null===(l=i.rendering))if(s)Ho(i,!1);else{if(0!==Ll||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ei(e))){for(t.flags|=128,Ho(i,!1),null!==(s=l.updateQueue)&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;null!==n;)e=s,(i=n).flags&=14680066,null===(l=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=l.childLanes,i.lanes=l.lanes,i.child=l.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=l.memoizedProps,i.memoizedState=l.memoizedState,i.updateQueue=l.updateQueue,i.type=l.type,e=l.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Cr(Qa,1&Qa.current|2),t.child}e=e.sibling}null!==i.tail&&$e()>Bl&&(t.flags|=128,s=!0,Ho(i,!1),t.lanes=4194304)}else{if(!s)if(null!==(e=ei(l))){if(t.flags|=128,s=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(i,!0),null===i.tail&&"hidden"===i.tailMode&&!l.alternate&&!ra)return Yo(t),null}else 2*$e()-i.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,s=!0,Ho(i,!1),t.lanes=4194304);i.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=i.last)?n.sibling=l:t.child=l,i.last=l)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=$e(),t.sibling=null,n=Qa.current,Cr(Qa,s?1&n|2:1&n),t):(Yo(t),null);case 22:case 23:return uc(),s=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==s&&(t.flags|=8192),s&&0!==(1&t.mode)?0!==(1073741824&Il)&&(Yo(t),6&t.subtreeFlags&&(t.flags|=8192)):Yo(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Jo(e,t){switch(ta(t),t.tag){case 1:return Ir(t.type)&&Mr(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Xa(),kr(Pr),kr(Er),ni(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Za(t),null;case 13:if(kr(Qa),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));ma()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return kr(Qa),null;case 4:return Xa(),null;case 10:return Sa(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}To=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Io=function(){},Mo=function(e,t,n,s){var r=e.memoizedProps;if(r!==s){e=t.stateNode,Ja(Ha.current);var a,i=null;switch(n){case"input":r=G(e,r),s=G(e,s),i=[];break;case"select":r=D({},r,{value:void 0}),s=D({},s,{value:void 0}),i=[];break;case"textarea":r=se(e,r),s=se(e,s),i=[];break;default:"function"!==typeof r.onClick&&"function"===typeof s.onClick&&(e.onclick=Qs)}for(d in ve(n,s),n=null,r)if(!s.hasOwnProperty(d)&&r.hasOwnProperty(d)&&null!=r[d])if("style"===d){var l=r[d];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=null!=r?r[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(i||(i=[]),i.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Us("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},Lo=function(e,t,n,s){n!==s&&(t.flags|=4)};var Go=!1,Xo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Zo=null;function Qo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(s){Nc(e,t,s)}else n.current=null}function el(e,t,n){try{n()}catch(s){Nc(e,t,s)}}var tl=!1;function nl(e,t,n){var s=t.updateQueue;if(null!==(s=null!==s?s.lastEffect:null)){var r=s=s.next;do{if((r.tag&e)===e){var a=r.destroy;r.destroy=void 0,void 0!==a&&el(t,n,a)}r=r.next}while(r!==s)}}function sl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function rl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function al(e){var t=e.alternate;null!==t&&(e.alternate=null,al(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hr],delete t[mr],delete t[gr],delete t[pr],delete t[xr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function il(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||il(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Qs));else if(4!==s&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var s=e.tag;if(5===s||6===s)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==s&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)ml(e,t,n),n=n.sibling}function ml(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(rt,n)}catch(o){}switch(n.tag){case 5:Xo||Qo(n,t);case 6:var s=dl,r=ul;dl=null,hl(e,t,n),ul=r,null!==(dl=s)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?lr(e.parentNode,n):1===e.nodeType&&lr(e,n),Bt(e)):lr(dl,n.stateNode));break;case 4:s=dl,r=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=s,ul=r;break;case 0:case 11:case 14:case 15:if(!Xo&&(null!==(s=n.updateQueue)&&null!==(s=s.lastEffect))){r=s=s.next;do{var a=r,i=a.destroy;a=a.tag,void 0!==i&&(0!==(2&a)||0!==(4&a))&&el(n,t,i),r=r.next}while(r!==s)}hl(e,t,n);break;case 1:if(!Xo&&(Qo(n,t),"function"===typeof(s=n.stateNode).componentWillUnmount))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(o){Nc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Xo=(s=Xo)||null!==n.memoizedState,hl(e,t,n),Xo=s):hl(e,t,n);break;default:hl(e,t,n)}}function fl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach(function(t){var s=Ec.bind(null,e,t);n.has(t)||(n.add(t),t.then(s,s))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var s=0;s<n.length;s++){var r=n[s];try{var i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(a(160));ml(i,o,r),dl=null,ul=!1;var c=r.alternate;null!==c&&(c.return=null),r.return=null}catch(d){Nc(r,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)pl(t,e),t=t.sibling}function pl(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),xl(e),4&s){try{nl(3,e,e.return),sl(3,e)}catch(p){Nc(e,e.return,p)}try{nl(5,e,e.return)}catch(p){Nc(e,e.return,p)}}break;case 1:gl(t,e),xl(e),512&s&&null!==n&&Qo(n,n.return);break;case 5:if(gl(t,e),xl(e),512&s&&null!==n&&Qo(n,n.return),32&e.flags){var r=e.stateNode;try{he(r,"")}catch(p){Nc(e,e.return,p)}}if(4&s&&null!=(r=e.stateNode)){var i=e.memoizedProps,o=null!==n?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===i.type&&null!=i.name&&$(r,i),ye(l,o);var d=ye(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?pe(r,h):"dangerouslySetInnerHTML"===u?ue(r,h):"children"===u?he(r,h):y(r,u,h,d)}switch(l){case"input":Z(r,i);break;case"textarea":ae(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var f=i.value;null!=f?ne(r,!!i.multiple,f,!1):m!==!!i.multiple&&(null!=i.defaultValue?ne(r,!!i.multiple,i.defaultValue,!0):ne(r,!!i.multiple,i.multiple?[]:"",!1))}r[mr]=i}catch(p){Nc(e,e.return,p)}}break;case 6:if(gl(t,e),xl(e),4&s){if(null===e.stateNode)throw Error(a(162));r=e.stateNode,i=e.memoizedProps;try{r.nodeValue=i}catch(p){Nc(e,e.return,p)}}break;case 3:if(gl(t,e),xl(e),4&s&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(p){Nc(e,e.return,p)}break;case 4:default:gl(t,e),xl(e);break;case 13:gl(t,e),xl(e),8192&(r=e.child).flags&&(i=null!==r.memoizedState,r.stateNode.isHidden=i,!i||null!==r.alternate&&null!==r.alternate.memoizedState||(ql=$e())),4&s&&fl(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Xo=(d=Xo)||u,gl(t,e),Xo=d):gl(t,e),xl(e),8192&s){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Zo=e,u=e.child;null!==u;){for(h=Zo=u;null!==Zo;){switch(f=(m=Zo).child,m.tag){case 0:case 11:case 14:case 15:nl(4,m,m.return);break;case 1:Qo(m,m.return);var g=m.stateNode;if("function"===typeof g.componentWillUnmount){s=m,n=m.return;try{t=s,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(p){Nc(s,n,p)}}break;case 5:Qo(m,m.return);break;case 22:if(null!==m.memoizedState){wl(h);continue}}null!==f?(f.return=m,Zo=f):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{r=h.stateNode,d?"function"===typeof(i=r.style).setProperty?i.setProperty("display","none","important"):i.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(p){Nc(e,e.return,p)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(p){Nc(e,e.return,p)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:gl(t,e),xl(e),4&s&&fl(e);case 21:}}function xl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(il(n)){var s=n;break e}n=n.return}throw Error(a(160))}switch(s.tag){case 5:var r=s.stateNode;32&s.flags&&(he(r,""),s.flags&=-33),cl(e,ol(e),r);break;case 3:case 4:var i=s.stateNode.containerInfo;ll(e,ol(e),i);break;default:throw Error(a(161))}}catch(o){Nc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Zo=e,yl(e,t,n)}function yl(e,t,n){for(var s=0!==(1&e.mode);null!==Zo;){var r=Zo,a=r.child;if(22===r.tag&&s){var i=null!==r.memoizedState||Go;if(!i){var o=r.alternate,l=null!==o&&null!==o.memoizedState||Xo;o=Go;var c=Xo;if(Go=i,(Xo=l)&&!c)for(Zo=r;null!==Zo;)l=(i=Zo).child,22===i.tag&&null!==i.memoizedState?jl(r):null!==l?(l.return=i,Zo=l):jl(r);for(;null!==a;)Zo=a,yl(a,t,n),a=a.sibling;Zo=r,Go=o,Xo=c}bl(e)}else 0!==(8772&r.subtreeFlags)&&null!==a?(a.return=r,Zo=a):bl(e)}}function bl(e){for(;null!==Zo;){var t=Zo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xo||sl(5,t);break;case 1:var s=t.stateNode;if(4&t.flags&&!Xo)if(null===n)s.componentDidMount();else{var r=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&Va(t,i,s);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(a(163))}Xo||512&t.flags&&rl(t)}catch(m){Nc(t,t.return,m)}}if(t===e){Zo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zo=n;break}Zo=t.return}}function wl(e){for(;null!==Zo;){var t=Zo;if(t===e){Zo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zo=n;break}Zo=t.return}}function jl(e){for(;null!==Zo;){var t=Zo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{sl(4,t)}catch(l){Nc(t,n,l)}break;case 1:var s=t.stateNode;if("function"===typeof s.componentDidMount){var r=t.return;try{s.componentDidMount()}catch(l){Nc(t,r,l)}}var a=t.return;try{rl(t)}catch(l){Nc(t,a,l)}break;case 5:var i=t.return;try{rl(t)}catch(l){Nc(t,i,l)}}}catch(l){Nc(t,t.return,l)}if(t===e){Zo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Zo=o;break}Zo=t.return}}var _l,Nl=Math.ceil,kl=b.ReactCurrentDispatcher,Cl=b.ReactCurrentOwner,Sl=b.ReactCurrentBatchConfig,El=0,Pl=null,Al=null,Tl=0,Il=0,Ml=Nr(0),Ll=0,Rl=null,Ol=0,Dl=0,zl=0,Ul=null,Fl=null,ql=0,Bl=1/0,Vl=null,Wl=!1,Hl=null,Yl=null,Kl=!1,Jl=null,Gl=0,Xl=0,$l=null,Zl=-1,Ql=0;function ec(){return 0!==(6&El)?$e():-1!==Zl?Zl:Zl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&El)&&0!==Tl?Tl&-Tl:null!==ga.transition?(0===Ql&&(Ql=gt()),Ql):0!==(e=yt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function nc(e,t,n,s){if(50<Xl)throw Xl=0,$l=null,Error(a(185));xt(e,n,s),0!==(2&El)&&e===Pl||(e===Pl&&(0===(2&El)&&(Dl|=n),4===Ll&&oc(e,Tl)),sc(e,s),1===n&&0===El&&0===(1&t.mode)&&(Bl=$e()+500,Ur&&Br()))}function sc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,r=e.expirationTimes,a=e.pendingLanes;0<a;){var i=31-it(a),o=1<<i,l=r[i];-1===l?0!==(o&n)&&0===(o&s)||(r[i]=mt(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}}(e,t);var s=ht(e,e===Pl?Tl:0);if(0===s)null!==n&&Je(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(null!=n&&Je(n),1===t)0===e.tag?function(e){Ur=!0,qr(e)}(lc.bind(null,e)):qr(lc.bind(null,e)),ir(function(){0===(6&El)&&Br()}),n=null;else{switch(bt(s)){case 1:n=Qe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=st}n=Pc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Zl=-1,Ql=0,0!==(6&El))throw Error(a(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var s=ht(e,e===Pl?Tl:0);if(0===s)return null;if(0!==(30&s)||0!==(s&e.expiredLanes)||t)t=pc(e,s);else{t=s;var r=El;El|=2;var i=fc();for(Pl===e&&Tl===t||(Vl=null,Bl=$e()+500,hc(e,t));;)try{vc();break}catch(l){mc(e,l)}Ca(),kl.current=i,El=r,null!==Al?t=0:(Pl=null,Tl=0,t=Ll)}if(0!==t){if(2===t&&(0!==(r=ft(e))&&(s=r,t=ac(e,r))),1===t)throw n=Rl,hc(e,0),oc(e,s),sc(e,$e()),n;if(6===t)oc(e,s);else{if(r=e.current.alternate,0===(30&s)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var s=0;s<n.length;s++){var r=n[s],a=r.getSnapshot;r=r.value;try{if(!os(a(),r))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=pc(e,s))&&(0!==(i=ft(e))&&(s=i,t=ac(e,i))),1===t))throw n=Rl,hc(e,0),oc(e,s),sc(e,$e()),n;switch(e.finishedWork=r,e.finishedLanes=s,t){case 0:case 1:throw Error(a(345));case 2:case 5:wc(e,Fl,Vl);break;case 3:if(oc(e,s),(130023424&s)===s&&10<(t=ql+500-$e())){if(0!==ht(e,0))break;if(((r=e.suspendedLanes)&s)!==s){ec(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=sr(wc.bind(null,e,Fl,Vl),t);break}wc(e,Fl,Vl);break;case 4:if(oc(e,s),(4194240&s)===s)break;for(t=e.eventTimes,r=-1;0<s;){var o=31-it(s);i=1<<o,(o=t[o])>r&&(r=o),s&=~i}if(s=r,10<(s=(120>(s=$e()-s)?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Nl(s/1960))-s)){e.timeoutHandle=sr(wc.bind(null,e,Fl,Vl),s);break}wc(e,Fl,Vl);break;default:throw Error(a(329))}}}return sc(e,$e()),e.callbackNode===n?rc.bind(null,e):null}function ac(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=pc(e,t))&&(t=Fl,Fl=n,null!==t&&ic(t)),e}function ic(e){null===Fl?Fl=e:Fl.push.apply(Fl,e)}function oc(e,t){for(t&=~zl,t&=~Dl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),s=1<<n;e[n]=-1,t&=~s}}function lc(e){if(0!==(6&El))throw Error(a(327));jc();var t=ht(e,0);if(0===(1&t))return sc(e,$e()),null;var n=pc(e,t);if(0!==e.tag&&2===n){var s=ft(e);0!==s&&(t=s,n=ac(e,s))}if(1===n)throw n=Rl,hc(e,0),oc(e,t),sc(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,Fl,Vl),sc(e,$e()),null}function cc(e,t){var n=El;El|=1;try{return e(t)}finally{0===(El=n)&&(Bl=$e()+500,Ur&&Br())}}function dc(e){null!==Jl&&0===Jl.tag&&0===(6&El)&&jc();var t=El;El|=1;var n=Sl.transition,s=yt;try{if(Sl.transition=null,yt=1,e)return e()}finally{yt=s,Sl.transition=n,0===(6&(El=t))&&Br()}}function uc(){Il=Ml.current,kr(Ml)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,rr(n)),null!==Al)for(n=Al.return;null!==n;){var s=n;switch(ta(s),s.tag){case 1:null!==(s=s.type.childContextTypes)&&void 0!==s&&Mr();break;case 3:Xa(),kr(Pr),kr(Er),ni();break;case 5:Za(s);break;case 4:Xa();break;case 13:case 19:kr(Qa);break;case 10:Sa(s.type._context);break;case 22:case 23:uc()}n=n.return}if(Pl=e,Al=e=Mc(e.current,null),Tl=Il=t,Ll=0,Rl=null,zl=Dl=Ol=0,Fl=Ul=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(s=(n=Ta[t]).interleaved)){n.interleaved=null;var r=s.next,a=n.pending;if(null!==a){var i=a.next;a.next=r,s.next=i}n.pending=s}Ta=null}return e}function mc(e,t){for(;;){var n=Al;try{if(Ca(),si.current=$i,ci){for(var s=ii.memoizedState;null!==s;){var r=s.queue;null!==r&&(r.pending=null),s=s.next}ci=!1}if(ai=0,li=oi=ii=null,di=!1,ui=0,Cl.current=null,null===n||null===n.return){Ll=1,Rl=t,Al=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=po(o);if(null!==f){f.flags&=-257,xo(f,o,l,0,t),1&f.mode&&go(i,d,t),c=d;var g=(t=f).updateQueue;if(null===g){var p=new Set;p.add(c),t.updateQueue=p}else g.add(c);break e}if(0===(1&t)){go(i,d,t),gc();break e}c=Error(a(426))}else if(ra&&1&l.mode){var x=po(o);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),xo(x,o,l,0,t),fa(lo(c,l));break e}}i=c=lo(c,l),4!==Ll&&(Ll=2),null===Ul?Ul=[i]:Ul.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t,qa(i,mo(0,c,t));break e;case 1:l=c;var v=i.type,y=i.stateNode;if(0===(128&i.flags)&&("function"===typeof v.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===Yl||!Yl.has(y)))){i.flags|=65536,t&=-t,i.lanes|=t,qa(i,fo(i,l,t));break e}}i=i.return}while(null!==i)}bc(n)}catch(b){t=b,Al===n&&null!==n&&(Al=n=n.return);continue}break}}function fc(){var e=kl.current;return kl.current=$i,null===e?$i:e}function gc(){0!==Ll&&3!==Ll&&2!==Ll||(Ll=4),null===Pl||0===(268435455&Ol)&&0===(268435455&Dl)||oc(Pl,Tl)}function pc(e,t){var n=El;El|=2;var s=fc();for(Pl===e&&Tl===t||(Vl=null,hc(e,t));;)try{xc();break}catch(r){mc(e,r)}if(Ca(),El=n,kl.current=s,null!==Al)throw Error(a(261));return Pl=null,Tl=0,Ll}function xc(){for(;null!==Al;)yc(Al)}function vc(){for(;null!==Al&&!Ge();)yc(Al)}function yc(e){var t=_l(e.alternate,e,Il);e.memoizedProps=e.pendingProps,null===t?bc(e):Al=t,Cl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Il)))return void(Al=n)}else{if(null!==(n=Jo(n,t)))return n.flags&=32767,void(Al=n);if(null===e)return Ll=6,void(Al=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Al=t);Al=t=e}while(null!==t);0===Ll&&(Ll=5)}function wc(e,t,n){var s=yt,r=Sl.transition;try{Sl.transition=null,yt=1,function(e,t,n,s){do{jc()}while(null!==Jl);if(0!==(6&El))throw Error(a(327));n=e.finishedWork;var r=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var r=31-it(n),a=1<<r;t[r]=0,s[r]=-1,e[r]=-1,n&=~a}}(e,i),e===Pl&&(Al=Pl=null,Tl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Pc(tt,function(){return jc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=Sl.transition,Sl.transition=null;var o=yt;yt=1;var l=El;El|=4,Cl.current=null,function(e,t){if(er=Wt,ms(e=hs())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(s&&0!==s.rangeCount){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,m=null;t:for(;;){for(var f;h!==n||0!==r&&3!==h.nodeType||(l=o+r),h!==i||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)m=h,h=f;for(;;){if(h===e)break t;if(m===n&&++d===r&&(l=o),m===i&&++u===s&&(c=o),null!==(f=h.nextSibling))break;m=(h=m).parentNode}h=f}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(tr={focusedElem:e,selectionRange:n},Wt=!1,Zo=t;null!==Zo;)if(e=(t=Zo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zo=e;else for(;null!==Zo;){t=Zo;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var p=g.memoizedProps,x=g.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?p:to(t.type,p),x);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Nc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zo=e;break}Zo=t.return}g=tl,tl=!1}(e,n),pl(n,e),fs(tr),Wt=!!er,tr=er=null,e.current=n,vl(n,e,r),Xe(),El=l,yt=o,Sl.transition=i}else e.current=n;if(Kl&&(Kl=!1,Jl=e,Gl=r),i=e.pendingLanes,0===i&&(Yl=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(rt,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),sc(e,$e()),null!==t)for(s=e.onRecoverableError,n=0;n<t.length;n++)r=t[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(Wl)throw Wl=!1,e=Hl,Hl=null,e;0!==(1&Gl)&&0!==e.tag&&jc(),i=e.pendingLanes,0!==(1&i)?e===$l?Xl++:(Xl=0,$l=e):Xl=0,Br()}(e,t,n,s)}finally{Sl.transition=r,yt=s}return null}function jc(){if(null!==Jl){var e=bt(Gl),t=Sl.transition,n=yt;try{if(Sl.transition=null,yt=16>e?16:e,null===Jl)var s=!1;else{if(e=Jl,Jl=null,Gl=0,0!==(6&El))throw Error(a(331));var r=El;for(El|=4,Zo=e.current;null!==Zo;){var i=Zo,o=i.child;if(0!==(16&Zo.flags)){var l=i.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Zo=d;null!==Zo;){var u=Zo;switch(u.tag){case 0:case 11:case 15:nl(8,u,i)}var h=u.child;if(null!==h)h.return=u,Zo=h;else for(;null!==Zo;){var m=(u=Zo).sibling,f=u.return;if(al(u),u===d){Zo=null;break}if(null!==m){m.return=f,Zo=m;break}Zo=f}}}var g=i.alternate;if(null!==g){var p=g.child;if(null!==p){g.child=null;do{var x=p.sibling;p.sibling=null,p=x}while(null!==p)}}Zo=i}}if(0!==(2064&i.subtreeFlags)&&null!==o)o.return=i,Zo=o;else e:for(;null!==Zo;){if(0!==(2048&(i=Zo).flags))switch(i.tag){case 0:case 11:case 15:nl(9,i,i.return)}var v=i.sibling;if(null!==v){v.return=i.return,Zo=v;break e}Zo=i.return}}var y=e.current;for(Zo=y;null!==Zo;){var b=(o=Zo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Zo=b;else e:for(o=y;null!==Zo;){if(0!==(2048&(l=Zo).flags))try{switch(l.tag){case 0:case 11:case 15:sl(9,l)}}catch(j){Nc(l,l.return,j)}if(l===o){Zo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Zo=w;break e}Zo=l.return}}if(El=r,Br(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(rt,e)}catch(j){}s=!0}return s}finally{yt=n,Sl.transition=t}}return!1}function _c(e,t,n){e=Ua(e,t=mo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(xt(e,1,t),sc(e,t))}function Nc(e,t,n){if(3===e.tag)_c(e,e,n);else for(;null!==t;){if(3===t.tag){_c(t,e,n);break}if(1===t.tag){var s=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof s.componentDidCatch&&(null===Yl||!Yl.has(s))){t=Ua(t,e=fo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(xt(t,1,e),sc(t,e));break}}t=t.return}}function kc(e,t,n){var s=e.pingCache;null!==s&&s.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Pl===e&&(Tl&n)===n&&(4===Ll||3===Ll&&(130023424&Tl)===Tl&&500>$e()-ql?hc(e,0):zl|=n),sc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=La(e,t))&&(xt(e,t,n),sc(e,n))}function Sc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Ec(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,r=e.memoizedState;null!==r&&(n=r.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(a(314))}null!==s&&s.delete(t),Cc(e,n)}function Pc(e,t){return Ke(e,t)}function Ac(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,n,s){return new Ac(e,t,n,s)}function Ic(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,s,r,i){var o=2;if(s=e,"function"===typeof e)Ic(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case _:return Rc(n.children,r,i,t);case N:o=8,r|=8;break;case k:return(e=Tc(12,n,t,2|r)).elementType=k,e.lanes=i,e;case P:return(e=Tc(13,n,t,r)).elementType=P,e.lanes=i,e;case A:return(e=Tc(19,n,t,r)).elementType=A,e.lanes=i,e;case M:return Oc(n,r,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:o=10;break e;case S:o=9;break e;case E:o=11;break e;case T:o=14;break e;case I:o=16,s=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Tc(o,n,t,r)).elementType=e,t.type=s,t.lanes=i,t}function Rc(e,t,n,s){return(e=Tc(7,e,s,t)).lanes=n,e}function Oc(e,t,n,s){return(e=Tc(22,e,s,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Dc(e,t,n){return(e=Tc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,s,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pt(0),this.expirationTimes=pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Fc(e,t,n,s,r,a,i,o,l){return e=new Uc(e,t,n,o,l),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Tc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Oa(a),e}function qc(e){if(!e)return Sr;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ir(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ir(n))return Rr(e,n,t)}return t}function Bc(e,t,n,s,r,a,i,o,l){return(e=Fc(n,s,!0,e,0,a,0,o,l)).context=qc(null),n=e.current,(a=za(s=ec(),r=tc(n))).callback=void 0!==t&&null!==t?t:null,Ua(n,a,r),e.current.lanes=r,xt(e,r,s),sc(e,s),e}function Vc(e,t,n,s){var r=t.current,a=ec(),i=tc(r);return n=qc(n),null===t.context?t.context=n:t.pendingContext=n,(t=za(a,i)).payload={element:e},null!==(s=void 0===s?null:s)&&(t.callback=s),null!==(e=Ua(r,t,i))&&(nc(e,r,i,a),Fa(e,r,i)),i}function Wc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Yc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}_l=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pr.current)yo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return yo=!1,function(e,t,n){switch(t.tag){case 3:Po(t),ma();break;case 5:$a(t);break;case 1:Ir(t.type)&&Or(t);break;case 4:Ga(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,r=t.memoizedProps.value;Cr(ja,s._currentValue),s._currentValue=r;break;case 13:if(null!==(s=t.memoizedState))return null!==s.dehydrated?(Cr(Qa,1&Qa.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Do(e,t,n):(Cr(Qa,1&Qa.current),null!==(e=Wo(e,t,n))?e.sibling:null);Cr(Qa,1&Qa.current);break;case 19:if(s=0!==(n&t.childLanes),0!==(128&e.flags)){if(s)return Bo(e,t,n);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Cr(Qa,Qa.current),s)break;return null;case 22:case 23:return t.lanes=0,No(e,t,n)}return Wo(e,t,n)}(e,t,n);yo=0!==(131072&e.flags)}else yo=!1,ra&&0!==(1048576&t.flags)&&Qr(t,Yr,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Vo(e,t),e=t.pendingProps;var r=Tr(t,Er.current);Pa(t,n),r=gi(null,t,s,e,r,n);var i=pi();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ir(s)?(i=!0,Or(t)):i=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Oa(t),r.updater=so,t.stateNode=r,r._reactInternals=t,oo(t,s,e,n),t=Eo(null,t,s,!0,i,n)):(t.tag=0,ra&&i&&ea(t),bo(null,t,r,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,s=(r=s._init)(s._payload),t.type=s,r=t.tag=function(e){if("function"===typeof e)return Ic(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===E)return 11;if(e===T)return 14}return 2}(s),e=to(s,e),r){case 0:t=Co(null,t,s,e,n);break e;case 1:t=So(null,t,s,e,n);break e;case 11:t=wo(null,t,s,e,n);break e;case 14:t=jo(null,t,s,to(s.type,e),n);break e}throw Error(a(306,s,""))}return t;case 0:return s=t.type,r=t.pendingProps,Co(e,t,s,r=t.elementType===s?r:to(s,r),n);case 1:return s=t.type,r=t.pendingProps,So(e,t,s,r=t.elementType===s?r:to(s,r),n);case 3:e:{if(Po(t),null===e)throw Error(a(387));s=t.pendingProps,r=(i=t.memoizedState).element,Da(e,t),Ba(t,s,null,n);var o=t.memoizedState;if(s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ao(e,t,s,n,r=lo(Error(a(423)),t));break e}if(s!==r){t=Ao(e,t,s,n,r=lo(Error(a(424)),t));break e}for(sa=cr(t.stateNode.containerInfo.firstChild),na=t,ra=!0,aa=null,n=wa(t,null,s,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ma(),s===r){t=Wo(e,t,n);break e}bo(e,t,s,n)}t=t.child}return t;case 5:return $a(t),null===e&&ca(t),s=t.type,r=t.pendingProps,i=null!==e?e.memoizedProps:null,o=r.children,nr(s,r)?o=null:null!==i&&nr(s,i)&&(t.flags|=32),ko(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Do(e,t,n);case 4:return Ga(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=ba(t,null,s,n):bo(e,t,s,n),t.child;case 11:return s=t.type,r=t.pendingProps,wo(e,t,s,r=t.elementType===s?r:to(s,r),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,r=t.pendingProps,i=t.memoizedProps,o=r.value,Cr(ja,s._currentValue),s._currentValue=o,null!==i)if(os(i.value,o)){if(i.children===r.children&&!Pr.current){t=Wo(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var l=i.dependencies;if(null!==l){o=i.child;for(var c=l.firstContext;null!==c;){if(c.context===s){if(1===i.tag){(c=za(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Ea(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===i.tag)o=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(o=i.return))throw Error(a(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Ea(o,n,t),o=i.sibling}else o=i.child;if(null!==o)o.return=i;else for(o=i;null!==o;){if(o===t){o=null;break}if(null!==(i=o.sibling)){i.return=o.return,o=i;break}o=o.return}i=o}bo(e,t,r.children,n),t=t.child}return t;case 9:return r=t.type,s=t.pendingProps.children,Pa(t,n),s=s(r=Aa(r)),t.flags|=1,bo(e,t,s,n),t.child;case 14:return r=to(s=t.type,t.pendingProps),jo(e,t,s,r=to(s.type,r),n);case 15:return _o(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,r=t.pendingProps,r=t.elementType===s?r:to(s,r),Vo(e,t),t.tag=1,Ir(s)?(e=!0,Or(t)):e=!1,Pa(t,n),ao(t,s,r),oo(t,s,r,n),Eo(null,t,s,!0,e,n);case 19:return Bo(e,t,n);case 22:return No(e,t,n)}throw Error(a(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Jc(e){this._internalRoot=e}function Gc(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function Qc(e,t,n,s,r){var a=n._reactRootContainer;if(a){var i=a;if("function"===typeof r){var o=r;r=function(){var e=Wc(i);o.call(e)}}Vc(t,i,e,r)}else i=function(e,t,n,s,r){if(r){if("function"===typeof s){var a=s;s=function(){var e=Wc(i);a.call(e)}}var i=Bc(t,s,e,0,null,!1,0,"",Zc);return e._reactRootContainer=i,e[fr]=i.current,Bs(8===e.nodeType?e.parentNode:e),dc(),i}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof s){var o=s;s=function(){var e=Wc(l);o.call(e)}}var l=Fc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[fr]=l.current,Bs(8===e.nodeType?e.parentNode:e),dc(function(){Vc(t,l,n,s)}),l}(n,t,e,r,s);return Wc(i)}Gc.prototype.render=Jc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Vc(e,t,null,null)},Gc.prototype.unmount=Jc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Vc(null,e,null,null)}),t[fr]=null}},Gc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Dt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(vt(t,1|n),sc(t,$e()),0===(6&El)&&(Bl=$e()+500,Br()))}break;case 13:dc(function(){var t=La(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Yc(e,1)}},jt=function(e){if(13===e.tag){var t=La(e,134217728);if(null!==t)nc(t,e,134217728,ec());Yc(e,134217728)}},_t=function(e){if(13===e.tag){var t=tc(e),n=La(e,t);if(null!==n)nc(n,e,t,ec());Yc(e,t)}},Nt=function(){return yt},kt=function(e,t){var n=yt;try{return yt=e,t()}finally{yt=n}},je=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var r=wr(s);if(!r)throw Error(a(90));K(s),Z(s,r)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ee=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[yr,br,wr,Ce,Se,cc]},td={findFiberByHostInstance:vr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var sd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!sd.isDisabled&&sd.supportsFiber)try{rt=sd.inject(nd),at=sd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var s=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==s?null:""+s,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,s="",r=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(s=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Fc(e,1,!1,null,0,n,0,s,r),e[fr]=t.current,Bs(8===e.nodeType?e.parentNode:e),new Jc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(a(200));return Qc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var s=null!=n&&n.hydratedSources||null,r=!1,i="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,r,0,i,o),e[fr]=t.current,Bs(e),s)for(e=0;e<s.length;e++)r=(r=(n=s[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,r]:t.mutableSourceEagerHydrationData.push(n,r);return new Gc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(a(200));return Qc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(a(40));return!!e._reactRootContainer&&(dc(function(){Qc(null,null,e,!1,function(){e._reactRootContainer=null,e[fr]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!$c(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return Qc(e,t,n,!1,s)},t.version="18.3.1-next-f1338f8080-20240426"},736:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(374));class a extends r.default{eq(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}neq(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}gt(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}gte(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}lt(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}lte(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}like(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}likeAllOf(e,t){return this.url.searchParams.append(e,"like(all).{".concat(t.join(","),"}")),this}likeAnyOf(e,t){return this.url.searchParams.append(e,"like(any).{".concat(t.join(","),"}")),this}ilike(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,"ilike(all).{".concat(t.join(","),"}")),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,"ilike(any).{".concat(t.join(","),"}")),this}is(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)).join(",");return this.url.searchParams.append(e,"in.(".concat(n,")")),this}contains(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}containedBy(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}rangeGt(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}rangeGte(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}rangeLt(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}rangeLte(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}overlaps(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}textSearch(e,t){let{config:n,type:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r="";"plain"===s?r="pl":"phrase"===s?r="ph":"websearch"===s&&(r="w");const a=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(r,"fts").concat(a,".").concat(t)),this}match(e){return Object.entries(e).forEach(e=>{let[t,n]=e;this.url.searchParams.append(t,"eq.".concat(n))}),this}not(e,t,n){return this.url.searchParams.append(e,"not.".concat(t,".").concat(n)),this}or(e){let{foreignTable:t,referencedTable:n=t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=n?"".concat(n,".or"):"or";return this.url.searchParams.append(s,"(".concat(e,")")),this}filter(e,t,n){return this.url.searchParams.append(e,"".concat(t,".").concat(n)),this}}t.default=a},801:(e,t,n)=>{n.d(t,{supabase:()=>Zt,O:()=>Qt});class s extends Error{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",n=arguments.length>2?arguments[2]:void 0;super(e),this.name=t,this.context=n}}class r extends s{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class a extends s{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class i extends s{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var o;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(o||(o={}));var l=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class c{constructor(e){let{headers:t={},customFetch:s,region:r=o.Any}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.url=e,this.headers=t,this.region=r,this.fetch=(e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}})(s)}setAuth(e){this.headers.Authorization="Bearer ".concat(e)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return l(this,void 0,void 0,function*(){try{const{headers:s,method:o,body:l}=t;let c={},{region:d}=t;d||(d=this.region);const u=new URL("".concat(this.url,"/").concat(e));let h;d&&"any"!==d&&(c["x-region"]=d,u.searchParams.set("forceFunctionRegion",d)),l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!==typeof Blob&&l instanceof Blob||l instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",h=l):"string"===typeof l?(c["Content-Type"]="text/plain",h=l):"undefined"!==typeof FormData&&l instanceof FormData?h=l:(c["Content-Type"]="application/json",h=JSON.stringify(l)));const m=yield this.fetch(u.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),s),body:h}).catch(e=>{throw new r(e)}),f=m.headers.get("x-relay-error");if(f&&"true"===f)throw new a(m);if(!m.ok)throw new i(m);let g,p=(null!==(n=m.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return g="application/json"===p?yield m.json():"application/octet-stream"===p?yield m.blob():"text/event-stream"===p?m:"multipart/form-data"===p?yield m.formData():yield m.text(),{data:g,error:null,response:m}}catch(s){return{data:null,error:s,response:s instanceof i||s instanceof a?s.context:void 0}}})}}var d=n(980);const{PostgrestClient:u,PostgrestQueryBuilder:h,PostgrestFilterBuilder:m,PostgrestTransformBuilder:f,PostgrestBuilder:g,PostgrestError:p}=d;const x=class{static detectEnvironment(){var e;if("undefined"!==typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!==typeof n.g&&"undefined"!==typeof n.g.WebSocket)return{type:"native",constructor:n.g.WebSocket};if("undefined"!==typeof globalThis&&"undefined"!==typeof globalThis.WebSocketPair&&"undefined"===typeof globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!==typeof globalThis&&globalThis.EdgeRuntime||"undefined"!==typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!==typeof process&&process.versions&&process.versions.node){const e=parseInt(process.versions.node.split(".")[0]);return e>=22?"undefined"!==typeof globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:"Node.js ".concat(e," detected but native WebSocket not found."),workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:"Node.js ".concat(e," detected without native WebSocket support."),workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+="\n\nSuggested solution: ".concat(e.workaround)),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}},v="realtime-js/".concat("2.15.1"),y=1e4;var b,w,j,_,N,k;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(b||(b={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(w||(w={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(j||(j={})),function(e){e.websocket="websocket"}(_||(_={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(N||(N={}));class C{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),r=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=n.decode(e.slice(a,a+s));a+=s;const o=n.decode(e.slice(a,a+r));a+=r;return{ref:null,topic:i,event:o,payload:JSON.parse(n.decode(e.slice(a,e.byteLength)))}}}class S{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(k||(k={}));const E=function(e,t){var n;const s=null!==(n=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==n?n:[];return Object.keys(t).reduce((n,r)=>(n[r]=P(r,e,t,s),n),{})},P=(e,t,n,s)=>{const r=t.find(t=>t.name===e),a=null===r||void 0===r?void 0:r.type,i=n[e];return a&&!s.includes(a)?A(a,i):T(i)},A=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return R(t,n)}switch(e){case k.bool:return I(t);case k.float4:case k.float8:case k.int2:case k.int4:case k.int8:case k.numeric:case k.oid:return M(t);case k.json:case k.jsonb:return L(t);case k.timestamp:return O(t);case k.abstime:case k.date:case k.daterange:case k.int4range:case k.int8range:case k.money:case k.reltime:case k.text:case k.time:case k.timestamptz:case k.timetz:case k.tsrange:case k.tstzrange:default:return T(t)}},T=e=>e,I=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},M=e=>{if("string"===typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},L=e=>{if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},R=(e,t)=>{if("string"!==typeof e)return e;const n=e.length-1,s=e[n];if("{"===e[0]&&"}"===s){let s;const a=e.slice(1,n);try{s=JSON.parse("["+a+"]")}catch(r){s=a?a.split(","):[]}return s.map(e=>A(t,e))}return e},O=e=>"string"===typeof e?e.replace(" ","T"):e,D=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class z{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:y;this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive(e){let{status:t,response:n}=e;this.recHooks.filter(e=>e.status===t).forEach(e=>e.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var U,F,q,B;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(U||(U={}));class V{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null===t||void 0===t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=V.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=V.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=V.syncDiff(this.state,e,t,n),s())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const r=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(r,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const n=r[e];if(n){const s=t.map(e=>e.presence_ref),r=n.map(e=>e.presence_ref),a=t.filter(e=>r.indexOf(e.presence_ref)<0),l=n.filter(e=>s.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(r,{joins:i,leaves:o},n,s)}static syncDiff(e,t,n,s){const{joins:r,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(r,(t,s)=>{var r;const a=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(s),a.length>0){const n=e[t].map(e=>e.presence_ref),s=a.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...s)}n(t,a,s)}),this.map(a,(t,n)=>{let r=e[t];if(!r)return;const a=n.map(e=>e.presence_ref);r=r.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=r,s(t,r,n),0===r.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(F||(F={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(q||(q={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(B||(B={}));class W{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},n=arguments.length>2?arguments[2]:void 0;this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=w.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new z(this,j.join,this.params,this.timeout),this.rejoinTimer=new S(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=w.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel","close ".concat(this.topic," ").concat(this._joinRef())),this.state=w.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel","timeout ".concat(this.topic),this.joinPush.timeout),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel","error ".concat(this.topic),e),this.state=w.errored,this.rejoinTimer.scheduleTimeout())}),this._on(j.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new V(this),this.broadcastEndpointURL=D(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==w.closed){const{config:{broadcast:r,presence:a,private:i}}=this.params,o=null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==s?s:[],l=!!this.bindings[q.PRESENCE]&&this.bindings[q.PRESENCE].length>0,c={},d={broadcast:r,presence:Object.assign(Object.assign({},a),{enabled:l}),postgres_changes:o,private:i};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this._onError(t=>null===e||void 0===e?void 0:e(B.CHANNEL_ERROR,t)),this._onClose(()=>null===e||void 0===e?void 0:e(B.CLOSED)),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async t=>{let{postgres_changes:n}=t;var s;if(this.socket.setAuth(),void 0!==n){const t=this.bindings.postgres_changes,r=null!==(s=null===t||void 0===t?void 0:t.length)&&void 0!==s?s:0,a=[];for(let s=0;s<r;s++){const r=t[s],{filter:{event:i,schema:o,table:l,filter:c}}=r,d=n&&n[s];if(!d||d.event!==i||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=w.errored,void(null===e||void 0===e||e(B.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},r),{id:d.id}))}return this.bindings.postgres_changes=a,void(e&&e(B.SUBSCRIBED))}null===e||void 0===e||e(B.SUBSCRIBED)}).receive("error",t=>{this.state=w.errored,null===e||void 0===e||e(B.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null===e||void 0===e||e(B.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===w.joined&&e===q.PRESENCE&&(this.socket.log("channel","resubscribe to ".concat(this.topic," due to change in presence callbacks on joined channel")),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async send(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var s,r,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(r=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===r?void 0:r.broadcast)||void 0===a?void 0:a.ack)||n("ok"),i.receive("ok",()=>n("ok")),i.receive("error",()=>n("error")),i.receive("timeout",()=>n("timed out"))});{const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?"Bearer ".concat(this.socket.accessTokenValue):"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(r){return"AbortError"===r.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=w.leaving;const t=()=>{this.socket.log("channel","leave ".concat(this.topic)),this._trigger(j.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new z(this,j.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null===n||void 0===n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=w.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const s=new AbortController,r=setTimeout(()=>s.abort(),n),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(r),a}_push(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");let s=new z(this,e,t,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel","discarded push due to buffer overflow: ".concat(e.event),e.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,r;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=j;if(n&&[i,o,l,c].indexOf(a)>=0&&n!==this._joinRef())return;let d=this._onMessage(a,t,n);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,n,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===s?void 0:s.toLocaleLowerCase())===a}).map(e=>e.callback(d,n)):null===(r=this.bindings[a])||void 0===r||r.filter(e=>{var n,s,r,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(n=e.filter)||void 0===n?void 0:n.event;return a&&(null===(s=t.ids)||void 0===s?void 0:s.includes(a))&&("*"===i||(null===i||void 0===i?void 0:i.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const n=null===(o=null===(i=null===e||void 0===e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===n||n===(null===(l=null===t||void 0===t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"===typeof d&&"ids"in d){const e=d.data,{schema:t,table:n,commit_timestamp:s,type:r,errors:a}=e,i={schema:t,table:n,commit_timestamp:s,eventType:r,new:{},old:{},errors:a};d=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(d,n)})}_isClosed(){return this.state===w.closed}_isJoined(){return this.state===w.joined}_isJoining(){return this.state===w.joining}_isLeaving(){return this.state===w.leaving}_replyEventName(e){return"chan_reply_".concat(e)}_on(e,t,n){const s=e.toLocaleLowerCase(),r={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(r):this.bindings[s]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===n&&W.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(j.close,{},e)}_onError(e){this._on(j.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=w.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=E(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=E(e.columns,e.old_record)),t}}const H=()=>{},Y=25e3,K=10,J=100,G=[1e3,2e3,5e3,1e4];class X{constructor(e,t){var s;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=y,this.transport=null,this.heartbeatIntervalMs=Y,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=H,this.ref=0,this.reconnectTimer=null,this.logger=H,this.conn=null,this.sendBuffer=[],this.serializer=new C,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)}).catch(e=>{throw new Error("Failed to load @supabase/node-fetch: ".concat(e.message,". ")+"This is required for HTTP requests in Node.js environments without native fetch.")})}:fetch),function(){return t(...arguments)}},!(null===(s=null===t||void 0===t?void 0:t.params)||void 0===s?void 0:s.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint="".concat(e,"/").concat(_.websocket),this.httpEndpoint=D(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null===t||void 0===t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=x.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error("".concat(t,"\n\n")+'To use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })');throw new Error("WebSocket not available: ".concat(t))}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case b.connecting:return N.Connecting;case b.open:return N.Open;case b.closing:return N.Closing;default:return N.Closed}}isConnected(){return this.connectionState()===N.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};const n="realtime:".concat(e),s=this.getChannels().find(e=>e.topic===n);if(s)return s;{const n=new W("realtime:".concat(e),t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:s,ref:r}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push","".concat(t," ").concat(n," (").concat(r,")"),s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},J);this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{"phoenix"===e.topic&&"phx_reply"===e.event&&this.heartbeatCallback("ok"===e.payload.status?"ok":"error"),e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:n,payload:s,ref:r}=e,a=r?"(".concat(r,")"):"",i=s.status||"";this.log("receive","".concat(i," ").concat(t," ").concat(n," ").concat(a).trim(),s),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,s,r)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport","connected to ".concat(this.endpointURL())),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker","starting worker for from ".concat(this.workerUrl)):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport","".concat(e)),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(j.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return"".concat(e).concat(n).concat(s)}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e=t||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(t=>{const n={access_token:e,version:v};e&&t.updateJoinPayload(n),t.joinedOnce&&t._isJoined()&&t._push(j.access_token,{access_token:e})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"general";this.setAuth().catch(t=>{this.log("error","error setting auth in ".concat(e),t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(s){this.log("error","error in ".concat(e," callback"),s)}})}catch(n){this.log("error","error triggering ".concat(e," callbacks"),n)}}_setupReconnectionTimer(){this.reconnectTimer=new S(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},K)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,s,r,a,i,o,l;if(this.transport=null!==(t=null===e||void 0===e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(n=null===e||void 0===e?void 0:e.timeout)&&void 0!==n?n:y,this.heartbeatIntervalMs=null!==(s=null===e||void 0===e?void 0:e.heartbeatIntervalMs)&&void 0!==s?s:Y,this.worker=null!==(r=null===e||void 0===e?void 0:e.worker)&&void 0!==r&&r,this.accessToken=null!==(a=null===e||void 0===e?void 0:e.accessToken)&&void 0!==a?a:null,(null===e||void 0===e?void 0:e.params)&&(this.params=e.params),(null===e||void 0===e?void 0:e.logger)&&(this.logger=e.logger),((null===e||void 0===e?void 0:e.logLevel)||(null===e||void 0===e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(i=null===e||void 0===e?void 0:e.reconnectAfterMs)&&void 0!==i?i:e=>G[e-1]||1e4,this.encode=null!==(o=null===e||void 0===e?void 0:e.encode)&&void 0!==o?o:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(l=null===e||void 0===e?void 0:e.decode)&&void 0!==l?l:this.serializer.decode.bind(this.serializer),this.worker){if("undefined"!==typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null===e||void 0===e?void 0:e.workerUrl}}}class $ extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Z(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}class Q extends ${constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class ee extends ${constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var te=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const ne=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},se=e=>{if(Array.isArray(e))return e.map(e=>se(e));if("function"===typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(e=>{let[n,s]=e;const r=n.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[r]=se(s)}),t};var re=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const ae=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ie=(e,t,s)=>re(void 0,void 0,void 0,function*(){const r=yield te(void 0,void 0,void 0,function*(){return"undefined"===typeof Response?(yield Promise.resolve().then(n.bind(n,630))).Response:Response});e instanceof r&&!(null===s||void 0===s?void 0:s.noResolveJson)?e.json().then(n=>{const s=e.status||500,r=(null===n||void 0===n?void 0:n.statusCode)||s+"";t(new Q(ae(n),s,r))}).catch(e=>{t(new ee(ae(e),e))}):t(new ee(ae(e),e))}),oe=(e,t,n,s)=>{const r={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"!==e&&s?((e=>{if("object"!==typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)})(s)?(r.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),r.body=JSON.stringify(s)):r.body=s,(null===t||void 0===t?void 0:t.duplex)&&(r.duplex=t.duplex),Object.assign(Object.assign({},r),n)):r};function le(e,t,n,s,r,a){return re(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(n,oe(t,s,r,a)).then(e=>{if(!e.ok)throw e;return(null===s||void 0===s?void 0:s.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>ie(e,o,s))})})}function ce(e,t,n,s){return re(this,void 0,void 0,function*(){return le(e,"GET",t,n,s)})}function de(e,t,n,s,r){return re(this,void 0,void 0,function*(){return le(e,"POST",t,s,r,n)})}function ue(e,t,n,s,r){return re(this,void 0,void 0,function*(){return le(e,"PUT",t,s,r,n)})}function he(e,t,n,s,r){return re(this,void 0,void 0,function*(){return le(e,"DELETE",t,s,r,n)})}var me=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const fe={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},ge={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class pe{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;this.url=e,this.headers=t,this.bucketId=n,this.fetch=ne(s)}uploadOrUpdate(e,t,n,s){return me(this,void 0,void 0,function*(){try{let r;const a=Object.assign(Object.assign({},ge),s);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;"undefined"!==typeof Blob&&n instanceof Blob?(r=new FormData,r.append("cacheControl",a.cacheControl),o&&r.append("metadata",this.encodeMetadata(o)),r.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(r=n,r.append("cacheControl",a.cacheControl),o&&r.append("metadata",this.encodeMetadata(o))):(r=n,i["cache-control"]="max-age=".concat(a.cacheControl),i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null===s||void 0===s?void 0:s.headers)&&(i=Object.assign(Object.assign({},i),s.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?ue:de)(this.fetch,"".concat(this.url,"/object/").concat(c),r,Object.assign({headers:i},(null===a||void 0===a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}})}upload(e,t,n){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return me(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),a=this._getFinalPath(r),i=new URL(this.url+"/object/upload/sign/".concat(a));i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:ge.upsert},s),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!==typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,a["cache-control"]="max-age=".concat(t.cacheControl),a["content-type"]=t.contentType);return{data:{path:r,fullPath:(yield ue(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(o){if(Z(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return me(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);(null===t||void 0===t?void 0:t.upsert)&&(s["x-upsert"]="true");const r=yield de(this.fetch,"".concat(this.url,"/object/upload/sign/").concat(n),{},{headers:s}),a=new URL(this.url+r.url),i=a.searchParams.get("token");if(!i)throw new $("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}})}update(e,t,n){return me(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return me(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}copy(e,t,n){return me(this,void 0,void 0,function*(){try{return{data:{path:(yield de(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null===n||void 0===n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return me(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),r=yield de(this.fetch,"".concat(this.url,"/object/sign/").concat(s),Object.assign({expiresIn:t},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const a=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return r={signedUrl:encodeURI("".concat(this.url).concat(r.signedURL).concat(a))},{data:r,error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return me(this,void 0,void 0,function*(){try{const s=yield de(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:t,paths:e},{headers:this.headers}),r=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(this.url).concat(e.signedURL).concat(r)):null})),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}download(e,t){return me(this,void 0,void 0,function*(){const n="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{}),r=s?"?".concat(s):"";try{const t=this._getFinalPath(e),s=yield ce(this.fetch,"".concat(this.url,"/").concat(n,"/").concat(t).concat(r),{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(a){if(Z(a))return{data:null,error:a};throw a}})}info(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield ce(this.fetch,"".concat(this.url,"/object/info/").concat(t),{headers:this.headers});return{data:se(e),error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}})}exists(e){return me(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,s){return re(this,void 0,void 0,function*(){return le(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}(this.fetch,"".concat(this.url,"/object/").concat(t),{headers:this.headers}),{data:!0,error:null}}catch(n){if(Z(n)&&n instanceof ee){const e=n.originalError;if([400,404].includes(null===e||void 0===e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],r=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==r&&s.push(r);const a="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==i&&s.push(i);let o=s.join("&");return""!==o&&(o="?".concat(o)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(a,"/public/").concat(n).concat(o))}}}remove(e){return me(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}list(e,t,n){return me(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},fe),t),{prefix:e||""});return{data:yield de(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),s,{headers:this.headers},n),error:null}}catch(s){if(Z(s))return{data:null,error:s};throw s}})}listV2(e,t){return me(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield de(this.fetch,"".concat(this.url,"/object/list-v2/").concat(this.bucketId),n,{headers:this.headers},t),error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!==typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return"".concat(this.bucketId,"/").concat(e.replace(/^\/+/,""))}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}const xe={"X-Client-Info":"storage-js/".concat("2.11.0")};var ve=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class ye{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;const r=new URL(e);if(null===s||void 0===s?void 0:s.useNewHostname){/supabase\.(co|in|red)$/.test(r.hostname)&&!r.hostname.includes("storage.supabase.")&&(r.hostname=r.hostname.replace("supabase.","storage.supabase."))}this.url=r.href,this.headers=Object.assign(Object.assign({},xe),t),this.fetch=ne(n)}listBuckets(){return ve(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers}),error:null}}catch(e){if(Z(e))return{data:null,error:e};throw e}})}getBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield ce(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}createBucket(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return ve(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return ve(this,void 0,void 0,function*(){try{return{data:yield ue(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}})}emptyBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield de(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ve(this,void 0,void 0,function*(){try{return{data:yield he(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers}),error:null}}catch(t){if(Z(t))return{data:null,error:t};throw t}})}}class be extends ye{constructor(e){super(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2?arguments[2]:void 0,arguments.length>3?arguments[3]:void 0)}from(e){return new pe(this.url,this.headers,e,this.fetch)}}let we="";we="undefined"!==typeof Deno?"deno":"undefined"!==typeof document?"web":"undefined"!==typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const je={headers:{"X-Client-Info":"supabase-js-".concat(we,"/").concat("2.56.0")}},_e={schema:"public"},Ne={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},ke={};var Ce=n(630),Se=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const Ee=e=>{let t;return t=e||("undefined"===typeof fetch?Ce.default:fetch),function(){return t(...arguments)}},Pe=(e,t,n)=>{const s=Ee(n),r="undefined"===typeof Headers?Ce.Headers:Headers;return(n,a)=>Se(void 0,void 0,void 0,function*(){var i;const o=null!==(i=yield t())&&void 0!==i?i:e;let l=new r(null===a||void 0===a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(o)),s(n,Object.assign(Object.assign({},a),{headers:l}))})};var Ae=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};const Te="2.71.1",Ie=3e4,Me=9e4,Le={"X-Client-Info":"gotrue-js/".concat(Te)},Re="X-Supabase-Api-Version",Oe={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},De=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class ze extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function Ue(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}class Fe extends ze{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class qe extends ze{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Be extends ze{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class Ve extends Be{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class We extends Be{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class He extends Be{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Ye extends Be{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ke extends Be{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Je extends Be{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ge(e){return Ue(e)&&"AuthRetryableFetchError"===e.name}class Xe extends Be{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class $e extends Be{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ze="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Qe=" \t\n\r=".split(""),et=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Qe.length;t+=1)e[Qe[t].charCodeAt(0)]=-2;for(let t=0;t<Ze.length;t+=1)e[Ze[t].charCodeAt(0)]=t;return e})();function tt(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Ze[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Ze[e]),t.queuedBits-=6}}function nt(e,t,n){const s=et[e];if(!(s>-1)){if(-2===s)return;throw new Error('Invalid Base64-URL character "'.concat(String.fromCharCode(e),'"'))}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function st(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},a=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(0===(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,s,n)};for(let i=0;i<e.length;i+=1)nt(e.charCodeAt(i),r,a);return t.join("")}function rt(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error("Unrecognized Unicode codepoint: ".concat(e.toString(16)))}t(e)}function at(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}rt(s,t)}}function it(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let r=0;r<e.length;r+=1)nt(e.charCodeAt(r),n,s);return new Uint8Array(t)}function ot(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>tt(e,n,s)),tt(null,n,s),t.join("")}const lt=()=>"undefined"!==typeof window&&"undefined"!==typeof document,ct={tested:!1,writable:!1},dt=()=>{if(!lt())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(ct.tested)return ct.writable;const e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),ct.tested=!0,ct.writable=!0}catch(t){ct.tested=!0,ct.writable=!1}return ct.writable};const ut=e=>{let t;return t=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Promise.resolve().then(n.bind(n,630)).then(e=>{let{default:n}=e;return n(...t)})}:fetch),function(){return t(...arguments)}},ht=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},mt=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(s){return n}},ft=async(e,t)=>{await e.removeItem(t)};class gt{constructor(){this.promise=new gt.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function pt(e){const t=e.split(".");if(3!==t.length)throw new $e("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!De.test(t[n]))throw new $e("JWT not in base64url format");return{header:JSON.parse(st(t[0])),payload:JSON.parse(st(t[1])),signature:it(t[2]),raw:{header:t[0],payload:t[1]}}}function xt(e){return("0"+e.toString(16)).substr(-2)}async function vt(e){if(!("undefined"!==typeof crypto&&"undefined"!==typeof crypto.subtle&&"undefined"!==typeof TextEncoder))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yt(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=function(){const e=new Uint32Array(56);if("undefined"===typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,xt).join("")}();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await ht(e,"".concat(t,"-code-verifier"),r);const a=await vt(s);return[a,s===a?"plain":"s256"]}gt.promiseConstructor=Promise;const bt=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const wt=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function jt(e){if(!wt.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _t(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"===typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "'.concat(t,'" property of the session object is not supported. Please use getUser() instead.'))},set:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))},deleteProperty:(e,t)=>{throw new Error('@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "'.concat(t,'" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.'))}})}function Nt(e){return JSON.parse(JSON.stringify(e))}var kt=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};const Ct=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),St=[502,503,504];async function Et(e){var t,n;if(!("object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json))throw new Je(Ct(e),0);if(St.includes(e.status))throw new Je(Ct(e),e.status);let s,r;try{s=await e.json()}catch(i){throw new qe(Ct(i),i)}const a=function(e){const t=e.headers.get(Re);if(!t)return null;if(!t.match(bt))return null;try{return new Date("".concat(t,"T00:00:00.0Z"))}catch(i){return null}}(e);if(a&&a.getTime()>=Oe.timestamp&&"object"===typeof s&&s&&"string"===typeof s.code?r=s.code:"object"===typeof s&&s&&"string"===typeof s.error_code&&(r=s.error_code),r){if("weak_password"===r)throw new Xe(Ct(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===r)throw new Ve}else if("object"===typeof s&&s&&"object"===typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0))throw new Xe(Ct(s),e.status,s.weak_password.reasons);throw new Fe(Ct(s),e.status||500,r)}async function Pt(e,t,n,s){var r;const a=Object.assign({},null===s||void 0===s?void 0:s.headers);a[Re]||(a[Re]=Oe.name),(null===s||void 0===s?void 0:s.jwt)&&(a.Authorization="Bearer ".concat(s.jwt));const i=null!==(r=null===s||void 0===s?void 0:s.query)&&void 0!==r?r:{};(null===s||void 0===s?void 0:s.redirectTo)&&(i.redirect_to=s.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,n,s,r,a){const i=((e,t,n,s)=>{const r={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))})(t,s,r,a);let o;try{o=await e(n,Object.assign({},i))}catch(l){throw console.error(l),new Je(Ct(l),0)}o.ok||await Et(o);if(null===s||void 0===s?void 0:s.noResolveJson)return o;try{return await o.json()}catch(l){await Et(l)}}(e,t,n+o,{headers:a,noResolveJson:null===s||void 0===s?void 0:s.noResolveJson},{},null===s||void 0===s?void 0:s.body);return(null===s||void 0===s?void 0:s.xform)?null===s||void 0===s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}function At(e){var t;let n=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Tt(e){const t=At(e);return!t.error&&e.weak_password&&"object"===typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"===typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"===typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function It(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Mt(e){return{data:e,error:null}}function Lt(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:a}=e,i=kt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:a},user:Object.assign({},i)},error:null}}function Rt(e){return e}const Ot=["global","local","others"];var Dt=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n};class zt{constructor(e){let{url:t="",headers:n={},fetch:s}=e;this.url=t,this.headers=n,this.fetch=ut(s),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ot[0];if(Ot.indexOf(t)<0)throw new Error("@supabase/auth-js: Parameter scope must be one of ".concat(Ot.join(", ")));try{return await Pt(this.fetch,"POST","".concat(this.url,"/logout?scope=").concat(t),{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await Pt(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:It})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=Dt(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=null===n||void 0===n?void 0:n.newEmail,delete s.newEmail),await Pt(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:s,headers:this.headers,xform:Lt,redirectTo:null===t||void 0===t?void 0:t.redirectTo})}catch(t){if(Ue(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await Pt(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:It})}catch(t){if(Ue(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,r,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await Pt(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null===e||void 0===e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(r=null===(s=null===e||void 0===e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==r?r:""},xform:Rt});if(c.error)throw c.error;const d=await c.json(),u=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(n,"Page")]=t}),l.total=parseInt(u)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Ue(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){jt(e);try{return await Pt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:It})}catch(t){if(Ue(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){jt(e);try{return await Pt(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:t,headers:this.headers,xform:It})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async deleteUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];jt(e);try{return await Pt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:t},xform:It})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){jt(e.userId);try{const{data:t,error:n}=await Pt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(Ue(t))return{data:null,error:t};throw t}}async _deleteFactor(e){jt(e.userId),jt(e.id);try{return{data:await Pt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers}),error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}}}function Ut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const Ft=!!(globalThis&&dt()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class qt extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Bt extends qt{}async function Vt(e,t,n){Ft&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort(),Ft&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw Ft&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new Bt('Acquiring an exclusive Navigator LockManager lock "'.concat(e,'" immediately failed'));if(Ft)try{const e=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(e,null,"  "))}catch(r){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",r)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}Ft&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,s.name);try{return await n()}finally{Ft&&console.log("@supabase/gotrue-js: navigatorLock: released",e,s.name)}}))}!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();const Wt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Le,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ht(e,t,n){return await n()}const Yt={};class Kt{constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Kt.nextInstanceID,Kt.nextInstanceID+=1,this.instanceID>0&&lt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Wt),e);if(this.logDebugMessages=!!s.debug,"function"===typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new zt({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=ut(s.fetch),this.lock=s.lock||Ht,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:lt()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Vt:this.lock=Ht,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:dt()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Ut(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Ut(this.memoryStorage)),lt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",r)}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=Yt[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Yt[this.storageKey]=Object.assign(Object.assign({},Yt[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Yt[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Yt[this.storageKey]=Object.assign(Object.assign({},Yt[this.storageKey]),{cachedAt:e})}_debug(){if(this.logDebugMessages){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this.logger("GoTrueClient@".concat(this.instanceID," (").concat(Te,") ").concat((new Date).toISOString()),...t)}return this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(s){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),lt()&&this.detectSessionInUrl&&"none"!==n){const{data:s,error:r}=await this._getSessionFromURL(t,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),function(e){return Ue(e)&&"AuthImplicitGrantRedirectError"===e.name}(r)){const t=null===(e=r.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:r}}return await this._removeSession(),{error:r}}const{session:a,redirectType:i}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ue(t)?{error:t}:{error:new qe("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const r=await Pt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{data:null!==(n=null===(t=null===e||void 0===e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:At}),{data:a,error:i}=r;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Ue(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(e){var t,n,s;try{let r;if("email"in e){const{email:n,password:s,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await yt(this.storage,this.storageKey)),r=await Pt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===a||void 0===a?void 0:a.emailRedirectTo,body:{email:n,password:s,data:null!==(t=null===a||void 0===a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null===a||void 0===a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:At})}else{if(!("phone"in e))throw new He("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;r=await Pt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:t,password:a,data:null!==(n=null===i||void 0===i?void 0:i.data)&&void 0!==n?n:{},channel:null!==(s=null===i||void 0===i?void 0:i.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null===i||void 0===i?void 0:i.captchaToken}},xform:At})}}const{data:a,error:i}=r;if(i||!a)return{data:{user:null,session:null},error:i};const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(r){if(Ue(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:s,options:r}=e;t=await Pt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:n,password:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:Tt})}else{if(!("phone"in e))throw new He("You must provide either an email or phone number and a password");{const{phone:n,password:s,options:r}=e;t=await Pt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:n,password:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},xform:Tt})}}const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s}):{data:{user:null,session:null},error:new We}}catch(t){if(Ue(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,r;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error('@supabase/auth-js: Unsupported chain "'.concat(t,'"'))}async signInWithSolana(e){var t,n,s,r,a,i,o,l,c,d,u,h;let m,f;if("message"in e)m=e.message,f=e.signature;else{const{chain:u,wallet:h,statement:g,options:p}=e;let x;if(lt())if("object"===typeof h)x=h;else{const e=window;if(!("solana"in e)||"object"!==typeof e.solana||!("signIn"in e.solana&&"function"===typeof e.solana.signIn||"signMessage"in e.solana&&"function"===typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");x=e.solana}else{if("object"!==typeof h||!(null===p||void 0===p?void 0:p.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=h}const v=new URL(null!==(t=null===p||void 0===p?void 0:p.url)&&void 0!==t?t:window.location.href);if("signIn"in x&&x.signIn){const e=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null===p||void 0===p?void 0:p.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"===typeof e[0])t=e[0];else{if(!(e&&"object"===typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"===typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");m="string"===typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in x)||"function"!==typeof x.signMessage||!("publicKey"in x)||"object"!==typeof x||!x.publicKey||!("toBase58"in x.publicKey)||"function"!==typeof x.publicKey.toBase58)throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=["".concat(v.host," wants you to sign in with your Solana account:"),x.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1","URI: ".concat(v.href),"Issued At: ".concat(null!==(s=null===(n=null===p||void 0===p?void 0:p.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==s?s:(new Date).toISOString()),...(null===(r=null===p||void 0===p?void 0:p.signInWithSolana)||void 0===r?void 0:r.notBefore)?["Not Before: ".concat(p.signInWithSolana.notBefore)]:[],...(null===(a=null===p||void 0===p?void 0:p.signInWithSolana)||void 0===a?void 0:a.expirationTime)?["Expiration Time: ".concat(p.signInWithSolana.expirationTime)]:[],...(null===(i=null===p||void 0===p?void 0:p.signInWithSolana)||void 0===i?void 0:i.chainId)?["Chain ID: ".concat(p.signInWithSolana.chainId)]:[],...(null===(o=null===p||void 0===p?void 0:p.signInWithSolana)||void 0===o?void 0:o.nonce)?["Nonce: ".concat(p.signInWithSolana.nonce)]:[],...(null===(l=null===p||void 0===p?void 0:p.signInWithSolana)||void 0===l?void 0:l.requestId)?["Request ID: ".concat(p.signInWithSolana.requestId)]:[],...(null===(d=null===(c=null===p||void 0===p?void 0:p.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...p.signInWithSolana.resources.map(e=>"- ".concat(e))]:[]].join("\n");const e=await x.signMessage((new TextEncoder).encode(m),"utf8");if(!e||!(e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:n}=await Pt(this.fetch,"POST","".concat(this.url,"/token?grant_type=web3"),{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:ot(f)},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:At});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new We}}catch(g){if(Ue(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await mt(this.storage,"".concat(this.storageKey,"-code-verifier")),[n,s]=(null!==t&&void 0!==t?t:"").split("/");try{const{data:t,error:r}=await Pt(this.fetch,"POST","".concat(this.url,"/token?grant_type=pkce"),{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:At});if(await ft(this.storage,"".concat(this.storageKey,"-code-verifier")),r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!==s&&void 0!==s?s:null}),error:r}):{data:{user:null,session:null,redirectType:null},error:new We}}catch(r){if(Ue(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:r,nonce:a}=e,i=await Pt(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:n,id_token:s,access_token:r,nonce:a,gotrue_meta_security:{captcha_token:null===t||void 0===t?void 0:t.captchaToken}},xform:At}),{data:o,error:l}=i;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new We}}catch(t){if(Ue(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,r,a;try{if("email"in e){const{email:s,options:r}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await yt(this.storage,this.storageKey));const{error:o}=await Pt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:s,data:null!==(t=null===r||void 0===r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(n=null===r||void 0===r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:n}=e,{data:i,error:o}=await Pt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:t,data:null!==(s=null===n||void 0===n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(r=null===n||void 0===n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken},channel:null!==(a=null===n||void 0===n?void 0:n.channel)&&void 0!==a?a:"sms"}});return{data:{user:null,session:null,messageId:null===i||void 0===i?void 0:i.message_id},error:o}}throw new He("You must provide either an email or phone number.")}catch(i){if(Ue(i))return{data:{user:null,session:null},error:i};throw i}}async verifyOtp(e){var t,n;try{let s,r;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:a,error:i}=await Pt(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:s,xform:At});if(i)throw i;if(!a)throw new Error("An error occurred on token verification.");const o=a.session,l=a.user;return(null===o||void 0===o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(Ue(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let r=null,a=null;return"pkce"===this.flowType&&([r,a]=await yt(this.storage,this.storageKey)),await Pt(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(s=null===e||void 0===e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:a}),headers:this.headers,xform:Mt})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Ve;const{error:s}=await Pt(this.fetch,"GET","".concat(this.url,"/reauthenticate"),{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Ue(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t="".concat(this.url,"/resend");if("email"in e){const{email:n,type:s,options:r}=e,{error:a}=await Pt(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}},redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:n,type:s,options:r}=e,{data:a,error:i}=await Pt(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:null===r||void 0===r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null===a||void 0===a?void 0:a.message_id},error:i}}throw new He("You must provide either an email or phone number and a type")}catch(t){if(Ue(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock("lock:".concat(this.storageKey),e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await mt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<Me;if(this._debug("#__loadSession()","session has".concat(n?"":" not"," expired"),"expires_at",e.expires_at),!n){if(this.userStorage){const t=await mt(this.userStorage,this.storageKey+"-user");(null===t||void 0===t?void 0:t.user)?e.user=t.user:e.user=_t()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,s)=>(t||"user"!==n||(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,s))})}return{data:{session:e},error:null}}const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await Pt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:It}):await this._useSession(async e=>{var t,n,s;const{data:r,error:a}=e;if(a)throw a;return(null===(t=r.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await Pt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:null!==(s=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0,xform:It}):{data:{user:null},error:new Ve}})}catch(t){if(Ue(t))return function(e){return Ue(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await ft(this.storage,"".concat(this.storageKey,"-code-verifier"))),{data:{user:null},error:t};throw t}}async updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return await this._useSession(async n=>{const{data:s,error:r}=n;if(r)throw r;if(!s.session)throw new Ve;const a=s.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await yt(this.storage,this.storageKey));const{data:l,error:c}=await Pt(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===t||void 0===t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:It});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(n){if(Ue(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ve;const t=Date.now()/1e3;let n=t,s=!0,r=null;const{payload:a}=pt(e.access_token);if(a.exp&&(n=a.exp,s=n<=t),s){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:s,error:a}=await this._getUser(e.access_token);if(a)throw a;r={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(t){if(Ue(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:s,error:r}=t;if(r)throw r;e=null!==(n=s.session)&&void 0!==n?n:void 0}if(!(null===e||void 0===e?void 0:e.refresh_token))throw new Ve;const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ue(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!lt())throw new Ye("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Ye(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ke("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Ye("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ke("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:r,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!r||!i||!a||!l)throw new Ye("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(i);let u=c+d;o&&(u=parseInt(o));const h=u-c;1e3*h<=Ie&&console.warn("@supabase/gotrue-js: Session as retrieved from URL expires in ".concat(h,"s, should have been closer to ").concat(d,"s"));const m=u-d;c-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,u,c):c-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,u,c);const{data:f,error:g}=await this._getUser(r);if(g)throw g;const p={provider_token:n,provider_refresh_token:s,access_token:r,expires_in:d,expires_at:u,refresh_token:a,token_type:l,user:f.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:p,redirectType:e.type},error:null}}catch(n){if(Ue(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await mt(this.storage,"".concat(this.storageKey,"-code-verifier"));return!(!e.code||!t)}async signOut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut(){let{scope:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{scope:"global"};return await this._useSession(async t=>{var n;const{data:s,error:r}=t;if(r)return{error:r};const a=null===(n=s.session)||void 0===n?void 0:n.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return Ue(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await ft(this.storage,"".concat(this.storageKey,"-code-verifier"))),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:s},error:r}=t;if(r)throw r;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(r){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r),console.error(r)}})}async resetPasswordForEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=null,s=null;"pkce"===this.flowType&&([n,s]=await yt(this.storage,this.storageKey,!0));try{return await Pt(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(Ue(r))return{data:null,error:r};throw r}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Ue(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async t=>{var n,s,r,a,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider("".concat(this.url,"/user/identities/authorize"),e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:!0});return await Pt(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(s)throw s;return lt()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null===n||void 0===n?void 0:n.url),{data:{provider:e.provider,url:null===n||void 0===n?void 0:n.url},error:null}}catch(n){if(Ue(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:r,error:a}=t;if(a)throw a;return await Pt(this.fetch,"DELETE","".concat(this.url,"/user/identities/").concat(e.identity_id),{headers:this.headers,jwt:null!==(s=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0})})}catch(t){if(Ue(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t="#_refreshAccessToken(".concat(e.substring(0,5),"...)");this._debug(t,"begin");try{const r=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await Pt(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:At})),s=(e,t)=>{const n=200*Math.pow(2,e);return t&&Ge(t)&&Date.now()+n-r<Ie},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await n(a);if(!s(a,null,t))return void e(t)}catch(r){if(!s(a,r))return void t(r)}})()}))}catch(r){if(this._debug(t,"error",r),Ue(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}var n,s}_isValidSession(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider("".concat(this.url,"/authorize"),e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),lt()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const r=await mt(this.storage,this.storageKey);if(r&&this.userStorage){let t=await mt(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:r.user},await ht(this.userStorage,this.storageKey+"-user",t)),r.user=null!==(e=null===t||void 0===t?void 0:t.user)&&void 0!==e?e:_t()}else if(r&&!r.user&&!r.user){const e=await mt(this.storage,this.storageKey+"-user");e&&(null===e||void 0===e?void 0:e.user)?(r.user=e.user,await ft(this.storage,this.storageKey+"-user"),await ht(this.storage,this.storageKey,r)):r.user=_t()}if(this._debug(n,"session from storage",r),!this._isValidSession(r))return this._debug(n,"session is not valid"),void(null!==r&&await this._removeSession());const a=1e3*(null!==(t=r.expires_at)&&void 0!==t?t:1/0)-Date.now()<Me;if(this._debug(n,"session has".concat(a?"":" not"," expired with margin of ").concat(Me,"s")),a){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(console.error(e),Ge(e)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(r.user&&!0===r.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(r.access_token);!t&&(null===e||void 0===e?void 0:e.user)?(r.user=e.user,await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(n,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){return this._debug(n,"error",r),void console.error(r)}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Ve;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s="#_callRefreshToken(".concat(e.substring(0,5),"...)");this._debug(s,"begin");try{this.refreshingDeferred=new gt;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Ve;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(r){if(this._debug(s,"error",r),Ue(r)){const e={session:null,error:r};return Ge(r)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const s="#_notifyAllSubscribers(".concat(e,")");this._debug(s,"begin",t,"broadcast = ".concat(n));try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],r=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(r){s.push(r)}});if(await Promise.all(r),s.length>0){for(let e=0;e<s.length;e+=1)console.error(s[e]);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!n&&t.user&&await ht(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const s=Nt(e);await ht(this.storage,this.storageKey,s)}else{const e=Nt(t);await ht(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await ft(this.storage,this.storageKey),await ft(this.storage,this.storageKey+"-code-verifier"),await ft(this.storage,this.storageKey+"-user"),this.userStorage&&await ft(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&lt()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Ie);this.autoRefreshTicker=e,e&&"object"===typeof e&&"function"===typeof e.unref?e.unref():"undefined"!==typeof Deno&&"function"===typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*n.expires_at-t)/Ie);this._debug("#_autoRefreshTokenTick()","access token expires in ".concat(s," ticks, a tick lasts ").concat(Ie,"ms, refresh threshold is ").concat(3," ticks")),s<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){console.error("Auto refresh tick failed with error. This is likely a transient error.",e)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof qt))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!lt()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t="#_onVisibilityChanged(".concat(e,")");this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=["provider=".concat(encodeURIComponent(t))];if((null===n||void 0===n?void 0:n.redirectTo)&&s.push("redirect_to=".concat(encodeURIComponent(n.redirectTo))),(null===n||void 0===n?void 0:n.scopes)&&s.push("scopes=".concat(encodeURIComponent(n.scopes))),"pkce"===this.flowType){const[e,t]=await yt(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:"".concat(encodeURIComponent(e)),code_challenge_method:"".concat(encodeURIComponent(t))});s.push(n.toString())}if(null===n||void 0===n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);s.push(e.toString())}return(null===n||void 0===n?void 0:n.skipBrowserRedirect)&&s.push("skip_http_redirect=".concat(n.skipBrowserRedirect)),"".concat(e,"?").concat(s.join("&"))}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await Pt(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Ue(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:r,error:a}=t;if(a)return{data:null,error:a};const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await Pt(this.fetch,"POST","".concat(this.url,"/factors"),{body:i,headers:this.headers,jwt:null===(n=null===r||void 0===r?void 0:r.session)||void 0===n?void 0:n.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(s=null===o||void 0===o?void 0:o.totp)||void 0===s?void 0:s.qr_code)&&(o.totp.qr_code="data:image/svg+xml;utf-8,".concat(o.totp.qr_code)),{data:o,error:null})})}catch(t){if(Ue(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;if(r)return{data:null,error:r};const{data:a,error:i}=await Pt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token});return i?{data:null,error:i}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:i})})}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await Pt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null===s||void 0===s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(Ue(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null===e||void 0===e?void 0:e.factors)||[],s=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),r=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:s,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:r}=e;if(r)return{data:null,error:r};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=pt(s.access_token);let i=null;a.aal&&(i=a.aal);let o=i;(null!==(n=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(o="aal2");return{data:{currentLevel:i,nextLevel:o,currentAuthenticationMethods:a.amr||[]},error:null}}))}async fetchJwk(e){let t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{keys:[]}).keys.find(t=>t.kid===e);if(t)return t;const n=Date.now();if(t=this.jwks.keys.find(t=>t.kid===e),t&&this.jwks_cached_at+6e5>n)return t;const{data:s,error:r}=await Pt(this.fetch,"GET","".concat(this.url,"/.well-known/jwks.json"),{headers:this.headers});if(r)throw r;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=n,t=s.keys.find(t=>t.kid===e),t||null):null}async getClaims(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:s,payload:r,signature:a,raw:{header:i,payload:o}}=pt(n);(null===t||void 0===t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(r.exp);const l=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(s.kid,(null===t||void 0===t?void 0:t.keys)?{keys:t.keys}:null===t||void 0===t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:r,header:s,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!await crypto.subtle.verify(c,d,a,function(e){const t=[];return at(e,e=>t.push(e)),new Uint8Array(t)}("".concat(i,".").concat(o))))throw new $e("Invalid JWT signature");return{data:{claims:r,header:s,signature:a},error:null}}catch(n){if(Ue(n))return{data:null,error:n};throw n}}}Kt.nextInstanceID=0;const Jt=Kt;class Gt extends Jt{constructor(e){super(e)}}var Xt=function(e,t,n,s){return new(n||(n=Promise))(function(r,a){function i(e){try{l(s.next(e))}catch(t){a(t)}}function o(e){try{l(s.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class $t{constructor(e,t,n){var s,r,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const i=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(i);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c="sb-".concat(l.hostname.split(".")[0],"-auth-token"),d=function(e,t){var n,s;const{db:r,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:d,global:u}=t,h={db:Object.assign(Object.assign({},l),r),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},d),i),storage:{},global:Object.assign(Object.assign(Object.assign({},u),o),{headers:Object.assign(Object.assign({},null!==(n=null===u||void 0===u?void 0:u.headers)&&void 0!==n?n:{}),null!==(s=null===o||void 0===o?void 0:o.headers)&&void 0!==s?s:{})}),accessToken:()=>Ae(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!==n&&void 0!==n?n:{},{db:_e,realtime:ke,auth:Object.assign(Object.assign({},Ne),{storageKey:c}),global:je});this.storageKey=null!==(s=d.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(r=d.global.headers)&&void 0!==r?r:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error("@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.".concat(String(t)," is not possible"))}})):this.auth=this._initSupabaseAuthClient(null!==(a=d.auth)&&void 0!==a?a:{},this.headers,d.global.fetch),this.fetch=Pe(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new u(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new be(this.storageUrl.href,this.headers,this.fetch,null===n||void 0===n?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new c(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.rest.rpc(e,t,n)}channel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Xt(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey})}_initSupabaseAuthClient(e,t,n){let{autoRefreshToken:s,persistSession:r,detectSessionInUrl:a,storage:i,storageKey:o,flowType:l,lock:c,debug:d}=e;const u={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Gt({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),t),storageKey:o,autoRefreshToken:s,persistSession:r,detectSessionInUrl:a,storage:i,flowType:l,lock:c,debug:d,fetch:n,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new X(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null===t||void 0===t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}(function(){if("undefined"!==typeof window)return!1;if("undefined"===typeof process)return!1;const e=process.version;if(void 0===e||null===e)return!1;const t=e.match(/^v(\d+)\./);return!!t&&parseInt(t[1],10)<=18})()&&console.warn("\u26a0\ufe0f  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Zt=((e,t,n)=>new $t(e,t,n))("https://fxkftrczarwuytnufprv.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4a2Z0cmN6YXJ3dXl0bnVmcHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODM5NzgsImV4cCI6MjA3MTY1OTk3OH0.L0zzO_KooHRwJdf6z92Cla05pSH8UF7PRGVDK8lS3Ns"),Qt=async(e,t)=>{const n=e.name.split(".").pop(),s="".concat(t,"-").concat(Date.now(),".").concat(n),r="".concat(t,"/").concat(s),{error:a}=await Zt.storage.from("profile-images").upload(r,e,{cacheControl:"3600",upsert:!1});if(a)throw new Error("\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc2e4\ud328: ".concat(a.message));const{data:{publicUrl:i}}=Zt.storage.from("profile-images").getPublicUrl(r);return i}},829:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const r=s(n(736));t.default=class{constructor(e,t){let{headers:n={},schema:s,fetch:r}=t;this.url=e,this.headers=new Headers(n),this.schema=s,this.fetch=r}select(e){let{head:t=!1,count:n}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=t?"HEAD":"GET";let a=!1;const i=(null!==e&&void 0!==e?e:"*").split("").map(e=>/\s/.test(e)&&!a?"":('"'===e&&(a=!a),e)).join("");return this.url.searchParams.set("select",i),n&&this.headers.append("Prefer","count=".concat(n)),new r.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(e){let{count:t,defaultToNull:n=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;if(t&&this.headers.append("Prefer","count=".concat(t)),n||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(e){let{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i;if(this.headers.append("Prefer","resolution=".concat(n?"ignore":"merge","-duplicates")),void 0!==t&&this.url.searchParams.set("on_conflict",t),s&&this.headers.append("Prefer","count=".concat(s)),a||this.headers.append("Prefer","missing=default"),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>'"'.concat(e,'"'));this.url.searchParams.set("columns",e.join(","))}}return new r.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(e){let{count:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var n;return t&&this.headers.append("Prefer","count=".concat(t)),new r.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete(){let{count:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};var t;return e&&this.headers.append("Prefer","count=".concat(e)),new r.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(t=this.fetch)&&void 0!==t?t:fetch})}}},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)},980:function(e,t,n){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PostgrestError=t.PostgrestBuilder=t.PostgrestTransformBuilder=t.PostgrestFilterBuilder=t.PostgrestQueryBuilder=t.PostgrestClient=void 0;const r=s(n(210));t.PostgrestClient=r.default;const a=s(n(829));t.PostgrestQueryBuilder=a.default;const i=s(n(736));t.PostgrestFilterBuilder=i.default;const o=s(n(374));t.PostgrestTransformBuilder=o.default;const l=s(n(286));t.PostgrestBuilder=l.default;const c=s(n(611));t.PostgrestError=c.default,t.default={PostgrestClient:r.default,PostgrestQueryBuilder:a.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:c.default}}},t={};function n(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,n),a.exports}n.m=e,(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(s,r){if(1&r&&(s=this(s)),8&r)return s;if("object"===typeof s&&s){if(4&r&&s.__esModule)return s;if(16&r&&"function"===typeof s.then)return s}var a=Object.create(null);n.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var o=2&r&&s;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>i[e]=()=>s[e]);return i.default=()=>s,n.d(a,i),a}})(),n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,s)=>(n.f[s](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{693:"2d8c0d4d",878:"34ccfcfd",950:"64caa66e"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="mompick:";n.l=(s,r,a,i)=>{if(e[s])e[s].push(r);else{var o,l;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==s||u.getAttribute("data-webpack")==t+a){o=u;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+a),o.src=s),e[s]=[r];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(m);var r=e[s];if(delete e[s],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach(e=>e(n)),t)return t(n)},m=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,s)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)s.push(r[2]);else{var a=new Promise((n,s)=>r=e[t]=[n,s]);s.push(r[2]=a);var i=n.p+n.u(t),o=new Error;n.l(i,s=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var a=s&&("load"===s.type?"missing":s.type),i=s&&s.target&&s.target.src;o.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",o.name="ChunkLoadError",o.type=a,o.request=i,r[1](o)}},"chunk-"+t,t)}};var t=(t,s)=>{var r,a,i=s[0],o=s[1],l=s[2],c=0;if(i.some(t=>0!==e[t])){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(l)l(n)}for(t&&t(s);c<i.length;c++)a=i[c],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0},s=self.webpackChunkmompick=self.webpackChunkmompick||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var s,r=n(43),a=n.t(r,2),i=n(391),o=n(950),l=n.t(o,2);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},c.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const d="popstate";function u(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function h(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function m(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t,n,s){return void 0===n&&(n=null),c({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?p(t):t,{state:n,key:t&&t.key||s||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),s&&"#"!==s&&(t+="#"===s.charAt(0)?s:"#"+s),t}function p(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function x(e,t,n,r){void 0===r&&(r={});let{window:a=document.defaultView,v5Compat:i=!1}=r,o=a.history,l=s.Pop,h=null,p=x();function x(){return(o.state||{idx:null}).idx}function v(){l=s.Pop;let e=x(),t=null==e?null:e-p;p=e,h&&h({action:l,location:b.location,delta:t})}function y(e){let t="null"!==a.location.origin?a.location.origin:a.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),u(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==p&&(p=0,o.replaceState(c({},o.state,{idx:p}),""));let b={get action(){return l},get location(){return e(a,o)},listen(e){if(h)throw new Error("A history only accepts one active listener");return a.addEventListener(d,v),h=e,()=>{a.removeEventListener(d,v),h=null}},createHref:e=>t(a,e),createURL:y,encodeLocation(e){let t=y(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=s.Push;let r=f(b.location,e,t);n&&n(r,e),p=x()+1;let c=m(r,p),d=b.createHref(r);try{o.pushState(c,"",d)}catch(u){if(u instanceof DOMException&&"DataCloneError"===u.name)throw u;a.location.assign(d)}i&&h&&h({action:l,location:b.location,delta:1})},replace:function(e,t){l=s.Replace;let r=f(b.location,e,t);n&&n(r,e),p=x();let a=m(r,p),c=b.createHref(r);o.replaceState(a,"",c),i&&h&&h({action:l,location:b.location,delta:0})},go:e=>o.go(e)};return b}var v;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(v||(v={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function y(e,t,n){return void 0===n&&(n="/"),b(e,t,n,!1)}function b(e,t,n,s){let r=L(("string"===typeof t?p(t):t).pathname||"/",n);if(null==r)return null;let a=w(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(a);let i=null;for(let o=0;null==i&&o<a.length;++o){let e=M(r);i=T(a[o],e,s)}return i}function w(e,t,n,s){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===s&&(s="");let r=(e,r,a)=>{let i={relativePath:void 0===a?e.path||"":a,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};i.relativePath.startsWith("/")&&(u(i.relativePath.startsWith(s),'Absolute route path "'+i.relativePath+'" nested under path "'+s+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),i.relativePath=i.relativePath.slice(s.length));let o=U([s,i.relativePath]),l=n.concat(i);e.children&&e.children.length>0&&(u(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),w(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:A(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let s of j(e.path))r(e,t,s);else r(e,t)}),t}function j(e){let t=e.split("/");if(0===t.length)return[];let[n,...s]=t,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(0===s.length)return r?[a,""]:[a];let i=j(s.join("/")),o=[];return o.push(...i.map(e=>""===e?a:[a,e].join("/"))),r&&o.push(...i),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const _=/^:[\w-]+$/,N=3,k=2,C=1,S=10,E=-2,P=e=>"*"===e;function A(e,t){let n=e.split("/"),s=n.length;return n.some(P)&&(s+=E),t&&(s+=k),n.filter(e=>!P(e)).reduce((e,t)=>e+(_.test(t)?N:""===t?C:S),s)}function T(e,t,n){void 0===n&&(n=!1);let{routesMeta:s}=e,r={},a="/",i=[];for(let o=0;o<s.length;++o){let e=s[o],l=o===s.length-1,c="/"===a?t:t.slice(a.length)||"/",d=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!s[s.length-1].route.index&&(d=I({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(r,d.params),i.push({params:r,pathname:U([a,d.pathname]),pathnameBase:F(U([a,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(a=U([a,d.pathnameBase]))}return i}function I(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);h("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let s=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(s.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(s.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))");let a=new RegExp(r,t?void 0:"i");return[a,s]}(e.path,e.caseSensitive,e.end),r=t.match(n);if(!r)return null;let a=r[0],i=a.replace(/(.)\/+$/,"$1"),o=r.slice(1),l=s.reduce((e,t,n)=>{let{paramName:s,isOptional:r}=t;if("*"===s){let e=o[n]||"";i=a.slice(0,a.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[s]=r&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:a,pathnameBase:i,pattern:e}}function M(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return h(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function L(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&"/"!==s?null:e.slice(n)||"/"}function R(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function D(e,t){let n=O(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function z(e,t,n,s){let r;void 0===s&&(s=!1),"string"===typeof e?r=p(e):(r=c({},e),u(!r.pathname||!r.pathname.includes("?"),R("?","pathname","search",r)),u(!r.pathname||!r.pathname.includes("#"),R("#","pathname","hash",r)),u(!r.search||!r.search.includes("#"),R("#","search","hash",r)));let a,i=""===e||""===r.pathname,o=i?"/":r.pathname;if(null==o)a=n;else{let e=t.length-1;if(!s&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;r.pathname=t.join("/")}a=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:s="",hash:r=""}="string"===typeof e?p(e):e,a=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:a,search:q(s),hash:B(r)}}(r,a),d=o&&"/"!==o&&o.endsWith("/"),h=(i||"."===o)&&n.endsWith("/");return l.pathname.endsWith("/")||!d&&!h||(l.pathname+="/"),l}const U=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),q=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",B=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const W=["post","put","patch","delete"],H=(new Set(W),["get",...W]);new Set(H),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function Y(){return Y=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Y.apply(this,arguments)}const K=r.createContext(null);const J=r.createContext(null);const G=r.createContext(null);const X=r.createContext(null);const $=r.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=r.createContext(null);function Q(){return null!=r.useContext(X)}function ee(){return Q()||u(!1),r.useContext(X).location}function te(e){r.useContext(G).static||r.useLayoutEffect(e)}function ne(){let{isDataRoute:e}=r.useContext($);return e?function(){let{router:e}=he(de.UseNavigateStable),t=fe(ue.UseNavigateStable),n=r.useRef(!1);te(()=>{n.current=!0});let s=r.useCallback(function(s,r){void 0===r&&(r={}),n.current&&("number"===typeof s?e.navigate(s):e.navigate(s,Y({fromRouteId:t},r)))},[e,t]);return s}():function(){Q()||u(!1);let e=r.useContext(K),{basename:t,future:n,navigator:s}=r.useContext(G),{matches:a}=r.useContext($),{pathname:i}=ee(),o=JSON.stringify(D(a,n.v7_relativeSplatPath)),l=r.useRef(!1);return te(()=>{l.current=!0}),r.useCallback(function(n,r){if(void 0===r&&(r={}),!l.current)return;if("number"===typeof n)return void s.go(n);let a=z(n,JSON.parse(o),i,"path"===r.relative);null==e&&"/"!==t&&(a.pathname="/"===a.pathname?t:U([t,a.pathname])),(r.replace?s.replace:s.push)(a,r.state,r)},[t,s,o,i,e])}()}function se(){let{matches:e}=r.useContext($),t=e[e.length-1];return t?t.params:{}}function re(e,t,n,a){Q()||u(!1);let{navigator:i}=r.useContext(G),{matches:o}=r.useContext($),l=o[o.length-1],c=l?l.params:{},d=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,m=ee();if(t){var f;let e="string"===typeof t?p(t):t;"/"===d||(null==(f=e.pathname)?void 0:f.startsWith(d))||u(!1),h=e}else h=m;let g=h.pathname||"/",x=g;if("/"!==d){let e=d.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=y(e,{pathname:x});let b=ce(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:U([d,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?d:U([d,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,a);return t&&b?r.createElement(X.Provider,{value:{location:Y({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:s.Pop}},b):b}function ae(){let e=function(){var e;let t=r.useContext(Z),n=me(ue.UseRouteError),s=fe(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[s]}(),t=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",a={padding:"0.5rem",backgroundColor:s};return r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),n?r.createElement("pre",{style:a},n):null,null)}const ie=r.createElement(ae,null);class oe extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?r.createElement($.Provider,{value:this.props.routeContext},r.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:s}=e,a=r.useContext(K);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),r.createElement($.Provider,{value:t},s)}function ce(e,t,n,s){var a;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===s&&(s=null),null==e){var i;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(i=s)&&i.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(a=n)?void 0:a.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||u(!1),o=o.slice(0,Math.min(o.length,e+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let r=0;r<o.length;r++){let e=o[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(d=r),e.route.id){let{loaderData:t,errors:s}=n,r=e.route.loader&&void 0===t[e.route.id]&&(!s||void 0===s[e.route.id]);if(e.route.lazy||r){c=!0,o=d>=0?o.slice(0,d+1):[o[0]];break}}}return o.reduceRight((e,s,a)=>{let i,u=!1,h=null,m=null;var f;n&&(i=l&&s.route.id?l[s.route.id]:void 0,h=s.route.errorElement||ie,c&&(d<0&&0===a?(f="route-fallback",!1||ge[f]||(ge[f]=!0),u=!0,m=null):d===a&&(u=!0,m=s.route.hydrateFallbackElement||null)));let g=t.concat(o.slice(0,a+1)),p=()=>{let t;return t=i?h:u?m:s.route.Component?r.createElement(s.route.Component,null):s.route.element?s.route.element:e,r.createElement(le,{match:s,routeContext:{outlet:e,matches:g,isDataRoute:null!=n},children:t})};return n&&(s.route.ErrorBoundary||s.route.errorElement||0===a)?r.createElement(oe,{location:n.location,revalidation:n.revalidation,component:h,error:i,children:p(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):p()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function he(e){let t=r.useContext(K);return t||u(!1),t}function me(e){let t=r.useContext(J);return t||u(!1),t}function fe(e){let t=function(){let e=r.useContext($);return e||u(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||u(!1),n.route.id}const ge={};function pe(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}a.startTransition;function xe(e){u(!1)}function ve(e){let{basename:t="/",children:n=null,location:a,navigationType:i=s.Pop,navigator:o,static:l=!1,future:c}=e;Q()&&u(!1);let d=t.replace(/^\/*/,"/"),h=r.useMemo(()=>({basename:d,navigator:o,static:l,future:Y({v7_relativeSplatPath:!1},c)}),[d,c,o,l]);"string"===typeof a&&(a=p(a));let{pathname:m="/",search:f="",hash:g="",state:x=null,key:v="default"}=a,y=r.useMemo(()=>{let e=L(m,d);return null==e?null:{location:{pathname:e,search:f,hash:g,state:x,key:v},navigationType:i}},[d,m,f,g,x,v,i]);return null==y?null:r.createElement(G.Provider,{value:h},r.createElement(X.Provider,{children:n,value:y}))}function ye(e){let{children:t,location:n}=e;return re(be(t),n)}new Promise(()=>{});r.Component;function be(e,t){void 0===t&&(t=[]);let n=[];return r.Children.forEach(e,(e,s)=>{if(!r.isValidElement(e))return;let a=[...t,s];if(e.type===r.Fragment)return void n.push.apply(n,be(e.props.children,a));e.type!==xe&&u(!1),e.props.index&&e.props.children&&u(!1);let i={id:e.props.id||a.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(i.children=be(e.props.children,a)),n.push(i)}),n}function we(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(e=>[n,e]):[[n,s]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);try{window.__reactRouterVersion="6"}catch(yd){}new Map;const je=a.startTransition;l.flushSync,a.useId;function _e(e){let{basename:t,children:n,future:s,window:a}=e,i=r.useRef();var o;null==i.current&&(i.current=(void 0===(o={window:a,v5Compat:!0})&&(o={}),x(function(e,t){let{pathname:n,search:s,hash:r}=e.location;return f("",{pathname:n,search:s,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:g(t)},null,o)));let l=i.current,[c,d]=r.useState({action:l.action,location:l.location}),{v7_startTransition:u}=s||{},h=r.useCallback(e=>{u&&je?je(()=>d(e)):d(e)},[d,u]);return r.useLayoutEffect(()=>l.listen(h),[l,h]),r.useEffect(()=>pe(s),[s]),r.createElement(ve,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:s})}"undefined"!==typeof window&&"undefined"!==typeof window.document&&window.document.createElement;var Ne,ke;function Ce(e){let t=r.useRef(we(e)),n=r.useRef(!1),s=ee(),a=r.useMemo(()=>function(e,t){let n=we(e);return t&&t.forEach((e,s)=>{n.has(s)||t.getAll(s).forEach(e=>{n.append(s,e)})}),n}(s.search,n.current?null:t.current),[s.search]),i=ne(),o=r.useCallback((e,t)=>{const s=we("function"===typeof e?e(a):e);n.current=!0,i("?"+s,t)},[i,a]);return[a,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ne||(Ne={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(ke||(ke={}));var Se=n(801),Ee=n(579);const Pe=()=>{const[e,t]=(0,r.useState)(!0),[n,s]=(0,r.useState)(!1),a=ne();return(0,r.useEffect)(()=>{(async()=>{try{const{data:{session:e}}=await Se.supabase.auth.getSession(),t=setTimeout(()=>{s(!0),setTimeout(()=>{a(e?"/main":"/login")},500)},2e3);return()=>clearTimeout(t)}catch(e){console.error("\uc138\uc158 \ud655\uc778 \uc624\ub958:",e);const t=setTimeout(()=>{s(!0),setTimeout(()=>a("/signup"),500)},2e3);return()=>clearTimeout(t)}})()},[a]),(0,Ee.jsx)("div",{className:"fixed inset-0 bg-gradient-to-br from-white via-orange-50 to-pink-50 flex items-center justify-center transition-transform duration-500 ease-in-out z-[9999] ".concat(n?"-translate-x-full":"translate-x-0"),children:(0,Ee.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,Ee.jsx)("img",{src:"/mompicksplash.png",alt:"\ub9d8\ud53d \uc2a4\ud50c\ub798\uc2dc",className:"w-full h-full object-cover",style:{maxWidth:"400px",maxHeight:"824px"}})})})};var Ae=n(555);const Te=(0,r.createContext)({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"}),Ie=(0,r.createContext)({}),Me=(0,r.createContext)(null),Le="undefined"!==typeof document,Re=Le?r.useLayoutEffect:r.useEffect,Oe=(0,r.createContext)({strict:!1}),De=e=>e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),ze="data-"+De("framerAppearId");function Ue(e){return e&&"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Fe(e){return"string"===typeof e||Array.isArray(e)}function qe(e){return null!==e&&"object"===typeof e&&"function"===typeof e.start}const Be=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Ve=["initial",...Be];function We(e){return qe(e.animate)||Ve.some(t=>Fe(e[t]))}function He(e){return Boolean(We(e)||e.variants)}function Ye(e){const{initial:t,animate:n}=function(e,t){if(We(e)){const{initial:t,animate:n}=e;return{initial:!1===t||Fe(t)?t:void 0,animate:Fe(n)?n:void 0}}return!1!==e.inherit?t:{}}(e,(0,r.useContext)(Ie));return(0,r.useMemo)(()=>({initial:t,animate:n}),[Ke(t),Ke(n)])}function Ke(e){return Array.isArray(e)?e.join(" "):e}const Je={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ge={};for(const wd in Je)Ge[wd]={isEnabled:e=>Je[wd].some(t=>!!e[t])};const Xe=(0,r.createContext)({}),$e=(0,r.createContext)({}),Ze=Symbol.for("motionComponentSymbol");function Qe(e){let{preloadedFeatures:t,createVisualElement:n,useRender:s,useVisualState:a,Component:i}=e;t&&function(e){for(const t in e)Ge[t]=(0,Ae.A)((0,Ae.A)({},Ge[t]),e[t])}(t);const o=(0,r.forwardRef)(function(e,o){let l;const c=(0,Ae.A)((0,Ae.A)((0,Ae.A)({},(0,r.useContext)(Te)),e),{},{layoutId:et(e)}),{isStatic:d}=c,u=Ye(e),h=a(e,d);if(!d&&Le){u.visualElement=function(e,t,n,s){const{visualElement:a}=(0,r.useContext)(Ie),i=(0,r.useContext)(Oe),o=(0,r.useContext)(Me),l=(0,r.useContext)(Te).reducedMotion,c=(0,r.useRef)();s=s||i.renderer,!c.current&&s&&(c.current=s(e,{visualState:t,parent:a,props:n,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const d=c.current;(0,r.useInsertionEffect)(()=>{d&&d.update(n,o)});const u=(0,r.useRef)(Boolean(n[ze]&&!window.HandoffComplete));return Re(()=>{d&&(d.render(),u.current&&d.animationState&&d.animationState.animateChanges())}),(0,r.useEffect)(()=>{d&&(d.updateFeatures(),!u.current&&d.animationState&&d.animationState.animateChanges(),u.current&&(u.current=!1,window.HandoffComplete=!0))}),d}(i,h,c,n);const e=(0,r.useContext)($e),s=(0,r.useContext)(Oe).strict;u.visualElement&&(l=u.visualElement.loadFeatures(c,s,t,e))}return r.createElement(Ie.Provider,{value:u},l&&u.visualElement?r.createElement(l,(0,Ae.A)({visualElement:u.visualElement},c)):null,s(i,e,function(e,t,n){return(0,r.useCallback)(s=>{s&&e.mount&&e.mount(s),t&&(s?t.mount(s):t.unmount()),n&&("function"===typeof n?n(s):Ue(n)&&(n.current=s))},[t])}(h,u.visualElement,o),h,d,u.visualElement))});return o[Ze]=i,o}function et(e){let{layoutId:t}=e;const n=(0,r.useContext)(Xe).id;return n&&void 0!==t?n+"-"+t:t}function tt(e){function t(t){return Qe(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;const n=new Map;return new Proxy(t,{get:(e,s)=>(n.has(s)||n.set(s,t(s)),n.get(s))})}const nt=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function st(e){return"string"===typeof e&&!e.includes("-")&&!!(nt.indexOf(e)>-1||/[A-Z]/.test(e))}const rt={};const at=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],it=new Set(at);function ot(e,t){let{layout:n,layoutId:s}=t;return it.has(e)||e.startsWith("origin")||(n||void 0!==s)&&(!!rt[e]||"opacity"===e)}const lt=e=>Boolean(e&&e.getVelocity),ct={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},dt=at.length;const ut=e=>t=>"string"===typeof t&&t.startsWith(e),ht=ut("--"),mt=ut("var(--"),ft=(e,t)=>t&&"number"===typeof e?t.transform(e):e,gt=(e,t,n)=>Math.min(Math.max(n,e),t),pt={test:e=>"number"===typeof e,parse:parseFloat,transform:e=>e},xt=(0,Ae.A)((0,Ae.A)({},pt),{},{transform:e=>gt(0,1,e)}),vt=(0,Ae.A)((0,Ae.A)({},pt),{},{default:1}),yt=e=>Math.round(1e5*e)/1e5,bt=/(-)?([\d]*\.?[\d])+/g,wt=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,jt=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function _t(e){return"string"===typeof e}const Nt=e=>({test:t=>_t(t)&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>"".concat(t).concat(e)}),kt=Nt("deg"),Ct=Nt("%"),St=Nt("px"),Et=Nt("vh"),Pt=Nt("vw"),At=(0,Ae.A)((0,Ae.A)({},Ct),{},{parse:e=>Ct.parse(e)/100,transform:e=>Ct.transform(100*e)}),Tt=(0,Ae.A)((0,Ae.A)({},pt),{},{transform:Math.round}),It={borderWidth:St,borderTopWidth:St,borderRightWidth:St,borderBottomWidth:St,borderLeftWidth:St,borderRadius:St,radius:St,borderTopLeftRadius:St,borderTopRightRadius:St,borderBottomRightRadius:St,borderBottomLeftRadius:St,width:St,maxWidth:St,height:St,maxHeight:St,size:St,top:St,right:St,bottom:St,left:St,padding:St,paddingTop:St,paddingRight:St,paddingBottom:St,paddingLeft:St,margin:St,marginTop:St,marginRight:St,marginBottom:St,marginLeft:St,rotate:kt,rotateX:kt,rotateY:kt,rotateZ:kt,scale:vt,scaleX:vt,scaleY:vt,scaleZ:vt,skew:kt,skewX:kt,skewY:kt,distance:St,translateX:St,translateY:St,translateZ:St,x:St,y:St,z:St,perspective:St,transformPerspective:St,opacity:xt,originX:At,originY:At,originZ:St,zIndex:Tt,fillOpacity:xt,strokeOpacity:xt,numOctaves:Tt};function Mt(e,t,n,s){const{style:r,vars:a,transform:i,transformOrigin:o}=e;let l=!1,c=!1,d=!0;for(const u in t){const e=t[u];if(ht(u)){a[u]=e;continue}const n=It[u],s=ft(e,n);if(it.has(u)){if(l=!0,i[u]=s,!d)continue;e!==(n.default||0)&&(d=!1)}else u.startsWith("origin")?(c=!0,o[u]=s):r[u]=s}if(t.transform||(l||s?r.transform=function(e,t,n,s){let{enableHardwareAcceleration:r=!0,allowTransformNone:a=!0}=t,i="";for(let o=0;o<dt;o++){const t=at[o];void 0!==e[t]&&(i+="".concat(ct[t]||t,"(").concat(e[t],") "))}return r&&!e.z&&(i+="translateZ(0)"),i=i.trim(),s?i=s(e,n?"":i):a&&n&&(i="none"),i}(e.transform,n,d,s):r.transform&&(r.transform="none")),c){const{originX:e="50%",originY:t="50%",originZ:n=0}=o;r.transformOrigin="".concat(e," ").concat(t," ").concat(n)}}const Lt=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Rt(e,t,n){for(const s in t)lt(t[s])||ot(s,n)||(e[s]=t[s])}function Ot(e,t,n){const s={};return Rt(s,e.style||{},e),Object.assign(s,function(e,t,n){let{transformTemplate:s}=e;return(0,r.useMemo)(()=>{const e={style:{},transform:{},transformOrigin:{},vars:{}};return Mt(e,t,{enableHardwareAcceleration:!n},s),Object.assign({},e.vars,e.style)},[t])}(e,t,n)),e.transformValues?e.transformValues(s):s}function Dt(e,t,n){const s={},r=Ot(e,t,n);return e.drag&&!1!==e.dragListener&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(s.tabIndex=0),s.style=r,s}const zt=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ut(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||zt.has(e)}let Ft=e=>!Ut(e);try{(qt=require("@emotion/is-prop-valid").default)&&(Ft=e=>e.startsWith("on")?!Ut(e):qt(e))}catch(bd){}var qt;function Bt(e,t){if(null==e)return{};var n,s,r=function(e,t){if(null==e)return{};var n={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(-1!==t.indexOf(s))continue;n[s]=e[s]}return n}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)n=a[s],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Vt(e,t,n){return"string"===typeof e?e:St.transform(t+n*e)}const Wt={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ht={offset:"strokeDashoffset",array:"strokeDasharray"};const Yt=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function Kt(e,t,n,s,r){let{attrX:a,attrY:i,attrScale:o,originX:l,originY:c,pathLength:d,pathSpacing:u=1,pathOffset:h=0}=t;if(Mt(e,Bt(t,Yt),n,r),s)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:m,style:f,dimensions:g}=e;m.transform&&(g&&(f.transform=m.transform),delete m.transform),g&&(void 0!==l||void 0!==c||f.transform)&&(f.transformOrigin=function(e,t,n){const s=Vt(t,e.x,e.width),r=Vt(n,e.y,e.height);return"".concat(s," ").concat(r)}(g,void 0!==l?l:.5,void 0!==c?c:.5)),void 0!==a&&(m.x=a),void 0!==i&&(m.y=i),void 0!==o&&(m.scale=o),void 0!==d&&function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;const a=r?Wt:Ht;e[a.offset]=St.transform(-s);const i=St.transform(t),o=St.transform(n);e[a.array]="".concat(i," ").concat(o)}(m,d,u,h,!1)}const Jt=()=>(0,Ae.A)((0,Ae.A)({},{style:{},transform:{},transformOrigin:{},vars:{}}),{},{attrs:{}}),Gt=e=>"string"===typeof e&&"svg"===e.toLowerCase();function Xt(e,t,n,s){const a=(0,r.useMemo)(()=>{const n=Jt();return Kt(n,t,{enableHardwareAcceleration:!1},Gt(s),e.transformTemplate),(0,Ae.A)((0,Ae.A)({},n.attrs),{},{style:(0,Ae.A)({},n.style)})},[t]);if(e.style){const t={};Rt(t,e.style,e),a.style=(0,Ae.A)((0,Ae.A)({},t),a.style)}return a}function $t(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(t,n,s,a,i)=>{let{latestValues:o}=a;const l=(st(t)?Xt:Dt)(n,o,i,t),c=function(e,t,n){const s={};for(const r in e)"values"===r&&"object"===typeof e.values||(Ft(r)||!0===n&&Ut(r)||!t&&!Ut(r)||e.draggable&&r.startsWith("onDrag"))&&(s[r]=e[r]);return s}(n,"string"===typeof t,e),d=(0,Ae.A)((0,Ae.A)((0,Ae.A)({},c),l),{},{ref:s}),{children:u}=n,h=(0,r.useMemo)(()=>lt(u)?u.get():u,[u]);return(0,r.createElement)(t,(0,Ae.A)((0,Ae.A)({},d),{},{children:h}))}}function Zt(e,t,n,s){let{style:r,vars:a}=t;Object.assign(e.style,r,s&&s.getProjectionStyles(n));for(const i in a)e.style.setProperty(i,a[i])}const Qt=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function en(e,t,n,s){Zt(e,t,void 0,s);for(const r in t.attrs)e.setAttribute(Qt.has(r)?r:De(r),t.attrs[r])}function tn(e,t){const{style:n}=e,s={};for(const r in n)(lt(n[r])||t.style&&lt(t.style[r])||ot(r,e))&&(s[r]=n[r]);return s}function nn(e,t){const n=tn(e,t);for(const s in e)if(lt(e[s])||lt(t[s])){n[-1!==at.indexOf(s)?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s]=e[s]}return n}function sn(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,s,r)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,s,r)),t}const rn=e=>Array.isArray(e),an=e=>rn(e)?e[e.length-1]||0:e;function on(e){const t=lt(e)?e.get():e;return n=t,Boolean(n&&"object"===typeof n&&n.mix&&n.toValue)?t.toValue():t;var n}const ln=["transitionEnd","transition"];const cn=e=>(t,n)=>{const s=(0,r.useContext)(Ie),a=(0,r.useContext)(Me),i=()=>function(e,t,n,s){let{scrapeMotionValuesFromProps:r,createRenderState:a,onMount:i}=e;const o={latestValues:dn(t,n,s,r),renderState:a()};return i&&(o.mount=e=>i(t,e,o)),o}(e,t,s,a);return n?i():function(e){const t=(0,r.useRef)(null);return null===t.current&&(t.current=e()),t.current}(i)};function dn(e,t,n,s){const r={},a=s(e,{});for(const h in a)r[h]=on(a[h]);let{initial:i,animate:o}=e;const l=We(e),c=He(e);t&&c&&!l&&!1!==e.inherit&&(void 0===i&&(i=t.initial),void 0===o&&(o=t.animate));let d=!!n&&!1===n.initial;d=d||!1===i;const u=d?o:i;if(u&&"boolean"!==typeof u&&!qe(u)){(Array.isArray(u)?u:[u]).forEach(t=>{const n=sn(e,t);if(!n)return;const{transitionEnd:s,transition:a}=n,i=Bt(n,ln);for(const e in i){let t=i[e];if(Array.isArray(t)){t=t[d?t.length-1:0]}null!==t&&(r[e]=t)}for(const e in s)r[e]=s[e]})}return r}const un=e=>e;class hn{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const t=this.order.indexOf(e);-1!==t&&(this.order.splice(t,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}const mn=["prepare","read","update","preRender","render","postRender"];const{schedule:fn,cancel:gn,state:pn,steps:xn}=function(e,t){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},a=mn.reduce((e,t)=>(e[t]=function(e){let t=new hn,n=new hn,s=0,r=!1,a=!1;const i=new WeakSet,o={schedule:function(e){const a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&r,o=a?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&i.add(e),o.add(e)&&a&&r&&(s=t.order.length),e},cancel:e=>{n.remove(e),i.delete(e)},process:l=>{if(r)a=!0;else{if(r=!0,[t,n]=[n,t],n.clear(),s=t.order.length,s)for(let n=0;n<s;n++){const s=t.order[n];s(l),i.has(s)&&(o.schedule(s),e())}r=!1,a&&(a=!1,o.process(l))}}};return o}(()=>n=!0),e),{}),i=e=>a[e].process(r),o=()=>{const a=performance.now();n=!1,r.delta=s?1e3/60:Math.max(Math.min(a-r.timestamp,40),1),r.timestamp=a,r.isProcessing=!0,mn.forEach(i),r.isProcessing=!1,n&&t&&(s=!1,e(o))},l=mn.reduce((t,i)=>{const l=a[i];return t[i]=function(t){let a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||(n=!0,s=!0,r.isProcessing||e(o)),l.schedule(t,a,i)},t},{});return{schedule:l,cancel:e=>mn.forEach(t=>a[t].cancel(e)),state:r,steps:a}}("undefined"!==typeof requestAnimationFrame?requestAnimationFrame:un,!0),vn={useVisualState:cn({scrapeMotionValuesFromProps:nn,createRenderState:Jt,onMount:(e,t,n)=>{let{renderState:s,latestValues:r}=n;fn.read(()=>{try{s.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(yd){s.dimensions={x:0,y:0,width:0,height:0}}}),fn.render(()=>{Kt(s,r,{enableHardwareAcceleration:!1},Gt(t.tagName),e.transformTemplate),en(t,s)})}})},yn={useVisualState:cn({scrapeMotionValuesFromProps:tn,createRenderState:Lt})};function bn(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n)}const wn=e=>"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary;function jn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}function _n(e,t,n,s){return bn(e,t,(e=>t=>wn(t)&&e(t,jn(t)))(n),s)}const Nn=(e,t)=>n=>t(e(n)),kn=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Nn)};function Cn(e){let t=null;return()=>{const n=()=>{t=null};return null===t&&(t=e,n)}}const Sn=Cn("dragHorizontal"),En=Cn("dragVertical");function Pn(e){let t=!1;if("y"===e)t=En();else if("x"===e)t=Sn();else{const e=Sn(),n=En();e&&n?t=()=>{e(),n()}:(e&&e(),n&&n())}return t}function An(){const e=Pn(!0);return!e||(e(),!1)}class Tn{constructor(e){this.isMounted=!1,this.node=e}update(){}}function In(e,t){const n="pointer"+(t?"enter":"leave"),s="onHover"+(t?"Start":"End");return _n(e.current,n,(n,r)=>{if("touch"===n.pointerType||An())return;const a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[s]&&fn.update(()=>a[s](n,r))},{passive:!e.getProps()[s]})}const Mn=(e,t)=>!!t&&(e===t||Mn(e,t.parentElement));function Ln(e,t){if(!t)return;const n=new PointerEvent("pointer"+e);t(n,jn(n))}const Rn=["root"],On=new WeakMap,Dn=new WeakMap,zn=e=>{const t=On.get(e.target);t&&t(e)},Un=e=>{e.forEach(zn)};function Fn(e,t,n){const s=function(e){let{root:t}=e,n=Bt(e,Rn);const s=t||document;Dn.has(s)||Dn.set(s,{});const r=Dn.get(s),a=JSON.stringify(n);return r[a]||(r[a]=new IntersectionObserver(Un,(0,Ae.A)({root:t},n))),r[a]}(t);return On.set(e,n),s.observe(e),()=>{On.delete(e),s.unobserve(e)}}const qn={some:0,all:1};const Bn={inView:{Feature:class extends Tn{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:n,amount:s="some",once:r}=e,a={root:t?t.current:void 0,rootMargin:n,threshold:"number"===typeof s?s:qn[s]};return Fn(this.node.current,a,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,r&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:n,onViewportLeave:s}=this.node.getProps(),a=t?n:s;a&&a(e)})}mount(){this.startObserver()}update(){if("undefined"===typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node,n=["amount","margin","root"].some(function(e){let{viewport:t={}}=e,{viewport:n={}}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e=>t[e]!==n[e]}(e,t));n&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Tn{constructor(){super(...arguments),this.removeStartListeners=un,this.removeEndListeners=un,this.removeAccessibleListeners=un,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),s=_n(window,"pointerup",(e,t)=>{if(!this.checkPressEnd())return;const{onTap:n,onTapCancel:s,globalTapTarget:r}=this.node.getProps();fn.update(()=>{r||Mn(this.node.current,e.target)?n&&n(e,t):s&&s(e,t)})},{passive:!(n.onTap||n.onPointerUp)}),r=_n(window,"pointercancel",(e,t)=>this.cancelPress(e,t),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=kn(s,r),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=bn(this.node.current,"keydown",e=>{if("Enter"!==e.key||this.isPressing)return;this.removeEndListeners(),this.removeEndListeners=bn(this.node.current,"keyup",e=>{"Enter"===e.key&&this.checkPressEnd()&&Ln("up",(e,t)=>{const{onTap:n}=this.node.getProps();n&&fn.update(()=>n(e,t))})}),Ln("down",(e,t)=>{this.startPress(e,t)})}),t=bn(this.node.current,"blur",()=>{this.isPressing&&Ln("cancel",(e,t)=>this.cancelPress(e,t))});this.removeAccessibleListeners=kn(e,t)}}startPress(e,t){this.isPressing=!0;const{onTapStart:n,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&fn.update(()=>n(e,t))}checkPressEnd(){this.removeEndListeners(),this.isPressing=!1;return this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!An()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&fn.update(()=>n(e,t))}mount(){const e=this.node.getProps(),t=_n(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=bn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=kn(t,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}},focus:{Feature:class extends Tn{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(yd){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=kn(bn(this.node.current,"focus",()=>this.onFocus()),bn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Tn{mount(){this.unmount=kn(In(this.node,!0),In(this.node,!1))}unmount(){}}}};function Vn(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let s=0;s<n;s++)if(t[s]!==e[s])return!1;return!0}function Wn(e,t,n){const s=e.getProps();return sn(s,t,void 0!==n?n:s.custom,function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.get()),t}(e),function(e){const t={};return e.values.forEach((e,n)=>t[n]=e.getVelocity()),t}(e))}let Hn=un,Yn=un;const Kn=e=>1e3*e,Jn=e=>e/1e3,Gn=!1,Xn=e=>Array.isArray(e)&&"number"===typeof e[0];function $n(e){return Boolean(!e||"string"===typeof e&&Qn[e]||Xn(e)||Array.isArray(e)&&e.every($n))}const Zn=e=>{let[t,n,s,r]=e;return"cubic-bezier(".concat(t,", ").concat(n,", ").concat(s,", ").concat(r,")")},Qn={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Zn([0,.65,.55,1]),circOut:Zn([.55,0,1,.45]),backIn:Zn([.31,.01,.66,-.59]),backOut:Zn([.33,1.53,.69,.99])};function es(e){if(e)return Xn(e)?Zn(e):Array.isArray(e)?e.map(es):Qn[e]}const ts=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e;function ns(e,t,n,s){if(e===t&&n===s)return un;const r=t=>function(e,t,n,s,r){let a,i,o=0;do{i=t+(n-t)/2,a=ts(i,s,r)-e,a>0?n=i:t=i}while(Math.abs(a)>1e-7&&++o<12);return i}(t,0,1,e,n);return e=>0===e||1===e?e:ts(r(e),t,s)}const ss=ns(.42,0,1,1),rs=ns(0,0,.58,1),as=ns(.42,0,.58,1),is=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,os=e=>t=>1-e(1-t),ls=e=>1-Math.sin(Math.acos(e)),cs=os(ls),ds=is(ls),us=ns(.33,1.53,.69,.99),hs=os(us),ms=is(hs),fs={linear:un,easeIn:ss,easeInOut:as,easeOut:rs,circIn:ls,circInOut:ds,circOut:cs,backIn:hs,backInOut:ms,backOut:us,anticipate:e=>(e*=2)<1?.5*hs(e):.5*(2-Math.pow(2,-10*(e-1)))},gs=e=>{if(Array.isArray(e)){Yn(4===e.length,"Cubic bezier arrays must contain four numerical values.");const[t,n,s,r]=e;return ns(t,n,s,r)}return"string"===typeof e?(Yn(void 0!==fs[e],"Invalid easing type '".concat(e,"'")),fs[e]):e},ps=(e,t)=>n=>Boolean(_t(n)&&jt.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t)),xs=(e,t,n)=>s=>{if(!_t(s))return s;const[r,a,i,o]=s.match(bt);return{[e]:parseFloat(r),[t]:parseFloat(a),[n]:parseFloat(i),alpha:void 0!==o?parseFloat(o):1}},vs=(0,Ae.A)((0,Ae.A)({},pt),{},{transform:e=>Math.round((e=>gt(0,255,e))(e))}),ys={test:ps("rgb","red"),parse:xs("red","green","blue"),transform:e=>{let{red:t,green:n,blue:s,alpha:r=1}=e;return"rgba("+vs.transform(t)+", "+vs.transform(n)+", "+vs.transform(s)+", "+yt(xt.transform(r))+")"}};const bs={test:ps("#"),parse:function(e){let t="",n="",s="",r="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),s=e.substring(5,7),r=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),s=e.substring(3,4),r=e.substring(4,5),t+=t,n+=n,s+=s,r+=r),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}},transform:ys.transform},ws={test:ps("hsl","hue"),parse:xs("hue","saturation","lightness"),transform:e=>{let{hue:t,saturation:n,lightness:s,alpha:r=1}=e;return"hsla("+Math.round(t)+", "+Ct.transform(yt(n))+", "+Ct.transform(yt(s))+", "+yt(xt.transform(r))+")"}},js={test:e=>ys.test(e)||bs.test(e)||ws.test(e),parse:e=>ys.test(e)?ys.parse(e):ws.test(e)?ws.parse(e):bs.parse(e),transform:e=>_t(e)?e:e.hasOwnProperty("red")?ys.transform(e):ws.transform(e)},_s=(e,t,n)=>-n*e+n*t+e;function Ns(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}const ks=(e,t,n)=>{const s=e*e;return Math.sqrt(Math.max(0,n*(t*t-s)+s))},Cs=[bs,ys,ws];function Ss(e){const t=(n=e,Cs.find(e=>e.test(n)));var n;Yn(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));let s=t.parse(e);return t===ws&&(s=function(e){let{hue:t,saturation:n,lightness:s,alpha:r}=e;t/=360,n/=100,s/=100;let a=0,i=0,o=0;if(n){const e=s<.5?s*(1+n):s+n-s*n,r=2*s-e;a=Ns(r,e,t+1/3),i=Ns(r,e,t),o=Ns(r,e,t-1/3)}else a=i=o=s;return{red:Math.round(255*a),green:Math.round(255*i),blue:Math.round(255*o),alpha:r}}(s)),s}const Es=(e,t)=>{const n=Ss(e),s=Ss(t),r=(0,Ae.A)({},n);return e=>(r.red=ks(n.red,s.red,e),r.green=ks(n.green,s.green,e),r.blue=ks(n.blue,s.blue,e),r.alpha=_s(n.alpha,s.alpha,e),ys.transform(r))};const Ps={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:un},As={regex:wt,countKey:"Colors",token:"${c}",parse:js.parse},Ts={regex:bt,countKey:"Numbers",token:"${n}",parse:pt.parse};function Is(e,t){let{regex:n,countKey:s,token:r,parse:a}=t;const i=e.tokenised.match(n);i&&(e["num"+s]=i.length,e.tokenised=e.tokenised.replace(n,r),e.values.push(...i.map(a)))}function Ms(e){const t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&Is(n,Ps),Is(n,As),Is(n,Ts),n}function Ls(e){return Ms(e).values}function Rs(e){const{values:t,numColors:n,numVars:s,tokenised:r}=Ms(e),a=t.length;return e=>{let t=r;for(let r=0;r<a;r++)t=r<s?t.replace(Ps.token,e[r]):r<s+n?t.replace(As.token,js.transform(e[r])):t.replace(Ts.token,yt(e[r]));return t}}const Os=e=>"number"===typeof e?0:e;const Ds={test:function(e){var t,n;return isNaN(e)&&_t(e)&&((null===(t=e.match(bt))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(wt))||void 0===n?void 0:n.length)||0)>0},parse:Ls,createTransformer:Rs,getAnimatableNone:function(e){const t=Ls(e);return Rs(e)(t.map(Os))}},zs=(e,t)=>n=>"".concat(n>0?t:e);function Us(e,t){return"number"===typeof e?n=>_s(e,t,n):js.test(e)?Es(e,t):e.startsWith("var(")?zs(e,t):Bs(e,t)}const Fs=(e,t)=>{const n=[...e],s=n.length,r=e.map((e,n)=>Us(e,t[n]));return e=>{for(let t=0;t<s;t++)n[t]=r[t](e);return n}},qs=(e,t)=>{const n=(0,Ae.A)((0,Ae.A)({},e),t),s={};for(const r in n)void 0!==e[r]&&void 0!==t[r]&&(s[r]=Us(e[r],t[r]));return e=>{for(const t in s)n[t]=s[t](e);return n}},Bs=(e,t)=>{const n=Ds.createTransformer(t),s=Ms(e),r=Ms(t);return s.numVars===r.numVars&&s.numColors===r.numColors&&s.numNumbers>=r.numNumbers?kn(Fs(s.values,r.values),n):(Hn(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),zs(e,t))},Vs=(e,t,n)=>{const s=t-e;return 0===s?1:(n-e)/s},Ws=(e,t)=>n=>_s(e,t,n);function Hs(e,t,n){const s=[],r=n||("number"===typeof(a=e[0])?Ws:"string"===typeof a?js.test(a)?Es:Bs:Array.isArray(a)?Fs:"object"===typeof a?qs:Ws);var a;const i=e.length-1;for(let o=0;o<i;o++){let n=r(e[o],e[o+1]);if(t){const e=Array.isArray(t)?t[o]||un:t;n=kn(e,n)}s.push(n)}return s}function Ys(e,t){let{clamp:n=!0,ease:s,mixer:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=e.length;if(Yn(a===t.length,"Both input and output ranges must be the same length"),1===a)return()=>t[0];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=Hs(t,s,r),o=i.length,l=t=>{let n=0;if(o>1)for(;n<e.length-2&&!(t<e[n+1]);n++);const s=Vs(e[n],e[n+1],t);return i[n](s)};return n?t=>l(gt(e[0],e[a-1],t)):l}function Ks(e){const t=[0];return function(e,t){const n=e[e.length-1];for(let s=1;s<=t;s++){const r=Vs(0,t,s);e.push(_s(n,1,r))}}(t,e.length-1),t}function Js(e){let{duration:t=300,keyframes:n,times:s,ease:r="easeInOut"}=e;const a=(e=>Array.isArray(e)&&"number"!==typeof e[0])(r)?r.map(gs):gs(r),i={done:!1,value:n[0]},o=function(e,t){return e.map(e=>e*t)}(s&&s.length===n.length?s:Ks(n),t),l=Ys(o,n,{ease:Array.isArray(a)?a:(c=n,d=a,c.map(()=>d||as).splice(0,c.length-1))});var c,d;return{calculatedDuration:t,next:e=>(i.value=l(e),i.done=e>=t,i)}}function Gs(e,t){return t?e*(1e3/t):0}function Xs(e,t,n){const s=Math.max(t-5,0);return Gs(n-e(s),t-s)}const $s=.001;function Zs(e){let t,n,{duration:s=800,bounce:r=.25,velocity:a=0,mass:i=1}=e;Hn(s<=Kn(10),"Spring duration must be 10 seconds or less");let o=1-r;o=gt(.05,1,o),s=gt(.01,10,Jn(s)),o<1?(t=e=>{const t=e*o,n=t*s,r=t-a,i=er(e,o),l=Math.exp(-n);return $s-r/i*l},n=e=>{const n=e*o*s,r=n*a+a,i=Math.pow(o,2)*Math.pow(e,2)*s,l=Math.exp(-n),c=er(Math.pow(e,2),o);return(-t(e)+$s>0?-1:1)*((r-i)*l)/c}):(t=e=>Math.exp(-e*s)*((e-a)*s+1)-.001,n=e=>Math.exp(-e*s)*(s*s*(a-e)));const l=function(e,t,n){let s=n;for(let r=1;r<Qs;r++)s-=e(s)/t(s);return s}(t,n,5/s);if(s=Kn(s),isNaN(l))return{stiffness:100,damping:10,duration:s};{const e=Math.pow(l,2)*i;return{stiffness:e,damping:2*o*Math.sqrt(i*e),duration:s}}}const Qs=12;function er(e,t){return e*Math.sqrt(1-t*t)}const tr=["keyframes","restDelta","restSpeed"],nr=["duration","bounce"],sr=["stiffness","damping","mass"];function rr(e,t){return t.some(t=>void 0!==e[t])}function ar(e){let{keyframes:t,restDelta:n,restSpeed:s}=e,r=Bt(e,tr);const a=t[0],i=t[t.length-1],o={done:!1,value:a},{stiffness:l,damping:c,mass:d,duration:u,velocity:h,isResolvedFromDuration:m}=function(e){let t=(0,Ae.A)({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!rr(e,sr)&&rr(e,nr)){const n=Zs(e);t=(0,Ae.A)((0,Ae.A)((0,Ae.A)({},t),n),{},{mass:1}),t.isResolvedFromDuration=!0}return t}((0,Ae.A)((0,Ae.A)({},r),{},{velocity:-Jn(r.velocity||0)})),f=h||0,g=c/(2*Math.sqrt(l*d)),p=i-a,x=Jn(Math.sqrt(l/d)),v=Math.abs(p)<5;let y;if(s||(s=v?.01:2),n||(n=v?.005:.5),g<1){const e=er(x,g);y=t=>{const n=Math.exp(-g*x*t);return i-n*((f+g*x*p)/e*Math.sin(e*t)+p*Math.cos(e*t))}}else if(1===g)y=e=>i-Math.exp(-x*e)*(p+(f+x*p)*e);else{const e=x*Math.sqrt(g*g-1);y=t=>{const n=Math.exp(-g*x*t),s=Math.min(e*t,300);return i-n*((f+g*x*p)*Math.sinh(s)+e*p*Math.cosh(s))/e}}return{calculatedDuration:m&&u||null,next:e=>{const t=y(e);if(m)o.done=e>=u;else{let r=f;0!==e&&(r=g<1?Xs(y,e,t):0);const a=Math.abs(r)<=s,l=Math.abs(i-t)<=n;o.done=a&&l}return o.value=o.done?i:t,o}}}function ir(e){let{keyframes:t,velocity:n=0,power:s=.8,timeConstant:r=325,bounceDamping:a=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:d=.5,restSpeed:u}=e;const h=t[0],m={done:!1,value:h},f=e=>void 0===l?c:void 0===c||Math.abs(l-e)<Math.abs(c-e)?l:c;let g=s*n;const p=h+g,x=void 0===o?p:o(p);x!==p&&(g=x-h);const v=e=>-g*Math.exp(-e/r),y=e=>x+v(e),b=e=>{const t=v(e),n=y(e);m.done=Math.abs(t)<=d,m.value=m.done?x:n};let w,j;const _=e=>{var t;(t=m.value,void 0!==l&&t<l||void 0!==c&&t>c)&&(w=e,j=ar({keyframes:[m.value,f(m.value)],velocity:Xs(y,e,m.value),damping:a,stiffness:i,restDelta:d,restSpeed:u}))};return _(0),{calculatedDuration:null,next:e=>{let t=!1;return j||void 0!==w||(t=!0,b(e),_(e)),void 0!==w&&e>w?j.next(e-w):(!t&&b(e),m)}}}const or=e=>{const t=t=>{let{timestamp:n}=t;return e(n)};return{start:()=>fn.update(t,!0),stop:()=>gn(t),now:()=>pn.isProcessing?pn.timestamp:performance.now()}};function lr(e){let t=0;let n=e.next(t);for(;!n.done&&t<2e4;)t+=50,n=e.next(t);return t>=2e4?1/0:t}const cr=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],dr={decay:ir,inertia:ir,tween:Js,keyframes:Js,spring:ar};function ur(e){let t,n,{autoplay:s=!0,delay:r=0,driver:a=or,keyframes:i,type:o="keyframes",repeat:l=0,repeatDelay:c=0,repeatType:d="loop",onPlay:u,onStop:h,onComplete:m,onUpdate:f}=e,g=Bt(e,cr),p=1,x=!1;const v=()=>{n=new Promise(e=>{t=e})};let y;v();const b=dr[o]||Js;let w;b!==Js&&"number"!==typeof i[0]&&(w=Ys([0,100],i,{clamp:!1}),i=[0,100]);const j=b((0,Ae.A)((0,Ae.A)({},g),{},{keyframes:i}));let _;"mirror"===d&&(_=b((0,Ae.A)((0,Ae.A)({},g),{},{keyframes:[...i].reverse(),velocity:-(g.velocity||0)})));let N="idle",k=null,C=null,S=null;null===j.calculatedDuration&&l&&(j.calculatedDuration=lr(j));const{calculatedDuration:E}=j;let P=1/0,A=1/0;null!==E&&(P=E+c,A=P*(l+1)-c);let T=0;const I=e=>{if(null===C)return;p>0&&(C=Math.min(C,e)),p<0&&(C=Math.min(e-A/p,C)),T=null!==k?k:Math.round(e-C)*p;const t=T-r*(p>=0?1:-1),n=p>=0?t<0:t>A;T=Math.max(t,0),"finished"===N&&null===k&&(T=A);let s=T,a=j;if(l){const e=Math.min(T,A)/P;let t=Math.floor(e),n=e%1;!n&&e>=1&&(n=1),1===n&&t--,t=Math.min(t,l+1);Boolean(t%2)&&("reverse"===d?(n=1-n,c&&(n-=c/P)):"mirror"===d&&(a=_)),s=gt(0,1,n)*P}const o=n?{done:!1,value:i[0]}:a.next(s);w&&(o.value=w(o.value));let{done:u}=o;n||null===E||(u=p>=0?T>=A:T<=0);const h=null===k&&("finished"===N||"running"===N&&u);return f&&f(o.value),h&&R(),o},M=()=>{y&&y.stop(),y=void 0},L=()=>{N="idle",M(),t(),v(),C=S=null},R=()=>{N="finished",m&&m(),M(),t()},O=()=>{if(x)return;y||(y=a(I));const e=y.now();u&&u(),null!==k?C=e-k:C&&"finished"!==N||(C=e),"finished"===N&&v(),S=C,k=null,N="running",y.start()};s&&O();const D={then:(e,t)=>n.then(e,t),get time(){return Jn(T)},set time(e){e=Kn(e),T=e,null===k&&y&&0!==p?C=y.now()-e/p:k=e},get duration(){const e=null===j.calculatedDuration?lr(j):j.calculatedDuration;return Jn(e)},get speed(){return p},set speed(e){e!==p&&y&&(p=e,D.time=Jn(T))},get state(){return N},play:O,pause:()=>{N="paused",k=T},stop:()=>{x=!0,"idle"!==N&&(N="idle",h&&h(),L())},cancel:()=>{null!==S&&I(S),L()},complete:()=>{N="finished"},sample:e=>(C=0,I(e))};return D}const hr=["onUpdate","onComplete"],mr=function(e){let t;return()=>(void 0===t&&(t=e()),t)}(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),fr=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function gr(e,t,n){let{onUpdate:s,onComplete:r}=n,a=Bt(n,hr);if(!(mr()&&fr.has(t)&&!a.repeatDelay&&"mirror"!==a.repeatType&&0!==a.damping&&"inertia"!==a.type))return!1;let i,o,l=!1,c=!1;const d=()=>{o=new Promise(e=>{i=e})};d();let{keyframes:u,duration:h=300,ease:m,times:f}=a;if(((e,t)=>"spring"===t.type||"backgroundColor"===e||!$n(t.ease))(t,a)){const e=ur((0,Ae.A)((0,Ae.A)({},a),{},{repeat:0,delay:0}));let t={done:!1,value:u[0]};const n=[];let s=0;for(;!t.done&&s<2e4;)t=e.sample(s),n.push(t.value),s+=10;f=void 0,u=n,h=s-10,m="linear"}const g=function(e,t,n){let{delay:s=0,duration:r,repeat:a=0,repeatType:i="loop",ease:o,times:l}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const c={[t]:n};l&&(c.offset=l);const d=es(o);return Array.isArray(d)&&(c.easing=d),e.animate(c,{delay:s,duration:r,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:a+1,direction:"reverse"===i?"alternate":"normal"})}(e.owner.current,t,u,(0,Ae.A)((0,Ae.A)({},a),{},{duration:h,ease:m,times:f})),p=()=>{c=!1,g.cancel()},x=()=>{c=!0,fn.update(p),i(),d()};g.onfinish=()=>{c||(e.set(function(e,t){let{repeat:n,repeatType:s="loop"}=t;return e[n&&"loop"!==s&&n%2===1?0:e.length-1]}(u,a)),r&&r(),x())};return{then:(e,t)=>o.then(e,t),attachTimeline:e=>(g.timeline=e,g.onfinish=null,un),get time(){return Jn(g.currentTime||0)},set time(e){g.currentTime=Kn(e)},get speed(){return g.playbackRate},set speed(e){g.playbackRate=e},get duration(){return Jn(h)},play:()=>{l||(g.play(),gn(p))},pause:()=>g.pause(),stop:()=>{if(l=!0,"idle"===g.playState)return;const{currentTime:t}=g;if(t){const n=ur((0,Ae.A)((0,Ae.A)({},a),{},{autoplay:!1}));e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}x()},complete:()=>{c||g.finish()},cancel:x}}const pr={type:"spring",stiffness:500,damping:25,restSpeed:10},xr={type:"keyframes",duration:.8},vr={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},yr=(e,t)=>{let{keyframes:n}=t;return n.length>2?xr:it.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:pr:vr},br=(e,t)=>"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!Ds.test(t)&&"0"!==t||t.startsWith("url("))),wr=new Set(["brightness","contrast","saturate","opacity"]);function jr(e){const[t,n]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[s]=n.match(bt)||[];if(!s)return e;const r=n.replace(s,"");let a=wr.has(t)?1:0;return s!==n&&(a*=100),t+"("+a+r+")"}const _r=/([a-z-]*)\(.*?\)/g,Nr=(0,Ae.A)((0,Ae.A)({},Ds),{},{getAnimatableNone:e=>{const t=e.match(_r);return t?t.map(jr).join(" "):e}}),kr=(0,Ae.A)((0,Ae.A)({},It),{},{color:js,backgroundColor:js,outlineColor:js,fill:js,stroke:js,borderColor:js,borderTopColor:js,borderRightColor:js,borderBottomColor:js,borderLeftColor:js,filter:Nr,WebkitFilter:Nr}),Cr=e=>kr[e];function Sr(e,t){let n=Cr(e);return n!==Nr&&(n=Ds),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Er=e=>/^0[^.\s]+$/.test(e);function Pr(e){return"number"===typeof e?0===e:null!==e?"none"===e||"0"===e||Er(e):void 0}const Ar=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function Tr(e,t){return e[t]||e.default||e}const Ir=!1,Mr=function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return r=>{const a=Tr(s,e)||{},i=a.delay||s.delay||0;let{elapsed:o=0}=s;o-=Kn(i);const l=function(e,t,n,s){const r=br(t,n);let a;a=Array.isArray(n)?[...n]:[null,n];const i=void 0!==s.from?s.from:e.get();let o;const l=[];for(let c=0;c<a.length;c++)null===a[c]&&(a[c]=0===c?i:a[c-1]),Pr(a[c])&&l.push(c),"string"===typeof a[c]&&"none"!==a[c]&&"0"!==a[c]&&(o=a[c]);if(r&&l.length&&o)for(let c=0;c<l.length;c++)a[l[c]]=Sr(t,o);return a}(t,e,n,a),c=l[0],d=l[l.length-1],u=br(e,c),h=br(e,d);Hn(u===h,"You are trying to animate ".concat(e,' from "').concat(c,'" to "').concat(d,'". ').concat(c," is not an animatable value - to enable this animation set ").concat(c," to a value animatable to ").concat(d," via the `style` property."));let m=(0,Ae.A)((0,Ae.A)({keyframes:l,velocity:t.getVelocity(),ease:"easeOut"},a),{},{delay:-o,onUpdate:e=>{t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:()=>{r(),a.onComplete&&a.onComplete()}});if(function(e){let{when:t,delay:n,delayChildren:s,staggerChildren:r,staggerDirection:a,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:d}=e,u=Bt(e,Ar);return!!Object.keys(u).length}(a)||(m=(0,Ae.A)((0,Ae.A)({},m),yr(e,m))),m.duration&&(m.duration=Kn(m.duration)),m.repeatDelay&&(m.repeatDelay=Kn(m.repeatDelay)),!u||!h||Gn||!1===a.type||Ir)return function(e){let{keyframes:t,delay:n,onUpdate:s,onComplete:r}=e;const a=()=>(s&&s(t[t.length-1]),r&&r(),{time:0,speed:1,duration:0,play:un,pause:un,stop:un,then:e=>(e(),Promise.resolve()),cancel:un,complete:un});return n?ur({keyframes:[0,1],duration:0,delay:n,onComplete:a}):a()}(Gn?(0,Ae.A)((0,Ae.A)({},m),{},{delay:0}):m);if(!s.isHandoff&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){const n=gr(t,e,m);if(n)return n}return ur(m)}};function Lr(e){return Boolean(lt(e)&&e.add)}const Rr=e=>/^\-?\d*\.?\d+$/.test(e);function Or(e,t){-1===e.indexOf(t)&&e.push(t)}function Dr(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class zr{constructor(){this.subscriptions=[]}add(e){return Or(this.subscriptions,e),()=>Dr(this.subscriptions,e)}notify(e,t,n){const s=this.subscriptions.length;if(s)if(1===s)this.subscriptions[0](e,t,n);else for(let r=0;r<s;r++){const s=this.subscriptions[r];s&&s(e,t,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Ur={current:void 0};class Fr{constructor(e){var t=this;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s;this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t.prev=t.current,t.current=e;const{delta:s,timestamp:r}=pn;t.lastUpdated!==r&&(t.timeDelta=s,t.lastUpdated=r,fn.postRender(t.scheduleVelocityCheck)),t.prev!==t.current&&t.events.change&&t.events.change.notify(t.current),t.events.velocityChange&&t.events.velocityChange.notify(t.getVelocity()),n&&t.events.renderRequest&&t.events.renderRequest.notify(t.current)},this.scheduleVelocityCheck=()=>fn.postRender(this.velocityCheck),this.velocityCheck=e=>{let{timestamp:t}=e;t!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=(s=this.current,!isNaN(parseFloat(s))),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new zr);const n=this.events[e].add(t);return"change"===e?()=>{n(),fn.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Ur.current&&Ur.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?Gs(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function qr(e,t){return new Fr(e,t)}const Br=e=>t=>t.test(e),Vr=[pt,St,Ct,kt,Pt,Et,{test:e=>"auto"===e,parse:e=>e}],Wr=e=>Vr.find(Br(e)),Hr=[...Vr,js,Ds],Yr=e=>Hr.find(Br(e)),Kr=["transitionEnd","transition"];function Jr(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,qr(n))}function Gr(e,t){const n=Wn(e,t);let s=n?e.makeTargetAnimatable(n,!1):{},{transitionEnd:r={},transition:a={}}=s,i=Bt(s,Kr);i=(0,Ae.A)((0,Ae.A)({},i),r);for(const o in i){Jr(e,o,an(i[o]))}}function Xr(e,t){if(!t)return;return(t[e]||t.default||t).from}const $r=["transition","transitionEnd"];function Zr(e,t){let{protectedKeys:n,needsAnimating:s}=e;const r=n.hasOwnProperty(t)&&!0!==s[t];return s[t]=!1,r}function Qr(e,t){const n=e.get();if(!Array.isArray(t))return n!==t;for(let s=0;s<t.length;s++)if(t[s]!==n)return!0}function ea(e,t){let{delay:n=0,transitionOverride:s,type:r}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=e.makeTargetAnimatable(t),{transition:i=e.getDefaultTransition(),transitionEnd:o}=a,l=Bt(a,$r);const c=e.getValue("willChange");s&&(i=s);const d=[],u=r&&e.animationState&&e.animationState.getState()[r];for(const h in l){const t=e.getValue(h),s=l[h];if(!t||void 0===s||u&&Zr(u,h))continue;const r=(0,Ae.A)({delay:n,elapsed:0},Tr(i||{},h));if(window.HandoffAppearAnimations){const n=e.getProps()[ze];if(n){const e=window.HandoffAppearAnimations(n,h,t,fn);null!==e&&(r.elapsed=e,r.isHandoff=!0)}}let a=!r.isHandoff&&!Qr(t,s);if("spring"===r.type&&(t.getVelocity()||r.velocity)&&(a=!1),t.animation&&(a=!1),a)continue;t.start(Mr(h,t,s,e.shouldReduceMotion&&it.has(h)?{type:!1}:r));const o=t.animation;Lr(c)&&(c.add(h),o.then(()=>c.remove(h))),d.push(o)}return o&&Promise.all(d).then(()=>{o&&Gr(e,o)}),d}function ta(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=Wn(e,t,n.custom);let{transition:r=e.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const a=s?()=>Promise.all(ea(e,s,n)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;const{delayChildren:a=0,staggerChildren:i,staggerDirection:o}=r;return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0;const i=[],o=(e.variantChildren.size-1)*s,l=1===r?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*s}:function(){return o-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*s};return Array.from(e.variantChildren).sort(na).forEach((e,s)=>{e.notify("AnimationStart",t),i.push(ta(e,t,(0,Ae.A)((0,Ae.A)({},a),{},{delay:n+l(s)})).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(i)}(e,t,a+s,i,o,n)}:()=>Promise.resolve(),{when:o}=r;if(o){const[e,t]="beforeChildren"===o?[a,i]:[i,a];return e().then(()=>t())}return Promise.all([a(),i(n.delay)])}function na(e,t){return e.sortNodePosition(t)}const sa=["transition","transitionEnd"],ra=[...Be].reverse(),aa=Be.length;function ia(e){return t=>Promise.all(t.map(t=>{let{animation:n,options:s}=t;return function(e,t){let n,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){const r=t.map(t=>ta(e,t,s));n=Promise.all(r)}else if("string"===typeof t)n=ta(e,t,s);else{const r="function"===typeof t?Wn(e,t,s.custom):t;n=Promise.all(ea(e,r,s))}return n.then(()=>e.notify("AnimationComplete",t))}(e,n,s)}))}function oa(e){let t=ia(e);const n={animate:ca(!0),whileInView:ca(),whileHover:ca(),whileTap:ca(),whileDrag:ca(),whileFocus:ca(),exit:ca()};let s=!0;const r=(t,n)=>{const s=Wn(e,n);if(s){const{transition:e,transitionEnd:n}=s,r=Bt(s,sa);t=(0,Ae.A)((0,Ae.A)((0,Ae.A)({},t),r),n)}return t};function a(a,i){const o=e.getProps(),l=e.getVariantContext(!0)||{},c=[],d=new Set;let u={},h=1/0;for(let t=0;t<aa;t++){const m=ra[t],f=n[m],g=void 0!==o[m]?o[m]:l[m],p=Fe(g),x=m===i?f.isActive:null;!1===x&&(h=t);let v=g===l[m]&&g!==o[m]&&p;if(v&&s&&e.manuallyAnimateOnMount&&(v=!1),f.protectedKeys=(0,Ae.A)({},u),!f.isActive&&null===x||!g&&!f.prevProp||qe(g)||"boolean"===typeof g)continue;let y=la(f.prevProp,g)||m===i&&f.isActive&&!v&&p||t>h&&p,b=!1;const w=Array.isArray(g)?g:[g];let j=w.reduce(r,{});!1===x&&(j={});const{prevResolvedValues:_={}}=f,N=(0,Ae.A)((0,Ae.A)({},_),j),k=e=>{y=!0,d.has(e)&&(b=!0,d.delete(e)),f.needsAnimating[e]=!0};for(const e in N){const t=j[e],n=_[e];if(u.hasOwnProperty(e))continue;let s=!1;s=rn(t)&&rn(n)?!Vn(t,n):t!==n,s?void 0!==t?k(e):d.add(e):void 0!==t&&d.has(e)?k(e):f.protectedKeys[e]=!0}f.prevProp=g,f.prevResolvedValues=j,f.isActive&&(u=(0,Ae.A)((0,Ae.A)({},u),j)),s&&e.blockInitialAnimation&&(y=!1),!y||v&&!b||c.push(...w.map(e=>({animation:e,options:(0,Ae.A)({type:m},a)})))}if(d.size){const t={};d.forEach(n=>{const s=e.getBaseTarget(n);void 0!==s&&(t[n]=s)}),c.push({animation:t})}let m=Boolean(c.length);return!s||!1!==o.initial&&o.initial!==o.animate||e.manuallyAnimateOnMount||(m=!1),s=!1,m?t(c):Promise.resolve()}return{animateChanges:a,setActive:function(t,s,r){var i;if(n[t].isActive===s)return Promise.resolve();null===(i=e.variantChildren)||void 0===i||i.forEach(e=>{var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,s)}),n[t].isActive=s;const o=a(r,t);for(const e in n)n[e].protectedKeys={};return o},setAnimateFunction:function(n){t=n(e)},getState:()=>n}}function la(e,t){return"string"===typeof t?t!==e:!!Array.isArray(t)&&!Vn(t,e)}function ca(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}let da=0;const ua={animation:{Feature:class extends Tn{constructor(e){super(e),e.animationState||(e.animationState=oa(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),qe(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){}}},exit:{Feature:class extends Tn{constructor(){super(...arguments),this.id=da++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t,custom:n}=this.node.presenceContext,{isPresent:s}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===s)return;const r=this.node.animationState.setActive("exit",!e,{custom:null!==n&&void 0!==n?n:this.node.getProps().custom});t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}}},ha=(e,t)=>Math.abs(e-t);class ma{constructor(e,t){let{transformPagePoint:n,contextWindow:s,dragSnapToOrigin:r=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=pa(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,n=function(e,t){const n=ha(e.x,t.x),s=ha(e.y,t.y);return Math.sqrt(n**2+s**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!n)return;const{point:s}=e,{timestamp:r}=pn;this.history.push((0,Ae.A)((0,Ae.A)({},s),{},{timestamp:r}));const{onStart:a,onMove:i}=this.handlers;t||(a&&a(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),i&&i(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=fa(t,this.transformPagePoint),fn.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:n,onSessionEnd:s,resumeAnimation:r}=this.handlers;if(this.dragSnapToOrigin&&r&&r(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const a=pa("pointercancel"===e.type?this.lastMoveEventInfo:fa(t,this.transformPagePoint),this.history);this.startEvent&&n&&n(e,a),s&&s(e,a)},!wn(e))return;this.dragSnapToOrigin=r,this.handlers=t,this.transformPagePoint=n,this.contextWindow=s||window;const a=fa(jn(e),this.transformPagePoint),{point:i}=a,{timestamp:o}=pn;this.history=[(0,Ae.A)((0,Ae.A)({},i),{},{timestamp:o})];const{onSessionStart:l}=t;l&&l(e,pa(a,this.history)),this.removeListeners=kn(_n(this.contextWindow,"pointermove",this.handlePointerMove),_n(this.contextWindow,"pointerup",this.handlePointerUp),_n(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),gn(this.updatePoint)}}function fa(e,t){return t?{point:t(e.point)}:e}function ga(e,t){return{x:e.x-t.x,y:e.y-t.y}}function pa(e,t){let{point:n}=e;return{point:n,delta:ga(n,va(t)),offset:ga(n,xa(t)),velocity:ya(t,.1)}}function xa(e){return e[0]}function va(e){return e[e.length-1]}function ya(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,s=null;const r=va(e);for(;n>=0&&(s=e[n],!(r.timestamp-s.timestamp>Kn(t)));)n--;if(!s)return{x:0,y:0};const a=Jn(r.timestamp-s.timestamp);if(0===a)return{x:0,y:0};const i={x:(r.x-s.x)/a,y:(r.y-s.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function ba(e){return e.max-e.min}function wa(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function ja(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=s,e.originPoint=_s(t.min,t.max,e.origin),e.scale=ba(n)/ba(t),(wa(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=_s(n.min,n.max,e.origin)-e.originPoint,(wa(e.translate)||isNaN(e.translate))&&(e.translate=0)}function _a(e,t,n,s){ja(e.x,t.x,n.x,s?s.originX:void 0),ja(e.y,t.y,n.y,s?s.originY:void 0)}function Na(e,t,n){e.min=n.min+t.min,e.max=e.min+ba(t)}function ka(e,t,n){e.min=t.min-n.min,e.max=e.min+ba(t)}function Ca(e,t,n){ka(e.x,t.x,n.x),ka(e.y,t.y,n.y)}function Sa(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function Ea(e,t){let n=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,s]=[s,n]),{min:n,max:s}}const Pa=.35;function Aa(e,t,n){return{min:Ta(e,t),max:Ta(e,n)}}function Ta(e,t){return"number"===typeof e?e:e[t]||0}const Ia=()=>({x:{min:0,max:0},y:{min:0,max:0}});function Ma(e){return[e("x"),e("y")]}function La(e){let{top:t,left:n,right:s,bottom:r}=e;return{x:{min:n,max:s},y:{min:t,max:r}}}function Ra(e){return void 0===e||1===e}function Oa(e){let{scale:t,scaleX:n,scaleY:s}=e;return!Ra(t)||!Ra(n)||!Ra(s)}function Da(e){return Oa(e)||za(e)||e.z||e.rotate||e.rotateX||e.rotateY}function za(e){return Ua(e.x)||Ua(e.y)}function Ua(e){return e&&"0%"!==e}function Fa(e,t,n){return n+t*(e-n)}function qa(e,t,n,s,r){return void 0!==r&&(e=Fa(e,r,s)),Fa(e,n,s)+t}function Ba(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3?arguments[3]:void 0,r=arguments.length>4?arguments[4]:void 0;e.min=qa(e.min,t,n,s,r),e.max=qa(e.max,t,n,s,r)}function Va(e,t){let{x:n,y:s}=t;Ba(e.x,n.translate,n.scale,n.originPoint),Ba(e.y,s.translate,s.scale,s.originPoint)}function Wa(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function Ha(e,t){e.min=e.min+t,e.max=e.max+t}function Ya(e,t,n){let[s,r,a]=n;const i=void 0!==t[a]?t[a]:.5,o=_s(e.min,e.max,i);Ba(e,t[s],t[r],o,t.scale)}const Ka=["x","scaleX","originX"],Ja=["y","scaleY","originY"];function Ga(e,t){Ya(e.x,t,Ka),Ya(e.y,t,Ja)}function Xa(e,t){return La(function(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}(e.getBoundingClientRect(),t))}const $a=e=>{let{current:t}=e;return t?t.ownerDocument.defaultView:null},Za=new WeakMap;class Qa{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e){let{snapToCursor:t=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{presenceContext:n}=this.visualElement;if(n&&!1===n.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new ma(e,{onSessionStart:e=>{const{dragSnapToOrigin:n}=this.getProps();n?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(jn(e,"page").point)},onStart:(e,t)=>{const{drag:n,dragPropagation:s,onDragStart:r}=this.getProps();if(n&&!s&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=Pn(n),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Ma(e=>{let t=this.getAxisMotionValue(e).get()||0;if(Ct.test(t)){const{projection:n}=this.visualElement;if(n&&n.layout){const s=n.layout.layoutBox[e];if(s){t=ba(s)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),r&&fn.update(()=>r(e,t),!1,!0);const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:n,dragDirectionLock:s,onDirectionLock:r,onDrag:a}=this.getProps();if(!n&&!this.openGlobalLock)return;const{offset:i}=t;if(s&&null===this.currentDirection)return this.currentDirection=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(i),void(null!==this.currentDirection&&r&&r(this.currentDirection));this.updateAxis("x",t.point,i),this.updateAxis("y",t.point,i),this.visualElement.render(),a&&a(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>Ma(e=>{var t;return"paused"===this.getAnimationState(e)&&(null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.play())})},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,contextWindow:$a(this.visualElement)})}stop(e,t){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:r}=this.getProps();r&&fn.update(()=>r(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,n){const{drag:s}=this.getProps();if(!n||!ei(e,s,this.currentDirection))return;const r=this.getAxisMotionValue(e);let a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){let{min:s,max:r}=t;return void 0!==s&&e<s?e=n?_s(s,e,n.min):Math.max(e,s):void 0!==r&&e>r&&(e=n?_s(r,e,n.max):Math.min(e,r)),e}(a,this.constraints[e],this.elastic[e])),r.set(a)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:n}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):null===(e=this.visualElement.projection)||void 0===e?void 0:e.layout,r=this.constraints;t&&Ue(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!t||!s)&&function(e,t){let{top:n,left:s,bottom:r,right:a}=t;return{x:Sa(e.x,s,a),y:Sa(e.y,n,r)}}(s.layoutBox,t),this.elastic=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pa;return!1===e?e=0:!0===e&&(e=Pa),{x:Aa(e,"left","right"),y:Aa(e,"top","bottom")}}(n),r!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Ma(e=>{this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(s.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ue(e))return!1;const n=e.current;Yn(null!==n,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");const{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const r=function(e,t,n){const s=Xa(e,n),{scroll:r}=t;return r&&(Ha(s.x,r.offset.x),Ha(s.y,r.offset.y)),s}(n,s.root,this.visualElement.getTransformPagePoint());let a=function(e,t){return{x:Ea(e.x,t.x),y:Ea(e.y,t.y)}}(s.layout.layoutBox,r);if(t){const e=t(function(e){let{x:t,y:n}=e;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(a));this.hasMutatedConstraints=!!e,e&&(a=La(e))}return a}startAnimation(e){const{drag:t,dragMomentum:n,dragElastic:s,dragTransition:r,dragSnapToOrigin:a,onDragTransitionEnd:i}=this.getProps(),o=this.constraints||{},l=Ma(i=>{if(!ei(i,t,this.currentDirection))return;let l=o&&o[i]||{};a&&(l={min:0,max:0});const c=s?200:1e6,d=s?40:1e7,u=(0,Ae.A)((0,Ae.A)({type:"inertia",velocity:n?e[i]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10},r),l);return this.startAxisValueAnimation(i,u)});return Promise.all(l).then(i)}startAxisValueAnimation(e,t){const n=this.getAxisMotionValue(e);return n.start(Mr(e,n,0,t))}stopAnimation(){Ma(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Ma(e=>{var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.pause()})}getAnimationState(e){var t;return null===(t=this.getAxisMotionValue(e).animation)||void 0===t?void 0:t.state}getAxisMotionValue(e){const t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),s=n[t];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Ma(t=>{const{drag:n}=this.getProps();if(!ei(t,n,this.currentDirection))return;const{projection:s}=this.visualElement,r=this.getAxisMotionValue(t);if(s&&s.layout){const{min:n,max:a}=s.layout.layoutBox[t];r.set(e[t]-_s(n,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:n}=this.visualElement;if(!Ue(t)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Ma(e=>{const t=this.getAxisMotionValue(e);if(t){const n=t.get();s[e]=function(e,t){let n=.5;const s=ba(e),r=ba(t);return r>s?n=Vs(t.min,t.max-s,e.min):s>r&&(n=Vs(e.min,e.max-r,t.min)),gt(0,1,n)}({min:n,max:n},this.constraints[e])}});const{transformTemplate:r}=this.visualElement.getProps();this.visualElement.current.style.transform=r?r({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Ma(t=>{if(!ei(t,e,null))return;const n=this.getAxisMotionValue(t),{min:r,max:a}=this.constraints[t];n.set(_s(r,a,s[t]))})}addListeners(){if(!this.visualElement.current)return;Za.set(this.visualElement,this);const e=_n(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:n=!0}=this.getProps();t&&n&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Ue(e)&&(this.constraints=this.resolveRefConstraints())},{projection:n}=this.visualElement,s=n.addEventListener("measure",t);n&&!n.layout&&(n.root&&n.root.updateScroll(),n.updateLayout()),t();const r=bn(window,"resize",()=>this.scalePositionWithinConstraints()),a=n.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n}=e;this.isDragging&&n&&(Ma(e=>{const n=this.getAxisMotionValue(e);n&&(this.originPoint[e]+=t[e].translate,n.set(n.get()+t[e].translate))}),this.visualElement.render())});return()=>{r(),e(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:r=!1,dragElastic:a=Pa,dragMomentum:i=!0}=e;return(0,Ae.A)((0,Ae.A)({},e),{},{drag:t,dragDirectionLock:n,dragPropagation:s,dragConstraints:r,dragElastic:a,dragMomentum:i})}}function ei(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}const ti=e=>(t,n)=>{e&&fn.update(()=>e(t,n))};const ni={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function si(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const ri={correct:(e,t)=>{if(!t.target)return e;if("string"===typeof e){if(!St.test(e))return e;e=parseFloat(e)}const n=si(e,t.target.x),s=si(e,t.target.y);return"".concat(n,"% ").concat(s,"%")}},ai={correct:(e,t)=>{let{treeScale:n,projectionDelta:s}=t;const r=e,a=Ds.parse(e);if(a.length>5)return r;const i=Ds.createTransformer(e),o="number"!==typeof a[0]?1:0,l=s.x.scale*n.x,c=s.y.scale*n.y;a[0+o]/=l,a[1+o]/=c;const d=_s(l,c,.5);return"number"===typeof a[2+o]&&(a[2+o]/=d),"number"===typeof a[3+o]&&(a[3+o]/=d),i(a)}};class ii extends r.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n,layoutId:s}=this.props,{projection:r}=e;var a;a=li,Object.assign(rt,a),r&&(t.group&&t.group.add(r),n&&n.register&&s&&n.register(r),r.root.didUpdate(),r.addEventListener("animationComplete",()=>{this.safeToRemove()}),r.setOptions((0,Ae.A)((0,Ae.A)({},r.options),{},{onExitComplete:()=>this.safeToRemove()}))),ni.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:n,drag:s,isPresent:r}=this.props,a=n.projection;return a?(a.isPresent=r,s||e.layoutDependency!==t||void 0===t?a.willUpdate():this.safeToRemove(),e.isPresent!==r&&(r?a.promote():a.relegate()||fn.postRender(()=>{const e=a.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:n}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function oi(e){const[t,n]=function(){const e=(0,r.useContext)(Me);if(null===e)return[!0,null];const{isPresent:t,onExitComplete:n,register:s}=e,a=(0,r.useId)();return(0,r.useEffect)(()=>s(a),[]),!t&&n?[!1,()=>n&&n(a)]:[!0]}(),s=(0,r.useContext)(Xe);return r.createElement(ii,(0,Ae.A)((0,Ae.A)({},e),{},{layoutGroup:s,switchLayoutGroup:(0,r.useContext)($e),isPresent:t,safeToRemove:n}))}const li={borderRadius:(0,Ae.A)((0,Ae.A)({},ri),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:ri,borderTopRightRadius:ri,borderBottomLeftRadius:ri,borderBottomRightRadius:ri,boxShadow:ai},ci=["TopLeft","TopRight","BottomLeft","BottomRight"],di=ci.length,ui=e=>"string"===typeof e?parseFloat(e):e,hi=e=>"number"===typeof e||St.test(e);function mi(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const fi=pi(0,.5,cs),gi=pi(.5,.95,un);function pi(e,t,n){return s=>s<e?0:s>t?1:n(Vs(e,t,s))}function xi(e,t){e.min=t.min,e.max=t.max}function vi(e,t){xi(e.x,t.x),xi(e.y,t.y)}function yi(e,t,n,s,r){return e=Fa(e-=t,1/n,s),void 0!==r&&(e=Fa(e,1/r,s)),e}function bi(e,t,n,s,r){let[a,i,o]=n;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,r=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;Ct.test(t)&&(t=parseFloat(t),t=_s(i.min,i.max,t/100)-i.min);if("number"!==typeof t)return;let o=_s(a.min,a.max,s);e===a&&(o-=t),e.min=yi(e.min,t,n,o,r),e.max=yi(e.max,t,n,o,r)}(e,t[a],t[i],t[o],t.scale,s,r)}const wi=["x","scaleX","originX"],ji=["y","scaleY","originY"];function _i(e,t,n,s){bi(e.x,t,wi,n?n.x:void 0,s?s.x:void 0),bi(e.y,t,ji,n?n.y:void 0,s?s.y:void 0)}function Ni(e){return 0===e.translate&&1===e.scale}function ki(e){return Ni(e.x)&&Ni(e.y)}function Ci(e,t){return Math.round(e.x.min)===Math.round(t.x.min)&&Math.round(e.x.max)===Math.round(t.x.max)&&Math.round(e.y.min)===Math.round(t.y.min)&&Math.round(e.y.max)===Math.round(t.y.max)}function Si(e){return ba(e.x)/ba(e.y)}class Ei{constructor(){this.members=[]}add(e){Or(this.members,e),e.scheduleRender()}remove(e){if(Dr(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let n;for(let s=t;s>=0;s--){const e=this.members[s];if(!1!==e.isPresent){n=e;break}}return!!n&&(this.promote(n),!0)}promote(e,t){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;!1===s&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:n}=e;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Pi(e,t,n){let s="";const r=e.x.translate/t.x,a=e.y.translate/t.y;if((r||a)&&(s="translate3d(".concat(r,"px, ").concat(a,"px, 0) ")),1===t.x&&1===t.y||(s+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){const{rotate:e,rotateX:t,rotateY:r}=n;e&&(s+="rotate(".concat(e,"deg) ")),t&&(s+="rotateX(".concat(t,"deg) ")),r&&(s+="rotateY(".concat(r,"deg) "))}const i=e.x.scale*t.x,o=e.y.scale*t.y;return 1===i&&1===o||(s+="scale(".concat(i,", ").concat(o,")")),s||"none"}const Ai=(e,t)=>e.depth-t.depth;class Ti{constructor(){this.children=[],this.isDirty=!1}add(e){Or(this.children,e),this.isDirty=!0}remove(e){Dr(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Ai),this.isDirty=!1,this.children.forEach(e)}}const Ii=["","X","Y","Z"],Mi={visibility:"hidden"};let Li=0;const Ri={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Oi(e){let{attachResizeListener:t,defaultParent:n,measureScroll:s,checkIsScrollRoot:r,resetTransform:a}=e;return class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===n||void 0===n?void 0:n();this.id=Li++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Ri.totalNodes=Ri.resolvedTargetDeltas=Ri.recalculatedProjection=0,this.nodes.forEach(Ui),this.nodes.forEach(Yi),this.nodes.forEach(Ki),this.nodes.forEach(Fi),function(e){window.MotionDebug&&window.MotionDebug.record(e)}(Ri)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=t?t.root||t:this,this.path=t?[...t.path,t]:[],this.parent=t,this.depth=t?t.depth+1:0;for(let n=0;n<this.path.length;n++)this.path[n].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ti)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new zr),this.eventHandlers.get(e).add(t)}notifyListeners(e){const t=this.eventHandlers.get(e);for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];t&&t.notify(...s)}hasListeners(e){return this.eventHandlers.has(e)}mount(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.root.hasTreeAnimated;if(this.instance)return;var s;this.isSVG=(s=e)instanceof SVGElement&&"svg"!==s.tagName,this.instance=e;const{layoutId:r,layout:a,visualElement:i}=this.options;if(i&&!i.current&&i.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),n&&(a||r)&&(this.isLayoutDirty=!0),t){let n;const s=()=>this.root.updateBlockedByResize=!1;t(e,()=>{this.root.updateBlockedByResize=!0,n&&n(),n=function(e,t){const n=performance.now(),s=r=>{let{timestamp:a}=r;const i=a-n;i>=t&&(gn(s),e(i-t))};return fn.read(s,!0),()=>gn(s)}(s,250),ni.hasAnimatedSinceResize&&(ni.hasAnimatedSinceResize=!1,this.nodes.forEach(Hi))})}r&&this.root.registerSharedNode(r,this),!1!==this.options.animate&&i&&(r||a)&&this.addEventListener("didUpdate",e=>{let{delta:t,hasLayoutChanged:n,hasRelativeTargetChanged:s,layout:r}=e;if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const a=this.options.transition||i.getDefaultTransition()||Qi,{onLayoutAnimationStart:o,onLayoutAnimationComplete:l}=i.getProps(),c=!this.targetLayout||!Ci(this.targetLayout,r)||s,d=!n&&s;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||d||n&&(c||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(t,d);const e=(0,Ae.A)((0,Ae.A)({},Tr(a,"layout")),{},{onPlay:o,onComplete:l});(i.shouldReduceMotion||this.options.layoutRoot)&&(e.delay=0,e.type=!1),this.startAnimation(e)}else n||Hi(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=r})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,gn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Ji),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let r=0;r<this.path.length;r++){const e=this.path[r];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:n}=this.options;if(void 0===t&&!n)return;const s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Bi);this.isUpdating||this.nodes.forEach(Vi),this.isUpdating=!1,this.nodes.forEach(Wi),this.nodes.forEach(Di),this.nodes.forEach(zi),this.clearAllSnapshots();const e=performance.now();pn.delta=gt(0,1e3/60,e-pn.timestamp),pn.timestamp=e,pn.isProcessing=!0,xn.update.process(pn),xn.preRender.process(pn),xn.render.process(pn),pn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(qi),this.sharedNodes.forEach(Gi)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,fn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){fn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}updateLayout(){if(!this.instance)return;if(this.updateScroll(),(!this.options.alwaysMeasureLayout||!this.isLead())&&!this.isLayoutDirty)return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let n=0;n<this.path.length;n++){this.path[n].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:r(this.instance),offset:s(this.instance)})}resetTransform(){if(!a)return;const e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!ki(this.projectionDelta),n=this.getTransformTemplate(),s=n?n(this.latestValues,""):void 0,r=s!==this.prevTransformTemplateValue;e&&(t||Da(this.latestValues)||r)&&(a(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}measure(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const t=this.measurePageBox();let n=this.removeElementScroll(t);var s;return e&&(n=this.removeTransform(n)),no((s=n).x),no(s.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:n,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox(),{scroll:n}=this.root;return n&&(Ha(t.x,n.offset.x),Ha(t.y,n.offset.y)),t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};vi(t,e);for(let n=0;n<this.path.length;n++){const s=this.path[n],{scroll:r,options:a}=s;if(s!==this.root&&r&&a.layoutScroll){if(r.isRoot){vi(t,e);const{scroll:n}=this.root;n&&(Ha(t.x,-n.offset.x),Ha(t.y,-n.offset.y))}Ha(t.x,r.offset.x),Ha(t.y,r.offset.y)}}return t}applyTransform(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n={x:{min:0,max:0},y:{min:0,max:0}};vi(n,e);for(let s=0;s<this.path.length;s++){const e=this.path[s];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&Ga(n,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),Da(e.latestValues)&&Ga(n,e.latestValues)}return Da(this.latestValues)&&Ga(n,this.latestValues),n}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};vi(t,e);for(let n=0;n<this.path.length;n++){const e=this.path[n];if(!e.instance)continue;if(!Da(e.latestValues))continue;Oa(e.latestValues)&&e.updateSnapshot();const s=Ia();vi(s,e.measurePageBox()),_i(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,s)}return Da(this.latestValues)&&_i(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options=(0,Ae.A)((0,Ae.A)((0,Ae.A)({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==pn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;const n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);const s=Boolean(this.resumingFrom)||this!==n;if(!(e||s&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(t=this.parent)||void 0===t?void 0:t.isProjectionDirty)||this.attemptToResolveRelativeTarget))return;const{layout:r,layoutId:a}=this.options;if(this.layout&&(r||a)){if(this.resolvedRelativeTargetAt=pn.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Ca(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var i,o,l;if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),i=this.target,o=this.relativeTarget,l=this.relativeParent.target,Na(i.x,o.x,l.x),Na(i.y,o.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):vi(this.target,this.layout.layoutBox),Va(this.target,this.targetDelta)):vi(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},Ca(this.relativeTargetOrigin,this.target,e.target),vi(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Ri.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(this.parent&&!Oa(this.parent.latestValues)&&!za(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var e;const t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t;let s=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(s=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(s=!1),this.resolvedRelativeTargetAt===pn.timestamp&&(s=!1),s)return;const{layout:r,layoutId:a}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!r&&!a)return;vi(this.layoutCorrected,this.layout.layoutBox);const i=this.treeScale.x,o=this.treeScale.y;!function(e,t,n){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const r=n.length;if(!r)return;let a,i;t.x=t.y=1;for(let o=0;o<r;o++){a=n[o],i=a.projectionDelta;const r=a.instance;r&&r.style&&"contents"===r.style.display||(s&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Ga(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,Va(e,i)),s&&Da(a.latestValues)&&Ga(e,a.latestValues))}t.x=Wa(t.x),t.y=Wa(t.y)}(this.layoutCorrected,this.treeScale,this.path,n),!t.layout||t.target||1===this.treeScale.x&&1===this.treeScale.y||(t.target=t.layout.layoutBox);const{target:l}=t;if(!l)return void(this.projectionTransform&&(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionTransform="none",this.scheduleRender()));this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});const c=this.projectionTransform;_a(this.projectionDelta,this.layoutCorrected,l,this.latestValues),this.projectionTransform=Pi(this.projectionDelta,this.treeScale),this.projectionTransform===c&&this.treeScale.x===i&&this.treeScale.y===o||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",l)),Ri.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this.snapshot,s=n?n.latestValues:{},r=(0,Ae.A)({},this.latestValues),a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const i={x:{min:0,max:0},y:{min:0,max:0}},o=(n?n.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(Zi));let u;this.animationProgress=0,this.mixTargetDelta=t=>{const n=t/1e3;var l,h,m,f,g,p;Xi(a.x,e.x,n),Xi(a.y,e.y,n),this.setTargetDelta(a),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ca(i,this.layout.layoutBox,this.relativeParent.layout.layoutBox),m=this.relativeTarget,f=this.relativeTargetOrigin,g=i,p=n,$i(m.x,f.x,g.x,p),$i(m.y,f.y,g.y,p),u&&(l=this.relativeTarget,h=u,l.x.min===h.x.min&&l.x.max===h.x.max&&l.y.min===h.y.min&&l.y.max===h.y.max)&&(this.isProjectionDirty=!1),u||(u={x:{min:0,max:0},y:{min:0,max:0}}),vi(u,this.relativeTarget)),o&&(this.animationValues=r,function(e,t,n,s,r,a){r?(e.opacity=_s(0,void 0!==n.opacity?n.opacity:1,fi(s)),e.opacityExit=_s(void 0!==t.opacity?t.opacity:1,0,gi(s))):a&&(e.opacity=_s(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,s));for(let i=0;i<di;i++){const r="border".concat(ci[i],"Radius");let a=mi(t,r),o=mi(n,r);void 0===a&&void 0===o||(a||(a=0),o||(o=0),0===a||0===o||hi(a)===hi(o)?(e[r]=Math.max(_s(ui(a),ui(o),s),0),(Ct.test(o)||Ct.test(a))&&(e[r]+="%")):e[r]=o)}(t.rotate||n.rotate)&&(e.rotate=_s(t.rotate||0,n.rotate||0,s))}(r,s,this.latestValues,n,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=n},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(gn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=fn.update(()=>{ni.hasAnimatedSinceResize=!0,this.currentAnimation=function(e,t,n){const s=lt(e)?e:qr(e);return s.start(Mr("",s,t,n)),s.animation}(0,1e3,(0,Ae.A)((0,Ae.A)({},e),{},{onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}})),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:n,layout:s,latestValues:r}=e;if(t&&n&&s){if(this!==e&&this.layout&&s&&so(this.options.animationType,this.layout.layoutBox,s.layoutBox)){n=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=ba(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+t;const s=ba(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+s}vi(t,n),Ga(t,r),_a(this.projectionDeltaWithTransform,this.layoutCorrected,t,r)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new Ei);this.sharedNodes.get(e).add(t);const n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){var e;const{layoutId:t}=this.options;return t&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}getPrevLead(){var e;const{layoutId:t}=this.options;return t?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote(){let{needsReset:e,transition:t,preserveFollowOpacity:n}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const s=this.getStack();s&&s.promote(this,n),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:n}=e;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),!t)return;const s={};for(let r=0;r<Ii.length;r++){const t="rotate"+Ii[r];n[t]&&(s[t]=n[t],e.setStaticValue(t,0))}e.render();for(const r in s)e.setStaticValue(r,s[r]);e.scheduleRender()}getProjectionStyles(e){var t,n;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Mi;const s={visibility:""},r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,s.opacity="",s.pointerEvents=on(null===e||void 0===e?void 0:e.pointerEvents)||"",s.transform=r?r(this.latestValues,""):"none",s;const a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=on(null===e||void 0===e?void 0:e.pointerEvents)||""),this.hasProjected&&!Da(this.latestValues)&&(t.transform=r?r({},""):"none",this.hasProjected=!1),t}const i=a.animationValues||a.latestValues;this.applyTransformsToTarget(),s.transform=Pi(this.projectionDeltaWithTransform,this.treeScale,i),r&&(s.transform=r(i,s.transform));const{x:o,y:l}=this.projectionDelta;s.transformOrigin="".concat(100*o.origin,"% ").concat(100*l.origin,"% 0"),a.animationValues?s.opacity=a===this?null!==(n=null!==(t=i.opacity)&&void 0!==t?t:this.latestValues.opacity)&&void 0!==n?n:1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:s.opacity=a===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const c in rt){if(void 0===i[c])continue;const{correct:e,applyTo:t}=rt[c],n="none"===s.transform?i[c]:e(i[c],a);if(t){const e=t.length;for(let r=0;r<e;r++)s[t[r]]=n}else s[c]=n}return this.options.layoutId&&(s.pointerEvents=a===this?on(null===e||void 0===e?void 0:e.pointerEvents)||"":"none"),s}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>{var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()}),this.root.nodes.forEach(Bi),this.root.sharedNodes.clear()}}}function Di(e){e.updateLayout()}function zi(e){var t;const n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){const{layoutBox:t,measuredBox:s}=e.layout,{animationType:r}=e.options,a=n.source!==e.layout.source;"size"===r?Ma(e=>{const s=a?n.measuredBox[e]:n.layoutBox[e],r=ba(s);s.min=t[e].min,s.max=s.min+r}):so(r,n.layoutBox,t)&&Ma(s=>{const r=a?n.measuredBox[s]:n.layoutBox[s],i=ba(t[s]);r.max=r.min+i,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[s].max=e.relativeTarget[s].min+i)});const i={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};_a(i,t,n.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};a?_a(o,e.applyTransform(s,!0),n.measuredBox):_a(o,t,n.layoutBox);const l=!ki(i);let c=!1;if(!e.resumeFrom){const s=e.getClosestProjectingParent();if(s&&!s.resumeFrom){const{snapshot:r,layout:a}=s;if(r&&a){const i={x:{min:0,max:0},y:{min:0,max:0}};Ca(i,n.layoutBox,r.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};Ca(o,t,a.layoutBox),Ci(i,o)||(c=!0),s.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=i,e.relativeParent=s)}}}e.notifyListeners("didUpdate",{layout:t,snapshot:n,delta:o,layoutDelta:i,hasLayoutChanged:l,hasRelativeTargetChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Ui(e){Ri.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Fi(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function qi(e){e.clearSnapshot()}function Bi(e){e.clearMeasurements()}function Vi(e){e.isLayoutDirty=!1}function Wi(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Hi(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function Yi(e){e.resolveTargetDelta()}function Ki(e){e.calcProjection()}function Ji(e){e.resetRotation()}function Gi(e){e.removeLeadSnapshot()}function Xi(e,t,n){e.translate=_s(t.translate,0,n),e.scale=_s(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function $i(e,t,n,s){e.min=_s(t.min,n.min,s),e.max=_s(t.max,n.max,s)}function Zi(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Qi={duration:.45,ease:[.4,0,.1,1]},eo=e=>"undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().includes(e),to=eo("applewebkit/")&&!eo("chrome/")?Math.round:un;function no(e){e.min=to(e.min),e.max=to(e.max)}function so(e,t,n){return"position"===e||"preserve-aspect"===e&&!wa(Si(t),Si(n),.2)}const ro=Oi({attachResizeListener:(e,t)=>bn(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ao={current:void 0},io=Oi({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!ao.current){const e=new ro({});e.mount(window),e.setOptions({layoutScroll:!0}),ao.current=e}return ao.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),oo={pan:{Feature:class extends Tn{constructor(){super(...arguments),this.removePointerDownListener=un}onPointerDown(e){this.session=new ma(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$a(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:ti(e),onStart:ti(t),onMove:n,onEnd:(e,t)=>{delete this.session,s&&fn.update(()=>s(e,t))}}}mount(){this.removePointerDownListener=_n(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Tn{constructor(e){super(e),this.removeGroupControls=un,this.removeListeners=un,this.controls=new Qa(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||un}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:io,MeasureLayout:oi}};const lo=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function co(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;Yn(n<=4,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));const[s,r]=function(e){const t=lo.exec(e);if(!t)return[,];const[,n,s]=t;return[n,s]}(e);if(!s)return;const a=window.getComputedStyle(t).getPropertyValue(s);if(a){const e=a.trim();return Rr(e)?parseFloat(e):e}return mt(r)?co(r,t,n+1):r}function uo(e,t,n){let s=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t));const r=e.current;if(!(r instanceof Element))return{target:s,transitionEnd:n};n&&(n=(0,Ae.A)({},n)),e.values.forEach(e=>{const t=e.get();if(!mt(t))return;const n=co(t,r);n&&e.set(n)});for(const a in s){const e=s[a];if(!mt(e))continue;const t=co(e,r);t&&(s[a]=t,n||(n={}),void 0===n[a]&&(n[a]=e))}return{target:s,transitionEnd:n}}const ho=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),mo=e=>ho.has(e),fo=e=>e===pt||e===St,go=(e,t)=>parseFloat(e.split(", ")[t]),po=(e,t)=>(n,s)=>{let{transform:r}=s;if("none"===r||!r)return 0;const a=r.match(/^matrix3d\((.+)\)$/);if(a)return go(a[1],t);{const t=r.match(/^matrix\((.+)\)$/);return t?go(t[1],e):0}},xo=new Set(["x","y","z"]),vo=at.filter(e=>!xo.has(e));const yo={width:(e,t)=>{let{x:n}=e,{paddingLeft:s="0",paddingRight:r="0"}=t;return n.max-n.min-parseFloat(s)-parseFloat(r)},height:(e,t)=>{let{y:n}=e,{paddingTop:s="0",paddingBottom:r="0"}=t;return n.max-n.min-parseFloat(s)-parseFloat(r)},top:(e,t)=>{let{top:n}=t;return parseFloat(n)},left:(e,t)=>{let{left:n}=t;return parseFloat(n)},bottom:(e,t)=>{let{y:n}=e,{top:s}=t;return parseFloat(s)+(n.max-n.min)},right:(e,t)=>{let{x:n}=e,{left:s}=t;return parseFloat(s)+(n.max-n.min)},x:po(4,13),y:po(5,14)};yo.translateX=yo.x,yo.translateY=yo.y;const bo=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=(0,Ae.A)({},t),s=(0,Ae.A)({},s);const r=Object.keys(t).filter(mo);let a=[],i=!1;const o=[];if(r.forEach(r=>{const l=e.getValue(r);if(!e.hasValue(r))return;let c=n[r],d=Wr(c);const u=t[r];let h;if(rn(u)){const e=u.length,t=null===u[0]?1:0;c=u[t],d=Wr(c);for(let n=t;n<e&&null!==u[n];n++)h?Yn(Wr(u[n])===h,"All keyframes must be of the same type"):(h=Wr(u[n]),Yn(h===d||fo(d)&&fo(h),"Keyframes must be of the same dimension as the current value"))}else h=Wr(u);if(d!==h)if(fo(d)&&fo(h)){const e=l.get();"string"===typeof e&&l.set(parseFloat(e)),"string"===typeof u?t[r]=parseFloat(u):Array.isArray(u)&&h===St&&(t[r]=u.map(parseFloat))}else(null===d||void 0===d?void 0:d.transform)&&(null===h||void 0===h?void 0:h.transform)&&(0===c||0===u)?0===c?l.set(h.transform(c)):t[r]=d.transform(u):(i||(a=function(e){const t=[];return vo.forEach(n=>{const s=e.getValue(n);void 0!==s&&(t.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),t.length&&e.render(),t}(e),i=!0),o.push(r),s[r]=void 0!==s[r]?s[r]:t[r],l.jump(u))}),o.length){const n=o.indexOf("height")>=0?window.pageYOffset:null,r=((e,t,n)=>{const s=t.measureViewportBox(),r=t.current,a=getComputedStyle(r),{display:i}=a,o={};"none"===i&&t.setStaticValue("display",e.display||"block"),n.forEach(e=>{o[e]=yo[e](s,a)}),t.render();const l=t.measureViewportBox();return n.forEach(n=>{const s=t.getValue(n);s&&s.jump(o[n]),e[n]=yo[n](l,a)}),e})(t,e,o);return a.length&&a.forEach(t=>{let[n,s]=t;e.getValue(n).set(s)}),e.render(),Le&&null!==n&&window.scrollTo({top:n}),{target:r,transitionEnd:s}}return{target:t,transitionEnd:s}};function wo(e,t,n,s){return(e=>Object.keys(e).some(mo))(t)?bo(e,t,n,s):{target:t,transitionEnd:s}}const jo={current:null},_o={current:!1};const No=new WeakMap,ko=["willChange"],Co=["children"],So=Object.keys(Ge),Eo=So.length,Po=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],Ao=Ve.length;class To{constructor(e){let{parent:t,props:n,presenceContext:s,reducedMotionConfig:r,visualState:a}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>fn.render(this.render,!1,!0);const{latestValues:o,renderState:l}=a;this.latestValues=o,this.baseTarget=(0,Ae.A)({},o),this.initialValues=n.initial?(0,Ae.A)({},o):{},this.renderState=l,this.parent=t,this.props=n,this.presenceContext=s,this.depth=t?t.depth+1:0,this.reducedMotionConfig=r,this.options=i,this.isControllingVariants=We(n),this.isVariantNode=He(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(t&&t.current);const c=this.scrapeMotionValuesFromProps(n,{}),{willChange:d}=c,u=Bt(c,ko);for(const h in u){const e=u[h];void 0!==o[h]&&lt(e)&&(e.set(o[h],!1),Lr(d)&&d.add(h))}}scrapeMotionValuesFromProps(e,t){return{}}mount(e){this.current=e,No.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),_o.current||function(){if(_o.current=!0,Le)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>jo.current=e.matches;e.addListener(t),t()}else jo.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||jo.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){No.delete(this.current),this.projection&&this.projection.unmount(),gn(this.notifyUpdate),gn(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,t){const n=it.has(e),s=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&fn.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),r=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{s(),r()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}loadFeatures(e,t,n,s){let r,a,{children:i}=e,o=Bt(e,Co);for(let l=0;l<Eo;l++){const e=So[l],{isEnabled:t,Feature:n,ProjectionNode:s,MeasureLayout:i}=Ge[e];s&&(r=s),t(o)&&(!this.features[e]&&n&&(this.features[e]=new n(this)),i&&(a=i))}if(("html"===this.type||"svg"===this.type)&&!this.projection&&r){this.projection=new r(this.latestValues,this.parent&&this.parent.projection);const{layoutId:e,layout:t,drag:n,dragConstraints:a,layoutScroll:i,layoutRoot:l}=o;this.projection.setOptions({layoutId:e,layout:t,alwaysMeasureLayout:Boolean(n)||a&&Ue(a),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:"string"===typeof t?t:"both",initialPromotionConfig:s,layoutScroll:i,layoutRoot:l})}return a}updateFeatures(){for(const e in this.features){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}makeTargetAnimatable(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let n=0;n<Po.length;n++){const t=Po[n];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const s=e["on"+t];s&&(this.propEventSubscriptions[t]=this.on(t,s))}this.prevMotionValues=function(e,t,n){const{willChange:s}=t;for(const r in t){const a=t[r],i=n[r];if(lt(a))e.addValue(r,a),Lr(s)&&s.add(r);else if(lt(i))e.addValue(r,qr(a,{owner:e})),Lr(s)&&s.remove(r);else if(i!==a)if(e.hasValue(r)){const t=e.getValue(r);!t.hasAnimated&&t.set(a)}else{const t=e.getStaticValue(r);e.addValue(r,qr(void 0!==t?t:a,{owner:e}))}}for(const r in n)void 0===t[r]&&e.removeValue(r);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}const e={};for(let t=0;t<Ao;t++){const n=Ve[t],s=this.props[n];(Fe(s)||!1===s)&&(e[n]=s)}return e}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return void 0===n&&void 0!==t&&(n=qr(t,{owner:this}),this.addValue(e,n)),n}readValue(e){var t;return void 0===this.latestValues[e]&&this.current?null!==(t=this.getBaseTargetFromProps(this.props,e))&&void 0!==t?t:this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:n}=this.props,s="string"===typeof n||"object"===typeof n?null===(t=sn(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==s)return s;const r=this.getBaseTargetFromProps(this.props,e);return void 0===r||lt(r)?void 0!==this.initialValues[e]&&void 0===s?void 0:this.baseTarget[e]:r}on(e,t){return this.events[e]||(this.events[e]=new zr),this.events[e].add(t)}notify(e){if(this.events[e]){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];this.events[e].notify(...n)}}}const Io=["transition","transitionEnd"];class Mo extends To{sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,t){let{vars:n,style:s}=t;delete n[e],delete s[e]}makeTargetAnimatableFromInstance(e,t,n){let{transition:s,transitionEnd:r}=e,a=Bt(e,Io),{transformValues:i}=t,o=function(e,t,n){const s={};for(const r in e){const e=Xr(r,t);if(void 0!==e)s[r]=e;else{const e=n.getValue(r);e&&(s[r]=e.get())}}return s}(a,s||{},this);if(i&&(r&&(r=i(r)),a&&(a=i(a)),o&&(o=i(o))),n){!function(e,t,n){var s,r;const a=Object.keys(t).filter(t=>!e.hasValue(t)),i=a.length;if(i)for(let o=0;o<i;o++){const i=a[o],l=t[i];let c=null;Array.isArray(l)&&(c=l[0]),null===c&&(c=null!==(r=null!==(s=n[i])&&void 0!==s?s:e.readValue(i))&&void 0!==r?r:t[i]),void 0!==c&&null!==c&&("string"===typeof c&&(Rr(c)||Er(c))?c=parseFloat(c):!Yr(c)&&Ds.test(l)&&(c=Sr(i,l)),e.addValue(i,qr(c,{owner:e})),void 0===n[i]&&(n[i]=c),null!==c&&e.setBaseTarget(i,c))}}(this,a,o);const e=((e,t,n,s)=>{const r=uo(e,t,s);return wo(e,t=r.target,n,s=r.transitionEnd)})(this,a,o,r);r=e.transitionEnd,a=e.target}return(0,Ae.A)({transition:s,transitionEnd:r},a)}}class Lo extends Mo{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,t){if(it.has(t)){const e=Cr(t);return e&&e.default||0}{const s=(n=e,window.getComputedStyle(n)),r=(ht(t)?s.getPropertyValue(t):s[t])||0;return"string"===typeof r?r.trim():r}var n}measureInstanceViewportBox(e,t){let{transformPagePoint:n}=t;return Xa(e,n)}build(e,t,n,s){Mt(e,t,n,s.transformTemplate)}scrapeMotionValuesFromProps(e,t){return tn(e,t)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;lt(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent="".concat(e))}))}renderInstance(e,t,n,s){Zt(e,t,n,s)}}class Ro extends Mo{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(it.has(t)){const e=Cr(t);return e&&e.default||0}return t=Qt.has(t)?t:De(t),e.getAttribute(t)}measureInstanceViewportBox(){return{x:{min:0,max:0},y:{min:0,max:0}}}scrapeMotionValuesFromProps(e,t){return nn(e,t)}build(e,t,n,s){Kt(e,t,n,this.isSVGTag,s.transformTemplate)}renderInstance(e,t,n,s){en(e,t,0,s)}mount(e){this.isSVGTag=Gt(e.tagName),super.mount(e)}}const Oo=(e,t)=>st(e)?new Ro(t,{enableHardwareAcceleration:!1}):new Lo(t,{enableHardwareAcceleration:!0}),Do={layout:{ProjectionNode:io,MeasureLayout:oi}},zo=(0,Ae.A)((0,Ae.A)((0,Ae.A)((0,Ae.A)({},ua),Bn),oo),Do),Uo=tt((e,t)=>function(e,t,n,s){let{forwardMotionProps:r=!1}=t;const a=st(e)?vn:yn;return(0,Ae.A)((0,Ae.A)({},a),{},{preloadedFeatures:n,useRender:$t(r),createVisualElement:s,Component:e})}(e,t,zo,Oo));var Fo={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const qo=["color","size","strokeWidth","absoluteStrokeWidth","children"];var Bo=(e,t)=>{const n=(0,r.forwardRef)((n,s)=>{let{color:a="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,children:c}=n,d=Bt(n,qo);return(0,r.createElement)("svg",(0,Ae.A)((0,Ae.A)({ref:s},Fo),{},{width:i,height:i,stroke:a,strokeWidth:l?24*Number(o)/Number(i):o,className:"lucide lucide-".concat((u=e,u.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()))},d),[...t.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...(Array.isArray(c)?c:[c])||[]]);var u});return n.displayName="".concat(e),n};const Vo=Bo("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Wo=Bo("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),Ho=Bo("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Yo=()=>{const e=ne(),[t]=Ce(),[s,a]=(0,r.useState)("auth-method"),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[h,m]=(0,r.useState)(""),[f,g]=(0,r.useState)(""),[p,x]=(0,r.useState)(!1),[v,y]=(0,r.useState)(!1),[b,w]=(0,r.useState)(!1),[j,_]=(0,r.useState)(""),[N,k]=(0,r.useState)(null),[C,S]=(0,r.useState)(""),[E,P]=(0,r.useState)([{name:"",gender:"",birthDate:"",relationship:""}]),[A,T]=(0,r.useState)(!1),[I,M]=(0,r.useState)(""),[L,R]=(0,r.useState)(null),O=(0,r.useRef)(!1),[D,z]=(0,r.useState)(""),[U,F]=(0,r.useState)(""),[q,B]=(0,r.useState)(""),[V,W]=(0,r.useState)(""),[H,Y]=(0,r.useState)(180),[K,J]=(0,r.useState)(!1),G=e=>{if(console.log("convertToE164 \uc785\ub825\uac12:",e),e.startsWith("+"))return console.log("\uc774\ubbf8 E.164 \ud615\uc2dd:",e),e;const t=e.replace(/[^0-9]/g,"");if(console.log("\uc22b\uc790\ub9cc \ucd94\ucd9c:",t),11===t.length&&t.startsWith("010")){const e="+82".concat(t.slice(1));return console.log("\ud55c\uad6d \uc804\ud654\ubc88\ud638 \ubcc0\ud658 \uacb0\uacfc:",e),e}const n="+82".concat(t);return console.log("\uae30\ubcf8 \ubcc0\ud658 \uacb0\uacfc:",n),n};r.useEffect(()=>{(async()=>{try{const e=t.get("oauth"),n=t.get("phone");if("success"===e||"success"===n)return void console.log("OAuth/\uc804\ud654\ubc88\ud638 \uc778\uc99d \uc131\uacf5 - \uc138\uc158 \uc720\uc9c0");const{data:{session:s}}=await Se.supabase.auth.getSession();s&&(console.log("\uae30\uc874 \uc138\uc158 \ubc1c\uacac, \ub85c\uadf8\uc544\uc6c3 \ucc98\ub9ac"),await Se.supabase.auth.signOut(),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userProfile"))}catch(I){console.error("\uc138\uc158 \uc815\ub9ac \uc624\ub958:",I)}})()},[]),(0,r.useEffect)(()=>{console.log("authMethod \uc0c1\ud0dc \ubcc0\uacbd:",L)},[L]),(0,r.useEffect)(()=>{let e=null;return"verify"===s&&H>0&&(e=setInterval(()=>{Y(e=>e<=1?(J(!0),0):e-1)},1e3)),()=>{e&&clearInterval(e)}},[s,H]),(0,r.useEffect)(()=>{let e=!0;return(()=>{const n=t.get("step"),s=t.get("oauth"),r=t.get("phone"),i=t.get("error");n&&["auth-method","type","phone","verify","profile"].includes(n)&&a(n),"success"===s&&(a("type"),e&&X()),"success"===r&&(a("type"),R("phone"),e&&$()),i&&("auth_failed"===i?M("\uc18c\uc15c \ub85c\uadf8\uc778\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):"callback_error"===i?M("\uc778\uc99d \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."):"oauth_error"===i&&M("OAuth \uc778\uc99d \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uce74\uce74\uc624\ud1a1 \uc124\uc815\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694."))})(),()=>{e=!1}},[t]);const X=async()=>{if(L)console.log("authMethod\uac00 \uc774\ubbf8 \uc124\uc815\ub428, \uc911\ubcf5 \uc2e4\ud589 \ubc29\uc9c0:",L);else if(O.current)console.log("OAuth \ucc98\ub9ac \uc911, \uc911\ubcf5 \uc2e4\ud589 \ubc29\uc9c0");else{O.current=!0;try{const{data:{user:r}}=await Se.supabase.auth.getUser();if(r){var e;console.log("OAuth \uc0ac\uc6a9\uc790 \uc815\ubcf4:",r.user_metadata);let a=null===(e=r.app_metadata)||void 0===e?void 0:e.provider;var t;if(!a)a=null===(t=r.user_metadata)||void 0===t?void 0:t.provider;if(!a){var n;const e=null===(n=r.app_metadata)||void 0===n?void 0:n.identities;var s;if(e&&e.length>0)a=null===(s=e[0])||void 0===s?void 0:s.provider}"kakao"===a?R("kakao"):"google"===a?R("google"):"apple"===a&&R("apple"),console.log("\uc124\uc815\ub41c authMethod:",a),console.log("userType\uc740 \uc0ac\uc6a9\uc790\uac00 \uc120\ud0dd\ud574\uc57c \ud568"),console.log("setAuthMethod \ud638\ucd9c\ub428:",a)}}catch(I){console.error("OAuth \uc0ac\uc6a9\uc790 \uc815\ubcf4 \uac00\uc838\uc624\uae30 \uc624\ub958:",I)}finally{O.current=!1}}},$=async()=>{try{const{data:{user:e}}=await Se.supabase.auth.getUser();e&&(console.log("\uc804\ud654\ubc88\ud638 \uc778\uc99d \uc0ac\uc6a9\uc790 \uc815\ubcf4:",e),console.log("\uc804\ud654\ubc88\ud638 \uc778\uc99d \uc0ac\uc6a9\uc790 - \uc0ac\uc6a9\uc790 \ud0c0\uc785 \uc120\ud0dd \ub2e8\uacc4\ub85c \uc774\ub3d9"))}catch(I){console.error("\uc804\ud654\ubc88\ud638 \uc778\uc99d \uc0ac\uc6a9\uc790 \uc815\ubcf4 \uac00\uc838\uc624\uae30 \uc624\ub958:",I)}},Z=e=>{o(e),a("profile")},Q=e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){if(n.size>5242880)return void M("\ud504\ub85c\ud544 \uc0ac\uc9c4\uc740 5MB \uc774\ud558\ub85c \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");if(!n.type.startsWith("image/"))return void M("\uc774\ubbf8\uc9c0 \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4.");k(n);const e=new FileReader;e.onload=e=>{var t;S(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(n),M("")}},ee=()=>{k(null),S("")},te=(e,t,n)=>{const s=[...E];s[e]=(0,Ae.A)((0,Ae.A)({},s[e]),{},{[t]:n}),P(s)},se=()=>{"type"===s?a("phone"===L?"verify":"auth-method"):"phone"===s?a("auth-method"):"verify"===s?a("phone"):"profile"===s&&a("type")};return(0,Ee.jsx)(Uo.div,{className:"h-screen bg-white overflow-hidden",children:(0,Ee.jsxs)("div",{className:"container mx-auto px-4 py-8 h-full overflow-y-auto",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,Ee.jsx)("button",{onClick:()=>{"auth-method"===s?e("/login"):se()},className:"p-2 rounded-full bg-transparent transition-colors hover:bg-gray-100",children:(0,Ee.jsx)(Vo,{className:"w-5 h-5 text-gray-600"})}),(0,Ee.jsx)("div",{className:"flex-1 text-center",children:(0,Ee.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\ud68c\uc6d0\uac00\uc785"})}),(0,Ee.jsx)("div",{className:"w-10"})]}),(0,Ee.jsx)("div",{className:"flex justify-center mb-8",children:(0,Ee.jsx)("div",{className:"flex space-x-2",children:["auth-method","phone","verify","type","profile"].map((e,t)=>(0,Ee.jsx)("div",{className:"w-3 h-3 rounded-full ".concat(s===e?"bg-orange-500":t<["auth-method","phone","verify","type","profile"].indexOf(s)?"bg-green-500":"bg-gray-300")},e))})}),(0,Ee.jsxs)("div",{className:"max-w-md mx-auto",children:["type"===s&&(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"space-y-6 pt-16",children:[(0,Ee.jsxs)(Uo.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},className:"text-center",children:[(0,Ee.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"\uc5b4\ub5a4 \ubd84\uc774\uc2e0\uac00\uc694?"}),(0,Ee.jsx)("div",{className:"text-sm text-gray-600 text-center",children:(0,Ee.jsx)("p",{children:"\uc11c\ube44\uc2a4 \uc774\uc6a9 \ubaa9\uc801\uc5d0 \ub9de\uac8c \uc120\ud0dd\ud574\uc8fc\uc138\uc694"})})]}),(0,Ee.jsxs)("div",{className:"space-y-4",children:[(0,Ee.jsx)(Uo.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},onClick:()=>Z("parent"),className:"w-full p-8 bg-orange-50 rounded-2xl shadow-lg border-2 border-transparent hover:border-orange-200 hover:shadow-xl transition-all duration-200 text-left",children:(0,Ee.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center",children:(0,Ee.jsx)("img",{src:"/icons/parants.svg",alt:"\ud559\ubd80\ubaa8",className:"w-16 h-16"})}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("h3",{className:"font-semibold text-gray-900 text-lg",children:"\ud559\ubd80\ubaa8"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600",children:"\uc790\ub140\uc758 \uad50\uc721 \uc11c\ube44\uc2a4\ub97c \ucc3e\ub294 \ubd84"})]})]})}),(0,Ee.jsx)(Uo.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},onClick:()=>Z("teacher"),className:"w-full p-8 bg-blue-50 rounded-2xl shadow-lg border-2 border-transparent hover:border-blue-200 hover:shadow-xl transition-all duration-200 text-left",children:(0,Ee.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 rounded-xl flex items-center justify-center",children:(0,Ee.jsx)("img",{src:"/icons/schoolmaster.svg",alt:"\uad50\uc0ac",className:"w-16 h-16"})}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("h3",{className:"font-semibold text-gray-900 text-lg",children:"\uad50\uc0ac"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600",children:"\uad50\uc721 \uc11c\ube44\uc2a4\ub97c \uc81c\uacf5\ud558\ub294 \ubd84"})]})]})})]})]}),"auth-method"===s&&(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"space-y-6 pt-12",children:[(0,Ee.jsx)("div",{className:"text-center mb-8",children:(0,Ee.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"\uc6d0\ud558\uc2dc\ub294 \uac00\uc785 \ubc29\ubc95\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694"})}),(0,Ee.jsxs)("div",{className:"flex items-center justify-center gap-6",children:[(0,Ee.jsxs)(Uo.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.4,type:"spring"},whileHover:{scale:1.1,y:-5},whileTap:{scale:.95},onClick:()=>{R("phone"),a("phone")},disabled:A,className:"w-16 h-16 bg-gradient-to-br from-[#fb8678] to-[#e67567] rounded-full flex items-center justify-center hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg relative overflow-hidden group",title:"\uc804\ud654\ubc88\ud638 \uc778\uc99d\uc73c\ub85c \uac04\ud3b8\uac00\uc785\ud558\uae30",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300 rounded-full"}),(0,Ee.jsx)(Wo,{className:"w-8 h-8 text-white relative z-10"})]}),(0,Ee.jsxs)(Uo.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5,duration:.4,type:"spring"},whileHover:{scale:1.1,y:-5},whileTap:{scale:.95},onClick:async()=>{T(!0),M(""),R("kakao");try{const{data:e,error:t}=await Se.supabase.auth.signInWithOAuth({provider:"kakao",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(t)throw t;console.log("\uce74\uce74\uc624 OAuth \uc2dc\uc791\ub428:",e)}catch(I){console.error("\uce74\uce74\uc624 \ub85c\uadf8\uc778 \uc624\ub958:",I),M("\uce74\uce74\uc624 \ub85c\uadf8\uc778\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),T(!1)}},disabled:A,className:"w-16 h-16 bg-gradient-to-br from-[#FEE500] to-[#FDD835] rounded-full flex items-center justify-center hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg relative overflow-hidden group",title:"\uce74\uce74\uc624\ud1a1\uc73c\ub85c \uac04\ud3b8\uac00\uc785\ud558\uae30",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300 rounded-full"}),(0,Ee.jsx)("svg",{className:"w-9 h-9 relative z-10",viewBox:"0 0 24 24",fill:"#3C1E1E",children:(0,Ee.jsx)("path",{d:"M12.0009 3C17.7999 3 22.501 6.66445 22.501 11.1847C22.501 15.705 17.7999 19.3694 12.0009 19.3694C11.4127 19.3694 10.8361 19.331 10.2742 19.2586L5.86611 22.1419C5.36471 22.4073 5.18769 22.3778 5.39411 21.7289L6.28571 18.0513C3.40572 16.5919 1.50098 14.0619 1.50098 11.1847C1.50098 6.66445 6.20194 3 12.0009 3ZM17.908 11.0591L19.3783 9.63617C19.5656 9.45485 19.5705 9.15617 19.3893 8.96882C19.2081 8.78172 18.9094 8.77668 18.7219 8.95788L16.7937 10.8239V9.28226C16.7937 9.02172 16.5825 8.81038 16.3218 8.81038C16.0613 8.81038 15.8499 9.02172 15.8499 9.28226V11.8393C15.8321 11.9123 15.8325 11.9879 15.8499 12.0611V13.5C15.8499 13.7606 16.0613 13.9719 16.3218 13.9719C16.5825 13.9719 16.7937 13.7606 16.7937 13.5V12.1373L17.2213 11.7236L18.6491 13.7565C18.741 13.8873 18.8873 13.9573 19.0357 13.9573C19.1295 13.9573 19.2241 13.9293 19.3066 13.8714C19.5199 13.7217 19.5713 13.4273 19.4215 13.214L17.908 11.0591ZM14.9503 12.9839H13.4904V9.29702C13.4904 9.03648 13.2791 8.82514 13.0184 8.82514C12.7579 8.82514 12.5467 9.03648 12.5467 9.29702V13.4557C12.5467 13.7164 12.7579 13.9276 13.0184 13.9276H14.9503C15.211 13.9276 15.4222 13.7164 15.4222 13.4557C15.4222 13.1952 15.211 12.9839 14.9503 12.9839ZM9.09318 11.8925L9.78919 10.1849L10.4265 11.8925H9.09318ZM11.6159 12.3802C11.6161 12.3748 11.6175 12.3699 11.6175 12.3645C11.6175 12.2405 11.5687 12.1287 11.4906 12.0445L10.4452 9.24376C10.3468 8.9639 10.1005 8.77815 9.81761 8.77028C9.53948 8.76277 9.28066 8.93672 9.16453 9.21669L7.50348 13.2924C7.40519 13.5337 7.52107 13.8092 7.76242 13.9076C8.00378 14.006 8.2792 13.89 8.37749 13.6486L8.70852 12.8364H10.7787L11.077 13.6356C11.1479 13.8254 11.3278 13.9426 11.5193 13.9425C11.5741 13.9425 11.6298 13.9329 11.6842 13.9126C11.9284 13.8216 12.0524 13.5497 11.9612 13.3054L11.6159 12.3802ZM8.29446 9.30194C8.29446 9.0414 8.08312 8.83006 7.82258 8.83006H4.57822C4.31755 8.83006 4.10622 9.0414 4.10622 9.30194C4.10622 9.56249 4.31755 9.77382 4.57822 9.77382H5.73824V13.5099C5.73824 13.7705 5.94957 13.9817 6.21012 13.9817C6.47078 13.9817 6.68212 13.7705 6.68212 13.5099V9.77382H7.82258C8.08312 9.77382 8.29446 9.56249 8.29446 9.30194Z"})})]}),(0,Ee.jsxs)(Uo.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.6,duration:.4,type:"spring"},whileHover:{scale:1.1,y:-5},whileTap:{scale:.95},onClick:async()=>{T(!0),M(""),R("google");try{const{data:e,error:t}=await Se.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(t)throw t;console.log("\uad6c\uae00 OAuth \uc2dc\uc791\ub428:",e)}catch(I){console.error("\uad6c\uae00 \ub85c\uadf8\uc778 \uc624\ub958:",I),M("\uad6c\uae00 \ub85c\uadf8\uc778\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),T(!1)}},disabled:A,className:"w-16 h-16 bg-white rounded-full flex items-center justify-center hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 border-2 border-gray-200 shadow-lg relative overflow-hidden group",title:"\uad6c\uae00\ub85c \uac04\ud3b8\uac00\uc785\ud558\uae30",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-gray-100 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-full"}),(0,Ee.jsxs)("svg",{className:"w-8 h-8 relative z-10",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Ee.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Ee.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Ee.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})]}),(0,Ee.jsxs)(Uo.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.7,duration:.4,type:"spring"},whileHover:{scale:1.1,y:-5},whileTap:{scale:.95},onClick:async()=>{T(!0),M(""),R("apple");try{const{data:e,error:t}=await Se.supabase.auth.signInWithOAuth({provider:"apple",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(t)throw t;console.log("\uc560\ud50c OAuth \uc2dc\uc791\ub428:",e)}catch(I){console.error("\uc560\ud50c \ub85c\uadf8\uc778 \uc624\ub958:",I),M("\uc560\ud50c \ub85c\uadf8\uc778\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),T(!1)}},disabled:A,className:"w-16 h-16 bg-gradient-to-br from-black to-gray-800 rounded-full flex items-center justify-center hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg relative overflow-hidden group",title:"\uc560\ud50c\ub85c \uac04\ud3b8\uac00\uc785\ud558\uae30",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300 rounded-full"}),(0,Ee.jsx)("svg",{className:"w-8 h-8 relative z-10",viewBox:"0 0 24 24",fill:"white",children:(0,Ee.jsx)("path",{d:"M11.6734 7.22198C10.7974 7.22198 9.44138 6.22598 8.01338 6.26198C6.12938 6.28598 4.40138 7.35397 3.42938 9.04597C1.47338 12.442 2.92538 17.458 4.83338 20.218C5.76938 21.562 6.87338 23.074 8.33738 23.026C9.74138 22.966 10.2694 22.114 11.9734 22.114C13.6654 22.114 14.1454 23.026 15.6334 22.99C17.1454 22.966 18.1054 21.622 19.0294 20.266C20.0974 18.706 20.5414 17.194 20.5654 17.11C20.5294 17.098 17.6254 15.982 17.5894 12.622C17.5654 9.81397 19.8814 8.46998 19.9894 8.40998C18.6694 6.47798 16.6414 6.26198 15.9334 6.21398C14.0854 6.06998 12.5374 7.22198 11.6734 7.22198ZM14.7934 4.38998C15.5734 3.45398 16.0894 2.14598 15.9454 0.849976C14.8294 0.897976 13.4854 1.59398 12.6814 2.52998C11.9614 3.35798 11.3374 4.68998 11.5054 5.96198C12.7414 6.05798 14.0134 5.32598 14.7934 4.38998Z"})})]})]})]}),"phone"===s&&(0,Ee.jsx)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"space-y-6",children:(0,Ee.jsxs)("div",{className:"space-y-4",children:[(0,Ee.jsx)(Uo.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},className:"text-sm text-gray-600 text-center",children:(0,Ee.jsx)("p",{children:"\uc785\ub825\ud558\uc2e0 \uc804\ud654\ubc88\ud638\uac00 \uc544\uc774\ub514\ub85c \uc0ac\uc6a9\ub429\ub2c8\ub2e4"})}),(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},className:"relative",children:[(0,Ee.jsx)(Wo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,Ee.jsx)("input",{type:"tel",value:l,onChange:e=>{console.log("=== handlePhoneChange \ud638\ucd9c\ub428 ==="),console.log("\ud604\uc7ac authMethod:",L),console.log("\ud604\uc7ac step:",s);const t=e.target.value;console.log("\uc804\ud654\ubc88\ud638 \uc785\ub825 \uac12:",t);const n=(e=>{console.log("formatPhoneNumber \uc785\ub825\uac12:",e);const t=e.replace(/[^0-9]/g,"");return console.log("\uc22b\uc790\ub9cc \ucd94\ucd9c:",t),0===t.length?"":t.length<=11?t.length<=3?t:t.length<=7?"".concat(t.slice(0,3),"-").concat(t.slice(3)):"".concat(t.slice(0,3),"-").concat(t.slice(3,7),"-").concat(t.slice(7)):"".concat(t.slice(0,3),"-").concat(t.slice(3,7),"-").concat(t.slice(7,11))})(t);console.log("\ud3ec\ub9f7\ud305\ub41c \uc804\ud654\ubc88\ud638:",n),c(n),console.log("setPhone \ud638\ucd9c \uc644\ub8cc"),console.log("=== handlePhoneChange \uc644\ub8cc ===")},placeholder:"010-0000-0000",className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#fb8678] focus:border-[#fb8678]"})]}),(0,Ee.jsx)(Uo.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},onClick:async()=>{if(console.log("=== \uc804\ud654\ubc88\ud638 \uc778\uc99d \uc2dc\uc791 ==="),console.log("\uc785\ub825\ub41c \uc804\ud654\ubc88\ud638:",l),console.log("\uc0ac\uc6a9\uc790 \ud0c0\uc785:",i),console.log("\uc0ac\uc6a9\uc790 \uc774\ub984:",h),!l||l.length<10)M("\uc62c\ubc14\ub978 \uc804\ud654\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694");else{T(!0),M("");try{const e=l.replace(/[^0-9]/g,"");console.log("\uc815\ub9ac\ub41c \uc804\ud654\ubc88\ud638 (\ud558\uc774\ud508 \uc81c\uac70):",e);const t=G(e);console.log("E.164 \ud615\uc2dd \uc804\ud654\ubc88\ud638:",t),console.log("Supabase OTP \uc694\uccad \uc2dc\uc791...");const{data:n,error:s}=await Se.supabase.auth.signInWithOtp({phone:t,options:{shouldCreateUser:!0,data:{full_name:h||""}}});if(console.log("Supabase \uc751\ub2f5:",{data:n,error:s}),s)throw s;console.log("\uc778\uc99d\ubc88\ud638 \uc804\uc1a1 \uc131\uacf5!"),a("verify"),Y(180),J(!1),T(!1)}catch(I){var e;console.error("=== \uc804\ud654\ubc88\ud638 \uc778\uc99d \uc624\ub958 \uc0c1\uc138 ==="),console.error("\uc5d0\ub7ec \uac1d\uccb4:",I),console.error("\uc5d0\ub7ec \uba54\uc2dc\uc9c0:",I.message),console.error("\uc5d0\ub7ec \ucf54\ub4dc:",I.status),console.error("\uc5d0\ub7ec \uc0c1\uc138:",I.details),"Unsupported phone provider"===I.message?M("SMS \uc778\uc99d \uc11c\ube44\uc2a4\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud574\uc8fc\uc138\uc694."):"Invalid phone number format (E.164 required)"===I.message?M("\uc804\ud654\ubc88\ud638 \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. 010\uc73c\ub85c \uc2dc\uc791\ud558\ub294 11\uc790\ub9ac \ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."):null!==(e=I.message)&&void 0!==e&&e.includes("phone")?M("\uc804\ud654\ubc88\ud638 \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574\uc8fc\uc138\uc694."):M("\uc778\uc99d\ubc88\ud638 \uc804\uc1a1\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(I.message)),T(!1)}}},disabled:A,className:"w-full bg-[#fb8678] text-white py-4 rounded-xl font-semibold hover:bg-[#e67567] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:A?"\uc804\uc1a1 \uc911...":"\uc778\uc99d\ubc88\ud638 \ubc1b\uae30"})]})}),"verify"===s&&(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"space-y-6",children:[(0,Ee.jsxs)(Uo.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},className:"text-center",children:[(0,Ee.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"6\uc790\ub9ac \uc778\uc99d\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"}),(0,Ee.jsx)(Uo.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.5},className:"mt-2 text-sm text-gray-500",children:H>0?(0,Ee.jsxs)("span",{children:["\uc778\uc99d\ubc88\ud638 \ub9cc\ub8cc\uae4c\uc9c0 ",H,"\ucd08 \ub0a8\uc558\uc2b5\ub2c8\ub2e4"]}):(0,Ee.jsx)("span",{className:"text-red-500",children:"\uc778\uc99d\ubc88\ud638\uac00 \ub9cc\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4"})})]}),(0,Ee.jsxs)("div",{className:"space-y-4",children:[(0,Ee.jsx)(Uo.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},className:"relative",children:(0,Ee.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),placeholder:"000000",maxLength:6,className:"w-full px-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#fb8678] focus:border-[#fb8678] text-center tracking-widest"})}),(0,Ee.jsx)(Uo.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},onClick:async()=>{if(d&&6===d.length){T(!0),M("");try{var e;const o=l.replace(/[^0-9]/g,""),{data:c,error:h}=await Se.supabase.auth.verifyOtp({phone:G(o),token:d,type:"sms"});if(h)throw h;console.log("\uc778\uc99d\ubc88\ud638 \ud655\uc778 \uc131\uacf5!"),console.log("\uc778\uc99d\ub41c \uc0ac\uc6a9\uc790:",null===(e=c.user)||void 0===e?void 0:e.id);try{var t,s;console.log("\ud504\ub85c\ud544 \uc870\ud68c \uc2dc\uc791 - auth_user_id:",null===(t=c.user)||void 0===t?void 0:t.id);const{data:e,error:o}=await Se.supabase.from("profiles").select("*").eq("auth_user_id",null===(s=c.user)||void 0===s?void 0:s.id).maybeSingle();if(console.log("\ud504\ub85c\ud544 \uc870\ud68c \uacb0\uacfc:",{profileData:e,profileError:o}),o){var r,i;if(console.error("\ud504\ub85c\ud544 \uc870\ud68c \uc624\ub958:",o),"PGRST301"===o.code||null!==(r=o.message)&&void 0!==r&&r.includes("406")||null!==(i=o.message)&&void 0!==i&&i.includes("Not Acceptable"))return console.log("RLS \uc815\ucc45 \uc624\ub958 - \uc2e0\uaddc \uc0ac\uc6a9\uc790\ub85c \ucc98\ub9ac"),void a("type");throw o}if(e){console.log("\uae30\uc874 \uc0ac\uc6a9\uc790 \ubc1c\uacac:",e),localStorage.setItem("isLoggedIn","true"),localStorage.setItem("userProfile",JSON.stringify(e));const{initializeFCM:t}=await n.e(693).then(n.bind(n,693));return await t(),void(window.location.href="/main")}console.log("\uc2e0\uaddc \uc0ac\uc6a9\uc790 - \ud504\ub85c\ud544 \uc791\uc131 \ub2e8\uacc4\ub85c \uc774\ub3d9"),a("type")}catch(u){console.error("\ud504\ub85c\ud544 \ud655\uc778 \uc911 \uc624\ub958:",u),a("type")}T(!1)}catch(I){var o,c;console.error("\uc778\uc99d\ubc88\ud638 \ud655\uc778 \uc624\ub958:",I),"Token has expired or is invalid"===I.message?M("\uc778\uc99d\ubc88\ud638\uac00 \ub9cc\ub8cc\ub418\uc5c8\uac70\ub098 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc0c8\ub85c\uc6b4 \uc778\uc99d\ubc88\ud638\ub97c \ubc1b\uc544\uc8fc\uc138\uc694."):null!==(o=I.message)&&void 0!==o&&o.includes("expired")?M("\uc778\uc99d\ubc88\ud638\uac00 \ub9cc\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc0c8\ub85c\uc6b4 \uc778\uc99d\ubc88\ud638\ub97c \ubc1b\uc544\uc8fc\uc138\uc694."):null!==(c=I.message)&&void 0!==c&&c.includes("invalid")?M("\uc778\uc99d\ubc88\ud638\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc815\ud655\ud788 \uc785\ub825\ud574\uc8fc\uc138\uc694."):M("\uc778\uc99d\ubc88\ud638 \ud655\uc778\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(I.message)),T(!1)}}else M("6\uc790\ub9ac \uc778\uc99d\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694")},disabled:A,className:"w-full bg-[#fb8678] text-white py-4 rounded-xl font-semibold hover:bg-[#e67567] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:A?"\ud655\uc778 \uc911...":"\uc778\uc99d\ud558\uae30"}),K&&(0,Ee.jsx)(Uo.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},onClick:async()=>{if(K){T(!0),M(""),Y(180),J(!1);try{const e=l.replace(/[^0-9]/g,""),{data:t,error:n}=await Se.supabase.auth.signInWithOtp({phone:G(e),options:{shouldCreateUser:!0,data:{full_name:h||""}}});if(n)throw n;console.log("\uc778\uc99d\ubc88\ud638 \uc7ac\uc804\uc1a1 \uc131\uacf5!"),M("")}catch(I){console.error("\uc778\uc99d\ubc88\ud638 \uc7ac\uc804\uc1a1 \uc624\ub958:",I),M("\uc778\uc99d\ubc88\ud638 \uc7ac\uc804\uc1a1\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),Y(0),J(!0)}finally{T(!1)}}},disabled:A,className:"w-full bg-gray-200 text-gray-700 py-4 rounded-xl font-medium hover:bg-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:A?"\uc7ac\uc804\uc1a1 \uc911...":"\uc778\uc99d\ubc88\ud638 \uc7ac\uc804\uc1a1 (".concat(H,"\ucd08 \ud6c4 \uac00\ub2a5)")})]})]}),"profile"===s&&(0,Ee.jsxs)("div",{className:"space-y-6",children:["teacher"===i?(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsxs)("div",{className:"flex justify-center",children:[(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("div",{className:"w-24 h-24 rounded-xl bg-gray-200 border-2 border-gray-300 flex items-center justify-center cursor-pointer hover:border-orange-400 transition-colors overflow-hidden",onClick:()=>{var e;return null===(e=document.getElementById("profile-image-input"))||void 0===e?void 0:e.click()},children:C?(0,Ee.jsx)("img",{src:C,alt:"\ud504\ub85c\ud544 \uc0ac\uc9c4",className:"w-full h-full object-cover rounded-xl"}):(0,Ee.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),C&&(0,Ee.jsx)("button",{onClick:ee,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Ee.jsx)("input",{id:"profile-image-input",type:"file",accept:"image/*",onChange:Q,className:"hidden"})]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)(Ho,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,Ee.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"\uad50\uc0ac \uc774\ub984(\uc2e4\uba85) *",className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),(0,Ee.jsx)("input",{type:"text",placeholder:"\uc18c\uc18d \uae30\uad00\uba85 * (\uc608: \u25cb\u25cb\uc720\uce58\uc6d0, \u25cb\u25cb\uc5b4\ub9b0\uc774\uc9d1)",value:D,onChange:e=>z(e.target.value),className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsxs)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,Ee.jsx)("input",{type:"text",placeholder:"\uae30\uad00 \uc704\uce58(\uc8fc\uc18c) *",className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),(0,Ee.jsx)("input",{type:"text",placeholder:"\ub2f4\ub2f9 \ubc18/\ud559\uae09 \uc774\ub984 * (\uc608: \ubcc4\ub2d8\ubc18, 5\uc138\ubc18)",value:U,onChange:e=>F(e.target.value),className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2-2v2m8 0V6a2 2 0 012 2v6a2 2 0 01-2 2H8a2 2 0 01-2-2V8a2 2 0 012-2V6"})}),(0,Ee.jsx)("input",{type:"number",placeholder:"\uad50\uc0ac \uacbd\ub825 \uc5f0\uc218 (\uc608: 5)",value:q,onChange:e=>B(e.target.value),min:"0",max:"50",className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(0,Ee.jsx)("textarea",{placeholder:"\uac04\ub2e8\ud55c \uc18c\uac1c/\uc778\uc0ac\ub9d0 (\uc120\ud0dd)",rows:3,value:V,onChange:e=>W(e.target.value),className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent resize-none text-sm"})]})]}):(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsxs)("div",{className:"flex justify-center",children:[(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("div",{className:"w-24 h-24 rounded-xl bg-gray-200 border-2 border-gray-300 flex items-center justify-center cursor-pointer hover:border-orange-400 transition-colors overflow-hidden",onClick:()=>{var e;return null===(e=document.getElementById("profile-image-input"))||void 0===e?void 0:e.click()},children:C?(0,Ee.jsx)("img",{src:C,alt:"\ud504\ub85c\ud544 \uc0ac\uc9c4",className:"w-full h-full object-cover rounded-xl"}):(0,Ee.jsx)("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),C&&(0,Ee.jsx)("button",{onClick:ee,className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Ee.jsx)("input",{id:"profile-image-input",type:"file",accept:"image/*",onChange:Q,className:"hidden"})]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)(Ho,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,Ee.jsx)("input",{type:"text",value:h,onChange:e=>m(e.target.value),placeholder:"\ud559\ubd80\ubaa8 \uc774\ub984(\uc2e4\uba85) *",className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm"})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("div",{className:"relative flex items-center space-x-2",children:[(0,Ee.jsxs)("div",{className:"relative flex-1",children:[(0,Ee.jsx)("svg",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),(0,Ee.jsx)("input",{type:"text",placeholder:"\ub2c9\ub124\uc784 * (8\uc790 \uc774\ub0b4)",value:f,onChange:e=>{const t=e.target.value;t.length<=8&&(g(t),x(!1),y(!1),_(""))},className:"w-full pl-12 pr-4 py-4 border rounded-xl focus:ring-2 focus:ring-orange-500 focus:border-transparent text-sm ".concat(p?v?"border-green-500":"border-red-500":"border-gray-300")})]}),(0,Ee.jsx)("button",{type:"button",onClick:async()=>{if(f.trim())if(f.trim().length<2)_("\ub2c9\ub124\uc784\uc740 2\uc790 \uc774\uc0c1\uc774\uc5b4\uc57c \ud569\ub2c8\ub2e4");else{w(!0),_("");try{const{data:e,error:t}=await Se.supabase.from("profiles").select("nickname").eq("nickname",f.trim()).maybeSingle();if(t&&"PGRST116"!==t.code)return console.error("\ub2c9\ub124\uc784 \uc911\ubcf5\ud655\uc778 \uc624\ub958:",t),_("\uc911\ubcf5\ud655\uc778 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"),x(!1),void y(!1);e?(_("\uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc778 \ub2c9\ub124\uc784\uc785\ub2c8\ub2e4"),x(!0),y(!1)):(_("\uc0ac\uc6a9 \uac00\ub2a5\ud55c \ub2c9\ub124\uc784\uc785\ub2c8\ub2e4"),x(!0),y(!0))}catch(I){console.error("\ub2c9\ub124\uc784 \uc911\ubcf5\ud655\uc778 \uc624\ub958:",I),_("\uc911\ubcf5\ud655\uc778 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4"),x(!1),y(!1)}finally{w(!1)}}else _("\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694")},disabled:b||!f.trim(),className:"px-4 py-4 bg-[#fb8678] text-white text-sm font-semibold rounded-xl hover:bg-[#e67567] disabled:opacity-50 disabled:cursor-not-allowed transition-colors whitespace-nowrap",children:b?"\ud655\uc778 \uc911...":"\uc911\ubcf5\ud655\uc778"})]}),j&&(0,Ee.jsx)("p",{className:"mt-2 text-xs ".concat(v?"text-green-600":"text-red-600"),children:j})]}),(0,Ee.jsxs)("div",{className:"space-y-2",children:[E.map((e,t)=>(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"bg-gray-50 px-3 py-2 relative flex items-center justify-center",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:0===t?"\uccab \ubc88\uc9f8 \uc790\ub140 \uc815\ubcf4":"".concat(t+1,"\ubc88\uc9f8 \uc790\ub140 \uc815\ubcf4")}),E.length>1&&(0,Ee.jsx)("button",{onClick:()=>(e=>{E.length>1&&P(E.filter((t,n)=>n!==e))})(t),className:"absolute right-3 text-red-500 hover:text-red-700 text-xs font-medium",children:"\uc81c\uac70"})]}),(0,Ee.jsx)("div",{className:"p-3",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,Ee.jsxs)("div",{className:"flex justify-center",children:[(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("div",{className:"w-20 h-20 rounded-full bg-gray-200 border-2 border-gray-300 flex items-center justify-center cursor-pointer hover:border-orange-400 transition-colors overflow-hidden",onClick:()=>{var e;return null===(e=document.getElementById("child-profile-image-".concat(t)))||void 0===e?void 0:e.click()},children:e.profileImagePreview?(0,Ee.jsx)("img",{src:e.profileImagePreview,alt:"".concat(e.name," \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):(0,Ee.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),e.profileImagePreview&&(0,Ee.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),(e=>{const t=[...E];t[e]=(0,Ae.A)((0,Ae.A)({},t[e]),{},{profileImage:null,profileImagePreview:void 0,profileImageUrl:void 0}),P(t)})(t)},className:"absolute -top-1 -right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:(0,Ee.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Ee.jsx)("input",{id:"child-profile-image-".concat(t),type:"file",accept:"image/*",onChange:e=>((e,t)=>{var n;const s=null===(n=t.target.files)||void 0===n?void 0:n[0];if(s){if(s.size>5242880)return void M("\ud504\ub85c\ud544 \uc0ac\uc9c4\uc740 5MB \uc774\ud558\ub85c \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");if(!s.type.startsWith("image/"))return void M("\uc774\ubbf8\uc9c0 \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4.");const t=[...E];t[e]=(0,Ae.A)((0,Ae.A)({},t[e]),{},{profileImage:s});const n=new FileReader;n.onload=t=>{var n;const r=[...E];r[e]=(0,Ae.A)((0,Ae.A)({},r[e]),{},{profileImage:s,profileImagePreview:null===(n=t.target)||void 0===n?void 0:n.result}),P(r)},n.readAsDataURL(s),M("")}})(t,e),className:"hidden"})]}),(0,Ee.jsxs)("div",{className:"space-y-3 text-xs",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-gray-500 font-semibold mb-1",children:"\uc774\ub984"}),(0,Ee.jsx)("input",{type:"text",placeholder:"\uc790\ub140 \uc774\ub984 *",value:e.name,onChange:e=>te(t,"name",e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-xs"})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-gray-500 font-semibold mb-1",children:"\uc131\ubcc4"}),(0,Ee.jsxs)("select",{value:e.gender,onChange:e=>te(t,"gender",e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-xs appearance-none",children:[(0,Ee.jsx)("option",{value:"",children:"\uc131\ubcc4 \uc120\ud0dd *"}),(0,Ee.jsx)("option",{value:"\ub0a8\uc790",children:"\ub0a8\uc544"}),(0,Ee.jsx)("option",{value:"\uc5ec\uc790",children:"\uc5ec\uc544"})]})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-gray-500 font-semibold mb-1",children:"\uc0dd\ub144\uc6d4\uc77c"}),(0,Ee.jsx)("input",{type:"date",value:e.birthDate,onChange:e=>te(t,"birthDate",e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-xs"})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-gray-500 font-semibold mb-1",children:"\ubcf4\ud638\uc790 \uad00\uacc4"}),(0,Ee.jsxs)("select",{value:e.relationship,onChange:e=>te(t,"relationship",e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-xs appearance-none",children:[(0,Ee.jsx)("option",{value:"",children:"\uc120\ud0dd\ud574\uc8fc\uc138\uc694"}),(0,Ee.jsx)("option",{value:"\uc5c4\ub9c8",children:"\uc5c4\ub9c8"}),(0,Ee.jsx)("option",{value:"\uc544\ube60",children:"\uc544\ube60"}),(0,Ee.jsx)("option",{value:"\ud560\uba38\ub2c8",children:"\ud560\uba38\ub2c8"}),(0,Ee.jsx)("option",{value:"\ud560\uc544\ubc84\uc9c0",children:"\ud560\uc544\ubc84\uc9c0"}),(0,Ee.jsx)("option",{value:"\uc0bc\ucd0c",children:"\uc0bc\ucd0c"}),(0,Ee.jsx)("option",{value:"\uc774\ubaa8/\uace0\ubaa8",children:"\uc774\ubaa8/\uace0\ubaa8"})]})]})]})]})})]},t)),(0,Ee.jsx)("button",{onClick:()=>{P([...E,{name:"",gender:"",birthDate:"",relationship:"",profileImage:null,profileImagePreview:void 0}])},className:"w-full text-sm text-[#fb8678] hover:text-[#e67567] font-medium py-2 border border-[#fb8678] rounded-lg hover:bg-[#fb8678] hover:text-white transition-colors",children:"+ \uc790\ub140 \ucd94\uac00\ud558\uae30"})]})]}),(0,Ee.jsx)("button",{onClick:async()=>{if(h.trim()){if("parent"===i){if(!f.trim())return void M("\ub2c9\ub124\uc784\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694");if(!p||!v)return void M("\ub2c9\ub124\uc784 \uc911\ubcf5\ud655\uc778\uc744 \ud574\uc8fc\uc138\uc694")}if(i){if(!L)return console.error("authMethod\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc74c:",L),console.error("\ud604\uc7ac \uc0c1\ud0dc - userType:",i,"authMethod:",L),void M("\uc778\uc99d \ubc29\ubc95\uc744 \ud655\uc778\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694");T(!0),M("");try{let t=null;if("phone"===L){console.log("\uc804\ud654\ubc88\ud638 \uac00\uc785\uc790 - \uae30\uc874 \uc778\uc99d\ub41c \uc138\uc158 \uc0ac\uc6a9");const{data:{user:e}}=await Se.supabase.auth.getUser();if(!e)throw new Error("\uc778\uc99d\ub41c \uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");t=e,console.log("\uc804\ud654\ubc88\ud638 \uac00\uc785\uc790 \uc138\uc158 \ud655\uc778:",t.id);const{error:n}=await Se.supabase.auth.updateUser({data:{user_type:i,full_name:h.trim(),auth_method:L}});if(n)throw n;console.log("\u2705 \uc804\ud654\ubc88\ud638 \uac00\uc785\uc790 \uba54\ud0c0\ub370\uc774\ud130 \uc5c5\ub370\uc774\ud2b8 \uc131\uacf5")}else{const{data:{user:e}}=await Se.supabase.auth.getUser();if(!e)throw new Error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");t=e}if("phone"!==L){const{error:e}=await Se.supabase.auth.updateUser({data:{user_type:i,full_name:h.trim(),nickname:"parent"===i?f.trim()||"":void 0}});if(e)throw e}let s=null;if(N)try{s=await(0,Se.O)(N,t.id)}catch(I){console.error("\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc2e4\ud328:",I)}let r=E;"parent"===i&&(r=await Promise.all(E.map(async(e,n)=>{if(e.profileImage)try{const s=Date.now(),r="".concat(t.id,"/children/").concat(n,"_").concat(s),{data:a,error:i}=await Se.supabase.storage.from("profile-images").upload(r,e.profileImage,{cacheControl:"3600",upsert:!1});if(i)throw i;const{data:{publicUrl:o}}=Se.supabase.storage.from("profile-images").getPublicUrl(r);return(0,Ae.A)((0,Ae.A)({},e),{},{profileImageUrl:o})}catch(I){return console.error("\uc790\ub140 ".concat(n+1," \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc2e4\ud328:"),I),e}return e})));const a="user_".concat(t.id.substring(0,8),"_").concat(Date.now()),o={auth_user_id:t.id,user_type:i,full_name:h.trim(),auth_method:L,email:t.email||null,username:a,nickname:"parent"===i?f.trim()||"":null,profile_image_url:s,children_info:"parent"===i?r.filter(e=>e.name.trim()).map(e=>({name:e.name.trim(),gender:e.gender,birth_date:e.birthDate,relationship:e.relationship,profile_image_url:e.profileImageUrl||null})):null,school_name:"teacher"===i?D.trim()||"":null,subject:"teacher"===i?U.trim()||"":null,experience_years:"teacher"===i?parseInt(q)||0:null};console.log("\uc800\uc7a5\ud560 \ud504\ub85c\ud544 \ub370\uc774\ud130:",o),console.log("userType:",i),console.log("authMethod:",L),console.log("\ud604\uc7ac \uc778\uc99d\ub41c \uc0ac\uc6a9\uc790:",t);const{data:{user:l},error:c}=await Se.supabase.auth.getUser();if(console.log("\ucd5c\uc885 \ud655\uc778 - \ud604\uc7ac auth.uid():",null===l||void 0===l?void 0:l.id),console.log("\ucd5c\uc885 \ud655\uc778 - \ud504\ub85c\ud544 auth_user_id:",o.auth_user_id),console.log("\ucd5c\uc885 \ud655\uc778 - \uc77c\uce58 \uc5ec\ubd80:",(null===l||void 0===l?void 0:l.id)===o.auth_user_id),c)throw console.error("\uc778\uc99d \uc0c1\ud0dc \ud655\uc778 \uc624\ub958:",c),new Error("\uc778\uc99d \uc0c1\ud0dc\ub97c \ud655\uc778\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(!l)throw new Error("\uc778\uc99d\ub41c \uc0ac\uc6a9\uc790\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");if(l.id!==o.auth_user_id)throw new Error("\uc778\uc99d \uc0c1\ud0dc\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");console.log("\u2705 \ucd5c\uc885 \uc778\uc99d \uc0c1\ud0dc \ud655\uc778 \uc644\ub8cc"),console.log("\uad50\uc0ac \uad00\ub828 \ub370\uc774\ud130:",{schoolName:D.trim(),subject:U.trim(),experienceYears:q,introduction:V.trim()}),console.log("\ud504\ub85c\ud544 \uc800\uc7a5 \uc2dc\ub3c4...");const{data:d,error:u}=await Se.supabase.from("profiles").upsert([o],{onConflict:"auth_user_id"}).select();if(u)throw console.error("\ud504\ub85c\ud544 \uc800\uc7a5 \uc624\ub958 \uc0c1\uc138:",u),console.error("\uc5d0\ub7ec \ucf54\ub4dc:",u.code),console.error("\uc5d0\ub7ec \uba54\uc2dc\uc9c0:",u.message),console.error("\uc5d0\ub7ec \uc0c1\uc138:",u.details),console.error("\uc5d0\ub7ec \ud78c\ud2b8:",u.hint),new Error("\ud504\ub85c\ud544 \uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(u.message));console.log("\ud504\ub85c\ud544 \uc800\uc7a5 \uc131\uacf5:",d);const{initializeFCM:m}=await n.e(693).then(n.bind(n,693));await m(),e("/main")}catch(I){console.error("\ud504\ub85c\ud544 \uc800\uc7a5 \uc624\ub958:",I),M("\ud68c\uc6d0\uac00\uc785\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),T(!1)}}else M("\uc0ac\uc6a9\uc790 \ud0c0\uc785\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694")}else M("\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694")},disabled:A,className:"w-full bg-[#fb8678] text-white py-4 rounded-xl font-semibold hover:bg-[#e67567] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:A?"\uac00\uc785 \uc911...":"\ud68c\uc6d0\uac00\uc785 \uc644\ub8cc"})]})]},s),I&&(0,Ee.jsx)(Uo.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"max-w-md mx-auto mt-4 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700 text-sm text-center",children:I})]})})},Ko=()=>{const e=ne(),[t,n]=(0,r.useState)(!1),[s,a]=(0,r.useState)("");return(0,Ee.jsxs)(Uo.div,{className:"h-screen bg-white flex items-center justify-center overflow-hidden relative",children:[(0,Ee.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,Ee.jsx)(Uo.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:.1},transition:{duration:1,delay:.2},className:"absolute -top-20 -left-20 w-64 h-64 bg-[#fb8678] rounded-full blur-3xl"}),(0,Ee.jsx)(Uo.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:.1},transition:{duration:1,delay:.4},className:"absolute -bottom-20 -right-20 w-64 h-64 bg-[#FEE500] rounded-full blur-3xl"}),(0,Ee.jsx)(Uo.div,{initial:{scale:0,opacity:0},animate:{scale:1,opacity:.08},transition:{duration:1,delay:.6},className:"absolute top-1/3 left-10 w-32 h-32 bg-[#fb8678] rounded-full blur-2xl"})]}),(0,Ee.jsxs)("div",{className:"w-full max-w-md px-4 relative z-10",children:[(0,Ee.jsx)(Uo.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"flex flex-col items-center justify-center mb-24",children:(0,Ee.jsx)(Uo.div,{initial:{scale:.8},animate:{scale:1},transition:{duration:.5,type:"spring"},children:(0,Ee.jsx)("img",{src:"/headericon.png",alt:"MomPick",className:"w-40 h-40 object-contain drop-shadow-lg"})})}),(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-center gap-6 mb-8",children:[(0,Ee.jsxs)(Uo.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.4,duration:.4,type:"spring"},whileHover:{scale:1.1,y:-5},whileTap:{scale:.95},onClick:()=>{e("/phone-login")},disabled:t,className:"w-16 h-16 bg-gradient-to-br from-[#fb8678] to-[#e67567] rounded-full flex items-center justify-center hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg relative overflow-hidden group",title:"\uc804\ud654\ubc88\ud638\ub85c \ub85c\uadf8\uc778",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300 rounded-full"}),(0,Ee.jsx)(Wo,{className:"w-8 h-8 text-white relative z-10"})]}),(0,Ee.jsxs)(Uo.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.5,duration:.4,type:"spring"},whileHover:{scale:1.1,y:-5},whileTap:{scale:.95},onClick:async()=>{n(!0),a("");try{const{data:e,error:t}=await Se.supabase.auth.signInWithOAuth({provider:"kakao",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(t)throw t}catch(s){a("\uce74\uce74\uc624 \ub85c\uadf8\uc778\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4"),n(!1)}},disabled:t,className:"w-16 h-16 bg-gradient-to-br from-[#FEE500] to-[#FDD835] rounded-full flex items-center justify-center hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg relative overflow-hidden group",title:"\uce74\uce74\uc624\ud1a1\uc73c\ub85c \ub85c\uadf8\uc778",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-20 transition-opacity duration-300 rounded-full"}),(0,Ee.jsx)("svg",{className:"w-9 h-9 relative z-10",viewBox:"0 0 24 24",fill:"#3C1E1E",children:(0,Ee.jsx)("path",{d:"M12.0009 3C17.7999 3 22.501 6.66445 22.501 11.1847C22.501 15.705 17.7999 19.3694 12.0009 19.3694C11.4127 19.3694 10.8361 19.331 10.2742 19.2586L5.86611 22.1419C5.36471 22.4073 5.18769 22.3778 5.39411 21.7289L6.28571 18.0513C3.40572 16.5919 1.50098 14.0619 1.50098 11.1847C1.50098 6.66445 6.20194 3 12.0009 3ZM17.908 11.0591L19.3783 9.63617C19.5656 9.45485 19.5705 9.15617 19.3893 8.96882C19.2081 8.78172 18.9094 8.77668 18.7219 8.95788L16.7937 10.8239V9.28226C16.7937 9.02172 16.5825 8.81038 16.3218 8.81038C16.0613 8.81038 15.8499 9.02172 15.8499 9.28226V11.8393C15.8321 11.9123 15.8325 11.9879 15.8499 12.0611V13.5C15.8499 13.7606 16.0613 13.9719 16.3218 13.9719C16.5825 13.9719 16.7937 13.7606 16.7937 13.5V12.1373L17.2213 11.7236L18.6491 13.7565C18.741 13.8873 18.8873 13.9573 19.0357 13.9573C19.1295 13.9573 19.2241 13.9293 19.3066 13.8714C19.5199 13.7217 19.5713 13.4273 19.4215 13.214L17.908 11.0591ZM14.9503 12.9839H13.4904V9.29702C13.4904 9.03648 13.2791 8.82514 13.0184 8.82514C12.7579 8.82514 12.5467 9.03648 12.5467 9.29702V13.4557C12.5467 13.7164 12.7579 13.9276 13.0184 13.9276H14.9503C15.211 13.9276 15.4222 13.7164 15.4222 13.4557C15.4222 13.1952 15.211 12.9839 14.9503 12.9839ZM9.09318 11.8925L9.78919 10.1849L10.4265 11.8925H9.09318ZM11.6159 12.3802C11.6161 12.3748 11.6175 12.3699 11.6175 12.3645C11.6175 12.2405 11.5687 12.1287 11.4906 12.0445L10.4452 9.24376C10.3468 8.9639 10.1005 8.77815 9.81761 8.77028C9.53948 8.76277 9.28066 8.93672 9.16453 9.21669L7.50348 13.2924C7.40519 13.5337 7.52107 13.8092 7.76242 13.9076C8.00378 14.006 8.2792 13.89 8.37749 13.6486L8.70852 12.8364H10.7787L11.077 13.6356C11.1479 13.8254 11.3278 13.9426 11.5193 13.9425C11.5741 13.9425 11.6298 13.9329 11.6842 13.9126C11.9284 13.8216 12.0524 13.5497 11.9612 13.3054L11.6159 12.3802ZM8.29446 9.30194C8.29446 9.0414 8.08312 8.83006 7.82258 8.83006H4.57822C4.31755 8.83006 4.10622 9.0414 4.10622 9.30194C4.10622 9.56249 4.31755 9.77382 4.57822 9.77382H5.73824V13.5099C5.73824 13.7705 5.94957 13.9817 6.21012 13.9817C6.47078 13.9817 6.68212 13.7705 6.68212 13.5099V9.77382H7.82258C8.08312 9.77382 8.29446 9.56249 8.29446 9.30194Z"})})]}),(0,Ee.jsxs)(Uo.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.6,duration:.4,type:"spring"},whileHover:{scale:1.1,y:-5},whileTap:{scale:.95},onClick:async()=>{n(!0),a("");try{const{data:e,error:t}=await Se.supabase.auth.signInWithOAuth({provider:"google",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(t)throw t}catch(s){a("\uad6c\uae00 \ub85c\uadf8\uc778\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4"),n(!1)}},disabled:t,className:"w-16 h-16 bg-white rounded-full flex items-center justify-center hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 border-2 border-gray-200 shadow-lg relative overflow-hidden group",title:"\uad6c\uae00\ub85c \ub85c\uadf8\uc778",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-gray-100 opacity-0 group-hover:opacity-100 transition-opacity duration-300 rounded-full"}),(0,Ee.jsxs)("svg",{className:"w-8 h-8 relative z-10",viewBox:"0 0 24 24",children:[(0,Ee.jsx)("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),(0,Ee.jsx)("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),(0,Ee.jsx)("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),(0,Ee.jsx)("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})]}),(0,Ee.jsxs)(Uo.button,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:.7,duration:.4,type:"spring"},whileHover:{scale:1.1,y:-5},whileTap:{scale:.95},onClick:async()=>{n(!0),a("");try{const{data:e,error:t}=await Se.supabase.auth.signInWithOAuth({provider:"apple",options:{redirectTo:"".concat(window.location.origin,"/auth/callback")}});if(t)throw t}catch(s){a("\uc560\ud50c \ub85c\uadf8\uc778\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4"),n(!1)}},disabled:t,className:"w-16 h-16 bg-gradient-to-br from-black to-gray-800 rounded-full flex items-center justify-center hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 shadow-lg relative overflow-hidden group",title:"\uc560\ud50c\ub85c \ub85c\uadf8\uc778",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-white opacity-0 group-hover:opacity-10 transition-opacity duration-300 rounded-full"}),(0,Ee.jsx)("svg",{className:"w-8 h-8 relative z-10",viewBox:"0 0 24 24",fill:"white",children:(0,Ee.jsx)("path",{d:"M11.6734 7.22198C10.7974 7.22198 9.44138 6.22598 8.01338 6.26198C6.12938 6.28598 4.40138 7.35397 3.42938 9.04597C1.47338 12.442 2.92538 17.458 4.83338 20.218C5.76938 21.562 6.87338 23.074 8.33738 23.026C9.74138 22.966 10.2694 22.114 11.9734 22.114C13.6654 22.114 14.1454 23.026 15.6334 22.99C17.1454 22.966 18.1054 21.622 19.0294 20.266C20.0974 18.706 20.5414 17.194 20.5654 17.11C20.5294 17.098 17.6254 15.982 17.5894 12.622C17.5654 9.81397 19.8814 8.46998 19.9894 8.40998C18.6694 6.47798 16.6414 6.26198 15.9334 6.21398C14.0854 6.06998 12.5374 7.22198 11.6734 7.22198ZM14.7934 4.38998C15.5734 3.45398 16.0894 2.14598 15.9454 0.849976C14.8294 0.897976 13.4854 1.59398 12.6814 2.52998C11.9614 3.35798 11.3374 4.68998 11.5054 5.96198C12.7414 6.05798 14.0134 5.32598 14.7934 4.38998Z"})})]})]}),(0,Ee.jsx)(Uo.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8,duration:.5},className:"text-center mt-8",children:(0,Ee.jsxs)("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gray-50 hover:bg-gray-100 transition-colors",children:[(0,Ee.jsx)("span",{className:"text-gray-500 text-sm",children:"\ucc98\uc74c\uc774\uc2e0\uac00\uc694?"}),(0,Ee.jsxs)("button",{onClick:()=>{e("/signup")},className:"text-[#fb8678] hover:text-[#e67567] transition-colors text-sm font-bold relative group",children:["\ud68c\uc6d0\uac00\uc785\ud558\uae30",(0,Ee.jsx)("span",{className:"absolute bottom-0 left-0 w-0 h-0.5 bg-[#fb8678] group-hover:w-full transition-all duration-300"})]})]})})]}),s&&(0,Ee.jsx)(Uo.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"max-w-md mx-auto mt-4 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700 text-sm text-center",children:s})]})]})},Jo=e=>{const t=e.replace(/[^0-9]/g,"");return 11===t.length&&t.startsWith("010")?"+82".concat(t.slice(1)):e.startsWith("+")?e:"+82".concat(t)},Go=()=>{const e=ne(),[t,s]=(0,r.useState)(!1),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)("input"),[u,h]=(0,r.useState)(""),[m,f]=(0,r.useState)(""),[g,p]=(0,r.useState)(0),[x,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let e=null;return"verify"===c&&g>0&&(e=setInterval(()=>{p(e=>e<=1?(v(!0),0):e-1)},1e3)),()=>{e&&clearInterval(e)}},[c,g]);return(0,Ee.jsx)(Uo.div,{className:"h-screen bg-white overflow-hidden",children:(0,Ee.jsxs)("div",{className:"container mx-auto px-4 py-8 h-full overflow-y-auto",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,Ee.jsx)("button",{onClick:()=>{e("/login")},className:"p-2 rounded-full bg-transparent transition-colors hover:bg-gray-100",children:(0,Ee.jsx)(Vo,{className:"w-5 h-5 text-gray-600"})}),(0,Ee.jsx)("div",{className:"flex-1 text-center",children:(0,Ee.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"\uc804\ud654\ubc88\ud638 \ub85c\uadf8\uc778"})}),(0,Ee.jsx)("div",{className:"w-10"})]}),(0,Ee.jsxs)("div",{className:"max-w-md mx-auto",children:["input"===c&&(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"space-y-6",children:[(0,Ee.jsx)(Uo.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},className:"text-center",children:(0,Ee.jsx)("p",{className:"text-sm text-gray-600 font-medium",children:"\uc804\ud654\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"})}),(0,Ee.jsxs)("div",{className:"space-y-4",children:[(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5,duration:.5},className:"relative",children:[(0,Ee.jsx)(Wo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),(0,Ee.jsx)("input",{type:"tel",value:u,onChange:e=>{const t=(e=>{const t=e.replace(/[^0-9]/g,"");return 0===t.length?"":t.length<=11?t.length<=3?t:t.length<=7?"".concat(t.slice(0,3),"-").concat(t.slice(3)):"".concat(t.slice(0,3),"-").concat(t.slice(3,7),"-").concat(t.slice(7)):"".concat(t.slice(0,3),"-").concat(t.slice(3,7),"-").concat(t.slice(7,11))})(e.target.value);h(t),i(""),l("")},placeholder:"010-0000-0000",className:"w-full pl-12 pr-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#fb8678] focus:border-[#fb8678]",required:!0})]}),(0,Ee.jsx)(Uo.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},onClick:async e=>{if(e.preventDefault(),!u||u.length<10)i("\uc62c\ubc14\ub978 \uc804\ud654\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694");else{s(!0),i(""),l("");try{const e=Jo(u);console.log("OTP \ubc1c\uc1a1 \uc2dc\ub3c4:",e);const{data:t,error:n}=await Se.supabase.auth.signInWithOtp({phone:e});if(n){if(n.message.includes("User not found")||n.message.includes("not found"))return l("\ud574\ub2f9 \uc804\ud654\ubc88\ud638\ub85c \uac00\uc785\ub41c \uacc4\uc815\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \ud68c\uc6d0\uac00\uc785\uc744 \uba3c\uc800 \uc9c4\ud589\ud574\uc8fc\uc138\uc694."),void s(!1);throw n}d("verify"),p(180),v(!1),i(""),l("")}catch(a){var t;console.error("OTP \ubc1c\uc1a1 \uc624\ub958:",a),"Unsupported phone provider"===a.message?i("SMS \uc778\uc99d \uc11c\ube44\uc2a4\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790\uc5d0\uac8c \ubb38\uc758\ud574\uc8fc\uc138\uc694."):"Invalid phone number format (E.164 required)"===a.message?i("\uc804\ud654\ubc88\ud638 \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. 010\uc73c\ub85c \uc2dc\uc791\ud558\ub294 11\uc790\ub9ac \ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."):null!==(t=a.message)&&void 0!==t&&t.includes("phone")?i("\uc804\ud654\ubc88\ud638 \ud615\uc2dd\uc774 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \ud655\uc778\ud574\uc8fc\uc138\uc694."):i("\uc778\uc99d\ubc88\ud638 \ubc1c\uc1a1\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(a.message))}finally{s(!1)}}},disabled:t||!u,className:"w-full bg-[#fb8678] text-white py-4 rounded-xl font-semibold hover:bg-[#e67567] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:t?"\uc778\uc99d\ubc88\ud638 \ubc1c\uc1a1 \uc911...":"\uc778\uc99d\ubc88\ud638 \ubc1b\uae30"})]})]}),"verify"===c&&(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},className:"space-y-6",children:[(0,Ee.jsxs)(Uo.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.4,duration:.5},className:"text-center",children:[(0,Ee.jsx)("p",{className:"text-gray-600 text-sm font-medium",children:"6\uc790\ub9ac \uc778\uc99d\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694"}),(0,Ee.jsx)(Uo.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.5},className:"mt-2 text-sm text-gray-500",children:g>0?(0,Ee.jsxs)("span",{children:["\uc778\uc99d\ubc88\ud638 \ub9cc\ub8cc\uae4c\uc9c0 ",g,"\ucd08 \ub0a8\uc558\uc2b5\ub2c8\ub2e4"]}):(0,Ee.jsx)("span",{className:"text-red-500",children:"\uc778\uc99d\ubc88\ud638\uac00 \ub9cc\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4"})})]}),(0,Ee.jsxs)("div",{className:"space-y-4",children:[(0,Ee.jsx)(Uo.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.6,duration:.5},className:"relative",children:(0,Ee.jsx)("input",{type:"text",value:m,onChange:e=>f(e.target.value),placeholder:"000000",maxLength:6,className:"w-full px-4 py-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#fb8678] focus:border-[#fb8678] text-center tracking-widest",required:!0})}),(0,Ee.jsx)(Uo.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.7,duration:.5},onClick:async t=>{if(t.preventDefault(),m&&6===m.length){s(!0),i("");try{const t=Jo(u);console.log("OTP \ud655\uc778 \uc2dc\ub3c4:",t);const{data:s,error:r}=await Se.supabase.auth.verifyOtp({phone:t,token:m,type:"sms"});if(r)throw r;if(s.user){const{data:t,error:r}=await Se.supabase.from("profiles").select("auth_user_id").eq("auth_user_id",s.user.id).maybeSingle();if(r)return console.error("\ud504\ub85c\ud544 \uc870\ud68c \uc624\ub958:",r),void e("/signup?step=profile&phone=success");if(t&&t.auth_user_id){const{initializeFCM:t}=await n.e(693).then(n.bind(n,693));await t(),e("/main")}else e("/signup?step=profile&phone=success")}else i("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}catch(a){var r,o;console.error("OTP \ud655\uc778 \uc624\ub958:",a),"Token has expired or is invalid"===a.message?i("\uc778\uc99d\ubc88\ud638\uac00 \ub9cc\ub8cc\ub418\uc5c8\uac70\ub098 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc0c8\ub85c\uc6b4 \uc778\uc99d\ubc88\ud638\ub97c \ubc1b\uc544\uc8fc\uc138\uc694."):null!==(r=a.message)&&void 0!==r&&r.includes("expired")?i("\uc778\uc99d\ubc88\ud638\uac00 \ub9cc\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc0c8\ub85c\uc6b4 \uc778\uc99d\ubc88\ud638\ub97c \ubc1b\uc544\uc8fc\uc138\uc694."):null!==(o=a.message)&&void 0!==o&&o.includes("invalid")?i("\uc778\uc99d\ubc88\ud638\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc815\ud655\ud788 \uc785\ub825\ud574\uc8fc\uc138\uc694."):i("\uc778\uc99d\ubc88\ud638 \ud655\uc778\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4: ".concat(a.message))}finally{s(!1)}}else i("6\uc790\ub9ac \uc778\uc99d\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694")},disabled:t||!m,className:"w-full bg-[#fb8678] text-white py-4 rounded-xl font-semibold hover:bg-[#e67567] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:t?"\ub85c\uadf8\uc778 \uc911...":"\ub85c\uadf8\uc778"}),x&&(0,Ee.jsx)(Uo.button,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.8,duration:.5},onClick:async()=>{if(x){s(!0),i("");try{const e=Jo(u),{data:t,error:n}=await Se.supabase.auth.signInWithOtp({phone:e});if(n)throw n;p(180),v(!1),i("")}catch(a){console.error("OTP \uc7ac\ubc1c\uc1a1 \uc624\ub958:",a),i(a.message||"\uc778\uc99d\ubc88\ud638 \uc7ac\ubc1c\uc1a1\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4")}finally{s(!1)}}},disabled:t,className:"w-full bg-gray-200 text-gray-700 py-4 rounded-xl font-medium hover:bg-gray-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:t?"\uc7ac\uc804\uc1a1 \uc911...":"\uc778\uc99d\ubc88\ud638 \uc7ac\uc804\uc1a1"}),(0,Ee.jsx)(Uo.button,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9,duration:.5},type:"button",onClick:()=>{d("input"),f(""),i(""),l(""),p(0),v(!1)},className:"w-full text-[#fb8678] text-sm hover:underline py-2",children:"\uc804\ud654\ubc88\ud638 \ubcc0\uacbd"})]})]})]},c),a&&(0,Ee.jsx)(Uo.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"max-w-md mx-auto mt-4 p-3 bg-red-100 border border-red-300 rounded-lg text-red-700 text-sm text-center",children:a}),o&&(0,Ee.jsx)(Uo.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"max-w-md mx-auto mt-4 p-3 bg-[#fef2f2] border border-[#fb8678] rounded-xl text-[#fb8678] text-sm text-center",children:o})]})})},Xo=Bo("Baby",[["path",{d:"M9 12h.01",key:"157uk2"}],["path",{d:"M15 12h.01",key:"1k8ypt"}],["path",{d:"M10 16c.5.3 1.2.5 2 .5s1.5-.2 2-.5",key:"1u7htd"}],["path",{d:"M19 6.3a9 9 0 0 1 1.8 3.9 2 2 0 0 1 0 3.6 9 9 0 0 1-17.6 0 2 2 0 0 1 0-3.6A9 9 0 0 1 12 3c2 0 3.5 1.1 3.5 2.5s-.9 2.5-2 2.5c-.8 0-1.5-.4-1.5-1",key:"5yv0yz"}]]),$o=Bo("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Zo=Bo("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Qo=Bo("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),el=(0,r.createContext)(void 0),tl=()=>{const e=(0,r.useContext)(el);if(void 0===e)throw new Error("usePageContext must be used within a PageProvider");return e},nl=e=>{let{children:t}=e;const[n,s]=(0,r.useState)("home");return(0,Ee.jsx)(el.Provider,{value:{currentPage:n,setCurrentPage:s},children:t})};var sl=n(498);const rl=(0,r.createContext)(void 0),al=()=>{const e=(0,r.useContext)(rl);if(void 0===e)throw new Error("useNotification must be used within a NotificationProvider");return e},il=e=>{let{children:t}=e;const[n,s]=(0,r.useState)(0),[a,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{c||((async()=>{if(o)console.log("\ud83d\udd0d NotificationContext - \uc774\ubbf8 \ub85c\ub529 \uc911\uc774\ubbc0\ub85c \uc911\ubcf5 \ud638\ucd9c \ubc29\uc9c0");else{l(!0);try{console.log("\ud83d\udd0d NotificationContext - \uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc870\ud68c \uc2dc\uc791");const{data:{user:n}}=await Se.supabase.auth.getUser();if(console.log("\ud83d\udd0d NotificationContext - auth user:",null===n||void 0===n?void 0:n.id),n){const{data:s,error:r}=await Se.supabase.from("profiles").select("*").eq("auth_user_id",n.id).maybeSingle();var e,t;console.log("\ud83d\udd0d NotificationContext - OAuth profile:",s),console.log("\ud83d\udd0d NotificationContext - OAuth profile error:",r),r?(console.error("\ud83d\udd0d NotificationContext - \ud504\ub85c\ud544 \uc870\ud68c \uc624\ub958:",r),("PGRST301"===r.code||null!==(e=r.message)&&void 0!==e&&e.includes("406")||null!==(t=r.message)&&void 0!==t&&t.includes("Not Acceptable"))&&console.log("\ud83d\udd0d NotificationContext - RLS \uc815\ucc45 \uc624\ub958 \ubb34\uc2dc")):s&&(console.log("\ud83d\udd0d NotificationContext - \uc124\uc815\ud560 currentUser:",s),i(s))}else{const e=localStorage.getItem("isLoggedIn"),t=localStorage.getItem("userProfile");if(console.log("\ud83d\udd0d NotificationContext - \uc804\ud654\ubc88\ud638 \uac00\uc785 \uc0ac\uc6a9\uc790 \ud655\uc778:",{isLoggedIn:e,userProfile:t?"\uc788\uc74c":"\uc5c6\uc74c"}),"true"===e&&t){const e=JSON.parse(t);console.log("\ud83d\udd0d NotificationContext - localStorage profile:",e),console.log("\ud83d\udd0d NotificationContext - \uc124\uc815\ud560 currentUser (\uc804\ud654\ubc88\ud638):",e),i(e)}else console.log("\ud83d\udd0d NotificationContext - \ub85c\uadf8\uc778\ub418\uc9c0 \uc54a\uc74c, currentUser\ub97c null\ub85c \uc124\uc815"),i(null)}}catch(n){console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc870\ud68c \uc624\ub958:",n),i(null)}finally{l(!1)}}})(),d(!0))},[c]),(0,r.useEffect)(()=>{const{data:{subscription:e}}=Se.supabase.auth.onAuthStateChange((e,t)=>{var n;console.log("\ud83d\udd0d NotificationContext - \uc778\uc99d \uc0c1\ud0dc \ubcc0\uacbd:",e,null===t||void 0===t||null===(n=t.user)||void 0===n?void 0:n.id),"SIGNED_OUT"===e&&(i(null),s(0),d(!1))});return()=>{e.unsubscribe()}},[]);const u=async()=>{if(a)try{const e=a.id;console.log("\ud83d\udd0d \uc54c\ub9bc \uac1c\uc218 \uc870\ud68c - currentUser:",a),console.log("\ud83d\udd0d \uc54c\ub9bc \uac1c\uc218 \uc870\ud68c - \uc0ac\uc6a9\uc790 ID:",e);const t=await(0,sl.ul)(e);console.log("\ud83d\udd0d \uc54c\ub9bc \uac1c\uc218 \uc870\ud68c \uacb0\uacfc:",t),s(t)}catch(e){console.error("\uc54c\ub9bc \uac1c\uc218 \uc870\ud68c \uc624\ub958:",e)}else console.log("\ud83d\udd0d refreshUnreadCount - currentUser\uac00 \uc5c6\uc74c")};(0,r.useEffect)(()=>{if(!a)return void s(0);u();const e=setInterval(()=>{a&&u()},3e4);return()=>clearInterval(e)},[null===a||void 0===a?void 0:a.id]),(0,r.useEffect)(()=>{if(null===a||void 0===a||!a.id)return;const e=a.id;console.log("\ud83d\udd14 \uc2e4\uc2dc\uac04 \uad6c\ub3c5 \uc124\uc815 - \uc0ac\uc6a9\uc790 ID:",e);const t=Se.supabase.channel("notifications_changes_".concat(e)).on("postgres_changes",{event:"*",schema:"public",table:"notifications",filter:"to_user_id=eq.".concat(e)},()=>{console.log("\ud83d\udd14 \uc54c\ub9bc \ubcc0\uacbd \uac10\uc9c0! \uac1c\uc218 \uc0c8\ub85c\uace0\uce68 \uc2e4\ud589"),u()}).subscribe();return()=>{t.unsubscribe()}},[null===a||void 0===a?void 0:a.id]);const h={unreadCount:n,setUnreadCount:s,refreshUnreadCount:u};return(0,Ee.jsx)(rl.Provider,{value:h,children:t})},ol=()=>{const{currentPage:e,setCurrentPage:t}=(()=>{const{currentPage:e,setCurrentPage:t}=tl(),n=ee(),s=(0,r.useRef)(!1),a=(0,r.useRef)(""),i=(0,r.useRef)("");return(0,r.useEffect)(()=>{if(s.current)return;const r=n.pathname,o=n.search,l="".concat(r).concat(o);if(l===a.current)return;let c="home";"/main"===r?c=new URLSearchParams(o).get("category")?"community":i.current&&"home"!==i.current?i.current:"home":"/community"===r?c="community":"/profile"===r?c="home":r.startsWith("/community/post/")||"/post/write"===r?c="community":"/"===r&&(c="home"),c!==e?(console.log("PageContext: Updating currentPage from",e,"to",c),s.current=!0,a.current=l,t(c),setTimeout(()=>{s.current=!1},0)):a.current=l},[n.pathname,n.search]),{currentPage:e,setCurrentPage:e=>{i.current=e,t(e)}}})(),[n,s]=(0,r.useState)(!1),a=ne(),[i,o]=(0,r.useState)(null),[l]=Ce(),{unreadCount:c}=al(),[d,u]=(0,r.useState)(null),[h,m]=(0,r.useState)([]),f=l.get("category");(0,r.useEffect)(()=>{let e=!0,t=null;return(async()=>{try{const{data:{user:n}}=await Se.supabase.auth.getUser();if(n&&e){const{data:t}=await Se.supabase.from("profiles").select("*").eq("auth_user_id",n.id).single();if(t&&e&&(u(t),t.profile_image_url?(console.log("Header\uc5d0\uc11c OAuth \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 URL:",t.profile_image_url),o(t.profile_image_url)):(console.log("Header\uc5d0\uc11c OAuth \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uc5c6\uc74c"),o(null)),"parent"===t.user_type&&t.children_info&&t.children_info.length>0)){const e=t.children_info.map(e=>e.profile_image_url||null);m(e)}}else{const n=localStorage.getItem("isLoggedIn"),s=localStorage.getItem("userProfile");if("true"===n&&s&&e)try{const t=JSON.parse(s);if(u(t),t.profile_image_url&&e?(console.log("Header\uc5d0\uc11c \uc804\ud654\ubc88\ud638 \uac00\uc785 \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 URL:",t.profile_image_url),o(t.profile_image_url)):e&&(console.log("Header\uc5d0\uc11c \uc804\ud654\ubc88\ud638 \uac00\uc785 \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uc5c6\uc74c"),o(null)),"parent"===t.user_type&&t.children_info&&t.children_info.length>0){const e=t.children_info.map(e=>e.profile_image_url||null);m(e)}}catch(t){console.error("\ud504\ub85c\ud544 \ud30c\uc2f1 \uc624\ub958:",t),o(null)}else e&&(console.log("Header\uc5d0\uc11c \ub85c\uadf8\uc778\ub41c \uc0ac\uc6a9\uc790 \uc5c6\uc74c"),o(null))}}catch(n){e&&(console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc870\ud68c \uc624\ub958:",n),o(null))}})(),()=>{e=!1,t&&(t.onload=null,t.onerror=null,t=null)}},[]);const g=[{id:"home",label:"\ud648",icon:Xo},{id:"apply",label:"\uc2e0\uccad",icon:$o},{id:"community",label:"\ucee4\ubba4\ub2c8\ud2f0",icon:Zo}];return(0,Ee.jsx)("header",{className:"bg-white shadow-[0_2px_8px_rgba(251,134,120,0.15)] sticky top-0 z-50 overflow-hidden",children:(0,Ee.jsxs)("div",{className:"px-4",children:[(0,Ee.jsxs)("div",{className:"flex justify-between items-center h-12",children:[(0,Ee.jsx)("div",{className:"flex items-center",children:(0,Ee.jsx)("img",{src:"/headericon.png",alt:"\ub9d8\ud53d",className:"h-12 object-contain"})}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsxs)("button",{onClick:()=>a("/notifications"),className:"p-2 text-gray-600 hover:text-[#fb8678] transition-colors relative",children:[(0,Ee.jsx)(Qo,{className:"w-5 h-5"}),c>0&&(0,Ee.jsx)("div",{className:"absolute -top-1 -right-1 min-w-[20px] h-[20px] bg-red-500 rounded-full flex items-center justify-center shadow-lg animate-pulse",children:(0,Ee.jsx)("span",{className:"text-white text-xs font-bold",children:c>99?"99+":c})})]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsxs)("div",{onClick:()=>a("/profile"),className:"w-10 h-10 bg-[#fb8678] rounded-2xl flex items-center justify-center shadow-lg hover:shadow-xl transition-shadow cursor-pointer overflow-hidden",children:[i?(0,Ee.jsx)("img",{src:i,alt:"\ud504\ub85c\ud544 \uc0ac\uc9c4",className:"w-full h-full object-cover",onError:e=>{var t;console.error("\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \ub85c\ub529 \uc2e4\ud328:",i),e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}):null,(0,Ee.jsx)("span",{className:"text-white font-bold text-sm ".concat(i?"hidden":""),children:"\ud83d\udc64"})]}),"teacher"===(null===d||void 0===d?void 0:d.user_type)?(0,Ee.jsx)("div",{onClick:()=>a("/profile"),className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-[1px] border-blue-500 bg-white flex items-center justify-center cursor-pointer",children:(0,Ee.jsx)("svg",{className:"w-2.5 h-2.5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})})}):h.length>0&&(0,Ee.jsxs)("div",{className:"absolute -bottom-1 -right-1 flex items-center flex-row-reverse",children:[h.length>2&&(0,Ee.jsx)("div",{onClick:()=>a("/profile"),className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center cursor-pointer relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[7px] font-bold",children:["+",h.length-2]})}),h.length>=2&&(0,Ee.jsx)("div",{onClick:()=>a("/profile"),className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-20 ".concat(h.length>2?"-mr-[5px]":""),children:h[1]?(0,Ee.jsx)("img",{src:h[1],alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[10px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[10px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{onClick:()=>a("/profile"),className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-10 ".concat(h.length>=2?"-mr-[5px]":""),children:h[0]?(0,Ee.jsx)("img",{src:h[0],alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[10px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[10px]",children:"\ud83d\udc64"})})]})]})]})]}),(0,Ee.jsx)("div",{className:"flex justify-center items-center h-14 -mt-1.5",children:(0,Ee.jsxs)("nav",{className:"flex items-center space-x-12",children:[(0,Ee.jsx)("button",{onClick:()=>{console.log("Home button clicked"),t("home"),a("/main")},className:"flex items-center justify-center w-10 h-10 rounded-2xl transition-all duration-200 ".concat("home"===e?"bg-gradient-to-br from-[#fb8678] to-[#e67567] text-white border-2 border-[#fb8678] shadow-lg shadow-[#fb8678]/50 scale-110":"text-gray-600 hover:text-[#fb8678] hover:bg-[#fb8678]/10 hover:scale-105"),children:(0,Ee.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,Ee.jsx)("path",{d:"M20 20C20 20.5523 19.5523 21 19 21H5C4.44772 21 4 20.5523 4 20V11H1L11.3273 1.6115C11.7087 1.26475 12.2913 1.26475 12.6727 1.6115L23 11H20V20ZM18 19V9.15745L12 3.7029L6 9.15745V19H18ZM12 17L8.64124 13.6412C7.76256 12.7625 7.76256 11.3379 8.64124 10.4592C9.51992 9.58056 10.9445 9.58056 11.8232 10.4592L12 10.636L12.1768 10.4592C13.0555 9.58056 14.4801 9.58056 15.3588 10.4592C16.2374 11.3379 16.2374 12.7625 15.3588 13.6412L12 17Z"})})}),(0,Ee.jsx)("button",{onClick:()=>{console.log("Apply button clicked"),t("apply"),a("/application")},className:"flex items-center justify-center w-10 h-10 rounded-2xl transition-all duration-200 ".concat("apply"===e?"bg-gradient-to-br from-[#fb8678] to-[#e67567] text-white border-2 border-[#fb8678] shadow-lg shadow-[#fb8678]/50 scale-110":"text-gray-600 hover:text-[#fb8678] hover:bg-[#fb8678]/10 hover:scale-105"),children:(0,Ee.jsx)($o,{className:"w-5 h-5"})}),(0,Ee.jsx)("button",{onClick:()=>{console.log("=== Header Community \ubc84\ud2bc \ud074\ub9ad \ub514\ubc84\uae45 ==="),console.log("\ud604\uc7ac URL\uc758 \uce74\ud14c\uace0\ub9ac \ud30c\ub77c\ubbf8\ud130:",f),console.log("\ud604\uc7ac \ud398\uc774\uc9c0:",e),t("community");let n="\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0";if(f)n=f,console.log("\ud604\uc7ac URL\uc758 \uce74\ud14c\uace0\ub9ac \uc0ac\uc6a9:",f);else{const e=localStorage.getItem("selectedCommunityCategory");if(console.log("localStorage\uc5d0\uc11c \uac00\uc838\uc628 \uce74\ud14c\uace0\ub9ac:",e),e){n={kindergarten:"\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0",hospital:"\uc18c\uc544\uacfc \ud6c4\uae30",location:"\uc9c0\uc5ed \uc815\ubcf4",tips:"\uc721\uc544 \ud301"}[e]||"\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0",console.log("localStorage\uc758 \uce74\ud14c\uace0\ub9ac \uc0ac\uc6a9:",e,"\u2192",n)}else console.log("\uc800\uc7a5\ub41c \uce74\ud14c\uace0\ub9ac \uc5c6\uc74c, \uae30\ubcf8\uac12 \uc0ac\uc6a9")}console.log("\ucd5c\uc885 \uc774\ub3d9\ud560 \uce74\ud14c\uace0\ub9ac:",n),a("/main?category=".concat(encodeURIComponent(n)))},className:"flex items-center justify-center w-10 h-10 rounded-2xl transition-all duration-200 ".concat("community"===e?"bg-gradient-to-br from-[#fb8678] to-[#e67567] text-white border-2 border-[#fb8678] shadow-lg shadow-[#fb8678]/50 scale-110":"text-gray-600 hover:text-[#fb8678] hover:bg-[#fb8678]/10 hover:scale-105"),children:(0,Ee.jsx)(Zo,{className:"w-5 h-5"})})]})}),n&&(0,Ee.jsx)("div",{className:"lg:hidden py-3 border-t border-gray-200",children:(0,Ee.jsx)("nav",{className:"flex flex-col space-y-1",children:g.map(n=>{const r=n.icon;return(0,Ee.jsxs)("button",{onClick:()=>{t(n.id),s(!1)},className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-all duration-200 ".concat(e===n.id?"bg-[#fb8678] text-white border border-[#fb8678]":"text-gray-700 hover:text-[#fb8678] hover:bg-[#fb8678]/10"),children:[(0,Ee.jsx)(r,{className:"w-5 h-5"}),(0,Ee.jsx)("span",{className:"font-medium",children:n.label})]},n.id)})})})]})})},ll=Bo("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),cl=Bo("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),dl=()=>{const[e,t]=(0,r.useState)(0),[n,s]=(0,r.useState)([]),[a,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(!1),{setCurrentPage:c}=tl(),d=ne();(0,r.useEffect)(()=>{(async()=>{try{const{data:e,error:t}=await Se.supabase.from("ad_banners").select("*").eq("banner_type","splash").eq("is_active",!0).order("order_index",{ascending:!0});if(t)console.error("\uad11\uace0 \uc870\ud68c \uc624\ub958:",t),s([]);else{const t=(e||[]).map(e=>({id:e.id,title:e.title,description:e.description,image:e.image_url,link:e.link_url}));s(t)}}catch(e){console.error("\uad11\uace0 \uac00\uc838\uc624\uae30 \uc624\ub958:",e),s([])}finally{i(!1)}})()},[]),(0,r.useEffect)(()=>{if(0===n.length)return;const e=setInterval(()=>{t(e=>(e+1)%n.length)},4e3);return()=>clearInterval(e)},[n.length]);return(0,Ee.jsxs)("section",{className:"bg-white",children:[!a&&n.length>0&&(0,Ee.jsx)("div",{className:"p-4",children:(0,Ee.jsx)("div",{className:"max-w-md mx-auto",children:(0,Ee.jsxs)("div",{className:"relative rounded-xl overflow-hidden shadow-lg",children:[(0,Ee.jsx)("div",{className:"relative h-36 overflow-hidden",children:(0,Ee.jsx)("div",{className:"flex transition-transform duration-500 ease-in-out h-full",style:{transform:"translateX(-".concat(100*e,"%)")},children:n.map(e=>(0,Ee.jsxs)("div",{className:"w-full flex-shrink-0 relative cursor-pointer",onClick:()=>window.open(e.link,"_blank"),children:[(0,Ee.jsxs)("div",{className:"absolute inset-0",children:[(0,Ee.jsx)("img",{src:e.image,alt:e.title,className:"w-full h-full object-cover object-center"}),(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/10"})]}),(e.title||e.description||e.show_click_text)&&(0,Ee.jsx)("div",{className:"relative z-10 h-full flex items-center p-4",children:(0,Ee.jsxs)("div",{className:"text-white w-full",children:[e.title&&(0,Ee.jsx)("h3",{className:"font-bold text-white text-base mb-1 drop-shadow-lg",children:e.title}),e.description&&(0,Ee.jsx)("p",{className:"text-xs text-white/95 mb-2 line-clamp-2 drop-shadow-md",children:e.description}),e.show_click_text&&(0,Ee.jsx)("div",{className:"text-xs text-white/80 drop-shadow-md",children:"\ud074\ub9ad\ud558\uc5ec \uc790\uc138\ud788 \ubcf4\uae30"})]})})]},e.id))})}),(0,Ee.jsx)("button",{onClick:()=>{t(e=>(e-1+n.length)%n.length)},className:"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white text-gray-600 hover:text-[#fb8678] w-8 h-8 rounded-full flex items-center justify-center shadow-md transition-all duration-200",children:(0,Ee.jsx)(ll,{className:"w-4 h-4"})}),(0,Ee.jsx)("button",{onClick:()=>{t(e=>(e+1)%n.length)},className:"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white/80 hover:bg-white text-gray-600 hover:text-[#fb8678] w-8 h-8 rounded-full flex items-center justify-center shadow-md transition-all duration-200",children:(0,Ee.jsx)(cl,{className:"w-4 h-4"})}),(0,Ee.jsx)("div",{className:"absolute bottom-2 left-1/2 transform -translate-x-1/2 flex space-x-1",children:n.map((n,s)=>(0,Ee.jsx)("button",{onClick:()=>t(s),className:"w-2 h-2 rounded-full transition-all duration-200 ".concat(s===e?"bg-[#fb8678] w-6":"bg-white/60 hover:bg-white/80")},s))})]})})}),(0,Ee.jsx)("div",{className:"p-4",children:(0,Ee.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,Ee.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\uc8fc\uc694 \uc11c\ube44\uc2a4"}),(0,Ee.jsxs)("div",{className:"flex justify-center space-x-3 mb-4",children:[(0,Ee.jsxs)("div",{className:"w-40 flex flex-col items-center",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mb-2 transition-all duration-300 hover:shadow-lg hover:scale-110 cursor-pointer",onClick:()=>{d("/kindergarten-map?type=childcare")},children:(0,Ee.jsx)("img",{src:"/icons/kindergarten.svg",alt:"\uc5b4\ub9b0\uc774\uc9d1",className:"w-10 h-10"})}),(0,Ee.jsx)("h3",{className:"font-semibold text-gray-900 text-xs",children:"\uc5b4\ub9b0\uc774\uc9d1"})]}),(0,Ee.jsxs)("div",{className:"w-40 flex flex-col items-center",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mb-2 transition-all duration-300 hover:shadow-lg hover:scale-110 cursor-pointer",onClick:()=>{d("/kindergarten-map?type=kindergarten")},children:(0,Ee.jsx)("img",{src:"/icons/childhouse.svg",alt:"\uc720\uce58\uc6d0",className:"w-10 h-10"})}),(0,Ee.jsx)("h3",{className:"font-semibold text-gray-900 text-xs",children:"\uc720\uce58\uc6d0"})]})]}),(0,Ee.jsxs)("div",{className:"flex justify-center space-x-3 mb-6",children:[(0,Ee.jsxs)("div",{className:"w-40 flex flex-col items-center",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mb-2 transition-all duration-300 hover:shadow-lg hover:scale-110 cursor-pointer",onClick:()=>{d("/kindergarten-map?type=playground")},children:(0,Ee.jsx)("img",{src:"/icons/facilities.svg",alt:"\ub180\uc774\uc2dc\uc124",className:"w-10 h-10"})}),(0,Ee.jsx)("h3",{className:"font-semibold text-gray-900 text-xs",children:"\ub180\uc774\uc2dc\uc124"})]}),(0,Ee.jsxs)("div",{className:"w-40 flex flex-col items-center",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mb-2 transition-all duration-300 hover:shadow-lg hover:scale-110 cursor-pointer",onClick:()=>{c("application"),d("/application")},children:(0,Ee.jsx)("img",{src:"/icons/application.svg",alt:"\uac04\ud3b8 \uc2e0\uccad",className:"w-10 h-10"})}),(0,Ee.jsx)("h3",{className:"font-semibold text-gray-900 text-xs",children:"\uac04\ud3b8 \uc2e0\uccad"})]}),(0,Ee.jsxs)("div",{className:"w-40 flex flex-col items-center",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-2xl flex items-center justify-center mb-2 transition-all duration-300 hover:shadow-lg hover:scale-110 cursor-pointer",onClick:()=>{l(!0)},children:(0,Ee.jsx)("img",{src:"/icons/location.svg",alt:"\uc9c0\uc5ed \ucd94\ucc9c",className:"w-10 h-10"})}),(0,Ee.jsx)("h3",{className:"font-semibold text-gray-900 text-xs",children:"\uc9c0\uc5ed \ucd94\ucc9c"})]})]}),(0,Ee.jsx)("div",{className:"bg-gradient-to-r from-[#fb8678]/10 to-[#e67567]/10 rounded-xl p-4 border border-[#fb8678]/20",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ee.jsx)("div",{className:"w-10 h-10 bg-[#fb8678]/20 rounded-lg flex items-center justify-center",children:(0,Ee.jsx)(Zo,{className:"w-5 h-5 text-[#fb8678]"})}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("h3",{className:"font-semibold text-gray-900 text-sm",children:"\ucee4\ubba4\ub2c8\ud2f0"}),(0,Ee.jsx)("p",{className:"text-xs text-gray-600",children:"\uc815\ubcf4 \uacf5\uc720 & \uacbd\ud5d8\ub2f4"})]})]}),(0,Ee.jsx)("button",{onClick:()=>{c("community");const e=localStorage.getItem("selectedCommunityCategory");let t="\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0";if(e){t={kindergarten:"\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0",hospital:"\uc18c\uc544\uacfc \ud6c4\uae30",location:"\uc9c0\uc5ed \uc815\ubcf4",tips:"\uc721\uc544 \ud301"}[e]||"\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0"}d("/main?category=".concat(encodeURIComponent(t)))},className:"bg-[#fb8678] text-white p-2 rounded-lg hover:bg-[#e67567] transition-colors",children:(0,Ee.jsx)(cl,{className:"w-4 h-4"})})]})})]})}),o&&(0,Ee.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>l(!1)}),(0,Ee.jsx)("div",{className:"relative bg-white rounded-2xl p-6 mx-4 max-w-sm w-full shadow-xl",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsxs)("p",{className:"text-gray-900 text-base mb-6 leading-relaxed",children:["\ud604\uc7ac \uc9c0\uc5ed \ucd94\ucc9c \uae30\ub2a5\uc740 \uac1c\ubc1c\uc911\uc785\ub2c8\ub2e4.",(0,Ee.jsx)("br",{}),"\ub354 \uc88b\uc740 \uc11c\ube44\uc2a4\ub85c \ub3cc\uc544\uc624\uaca0\uc2b5\ub2c8\ub2e4."]}),(0,Ee.jsx)("button",{onClick:()=>l(!1),className:"w-full py-3 px-4 bg-[#fb8678] text-white rounded-xl font-semibold hover:bg-[#e67567] transition-colors",children:"\ud655\uc778"})]})})]})]})},ul=Bo("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),hl=Bo("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),ml=Bo("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),fl=Bo("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),gl=Bo("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),pl=Bo("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),xl=Bo("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),vl=Bo("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),yl=(0,r.createContext)(void 0),bl=()=>{const e=(0,r.useContext)(yl);if(void 0===e)throw new Error("useLikeContext must be used within a LikeProvider");return e},wl=e=>{let{children:t}=e;const[n,s]=(0,r.useState)(new Set);return(0,Ee.jsx)(yl.Provider,{value:{likedPosts:n,toggleLike:async(e,t,r)=>{try{if(n.has(e)){const{error:n}=await Se.supabase.from("post_likes").delete().eq("post_id",e).eq("user_id",t);if(n)return void console.error("\uc88b\uc544\uc694 \ucde8\uc18c \uc624\ub958:",n);s(t=>{const n=new Set(t);return n.delete(e),n})}else{const{error:n}=await Se.supabase.from("post_likes").insert({post_id:e,user_id:t,username:r||"\uc0ac\uc6a9\uc790",created_at:(new Date).toISOString()});if(n)return void console.error("\uc88b\uc544\uc694 \ucd94\uac00 \uc624\ub958:",n);s(t=>new Set(t).add(e))}}catch(a){console.error("\uc88b\uc544\uc694 \ucc98\ub9ac \uc624\ub958:",a)}},isLiked:e=>n.has(e),refreshLikes:async e=>{try{const{data:t,error:n}=await Se.supabase.from("post_likes").select("post_id").eq("user_id",e);if(n)return void console.error("\uc0ac\uc6a9\uc790 \uc88b\uc544\uc694 \uc870\ud68c \uc624\ub958:",n);const r=new Set((null===t||void 0===t?void 0:t.map(e=>e.post_id))||[]);s(r)}catch(t){console.error("\uc0ac\uc6a9\uc790 \uc88b\uc544\uc694 \uc870\ud68c \uc624\ub958:",t)}}},children:t})},jl=()=>{const[e,t]=Ce(),[n,s]=(0,r.useState)(()=>localStorage.getItem("selectedCommunityCategory")||"kindergarten"),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)(!0),[u,h]=(0,r.useState)(null),[m,f]=(0,r.useState)(null),[g,p]=(0,r.useState)(null),[x,v]=(0,r.useState)({}),[y,b]=(0,r.useState)({}),[w,j]=(0,r.useState)(!1),[_,N]=(0,r.useState)(null),[k,C]=(0,r.useState)([]),[S,E]=(0,r.useState)(""),[P,A]=(0,r.useState)(!1),[T,I]=(0,r.useState)(null),[M,L]=(0,r.useState)(""),[R,O]=(0,r.useState)(null),[D,z]=(0,r.useState)(null),[U,F]=(0,r.useState)(""),[q,B]=(0,r.useState)(new Set),[V,W]=(0,r.useState)(new Set),{likedPosts:H,toggleLike:Y,isLiked:K,refreshLikes:J}=bl(),[G,X]=(0,r.useState)(null),[$,Z]=(0,r.useState)(!1),[Q,ee]=(0,r.useState)(null),[te,ne]=(0,r.useState)(""),[se,re]=(0,r.useState)("spam"),[ae,ie]=(0,r.useState)(!1),[oe,le]=(0,r.useState)(!1),[ce,de]=(0,r.useState)(null),[ue,he]=(0,r.useState)(!1);(0,r.useEffect)(()=>(document.body.style.overflow=$||oe?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[$,oe]),(0,r.useEffect)(()=>{const t=e.get("category");if(t){const e={"\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0":"kindergarten","\uc18c\uc544\uacfc \ud6c4\uae30":"hospital","\uc9c0\uc5ed \uc815\ubcf4":"location","\uc721\uc544 \ud301":"tips"}[t];e&&e!==n&&(console.log("URL \ud30c\ub77c\ubbf8\ud130\uc5d0\uc11c \uce74\ud14c\uace0\ub9ac \uc124\uc815:",t,"\u2192",e),s(e),localStorage.setItem("selectedCommunityCategory",e))}else{const e=localStorage.getItem("selectedCommunityCategory");e&&e!==n?(console.log("localStorage\uc5d0\uc11c \uc800\uc7a5\ub41c \uce74\ud14c\uace0\ub9ac \ubd88\ub7ec\uc634:",e),s(e)):e||n||console.log("\uc800\uc7a5\ub41c \uce74\ud14c\uace0\ub9ac \uc5c6\uc74c, \uae30\ubcf8\uac12 \uc0ac\uc6a9")}},[e]),(0,r.useEffect)(()=>{(async()=>{try{const e=["\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0","\uc18c\uc544\uacfc \ud6c4\uae30","\uc9c0\uc5ed \uc815\ubcf4","\uc721\uc544 \ud301"],t={};for(const n of e){const{count:e,error:s}=await Se.supabase.from("community_posts").select("*",{count:"exact",head:!0}).eq("category",n);s?(console.error("".concat(n," \uce74\ud14c\uace0\ub9ac \uac1c\uc218 \uc870\ud68c \uc624\ub958:"),s),t[n]=0):t[n]=e||0}b(t)}catch(e){console.error("\uce74\ud14c\uace0\ub9ac\ubcc4 \uae00 \uac1c\uc218 \uc870\ud68c \uc624\ub958:",e)}})()},[]);const me=e=>y[e]||0,fe=[{id:"kindergarten",title:"\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0",count:me("\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0"),icon:"\ud83c\udfeb",emoji:"\ud83d\udc95"},{id:"hospital",title:"\uc18c\uc544\uacfc \ud6c4\uae30",count:me("\uc18c\uc544\uacfc \ud6c4\uae30"),icon:"\ud83c\udfe5",emoji:"\ud83d\udc8a"},{id:"location",title:"\uc9c0\uc5ed \uc815\ubcf4",count:me("\uc9c0\uc5ed \uc815\ubcf4"),icon:"\ud83d\udccd",emoji:"\ud83d\uddfa\ufe0f"},{id:"tips",title:"\uc721\uc544 \ud301",count:me("\uc721\uc544 \ud301"),icon:"\ud83d\udca1",emoji:"\u2728"}];(0,r.useEffect)(()=>{(async()=>{d(!0);try{var e;const t=(null===(e=fe.find(e=>e.id===n))||void 0===e?void 0:e.title)||"\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0",{data:s,error:r}=await Se.supabase.from("community_posts").select("\n            *,\n            profiles!community_posts_author_id_fkey(\n              id,\n              auth_user_id,\n              full_name,\n              nickname,\n              profile_image_url,\n              user_type,\n              children_info\n            )\n          ").eq("category",t).order("created_at",{ascending:!1});if(r)return void console.error("\uac8c\uc2dc\uae00 \uc870\ud68c \uc624\ub958:",r);const a=await Promise.all((s||[]).map(async e=>{var t,n,s;const{count:r}=await Se.supabase.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",e.id),{count:a}=await Se.supabase.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e.id),i="parent"===(null===(t=e.profiles)||void 0===t?void 0:t.user_type)&&null!==(n=e.profiles)&&void 0!==n&&n.children_info?e.profiles.children_info.map(e=>e.profile_image_url||null):[];return(0,Ae.A)((0,Ae.A)({},e),{},{user_id:(null===(s=e.profiles)||void 0===s?void 0:s.auth_user_id)||e.author_id,comments_count:r||0,likes_count:a||0,author_children_images:i})}));l(a)}catch(t){console.error("\uac8c\uc2dc\uae00 \uc870\ud68c \uc624\ub958:",t)}finally{d(!1)}})()},[n]),(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{const{data:{user:n}}=await Se.supabase.auth.getUser();if(!e)return;if(n){const{data:t}=await Se.supabase.from("profiles").select("id, auth_user_id, full_name, nickname, profile_image_url, user_type, children_info").eq("auth_user_id",n.id).single();t&&e&&h(t)}else{const n=localStorage.getItem("isLoggedIn"),s=localStorage.getItem("userProfile");if("true"===n&&s)try{const t=JSON.parse(s),{data:n}=await Se.supabase.from("profiles").select("id, auth_user_id, full_name, nickname, profile_image_url, user_type, children_info").eq("id",t.id).single();if(!e)return;n&&n.auth_user_id?h(n):(console.warn("auth_user_id\uac00 \uc5c6\ub294 \uc0ac\uc6a9\uc790:",n),h({id:t.id||"local-user",auth_user_id:void 0,full_name:t.full_name||"",nickname:t.nickname||t.full_name||"",profile_image_url:t.profile_image_url||"",user_type:"parent"}))}catch(t){console.error("\ud504\ub85c\ud544 \ud30c\uc2f1 \uc624\ub958:",t)}}}catch(n){console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc870\ud68c \uc624\ub958:",n)}})(),()=>{e=!1}},[]),(0,r.useEffect)(()=>{u&&Le()},[u]);const ge=()=>{Z(!1),ee(null),ne(""),re("spam")},pe=()=>{le(!1),de(null)},xe=async e=>{A(!0);try{console.log("\ub313\uae00 \uc870\ud68c \uc911:",e);const{data:t,error:n}=await Se.supabase.from("comments").select("*").eq("post_id",e).order("created_at",{ascending:!0});if(n)return void console.error("\ub313\uae00 \uc870\ud68c \uc624\ub958:",n);console.log("\ub313\uae00 \uc870\ud68c \uacb0\uacfc:",t);const s=null===t||void 0===t?void 0:t.find(e=>e.id===T);s&&console.log("\uc218\uc815\ub41c \ub313\uae00 \uc0c1\uc138 \uc815\ubcf4:",s);const r=await Promise.all((t||[]).map(async e=>{var t,n,s;let r=null;const{data:a}=await Se.supabase.from("profiles").select("user_type, children_info").eq("id",e.user_id).maybeSingle();if(a)r=a;else{const{data:t}=await Se.supabase.from("profiles").select("user_type, children_info").eq("auth_user_id",e.user_id).maybeSingle();r=t}const i="parent"===(null===(t=r)||void 0===t?void 0:t.user_type)&&null!==(n=r)&&void 0!==n&&n.children_info?r.children_info.map(e=>e.profile_image_url||null):[];return(0,Ae.A)((0,Ae.A)({},e),{},{user_children_images:i,user_type:null===(s=r)||void 0===s?void 0:s.user_type})}));C(r)}catch(t){console.error("\ub313\uae00 \uc870\ud68c \uc624\ub958:",t)}finally{A(!1)}},ve=async()=>{if(S.trim()&&u&&_)try{const e=u.auth_user_id||u.id,{data:t,error:n}=await Se.supabase.from("comments").insert({post_id:_.id,user_id:e,user_name:u.nickname||u.full_name,user_profile_image:u.profile_image_url||"",content:S.trim(),created_at:(new Date).toISOString()}).select().single();if(n)return void console.error("\ub313\uae00 \uc791\uc131 \uc624\ub958:",n);const s="parent"===u.user_type&&u.children_info?u.children_info.map(e=>e.profile_image_url||null):[];C(e=>[...e,(0,Ae.A)((0,Ae.A)({},t),{},{user_children_images:s,user_type:u.user_type})]),E(""),_.user_id!==e&&await(0,sl.fZ)(_.id,t.id,u.id,u.nickname||u.full_name,u.profile_image_url||"",_.user_id);const{data:r,error:a}=await Se.supabase.from("community_posts").select("comments_count").eq("id",_.id).single();l(!a&&r?e=>e.map(e=>e.id===_.id?(0,Ae.A)((0,Ae.A)({},e),{},{comments_count:r.comments_count}):e):e=>e.map(e=>e.id===_.id?(0,Ae.A)((0,Ae.A)({},e),{},{comments_count:e.comments_count+1}):e))}catch(e){console.error("\ub313\uae00 \uc791\uc131 \uc624\ub958:",e)}},ye=e=>{I(e.id),L(e.content),O(null)},be=async()=>{if(T&&M.trim()&&u)try{const e=(new Date).toISOString();console.log("\ub313\uae00 \uc218\uc815 \uc2dc\ub3c4:",{editingCommentId:T,content:M.trim(),currentTime:e}),console.log("\ud604\uc7ac \uc0ac\uc6a9\uc790:",u);const{data:t,error:n}=await Se.supabase.from("comments").select("*").eq("id",T).single();if(n)return void console.error("\ud604\uc7ac \ub313\uae00 \uc870\ud68c \uc624\ub958:",n);console.log("\uc218\uc815 \uc804 \ub313\uae00 \uc0c1\ud0dc:",t),console.log("\ub313\uae00 \uc791\uc131\uc790 ID:",t.user_id),console.log("\ud604\uc7ac \uc0ac\uc6a9\uc790 ID:",u.id);const s=u.auth_user_id||u.id;if(t.user_id!==s&&t.user_id!==u.id)return console.error("\uad8c\ud55c \uc5c6\uc74c: \ub313\uae00 \uc791\uc131\uc790\uac00 \uc544\ub2d9\ub2c8\ub2e4"),console.error("\ub313\uae00 \uc791\uc131\uc790 ID:",t.user_id),console.error("\ud604\uc7ac \uc0ac\uc6a9\uc790 ID:",u.id),void console.error("\ud604\uc7ac \uc0ac\uc6a9\uc790 auth_user_id:",u.auth_user_id);const{data:r,error:a}=await Se.supabase.from("comments").update({content:M.trim(),updated_at:e,is_edited:!0}).eq("id",T).eq("user_id",s).select();if(a)return console.error("\ub313\uae00 \uc218\uc815 \uc624\ub958:",a),console.error("\uc624\ub958 \uc0c1\uc138:",a.details,a.hint,a.message),console.error("\uc624\ub958 \ucf54\ub4dc:",a.code),console.error("\uc624\ub958 \uba54\uc2dc\uc9c0:",a.message),void console.error("\ud604\uc7ac \uc0ac\uc6a9\uc790 \ud0c0\uc785:",u.id.startsWith("auth-")?"OAuth":"\uc804\ud654\ubc88\ud638 \uac00\uc785");if(console.log("\ub313\uae00 \uc218\uc815 \uacb0\uacfc:",r),!r||0===r.length){console.error("\uc5c5\ub370\uc774\ud2b8 \uacb0\uacfc\uac00 \ube44\uc5b4\uc788\uc74c - RLS \uc815\ucc45 \ubb38\uc81c\uc77c \uc218 \uc788\uc74c");const{data:t,error:n}=await Se.supabase.from("comments").update({content:M.trim(),updated_at:e,is_edited:!0}).eq("id",T).select();return void console.log("RLS \uc6b0\ud68c \ud14c\uc2a4\ud2b8 \uacb0\uacfc:",t,n)}console.log("\ub313\uae00 \uc218\uc815 \uc131\uacf5, \ub313\uae00 \ubaa9\ub85d \uc0c8\ub85c\uace0\uce68 \uc911..."),_&&await xe(_.id),I(null),L("")}catch(e){console.error("\ub313\uae00 \uc218\uc815 \uc624\ub958:",e)}},we=()=>{I(null),L("")},je=e=>{z(e),F("")},_e=()=>{z(null),F("")},Ne=async()=>{if(U.trim()&&u&&_&&D)try{var e;const t=u.auth_user_id||u.id,n=k.find(e=>e.id===D);if(!n)return;console.log("=== \ub2f5\uae00 \uc791\uc131 \ub514\ubc84\uae45 ==="),console.log("parentComment:",n),console.log("parentComment.user_id:",n.user_id),console.log("parentComment.user_id \ud0c0\uc785:",typeof n.user_id),console.log("parentComment.user_id \uae38\uc774:",null===(e=n.user_id)||void 0===e?void 0:e.length);const{data:s,error:r}=await Se.supabase.from("comments").insert({post_id:_.id,user_id:t,user_name:u.nickname||u.full_name,user_profile_image:u.profile_image_url||"",content:U.trim(),parent_id:D,created_at:(new Date).toISOString()}).select().single();if(r)return void console.error("\ub2f5\uae00 \uc791\uc131 \uc624\ub958:",r);const a="parent"===u.user_type&&u.children_info?u.children_info.map(e=>e.profile_image_url||null):[];C(e=>[...e,(0,Ae.A)((0,Ae.A)({},s),{},{user_children_images:a,user_type:u.user_type})]),F(""),z(null),l(e=>e.map(e=>e.id===_.id?(0,Ae.A)((0,Ae.A)({},e),{},{comments_count:e.comments_count+1}):e)),await(0,sl.G)(_.id,s.id,u.id,u.nickname||u.full_name,u.profile_image_url||"",n.user_id),await xe(_.id)}catch(t){console.error("\ub2f5\uae00 \uc791\uc131 \uc624\ub958:",t)}},ke=e=>{B(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},Pe=e=>{let t=0;return e.replies&&e.replies.length>0&&(t+=e.replies.length,e.replies.forEach(e=>{t+=Pe(e)})),t},Te=(0,r.useCallback)(e=>{const t=new Map,n=[];return e.forEach(e=>{t.set(e.id,(0,Ae.A)((0,Ae.A)({},e),{},{replies:[]}))}),e.forEach(e=>{if(e.parent_id){const n=t.get(e.parent_id);n&&(n.replies=n.replies||[],n.replies.push(t.get(e.id)))}else n.push(t.get(e.id))}),n},[]),Ie=async e=>{if(u)try{const t=u.auth_user_id||u.id,{data:n,error:s}=await Se.supabase.from("comments").select("user_id").eq("id",e).single();if(s)return void console.error("\ub313\uae00 \uc870\ud68c \uc624\ub958:",s);if(n.user_id!==t&&n.user_id!==u.id)return console.error("\uad8c\ud55c \uc5c6\uc74c: \ub313\uae00 \uc791\uc131\uc790\uac00 \uc544\ub2d9\ub2c8\ub2e4"),console.error("\ub313\uae00 \uc791\uc131\uc790 ID:",n.user_id),console.error("\ud604\uc7ac \uc0ac\uc6a9\uc790 ID:",u.id),void console.error("\ud604\uc7ac \uc0ac\uc6a9\uc790 auth_user_id:",u.auth_user_id);const{error:r}=await Se.supabase.from("comments").update({is_deleted:!0}).eq("id",e).eq("user_id",n.user_id);r&&(console.error("\ub313\uae00 \uc0ad\uc81c \uc624\ub958:",r),console.log("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328, \ub85c\uceec \uc0c1\ud0dc\ub9cc \uc5c5\ub370\uc774\ud2b8")),C(t=>t.map(t=>t.id===e?(0,Ae.A)((0,Ae.A)({},t),{},{is_deleted:!0,content:"\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):t)),O(null)}catch(t){console.error("\ub313\uae00 \uc0ad\uc81c \uc624\ub958:",t)}},Me=e=>{O(R===e?null:e)};(0,r.useEffect)(()=>(document.body.style.overflow=w?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[w]);const Le=async()=>{if(u)try{const e=u.auth_user_id||u.id;await J(e)}catch(e){console.error("\uc0ac\uc6a9\uc790 \uc88b\uc544\uc694 \uc870\ud68c \uc624\ub958:",e)}},Re=e=>{const t=new Date,n=new Date(e),s=Math.floor((t.getTime()-n.getTime())/6e4);return s<60?"".concat(s,"\ubd84 \uc804"):s<1440?"".concat(Math.floor(s/60),"\uc2dc\uac04 \uc804"):"".concat(Math.floor(s/1440),"\uc77c \uc804")};return(0,Ee.jsxs)("section",{className:"bg-white min-h-screen",children:[(0,Ee.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,Ee.jsx)("div",{className:"bg-white p-4 pt-7 mb-0",children:(0,Ee.jsx)("div",{className:"grid grid-cols-4 gap-3",children:fe.map(r=>(0,Ee.jsx)("button",{onClick:()=>(r=>{var a;console.log("=== \uce74\ud14c\uace0\ub9ac \ud074\ub9ad \ub514\ubc84\uae45 ==="),console.log("\ud074\ub9ad\ub41c \uce74\ud14c\uace0\ub9ac ID:",r),console.log("\ud604\uc7ac \uc120\ud0dd\ub41c \uce74\ud14c\uace0\ub9ac:",n),console.log("\ud604\uc7ac URL \ud30c\ub77c\ubbf8\ud130:",e.get("category")),s(r),localStorage.setItem("selectedCommunityCategory",r),console.log("localStorage\uc5d0 \uce74\ud14c\uace0\ub9ac \uc800\uc7a5\ub428:",r);const i=(null===(a=fe.find(e=>e.id===r))||void 0===a?void 0:a.title)||"\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0";console.log("URL\uc5d0 \uc124\uc815\ud560 \uce74\ud14c\uace0\ub9ac\uba85:",i),t({category:i}),console.log("URL \ud30c\ub77c\ubbf8\ud130 \uc5c5\ub370\uc774\ud2b8 \uc644\ub8cc")})(r.id),className:"group p-2 rounded-3xl border shadow-sm transition-all duration-300 transform hover:scale-105 ".concat(n===r.id?"bg-gradient-to-r from-[#fb8678]/20 to-[#e67567]/20 border-[#fb8678]/30 shadow-lg scale-105":"bg-gradient-to-r from-[#fb8678]/5 to-[#e67567]/5 border-[#fb8678]/20 hover:bg-gradient-to-r hover:from-[#fb8678]/10 hover:to-[#e67567]/10 hover:shadow-lg"),children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsxs)("div",{className:"w-10 h-10 mx-auto mb-1 hover:scale-110 transition-transform duration-300",children:["kindergarten"===r.id&&(0,Ee.jsx)("img",{src:"/icons/kindergarten.svg",alt:"\uc5b4\ub9b0\uc774\uc9d1",className:"w-full h-full"}),"hospital"===r.id&&(0,Ee.jsx)("img",{src:"/icons/pediatrics.svg",alt:"\uc18c\uc544\uacfc",className:"w-full h-full"}),"location"===r.id&&(0,Ee.jsx)("img",{src:"/icons/location.svg",alt:"\uc9c0\uc5ed\uc815\ubcf4",className:"w-full h-full"}),"tips"===r.id&&(0,Ee.jsx)("span",{className:"text-3xl",children:"\ud83d\udca1"})]}),(0,Ee.jsx)("div",{className:"text-[11px] font-semibold mb-1 ".concat(n===r.id?"text-[#fb8678]":"text-gray-700"),children:r.title})]})},r.id))})}),(0,Ee.jsx)("div",{className:"space-y-0 pb-20",children:c?(0,Ee.jsxs)("div",{className:"text-center py-8",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fb8678] mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uac8c\uc2dc\uae00\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."})]}):0===o.length?(0,Ee.jsxs)("div",{className:"text-center py-8",children:[(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uc544\uc9c1 \uac8c\uc2dc\uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{className:"text-gray-500 text-sm",children:"\uccab \ubc88\uc9f8 \uac8c\uc2dc\uae00\uc744 \uc791\uc131\ud574\ubcf4\uc138\uc694!"})]}):o.map(e=>(0,Ee.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm p-6 transition-all duration-300 transform hover:scale-[1.02] cursor-pointer",onClick:()=>(e=>{var t;const s=(null===(t=fe.find(e=>e.id===n))||void 0===t?void 0:t.title)||"\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0";window.location.href="/community/post/".concat(e.id,"?category=").concat(encodeURIComponent(s))})(e),children:[(0,Ee.jsxs)("div",{className:"flex items-start space-x-3 mb-4",children:[(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("div",{className:"w-10 h-10 rounded-2xl overflow-hidden shadow-lg",children:e.author_profile_image?(0,Ee.jsx)("img",{src:e.author_profile_image,alt:"".concat(e.author_name,"\uc758 \ud504\ub85c\ud544"),className:"w-full h-full object-cover",onError:t=>{const n=t.target;n.style.display="none";const s=n.parentElement;s&&(s.innerHTML='\n                                <div class="w-full h-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-2xl text-white">\n                                  '.concat(e.author_name.charAt(0),"\n                                </div>\n                              "))}}):(0,Ee.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-2xl text-white",children:e.author_name.charAt(0)})}),e.author_children_images&&e.author_children_images.length>0&&(0,Ee.jsxs)("div",{className:"absolute -bottom-1 -right-1 flex items-center flex-row-reverse",children:[e.author_children_images.length>2&&(0,Ee.jsx)("div",{className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center cursor-pointer relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[7px] font-bold",children:["+",e.author_children_images.length-2]})}),e.author_children_images.length>=2&&(0,Ee.jsx)("div",{className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-20 ".concat(e.author_children_images.length>2?"-mr-[5px]":""),children:e.author_children_images[1]?(0,Ee.jsx)("img",{src:e.author_children_images[1],alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover"}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[10px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-10 ".concat(e.author_children_images.length>=2?"-mr-[5px]":""),children:e.author_children_images[0]?(0,Ee.jsx)("img",{src:e.author_children_images[0],alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover"}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[10px]",children:"\ud83d\udc64"})})]})]}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[(0,Ee.jsx)("span",{className:"font-bold text-gray-900 text-sm",children:e.author_name}),(0,Ee.jsxs)("span",{className:"px-2 py-0.5 bg-gradient-to-r from-[#fb8678]/20 to-[#e67567]/20 text-[#fb8678] text-[11px] rounded-full border border-[#fb8678]/30 font-medium",children:[(0,Ee.jsx)(ul,{className:"w-2.5 h-2.5 inline mr-1"}),e.location]})]}),(0,Ee.jsx)("div",{className:"text-xs text-gray-500",children:Re(e.created_at)})]}),u&&e.author_name===(u.nickname||u.full_name)&&"parent"===u.user_type&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:t=>{var n;t.stopPropagation(),n=e.id,f(m===n?null:n)},className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(hl,{className:"w-4 h-4 text-gray-500"})}),m===e.id&&(0,Ee.jsxs)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:[(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),f(null)},className:"w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 text-center",children:"\uc218\uc815\ud558\uae30"}),(0,Ee.jsx)("div",{className:"border-t border-gray-200 mx-2"}),(0,Ee.jsx)("button",{onClick:t=>{t.stopPropagation(),p(e.id),f(null)},className:"w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 text-center",children:"\uc0ad\uc81c\ud558\uae30"})]})]}),u&&e.author_name!==(u.nickname||u.full_name)&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:t=>{var n;t.stopPropagation(),n=e.id,X(G===n?null:n)},className:"p-2 rounded-full hover:bg-gray-100 transition-colors",title:"\uac8c\uc2dc\uae00 \uba54\ub274",children:(0,Ee.jsx)(hl,{className:"w-4 h-4 text-gray-500"})}),G===e.id&&(0,Ee.jsxs)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:[(0,Ee.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{de(e),le(!0)})(e),X(null)},className:"w-full px-4 py-2 text-center text-sm text-gray-700 hover:bg-gray-50",children:"\ucc28\ub2e8\ud558\uae30"}),(0,Ee.jsx)("div",{className:"border-t border-gray-200 mx-2"}),(0,Ee.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{ee(e),Z(!0),ne(""),re("spam")})(e),X(null)},className:"w-full px-4 py-2 text-center text-sm text-red-600 hover:bg-red-50",children:"\uc2e0\uace0\ud558\uae30"})]})]})]}),(0,Ee.jsx)("p",{className:"text-gray-800 mb-4 leading-relaxed text-sm",children:e.content.length>80?"".concat(e.content.substring(0,80),"..."):e.content}),e.images&&e.images.length>0&&(0,Ee.jsx)("div",{className:"mb-4",children:(0,Ee.jsxs)("div",{className:"relative w-full h-64 bg-gray-100 rounded-xl overflow-hidden",children:[(0,Ee.jsx)("div",{className:"flex w-full h-full overflow-x-auto scrollbar-hide snap-x snap-mandatory",onScroll:t=>{const n=t.target,s=n.scrollLeft,r=n.clientWidth,a=Math.round(s/r);v(t=>(0,Ae.A)((0,Ae.A)({},t),{},{[e.id]:a}))},children:e.images.map((e,t)=>(0,Ee.jsx)("div",{className:"flex-shrink-0 w-full h-full snap-center",children:(0,Ee.jsx)("img",{src:e,alt:"\uac8c\uc2dc\uae00 \uc774\ubbf8\uc9c0 ".concat(t+1),className:"w-full h-full object-cover",onClick:()=>{}})},t))}),e.images.length>1&&(0,Ee.jsxs)("div",{className:"absolute top-3 right-3 bg-black/50 text-white text-xs px-2 py-1 rounded-full backdrop-blur-sm",children:[(x[e.id]||0)+1,"/",e.images.length]})]})}),e.emojis&&e.emojis.length>0&&(0,Ee.jsx)("div",{className:"mb-4",children:(0,Ee.jsx)("div",{className:"flex gap-2",children:e.emojis.map((e,t)=>(0,Ee.jsx)("span",{className:"text-2xl",children:e},t))})}),e.hashtags&&e.hashtags.length>0&&(0,Ee.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.hashtags.map((e,t)=>(0,Ee.jsxs)("span",{className:"px-3 py-1 bg-[#fb8678]/10 text-[#fb8678] text-xs rounded-full border border-[#fb8678]/20",children:["#",e]},t))}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Ee.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(u&&!V.has(e)){W(t=>new Set(t).add(e));try{const t=o.find(t=>t.id===e);if(!t)return;const n=u.auth_user_id||u.id,s=K(e);await Y(e,n,u.nickname||u.full_name),s?await(0,sl.qn)(e,u.id,t.user_id):await(0,sl.J6)(e,u.id,u.nickname||u.full_name,u.profile_image_url||"",t.user_id);const r=K(e);l(t=>t.map(t=>t.id===e?(0,Ae.A)((0,Ae.A)({},t),{},{likes_count:r?t.likes_count+1:Math.max(0,t.likes_count-1)}):t));const{count:a}=await Se.supabase.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e);l(t=>t.map(t=>t.id===e?(0,Ae.A)((0,Ae.A)({},t),{},{likes_count:a||0}):t))}catch(t){console.error("\uc88b\uc544\uc694 \ucc98\ub9ac \uc624\ub958:",t)}finally{W(t=>{const n=new Set(t);return n.delete(e),n})}}})(e.id)},disabled:V.has(e.id),className:"flex items-center space-x-2 transition-colors ".concat(K(e.id)?"text-[#fb8678]":"text-gray-600 hover:text-[#fb8678]"," ").concat(V.has(e.id)?"opacity-50 cursor-not-allowed":""),children:[(0,Ee.jsx)(ml,{className:"w-5 h-5 ".concat(K(e.id)?"fill-current":"")}),(0,Ee.jsx)("span",{className:"text-sm",children:e.likes_count})]}),(0,Ee.jsxs)("button",{onClick:t=>{t.stopPropagation(),(async e=>{N(e),j(!0),C([]),E(""),z(null),F(""),B(new Set),await xe(e.id)})(e)},className:"flex items-center space-x-2 text-gray-600 hover:text-[#fb8678] transition-colors",children:[(0,Ee.jsx)(fl,{className:"w-5 h-5"}),(0,Ee.jsx)("span",{className:"text-sm",children:e.comments_count})]})]})]},e.id))}),u&&"parent"===u.user_type&&(0,Ee.jsxs)("div",{className:"fixed bottom-6 right-6",children:[(0,Ee.jsx)("button",{onClick:()=>{i(!a)},className:"w-14 h-14 text-white rounded-full shadow-lg transition-all duration-200 flex items-center justify-center ".concat(a?"bg-gray-500 hover:bg-gray-600":"bg-[#fb8678] hover:bg-[#fb8678]/90"),children:(0,Ee.jsx)("svg",{className:"w-6 h-6 transition-transform duration-200 ".concat(a?"rotate-45":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),a&&(0,Ee.jsx)("div",{className:"absolute bottom-16 right-0 mb-2",children:(0,Ee.jsx)("button",{onClick:()=>{var e;const t=(null===(e=fe.find(e=>e.id===n))||void 0===e?void 0:e.title)||"\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0";window.location.href="/post/write?category=".concat(encodeURIComponent(t))},className:"px-4 py-2 bg-white text-[#fb8678] rounded-xl shadow-lg border border-[#fb8678]/20 hover:bg-[#fb8678]/10 transition-all duration-300 whitespace-nowrap font-semibold",children:"\uac8c\uc2dc\uae00 \uc791\uc131"})})]})]}),g&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full mx-4",children:[(0,Ee.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4 text-center",children:"\uac8c\uc2dc\uae00 \uc0ad\uc81c"}),(0,Ee.jsxs)("p",{className:"text-gray-600 text-center mb-6",children:["\uc815\ub9d0\ub85c \uc774 \uac8c\uc2dc\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",(0,Ee.jsx)("br",{}),"\uc0ad\uc81c\ub41c \uac8c\uc2dc\uae00\uc740 \ubcf5\uad6c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."]}),(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("button",{onClick:()=>p(null),className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:()=>(async e=>{try{const{error:t}=await Se.supabase.from("community_posts").delete().eq("id",e);if(t)return void console.error("\uac8c\uc2dc\uae00 \uc0ad\uc81c \uc624\ub958:",t);l(t=>t.filter(t=>t.id!==e));const n=o.find(t=>t.id===e);n&&b(e=>(0,Ae.A)((0,Ae.A)({},e),{},{[n.category]:Math.max(0,(e[n.category]||0)-1)})),p(null),f(null)}catch(t){console.error("\uac8c\uc2dc\uae00 \uc0ad\uc81c \uc624\ub958:",t)}})(g),className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium",children:"\uc0ad\uc81c"})]})]})}),w&&_&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-end z-50 overflow-hidden",children:(0,Ee.jsxs)("div",{className:"w-full bg-white rounded-t-3xl transform transition-all duration-500 ease-out animate-slide-up",style:{height:"90vh"},children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,Ee.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"\ub313\uae00"}),(0,Ee.jsx)("button",{onClick:()=>{const e=document.querySelector(".animate-slide-up");e&&(e.classList.add("animate-slide-down"),e.classList.remove("animate-slide-up")),setTimeout(()=>{j(!1),N(null),C([]),E(""),I(null),L(""),O(null),z(null),F(""),B(new Set)},300)},className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-6 h-6 text-gray-500"})})]}),(0,Ee.jsx)("div",{className:"flex-1 overflow-y-auto p-4",style:{height:"calc(90vh - 140px)"},children:P?(0,Ee.jsxs)("div",{className:"text-center py-8",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fb8678] mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\ub313\uae00\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."})]}):0===k.length?(0,Ee.jsxs)("div",{className:"text-center py-8",children:[(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uc544\uc9c1 \ub313\uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{className:"text-gray-500 text-sm",children:"\uccab \ubc88\uc9f8 \ub313\uae00\uc744 \uc791\uc131\ud574\ubcf4\uc138\uc694!"})]}):(0,Ee.jsx)("div",{className:"space-y-4",children:Te(k).map(e=>(0,Ee.jsxs)("div",{className:"space-y-3",children:[(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsxs)("div",{className:"relative w-8 h-8",children:[(0,Ee.jsx)("div",{className:"w-full h-full overflow-hidden bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-sm font-medium",style:{borderRadius:"12px"},children:e.user_profile_image?(0,Ee.jsx)("img",{src:e.user_profile_image,alt:"".concat(e.user_name,"\uc758 \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):e.user_name.charAt(0)}),"teacher"===e.user_type?(0,Ee.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-[1px] border-blue-500 bg-white flex items-center justify-center cursor-pointer",children:(0,Ee.jsx)("svg",{className:"w-2 h-2 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})})}):e.user_children_images&&e.user_children_images.length>0&&(0,Ee.jsxs)("div",{className:"absolute -bottom-0.5 -right-0.5 flex items-center flex-row-reverse",children:[e.user_children_images.length>2&&(0,Ee.jsx)("div",{className:"w-3 h-3 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center cursor-pointer relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[6px] font-bold",children:["+",e.user_children_images.length-2]})}),e.user_children_images.length>=2&&(0,Ee.jsx)("div",{className:"w-3 h-3 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-20 ".concat(e.user_children_images.length>2?"-mr-[4px]":""),children:e.user_children_images[1]?(0,Ee.jsx)("img",{src:e.user_children_images[1],alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[8px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[8px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{className:"w-3 h-3 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-10 ".concat(e.user_children_images.length>=2?"-mr-[4px]":""),children:e.user_children_images[0]?(0,Ee.jsx)("img",{src:e.user_children_images[0],alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[8px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[8px]",children:"\ud83d\udc64"})})]})]}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("span",{className:"font-semibold text-gray-900 text-sm",children:e.user_name}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500",children:e.is_edited&&e.updated_at?"".concat(Re(e.updated_at)," (\uc218\uc815\ub428)"):Re(e.created_at)})]}),u&&!e.is_deleted&&(e.user_id===u.id||e.user_id===u.auth_user_id)&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>Me(e.id),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(hl,{className:"w-4 h-4 text-gray-500"})}),R===e.id&&(0,Ee.jsxs)("div",{className:"absolute right-0 top-8 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[100px]",children:[(0,Ee.jsxs)("button",{onClick:()=>ye(e),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[(0,Ee.jsx)(pl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc218\uc815"})]}),(0,Ee.jsxs)("button",{onClick:()=>Ie(e.id),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[(0,Ee.jsx)(xl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc0ad\uc81c"})]})]})]})]}),T===e.id?(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsx)("textarea",{value:M,onChange:e=>L(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent text-sm resize-none",rows:2}),(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("button",{onClick:be,className:"px-3 py-1 bg-[#fb8678] text-white text-xs rounded-lg hover:bg-[#e67567] transition-colors",children:"\uc800\uc7a5"}),(0,Ee.jsx)("button",{onClick:we,className:"px-3 py-1 bg-gray-500 text-white text-xs rounded-lg hover:bg-gray-600 transition-colors",children:"\ucde8\uc18c"})]})]}):e.is_deleted?(0,Ee.jsx)("p",{className:"text-gray-400 text-sm italic",children:"\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,Ee.jsx)("p",{className:"text-gray-800 text-sm",children:e.content}),!e.is_deleted&&(0,Ee.jsx)("div",{className:"flex items-center space-x-4 mt-2",children:u&&e.user_id!==u.id&&e.user_id!==u.auth_user_id&&(0,Ee.jsx)("button",{onClick:()=>je(e.id),className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"})}),D===e.id&&(0,Ee.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Ee.jsx)("span",{className:"text-[#fb8678] font-medium text-sm",children:"@"}),(0,Ee.jsx)("span",{className:"text-[#fb8678] font-semibold text-sm",children:e.user_name}),(0,Ee.jsx)("span",{className:"text-gray-500 text-sm",children:"\ub2d8\uc5d0\uac8c \ub2f5\uae00"})]}),(0,Ee.jsx)("textarea",{value:U,onChange:e=>F(e.target.value),placeholder:"\ub2f5\uae00\uc744 \uc785\ub825\ud558\uc138\uc694...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent text-sm resize-none",rows:2}),(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("button",{onClick:Ne,className:"px-3 py-1 bg-[#fb8678] text-white text-xs rounded-lg hover:bg-[#e67567] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"}),(0,Ee.jsx)("button",{onClick:_e,className:"px-3 py-1 bg-gray-500 text-white text-xs rounded-lg hover:bg-gray-600 transition-colors",children:"\ucde8\uc18c"})]})]})]})]}),e.replies&&e.replies.length>0&&(0,Ee.jsx)("div",{className:"ml-8 space-y-3",children:q.has(e.id)?(0,Ee.jsxs)(Ee.Fragment,{children:[e.replies.map(t=>(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsxs)("div",{className:"relative w-6 h-6",children:[(0,Ee.jsx)("div",{className:"w-full h-full overflow-hidden bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-xs font-medium",style:{borderRadius:"8px"},children:t.user_profile_image?(0,Ee.jsx)("img",{src:t.user_profile_image,alt:"".concat(t.user_name,"\uc758 \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):t.user_name.charAt(0)}),"teacher"===t.user_type?(0,Ee.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-[0.5px] border-blue-500 bg-white flex items-center justify-center cursor-pointer",children:(0,Ee.jsx)("svg",{className:"w-1.5 h-1.5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})})}):t.user_children_images&&t.user_children_images.length>0&&(0,Ee.jsxs)("div",{className:"absolute -bottom-0.5 -right-0.5 flex items-center flex-row-reverse",children:[t.user_children_images.length>2&&(0,Ee.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center cursor-pointer relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[5px] font-bold",children:["+",t.user_children_images.length-2]})}),t.user_children_images.length>=2&&(0,Ee.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-20 ".concat(t.user_children_images.length>2?"-mr-[3px]":""),children:t.user_children_images[1]?(0,Ee.jsx)("img",{src:t.user_children_images[1],alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[7px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[7px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-10 ".concat(t.user_children_images.length>=2?"-mr-[3px]":""),children:t.user_children_images[0]?(0,Ee.jsx)("img",{src:t.user_children_images[0],alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[7px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[7px]",children:"\ud83d\udc64"})})]})]}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("span",{className:"font-semibold text-gray-900 text-xs",children:t.user_name}),(0,Ee.jsx)("span",{className:"text-xs text-gray-400",children:t.is_edited&&t.updated_at?"".concat(Re(t.updated_at)," (\uc218\uc815\ub428)"):Re(t.created_at)})]}),u&&!t.is_deleted&&(t.user_id===u.id||t.user_id===u.auth_user_id)&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>Me(t.id),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(hl,{className:"w-3 h-3 text-gray-500"})}),R===t.id&&(0,Ee.jsxs)("div",{className:"absolute right-0 top-6 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[100px]",children:[(0,Ee.jsxs)("button",{onClick:()=>ye(t),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[(0,Ee.jsx)(pl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc218\uc815"})]}),(0,Ee.jsxs)("button",{onClick:()=>Ie(t.id),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[(0,Ee.jsx)(xl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc0ad\uc81c"})]})]})]})]}),t.is_deleted?(0,Ee.jsx)("p",{className:"text-gray-400 text-xs italic",children:"\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,Ee.jsxs)("p",{className:"text-gray-800 text-xs",children:[(0,Ee.jsxs)("span",{className:"text-[#fb8678] font-medium",children:["@",e.user_name]}),(0,Ee.jsx)("span",{className:"ml-1",children:t.content})]}),!t.is_deleted&&u&&t.user_id!==u.id&&t.user_id!==u.auth_user_id&&(0,Ee.jsx)("div",{className:"mt-2",children:(0,Ee.jsx)("button",{onClick:()=>je(t.id),className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"})}),D===t.id&&(0,Ee.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Ee.jsx)("span",{className:"text-[#fb8678] font-medium text-xs",children:"@"}),(0,Ee.jsx)("span",{className:"text-[#fb8678] font-semibold text-xs",children:t.user_name}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500",children:"\ub2d8\uc5d0\uac8c \ub2f5\uae00"})]}),(0,Ee.jsx)("textarea",{value:U,onChange:e=>F(e.target.value),placeholder:"\ub2f5\uae00\uc744 \uc785\ub825\ud558\uc138\uc694...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent text-xs resize-none",rows:2}),(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("button",{onClick:Ne,className:"px-3 py-1 bg-[#fb8678] text-white text-xs rounded-lg hover:bg-[#e67567] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"}),(0,Ee.jsx)("button",{onClick:_e,className:"px-3 py-1 bg-gray-500 text-white text-xs rounded-lg hover:bg-gray-600 transition-colors",children:"\ucde8\uc18c"})]})]})]})]},t.id)),e.replies&&(()=>{const t=e.replies,n=k.filter(e=>e.parent_id&&t.some(t=>t.id===e.parent_id));return n.length>0?(0,Ee.jsx)("div",{className:"space-y-3",children:n.map(e=>{const n=t.find(t=>t.id===e.parent_id);return(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsxs)("div",{className:"relative w-6 h-6",children:[(0,Ee.jsx)("div",{className:"w-full h-full overflow-hidden bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-xs font-medium",style:{borderRadius:"8px"},children:e.user_profile_image?(0,Ee.jsx)("img",{src:e.user_profile_image,alt:"".concat(e.user_name,"\uc758 \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):e.user_name.charAt(0)}),"teacher"===e.user_type?(0,Ee.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-[0.5px] border-blue-500 bg-white flex items-center justify-center cursor-pointer",children:(0,Ee.jsx)("svg",{className:"w-1.5 h-1.5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})})}):e.user_children_images&&e.user_children_images.length>0&&(0,Ee.jsxs)("div",{className:"absolute -bottom-0.5 -right-0.5 flex items-center flex-row-reverse",children:[e.user_children_images.length>2&&(0,Ee.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center cursor-pointer relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[5px] font-bold",children:["+",e.user_children_images.length-2]})}),e.user_children_images.length>=2&&(0,Ee.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-20 ".concat(e.user_children_images.length>2?"-mr-[3px]":""),children:e.user_children_images[1]?(0,Ee.jsx)("img",{src:e.user_children_images[1],alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[7px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[7px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-10 ".concat(e.user_children_images.length>=2?"-mr-[3px]":""),children:e.user_children_images[0]?(0,Ee.jsx)("img",{src:e.user_children_images[0],alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[7px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[7px]",children:"\ud83d\udc64"})})]})]}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("span",{className:"font-semibold text-gray-900 text-xs",children:e.user_name}),(0,Ee.jsx)("span",{className:"text-xs text-gray-400",children:e.is_edited&&e.updated_at?"".concat(Re(e.updated_at)," (\uc218\uc815\ub428)"):Re(e.created_at)})]}),u&&!e.is_deleted&&(e.user_id===u.id||e.user_id===u.auth_user_id)&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>Me(e.id),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(hl,{className:"w-3 h-3 text-gray-500"})}),R===e.id&&(0,Ee.jsxs)("div",{className:"absolute right-0 top-6 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[100px]",children:[(0,Ee.jsxs)("button",{onClick:()=>ye(e),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[(0,Ee.jsx)(pl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc218\uc815"})]}),(0,Ee.jsxs)("button",{onClick:()=>Ie(e.id),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[(0,Ee.jsx)(xl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc0ad\uc81c"})]})]})]})]}),e.is_deleted?(0,Ee.jsx)("p",{className:"text-gray-400 text-xs italic",children:"\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,Ee.jsxs)("p",{className:"text-gray-800 text-xs",children:[(0,Ee.jsxs)("span",{className:"text-[#fb8678] font-medium",children:["@",null===n||void 0===n?void 0:n.user_name]}),(0,Ee.jsx)("span",{className:"ml-1",children:e.content})]}),!e.is_deleted&&u&&e.user_id!==u.id&&e.user_id!==u.auth_user_id&&(0,Ee.jsx)("div",{className:"mt-2",children:(0,Ee.jsx)("button",{onClick:()=>{console.log("=== \ucee4\ubba4\ub2c8\ud2f0 \ubaa8\ub2ec \ub0b4 2\ucc28 \ub2f5\uae00\uc5d0 \ub300\ud55c \ub2f5\uae00\ub2ec\uae30 \ubc84\ud2bc \ud074\ub9ad ==="),console.log("\ub2f5\uae00 ID (nestedReply.id):",e.id),console.log("\ub2f5\uae00 \uc791\uc131\uc790:",e.user_name),console.log("\ud604\uc7ac \uc0ac\uc6a9\uc790:",u.nickname||u.full_name),console.log("\ud604\uc7ac replyingToCommentId:",D),je(e.id)},className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"})})]})]},e.id)})}):null})(),(0,Ee.jsx)("div",{className:"mt-3",children:(0,Ee.jsxs)("button",{onClick:()=>ke(e.id),className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors ml-9 flex items-center space-x-1",children:[(0,Ee.jsx)("span",{className:"text-gray-400",children:">"}),(0,Ee.jsx)("span",{className:"font-semibold",children:"\ub2f5\uae00 \uc228\uae30\uae30"})]})})]}):(0,Ee.jsxs)("button",{onClick:()=>ke(e.id),className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors ml-9 flex items-center space-x-1",children:[(0,Ee.jsx)("span",{className:"text-gray-400",children:">"}),(0,Ee.jsxs)("span",{className:"font-semibold",children:["\ub2f5\uae00 ",Pe(e),"\uac1c \ubcf4\uae30"]})]})})]},e.id))})}),(0,Ee.jsx)("div",{className:"p-4 bg-white shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("input",{type:"text",value:S,onChange:e=>E(e.target.value),placeholder:"\ub313\uae00\uc744 \uc785\ub825\ud558\uc138\uc694...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-full focus:ring-2 focus:ring-[#fb8678] focus:border-transparent text-sm",onKeyPress:e=>{"Enter"===e.key&&ve()}}),(0,Ee.jsx)("button",{onClick:ve,disabled:!S.trim(),className:"px-6 py-3 bg-[#fb8678] text-white rounded-full hover:bg-[#e67567] transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"\uac8c\uc2dc"})]})})]})}),$&&Q&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-4 max-w-lg w-full min-h-[500px] max-h-[95vh] flex flex-col",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ee.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"\uac8c\uc2dc\uae00 \uc2e0\uace0"}),(0,Ee.jsx)("button",{onClick:ge,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-6 h-6 text-gray-500"})})]}),(0,Ee.jsxs)("div",{className:"flex-1 overflow-y-auto mb-6",children:[(0,Ee.jsxs)("p",{className:"text-gray-600 text-sm mb-4",children:[(0,Ee.jsx)("strong",{children:Q.author_name}),"\ub2d8\uc774 \uc791\uc131\ud55c \uac8c\uc2dc\uae00\uc744 \uc2e0\uace0\ud569\ub2c8\ub2e4."]}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc720\ud615"}),(0,Ee.jsxs)("select",{value:se,onChange:e=>re(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent",children:[(0,Ee.jsx)("option",{value:"spam",children:"\uc2a4\ud338/\uad11\uace0\uc131 \uac8c\uc2dc\uae00"}),(0,Ee.jsx)("option",{value:"inappropriate",children:"\ubd80\uc801\uc808\ud55c \ub0b4\uc6a9"}),(0,Ee.jsx)("option",{value:"harassment",children:"\uad34\ub86d\ud798/\ud3ed\ub825"}),(0,Ee.jsx)("option",{value:"other",children:"\uae30\ud0c0"})]})]}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc0ac\uc720"}),(0,Ee.jsx)("textarea",{value:te,onChange:e=>ne(e.target.value),placeholder:"\uc2e0\uace0 \uc0ac\uc720\ub97c \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694...",rows:6,maxLength:500,className:"w-full px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent resize-none text-sm"}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 font-semibold mt-1",children:[(0,Ee.jsx)("span",{children:"\ucd5c\ub300 \ud14d\uc2a4\ud2b8 \uae38\uc774"}),(0,Ee.jsxs)("span",{children:[te.length,"/500"]})]})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3 flex-shrink-0",children:[(0,Ee.jsx)("button",{onClick:ge,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(Q&&u&&te.trim()){ie(!0);try{const e=u.id,{error:t}=await Se.supabase.from("reports").insert({post_id:Q.id,reporter_id:e,report_reason:te.trim(),report_type:se});if(t)return console.error("\uc2e0\uace0 \ucc98\ub9ac \uc624\ub958:",t),void alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");alert("\uc2e0\uace0\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),ge()}catch(e){console.error("\uc2e0\uace0 \ucc98\ub9ac \uc624\ub958:",e),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{ie(!1)}}},disabled:!te.trim()||ae,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:ae?"\uc2e0\uace0 \uc911...":"\uc2e0\uace0\ud558\uae30"})]})]})}),oe&&ce&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[(0,Ee.jsxs)("div",{className:"text-center mb-6",children:[(0,Ee.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ee.jsx)(vl,{className:"w-6 h-6 text-red-600"})}),(0,Ee.jsxs)("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:[ce.author_name,"\ub2d8\uc744 \ucc28\ub2e8\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"]}),(0,Ee.jsxs)("div",{className:"text-sm text-gray-600 text-left space-y-2",children:[(0,Ee.jsx)("p",{children:"\u2022 \ucc28\ub2e8\ud558\uba74 \uc0ac\uc6a9\uc790\uac00 \uc791\uc131\ud55c \uae00\uacfc \ub313\uae00\uc774 \ub354 \uc774\uc0c1 \ubcf4\uc774\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{children:"\u2022 \uc0c1\ub300\ubc29\uc740 \ud68c\uc6d0\ub2d8\uc758 \uae00\uc744 \uacc4\uc18d \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{children:"\u2022 \uc815\ub9d0 \ucc28\ub2e8\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("button",{onClick:pe,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(ce&&u){he(!0);try{const e=u.auth_user_id||u.id,{error:t}=await Se.supabase.from("blocked_users").insert({blocker_id:e,blocked_user_id:ce.user_id,created_at:(new Date).toISOString()});if(t)return console.error("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958:",t),void alert("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");alert("\uc0ac\uc6a9\uc790\uac00 \ucc28\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),l(e=>e.filter(e=>e.user_id!==ce.user_id))}catch(e){console.error("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958:",e),alert("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{he(!1),pe()}}},disabled:ue,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:ue?"\ucc28\ub2e8 \uc911...":"\ucc28\ub2e8\ud558\uae30"})]})]})})]})},_l=Bo("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Nl=Bo("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),kl=Bo("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),Cl=()=>{const e=ne(),[t]=Ce(),[s,a]=(0,r.useState)("loading"),[i,o]=(0,r.useState)(""),l=(0,r.useRef)(!1);return(0,r.useEffect)(()=>{let t=!0;return(async()=>{if(l.current)console.log("OAuth \ucf5c\ubc31 \ucc98\ub9ac \uc911, \uc911\ubcf5 \uc2e4\ud589 \ubc29\uc9c0");else{l.current=!0;try{console.log("OAuth \ucf5c\ubc31 \ucc98\ub9ac \uc2dc\uc791");const l=new URLSearchParams(window.location.search);if(console.log("URL \ud30c\ub77c\ubbf8\ud130:",Object.fromEntries(l)),window.location.hash){console.log("URL \ud574\uc2dc:",window.location.hash);const n=new URLSearchParams(window.location.hash.substring(1)),s=n.get("error"),r=n.get("error_description");if(s)return console.error("OAuth \uc5d0\ub7ec \ubc1c\uc0dd:",s,r),"server_error"===s&&null!==r&&void 0!==r&&r.includes("email")?t&&(a("error"),o("\uc774\uba54\uc77c \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uce74\uce74\uc624\ud1a1 \uc124\uc815\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694.")):t&&(a("error"),o("OAuth \uc778\uc99d \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")),void(t&&setTimeout(()=>{e("/signup?step=auth-method&error=oauth_error")},2e3))}const{data:d,error:u}=await Se.supabase.auth.getSession();if(u)throw console.error("\uc138\uc158 \ud655\uc778 \uc624\ub958:",u),u;if(console.log("\uc138\uc158 \ub370\uc774\ud130:",d),d.session){var s;console.log("OAuth \uc778\uc99d \uc131\uacf5:",d.session.user);const l=d.session.user,{data:u,error:h}=await Se.supabase.from("profiles").select("auth_user_id").eq("auth_user_id",l.id).maybeSingle();let m=!1;h?console.error("\ud504\ub85c\ud544 \uc870\ud68c \uc624\ub958:",h):m=!(!u||!u.auth_user_id);let f=null===(s=l.app_metadata)||void 0===s?void 0:s.provider;var r;if(!f)f=null===(r=l.user_metadata)||void 0===r?void 0:r.provider;if(!f){var i;const e=null===(i=l.app_metadata)||void 0===i?void 0:i.identities;var c;if(e&&e.length>0)f=null===(c=e[0])||void 0===c?void 0:c.provider}if(console.log("\uc0ac\uc6a9\uc790 \uc815\ubcf4:",{app_metadata:l.app_metadata,user_metadata:l.user_metadata,provider:f}),m){if(t){a("success"),o("\ub85c\uadf8\uc778\ub418\uc5c8\uc2b5\ub2c8\ub2e4!");const{initializeFCM:s}=await n.e(693).then(n.bind(n,693));await s(),setTimeout(()=>{t&&e("/main")},1500)}}else{let n="\uc18c\uc15c";"kakao"===f?n="\uce74\uce74\uc624\ud1a1":"google"===f?n="\uad6c\uae00":"apple"===f&&(n="\uc560\ud50c"),t&&(a("success"),o("".concat(n," \uacc4\uc815 \uc5f0\ub3d9\ub418\uc5c8\uc2b5\ub2c8\ub2e4! \ud504\ub85c\ud544\uc744 \uc644\uc131\ud574\uc8fc\uc138\uc694.")),setTimeout(()=>{t&&e("/signup?step=type&oauth=success")},1500))}}else console.log("\uc138\uc158\uc774 \uc5c6\uc74c - \uc778\uc99d \uc2e4\ud328"),t&&(a("error"),o("\uc778\uc99d\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4."),setTimeout(()=>{t&&e("/signup?step=auth-method&error=auth_failed")},2e3))}catch(d){console.error("OAuth \ucf5c\ubc31 \ucc98\ub9ac \uc624\ub958:",d),t&&(a("error"),o("\uc778\uc99d \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),setTimeout(()=>{t&&e("/signup?step=auth-method&error=callback_error")},2e3))}finally{l.current=!1}}})(),()=>{t=!1,l.current=!1}},[e]),(0,Ee.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center p-4",children:(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},className:"text-center",children:["loading"===s&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)(_l,{className:"w-16 h-16 text-orange-500 mx-auto mb-4 animate-spin"}),(0,Ee.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"\uc778\uc99d \ucc98\ub9ac \uc911..."}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uc7a0\uc2dc\ub9cc \uae30\ub2e4\ub824\uc8fc\uc138\uc694"})]}),"success"===s&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)(Nl,{className:"w-16 h-16 text-[#fb8678] mx-auto mb-4"}),(0,Ee.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:i.includes("\ub85c\uadf8\uc778\ub418\uc5c8\uc2b5\ub2c8\ub2e4")?"\ub85c\uadf8\uc778 \uc644\ub8cc!":"\uacc4\uc815 \uc5f0\ub3d9 \uc644\ub8cc!"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:i})]}),"error"===s&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)(kl,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),(0,Ee.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"\uc778\uc99d \uc2e4\ud328"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:i})]})]})})},Sl=Bo("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),El=Bo("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),Pl=Bo("Grid",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"3",x2:"21",y1:"15",y2:"15",key:"o2sbyz"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}],["line",{x1:"15",x2:"15",y1:"3",y2:"21",key:"1hpv9i"}]]),Al=Bo("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);async function Tl(e,t,n,s,r){const a={user_id:e,target_type:t,target_id:n,target_name:s};r&&("childcare"===t&&r.arcode?a.arcode=r.arcode:"kindergarten"!==t&&"playground"!==t||(void 0!==r.sidoCode&&null!==r.sidoCode&&(a.sido_code=String(r.sidoCode)),void 0!==r.sggCode&&null!==r.sggCode&&(a.sgg_code=String(r.sggCode))));const{error:i}=await Se.supabase.from("favorites").insert(a);if(i)throw console.error("\ucc1c\ud558\uae30 \ucd94\uac00 \uc624\ub958:",i),console.error("\uc804\uc1a1\ub41c \ub370\uc774\ud130:",a),i}async function Il(e,t,n){const{error:s}=await Se.supabase.from("favorites").delete().eq("user_id",e).eq("target_type",t).eq("target_id",n);if(s)throw s}async function Ml(e,t,n){const{data:s,error:r}=await Se.supabase.from("favorites").select("id").eq("user_id",e).eq("target_type",t).eq("target_id",n).maybeSingle();return!r&&!!s}async function Ll(e,t){let n=Se.supabase.from("favorites").select("*").eq("user_id",e).order("created_at",{ascending:!1});t&&(n=n.eq("target_type",t));const{data:s,error:r}=await n;if(r)throw r;return s}async function Rl(e){try{if(!e||0===e.length)return{};const{data:t,error:n}=await Se.supabase.from("kindergarten_reviews").select("kindergarten_code, rating").in("kindergarten_code",e).eq("is_deleted",!1);if(n)return console.error("\uc720\uce58\uc6d0 \ub9ac\ubdf0 \ud1b5\uacc4 \uc870\ud68c \uc624\ub958:",n),{};const s={};(t||[]).forEach(e=>{const t=e.kindergarten_code;s[t]||(s[t]={total:0,count:0}),s[t].total+=e.rating,s[t].count+=1});const r={};return Object.keys(s).forEach(e=>{const{total:t,count:n}=s[e];r[e]={average:n>0?Number((t/n).toFixed(1)):0,count:n}}),r}catch(yd){return console.error("\uc720\uce58\uc6d0 \ub9ac\ubdf0 \ud1b5\uacc4 \uc870\ud68c \uc2e4\ud328:",yd),{}}}async function Ol(e){try{const{data:t,error:n}=await Se.supabase.from("kindergarten_reviews").select("rating").eq("kindergarten_code",e).eq("is_deleted",!1);if(n)return console.error("\ub9ac\ubdf0 \ud1b5\uacc4 \uc870\ud68c \uc624\ub958:",n),{total_reviews:0,average_rating:0,rating_distribution:{1:0,2:0,3:0,4:0,5:0}};const s=t||[],r=s.length;if(0===r)return{total_reviews:0,average_rating:0,rating_distribution:{1:0,2:0,3:0,4:0,5:0}};const a={1:s.filter(e=>1===e.rating).length,2:s.filter(e=>2===e.rating).length,3:s.filter(e=>3===e.rating).length,4:s.filter(e=>4===e.rating).length,5:s.filter(e=>5===e.rating).length},i=s.reduce((e,t)=>e+t.rating,0)/r;return{total_reviews:r,average_rating:Number(i.toFixed(1)),rating_distribution:a}}catch(t){throw console.error("\ub9ac\ubdf0 \ud1b5\uacc4 \uc870\ud68c \uc2e4\ud328:",t),t}}async function Dl(e){try{const{data:{user:t},error:n}=await Se.supabase.auth.getUser();if(n||!t)throw new Error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const{data:s,error:r}=await Se.supabase.from("kindergarten_reviews").insert({kindergarten_code:e.kindergarten_code,kindergarten_name:e.kindergarten_name,user_id:t.id,rating:e.rating,content:e.content}).select().single();if(r)throw console.error("\ub9ac\ubdf0 \uc0dd\uc131 \uc624\ub958:",r),r;if(e.images&&e.images.length>0){const t=(await zl(s.id,e.images)).map((e,t)=>({review_id:s.id,image_url:e,image_order:t})),{error:n}=await Se.supabase.from("kindergarten_review_images").insert(t);n&&console.error("\ub9ac\ubdf0 \uc774\ubbf8\uc9c0 \uc800\uc7a5 \uc624\ub958:",n)}const a=await async function(){try{const{data:{user:u},error:h}=await Se.supabase.auth.getUser();if(h||!u)return null;try{const{data:a,error:i}=await Se.supabase.from("profiles").select("full_name, nickname, profile_image_url, children_info").eq("auth_user_id",u.id).maybeSingle();var e,t,n,s,r;return i?(console.warn("profiles \ud14c\uc774\ube14 \uc870\ud68c \uc2e4\ud328:",i),{full_name:(null===(e=u.user_metadata)||void 0===e?void 0:e.full_name)||(null===(t=u.email)||void 0===t?void 0:t.split("@")[0])||"\uc775\uba85",nickname:(null===(n=u.user_metadata)||void 0===n?void 0:n.nickname)||(null===(s=u.email)||void 0===s?void 0:s.split("@")[0])||"\uc775\uba85",profile_image_url:(null===(r=u.user_metadata)||void 0===r?void 0:r.avatar_url)||null}):(console.log("\ud504\ub85c\ud544 \uc815\ubcf4 \uc870\ud68c \uc131\uacf5:",a),a)}catch(d){var a,i,o,l,c;return console.warn("profiles \ud14c\uc774\ube14 \uc870\ud68c \uc2e4\ud328, user_metadata \uc0ac\uc6a9:",d),{full_name:(null===(a=u.user_metadata)||void 0===a?void 0:a.full_name)||(null===(i=u.email)||void 0===i?void 0:i.split("@")[0])||"\uc775\uba85",nickname:(null===(o=u.user_metadata)||void 0===o?void 0:o.nickname)||(null===(l=u.email)||void 0===l?void 0:l.split("@")[0])||"\uc775\uba85",profile_image_url:(null===(c=u.user_metadata)||void 0===c?void 0:c.avatar_url)||null}}}catch(u){return console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc870\ud68c \uc2e4\ud328:",u),null}}();return(0,Ae.A)((0,Ae.A)({},s),{},{user_profile:a||{full_name:"\uc775\uba85",nickname:"\uc775\uba85",profile_image_url:null}})}catch(t){throw console.error("\ub9ac\ubdf0 \uc791\uc131 \uc2e4\ud328:",t),t}}async function zl(e,t){const n=t.map(async(t,n)=>{const s=t.name.split(".").pop(),r="".concat(e,"/").concat(n,"_").concat(Date.now(),".").concat(s),a="kindergarten-reviews/".concat(r),{error:i}=await Se.supabase.storage.from("kindergarten-reviews").upload(a,t);if(i)throw console.error("\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc624\ub958:",i),i;const{data:o}=Se.supabase.storage.from("kindergarten-reviews").getPublicUrl(a);return o.publicUrl});return Promise.all(n)}async function Ul(e){try{if(!e||0===e.length)return{};console.log("\ud83d\udd0d getMultipleChildcareReviewStats \ud638\ucd9c - \ucf54\ub4dc:",e);const{data:t,error:n}=await Se.supabase.from("childcare_reviews").select("childcare_code, rating").in("childcare_code",e).eq("is_deleted",!1);if(n)return console.error("\uc5b4\ub9b0\uc774\uc9d1 \ub9ac\ubdf0 \ud1b5\uacc4 \uc870\ud68c \uc624\ub958:",n),{};console.log("\ud83d\udcca \uc5b4\ub9b0\uc774\uc9d1 \ub9ac\ubdf0 \ud1b5\uacc4 \uc870\ud68c \uacb0\uacfc - \ub370\uc774\ud130 \uac1c\uc218:",(null===t||void 0===t?void 0:t.length)||0,"\ub370\uc774\ud130:",t);const s={};(t||[]).forEach(e=>{const t=e.childcare_code;s[t]||(s[t]={total:0,count:0}),s[t].total+=e.rating,s[t].count+=1});const r={};return Object.keys(s).forEach(e=>{const{total:t,count:n}=s[e];r[e]={average:n>0?Number((t/n).toFixed(1)):0,count:n}}),console.log("\u2705 getMultipleChildcareReviewStats \ucd5c\uc885 \uacb0\uacfc:",r),r}catch(yd){return console.error("\uc5b4\ub9b0\uc774\uc9d1 \ub9ac\ubdf0 \ud1b5\uacc4 \uc870\ud68c \uc2e4\ud328:",yd),{}}}async function Fl(e){const{data:t,error:n}=await Se.supabase.from("childcare_reviews").select("rating").eq("childcare_code",e).eq("is_deleted",!1);if(n||!t)return{total_reviews:0,average_rating:0,rating_distribution:{1:0,2:0,3:0,4:0,5:0}};const s=t.length;if(0===s)return{total_reviews:0,average_rating:0,rating_distribution:{1:0,2:0,3:0,4:0,5:0}};const r={1:t.filter(e=>1===e.rating).length,2:t.filter(e=>2===e.rating).length,3:t.filter(e=>3===e.rating).length,4:t.filter(e=>4===e.rating).length,5:t.filter(e=>5===e.rating).length};return{total_reviews:s,average_rating:Number((t.reduce((e,t)=>e+t.rating,0)/s).toFixed(1)),rating_distribution:r}}async function ql(e){const{data:{user:t}}=await Se.supabase.auth.getUser();if(!t)throw new Error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const{data:n,error:s}=await Se.supabase.from("childcare_reviews").insert({childcare_code:e.childcare_code,childcare_name:e.childcare_name,user_id:t.id,rating:e.rating,content:e.content}).select().single();if(s)throw s;if(e.images&&e.images.length>0){const t=await async function(e,t){const n=t.map(async(t,n)=>{const s=t.name.split(".").pop(),r="".concat(e,"/").concat(n,"_").concat(Date.now(),".").concat(s),a="childcare-reviews/".concat(r),{error:i}=await Se.supabase.storage.from("childcare-reviews").upload(a,t);if(i)throw i;const{data:o}=Se.supabase.storage.from("childcare-reviews").getPublicUrl(a);return o.publicUrl});return Promise.all(n)}(n.id,e.images),s=t.map((e,t)=>({review_id:n.id,image_url:e,image_order:t}));await Se.supabase.from("childcare_review_images").insert(s)}return n}async function Bl(e){var t,n;const{data:{user:s},error:r}=await Se.supabase.auth.getUser();if(r||!s)throw new Error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const{data:a,error:i}=await Se.supabase.from("playground_reviews").insert({playground_id:e.playground_id,playground_name:null!==(t=e.playground_name)&&void 0!==t?t:null,user_id:s.id,rating:e.rating,content:null!==(n=e.content)&&void 0!==n?n:null}).select().single();if(i||!a)throw i||new Error("\ub9ac\ubdf0 \uc0dd\uc131 \uc2e4\ud328");if(e.images&&e.images.length>0){const t=await async function(e,t){const n=t.map(async(t,n)=>{const s=t.name.split(".").pop(),r="".concat(e,"/").concat(n,"_").concat(Date.now(),".").concat(s),a="playground-reviews/".concat(r),{error:i}=await Se.supabase.storage.from("playground-reviews").upload(a,t);if(i)throw i;const{data:o}=Se.supabase.storage.from("playground-reviews").getPublicUrl(a);return o.publicUrl});return Promise.all(n)}(a.id,e.images),n=t.map((e,t)=>({review_id:a.id,image_url:e,image_order:t})),{error:s}=await Se.supabase.from("playground_review_images").insert(n);s&&console.warn("\ub9ac\ubdf0 \uc774\ubbf8\uc9c0 \uc800\uc7a5 \uc624\ub958:",s)}return a}async function Vl(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20;const n=((arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)-1)*t,s=n+t-1,{data:r,error:a}=await Se.supabase.from("playground_reviews").select("*").eq("playground_id",e).eq("is_deleted",!1).order("created_at",{ascending:!1}).range(n,s);if(a)throw a;if(!r||0===r.length)return[];const i=r.map(e=>e.id),o=Array.from(new Set(r.map(e=>e.user_id).filter(Boolean))),{data:l,error:c}=await Se.supabase.from("playground_review_images").select("*").in("review_id",i).order("image_order",{ascending:!0});if(c)throw c;let d=new Map;if(o.length>0)try{const{data:e}=await Se.supabase.from("profiles").select("auth_user_id, full_name, nickname, profile_image_url, children_info").in("auth_user_id",o);for(const t of e||[])d.set(t.auth_user_id,{full_name:t.full_name,nickname:t.nickname,profile_image_url:t.profile_image_url,children_info:t.children_info})}catch(h){}const u=new Map;for(const m of l||[])u.has(m.review_id)||u.set(m.review_id,[]),u.get(m.review_id).push(m);return r.map(e=>{const t=d.get(e.user_id)||null;return(0,Ae.A)((0,Ae.A)({},e),{},{images:u.get(e.id)||[],user_profile:t})})}async function Wl(e){const{data:t,error:n}=await Se.supabase.from("playground_reviews").select("rating").eq("playground_id",e).eq("is_deleted",!1);if(n)throw n;const s={1:0,2:0,3:0,4:0,5:0};let r=0;for(const i of t||[]){const e=Number(i.rating);e>=1&&e<=5&&(s[e]+=1,r+=e)}const a=(t||[]).length;return{average_rating:a>0?r/a:0,total_reviews:a,rating_distribution:s}}const Hl={"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc":{sidoCode:11,sggCodes:{"\uc911\uad6c":11140,"\uc885\ub85c\uad6c":11110,"\uc6a9\uc0b0\uad6c":11170,"\uc131\ub3d9\uad6c":11200,"\uad11\uc9c4\uad6c":11215,"\ub3d9\ub300\ubb38\uad6c":11230,"\uc911\ub791\uad6c":11260,"\uc131\ubd81\uad6c":11290,"\uac15\ubd81\uad6c":11305,"\ub3c4\ubd09\uad6c":11320,"\ub178\uc6d0\uad6c":11350,"\uc740\ud3c9\uad6c":11380,"\uc11c\ub300\ubb38\uad6c":11410,"\ub9c8\ud3ec\uad6c":11440,"\uc591\ucc9c\uad6c":11470,"\uac15\uc11c\uad6c":11500,"\uad6c\ub85c\uad6c":11530,"\uae08\ucc9c\uad6c":11545,"\uc601\ub4f1\ud3ec\uad6c":11560,"\ub3d9\uc791\uad6c":11590,"\uad00\uc545\uad6c":11620,"\uc11c\ucd08\uad6c":11650,"\uac15\ub0a8\uad6c":11680,"\uc1a1\ud30c\uad6c":11710,"\uac15\ub3d9\uad6c":11740}},"\ubd80\uc0b0\uad11\uc5ed\uc2dc":{sidoCode:26,sggCodes:{"\uc911\uad6c":26110,"\uc11c\uad6c":26140,"\ub3d9\uad6c":26170,"\uc601\ub3c4\uad6c":26200,"\ubd80\uc0b0\uc9c4\uad6c":26230,"\ub3d9\ub798\uad6c":26260,"\ub0a8\uad6c":26290,"\ubd81\uad6c":26320,"\ud574\uc6b4\ub300\uad6c":26350,"\uc0ac\ud558\uad6c":26380,"\uae08\uc815\uad6c":26410,"\uac15\uc11c\uad6c":26440,"\uc5f0\uc81c\uad6c":26470,"\uc218\uc601\uad6c":26500,"\uc0ac\uc0c1\uad6c":26530,"\uae30\uc7a5\uad70":26710}},"\ub300\uad6c\uad11\uc5ed\uc2dc":{sidoCode:27,sggCodes:{"\uc911\uad6c":27110,"\ub3d9\uad6c":27140,"\uc11c\uad6c":27170,"\ub0a8\uad6c":27200,"\ubd81\uad6c":27230,"\uc218\uc131\uad6c":27260,"\ub2ec\uc11c\uad6c":27290,"\ub2ec\uc131\uad70":27710,"\uad70\uc704\uad70":27720}},"\uc778\ucc9c\uad11\uc5ed\uc2dc":{sidoCode:28,sggCodes:{"\uc911\uad6c":28110,"\ub3d9\uad6c":28140,"\ubbf8\ucd94\ud640\uad6c":28177,"\uc5f0\uc218\uad6c":28185,"\ub0a8\ub3d9\uad6c":28200,"\ubd80\ud3c9\uad6c":28237,"\uacc4\uc591\uad6c":28245,"\uc11c\uad6c":28260,"\uac15\ud654\uad70":28710,"\uc639\uc9c4\uad70":28720}},"\uad11\uc8fc\uad11\uc5ed\uc2dc":{sidoCode:29,sggCodes:{"\ub3d9\uad6c":29110,"\uc11c\uad6c":29140,"\ub0a8\uad6c":29155,"\ubd81\uad6c":29170,"\uad11\uc0b0\uad6c":29200}},"\ub300\uc804\uad11\uc5ed\uc2dc":{sidoCode:30,sggCodes:{"\ub3d9\uad6c":30110,"\uc911\uad6c":30140,"\uc11c\uad6c":30170,"\uc720\uc131\uad6c":30200,"\ub300\ub355\uad6c":30230}},"\uc6b8\uc0b0\uad11\uc5ed\uc2dc":{sidoCode:31,sggCodes:{"\uc911\uad6c":31110,"\ub0a8\uad6c":31140,"\ub3d9\uad6c":31170,"\ubd81\uad6c":31200,"\uc6b8\uc8fc\uad70":31710}},"\uc138\uc885\ud2b9\ubcc4\uc790\uce58\uc2dc":{sidoCode:36,sggCodes:{"\uc138\uc885\ud2b9\ubcc4\uc790\uce58\uc2dc":36110}},"\uacbd\uae30\ub3c4":{sidoCode:41,sggCodes:{"\uc218\uc6d0\uc2dc":41110,"\uc218\uc6d0\uc2dc \uc7a5\uc548\uad6c":41111,"\uc218\uc6d0\uc2dc \uad8c\uc120\uad6c":41113,"\uc218\uc6d0\uc2dc \ud314\ub2ec\uad6c":41115,"\uc218\uc6d0\uc2dc \uc601\ud1b5\uad6c":41117,"\uc131\ub0a8\uc2dc":41130,"\uc131\ub0a8\uc2dc \uc218\uc815\uad6c":41131,"\uc131\ub0a8\uc2dc \uc911\uc6d0\uad6c":41133,"\uc131\ub0a8\uc2dc \ubd84\ub2f9\uad6c":41135,"\uc758\uc815\ubd80\uc2dc":41150,"\uc548\uc591\uc2dc":41170,"\uc548\uc591\uc2dc \ub9cc\uc548\uad6c":41171,"\uc548\uc591\uc2dc \ub3d9\uc548\uad6c":41173,"\ubd80\ucc9c\uc2dc \uc6d0\ubbf8\uad6c":41192,"\ubd80\ucc9c\uc2dc \uc18c\uc0ac\uad6c":41194,"\ubd80\ucc9c\uc2dc \uc624\uc815\uad6c":41196,"\uad11\uba85\uc2dc":41210,"\ud3c9\ud0dd\uc2dc":41220,"\ub3d9\ub450\ucc9c\uc2dc":41250,"\uc548\uc0b0\uc2dc \uc0c1\ub85d\uad6c":41271,"\uc548\uc0b0\uc2dc \ub2e8\uc6d0\uad6c":41273,"\uace0\uc591\uc2dc \ub355\uc591\uad6c":41281,"\uace0\uc591\uc2dc \uc77c\uc0b0\ub3d9\uad6c":41285,"\uace0\uc591\uc2dc \uc77c\uc0b0\uc11c\uad6c":41287,"\uacfc\ucc9c\uc2dc":41290,"\uad6c\ub9ac\uc2dc":41310,"\ub0a8\uc591\uc8fc\uc2dc":41360,"\uc624\uc0b0\uc2dc":41370,"\uc2dc\ud765\uc2dc":41390,"\uad70\ud3ec\uc2dc":41410,"\uc758\uc655\uc2dc":41430,"\ud558\ub0a8\uc2dc":41450,"\uc6a9\uc778\uc2dc \ucc98\uc778\uad6c":41461,"\uc6a9\uc778\uc2dc \uae30\ud765\uad6c":41463,"\uc6a9\uc778\uc2dc \uc218\uc9c0\uad6c":41465,"\ud30c\uc8fc\uc2dc":41480,"\uc774\ucc9c\uc2dc":41500,"\uc548\uc131\uc2dc":41550,"\uae40\ud3ec\uc2dc":41570,"\ud654\uc131\uc2dc":41590,"\uad11\uc8fc\uc2dc":41610,"\uc591\uc8fc\uc2dc":41630,"\ud3ec\ucc9c\uc2dc":41650,"\uc5ec\uc8fc\uc2dc":41670,"\uc5f0\ucc9c\uad70":41800,"\uac00\ud3c9\uad70":41820,"\uc591\ud3c9\uad70":41830}},"\uac15\uc6d0\ud2b9\ubcc4\uc790\uce58\ub3c4":{sidoCode:51,sggCodes:{"\ucd98\ucc9c\uc2dc":51110,"\uc6d0\uc8fc\uc2dc":51130,"\uac15\ub989\uc2dc":51150,"\ub3d9\ud574\uc2dc":51170,"\ud0dc\ubc31\uc2dc":51190,"\uc18d\ucd08\uc2dc":51210,"\uc0bc\ucc99\uc2dc":51230,"\ud64d\ucc9c\uad70":51720,"\ud6a1\uc131\uad70":51730,"\uc601\uc6d4\uad70":51750,"\ud3c9\ucc3d\uad70":51760,"\uc815\uc120\uad70":51770,"\ucca0\uc6d0\uad70":51780,"\ud654\ucc9c\uad70":51790,"\uc591\uad6c\uad70":51800,"\uc778\uc81c\uad70":51810,"\uace0\uc131\uad70":51820,"\uc591\uc591\uad70":51830}},"\ucda9\uccad\ubd81\ub3c4":{sidoCode:43,sggCodes:{"\uccad\uc8fc\uc2dc \uc0c1\ub2f9\uad6c":43111,"\uccad\uc8fc\uc2dc \uc11c\uc6d0\uad6c":43112,"\uccad\uc8fc\uc2dc \ud765\ub355\uad6c":43113,"\uccad\uc8fc\uc2dc \uccad\uc6d0\uad6c":43114,"\ucda9\uc8fc\uc2dc":43130,"\uc81c\ucc9c\uc2dc":43150,"\ubcf4\uc740\uad70":43720,"\uc625\ucc9c\uad70":43730,"\uc601\ub3d9\uad70":43740,"\uc99d\ud3c9\uad70":43745,"\uc9c4\ucc9c\uad70":43750,"\uad34\uc0b0\uad70":43760,"\uc74c\uc131\uad70":43770,"\ub2e8\uc591\uad70":43800}},"\ucda9\uccad\ub0a8\ub3c4":{sidoCode:44,sggCodes:{"\ucc9c\uc548\uc2dc \ub3d9\ub0a8\uad6c":44131,"\ucc9c\uc548\uc2dc \uc11c\ubd81\uad6c":44133,"\uacf5\uc8fc\uc2dc":44150,"\ubcf4\ub839\uc2dc":44180,"\uc544\uc0b0\uc2dc":44200,"\uc11c\uc0b0\uc2dc":44210,"\ub17c\uc0b0\uc2dc":44230,"\uacc4\ub8e1\uc2dc":44250,"\ub2f9\uc9c4\uc2dc":44270,"\uae08\uc0b0\uad70":44710,"\ubd80\uc5ec\uad70":44760,"\uc11c\ucc9c\uad70":44770,"\uccad\uc591\uad70":44790,"\ud64d\uc131\uad70":44800,"\uc608\uc0b0\uad70":44810,"\ud0dc\uc548\uad70":44825}},"\uc804\ubd81\ud2b9\ubcc4\uc790\uce58\ub3c4":{sidoCode:52,sggCodes:{"\uc804\uc8fc\uc2dc \uc644\uc0b0\uad6c":52111,"\uc804\uc8fc\uc2dc \ub355\uc9c4\uad6c":52113,"\uad70\uc0b0\uc2dc":52130,"\uc775\uc0b0\uc2dc":52140,"\uc815\uc74d\uc2dc":52180,"\ub0a8\uc6d0\uc2dc":52190,"\uae40\uc81c\uc2dc":52210,"\uc644\uc8fc\uad70":52710,"\uc9c4\uc548\uad70":52720,"\ubb34\uc8fc\uad70":52730,"\uc7a5\uc218\uad70":52740,"\uc784\uc2e4\uad70":52750,"\uc21c\ucc3d\uad70":52770,"\uace0\ucc3d\uad70":52790,"\ubd80\uc548\uad70":52800}},"\uc804\ub77c\ub0a8\ub3c4":{sidoCode:46,sggCodes:{"\ubaa9\ud3ec\uc2dc":46110,"\uc5ec\uc218\uc2dc":46130,"\uc21c\ucc9c\uc2dc":46150,"\ub098\uc8fc\uc2dc":46170,"\uad11\uc591\uc2dc":46230,"\ub2f4\uc591\uad70":46710,"\uace1\uc131\uad70":46720,"\uad6c\ub840\uad70":46730,"\uace0\ud765\uad70":46770,"\ubcf4\uc131\uad70":46780,"\ud654\uc21c\uad70":46790,"\uc7a5\ud765\uad70":46800,"\uac15\uc9c4\uad70":46810,"\ud574\ub0a8\uad70":46820,"\uc601\uc554\uad70":46830,"\ubb34\uc548\uad70":46840,"\ud568\ud3c9\uad70":46860,"\uc601\uad11\uad70":46870,"\uc7a5\uc131\uad70":46880,"\uc644\ub3c4\uad70":46890,"\uc9c4\ub3c4\uad70":46900,"\uc2e0\uc548\uad70":46910}},"\uacbd\uc0c1\ubd81\ub3c4":{sidoCode:47,sggCodes:{"\ud3ec\ud56d\uc2dc":47110,"\ud3ec\ud56d\uc2dc \ub0a8\uad6c":47111,"\ud3ec\ud56d\uc2dc \ubd81\uad6c":47113,"\uacbd\uc8fc\uc2dc":47130,"\uae40\ucc9c\uc2dc":47150,"\uc548\ub3d9\uc2dc":47170,"\uad6c\ubbf8\uc2dc":47190,"\uc601\uc8fc\uc2dc":47210,"\uc601\ucc9c\uc2dc":47230,"\uc0c1\uc8fc\uc2dc":47250,"\ubb38\uacbd\uc2dc":47280,"\uacbd\uc0b0\uc2dc":47290,"\uc758\uc131\uad70":47730,"\uccad\uc1a1\uad70":47750,"\uc601\uc591\uad70":47760,"\uc601\ub355\uad70":47770,"\uccad\ub3c4\uad70":47820,"\uace0\ub839\uad70":47830,"\uc131\uc8fc\uad70":47840,"\uce60\uace1\uad70":47850,"\uc608\ucc9c\uad70":47900,"\ubd09\ud654\uad70":47920,"\uc6b8\uc9c4\uad70":47930,"\uc6b8\ub989\uad70":47940}},"\uacbd\uc0c1\ub0a8\ub3c4":{sidoCode:48,sggCodes:{"\ucc3d\uc6d0\uc2dc":48120,"\ucc3d\uc6d0\uc2dc \uc758\ucc3d\uad6c":48121,"\ucc3d\uc6d0\uc2dc \uc131\uc0b0\uad6c":48123,"\ucc3d\uc6d0\uc2dc \ub9c8\uc0b0\ud569\ud3ec\uad6c":48125,"\ucc3d\uc6d0\uc2dc \ub9c8\uc0b0\ud68c\uc6d0\uad6c":48127,"\ucc3d\uc6d0\uc2dc \uc9c4\ud574\uad6c":48129,"\uc9c4\uc8fc\uc2dc":48170,"\ud1b5\uc601\uc2dc":48220,"\uc0ac\ucc9c\uc2dc":48240,"\uae40\ud574\uc2dc":48250,"\ubc00\uc591\uc2dc":48270,"\uac70\uc81c\uc2dc":48310,"\uc591\uc0b0\uc2dc":48330,"\uc758\ub839\uad70":48720,"\ud568\uc548\uad70":48730,"\ucc3d\ub155\uad70":48740,"\uace0\uc131\uad70":48820,"\ub0a8\ud574\uad70":48840,"\ud558\ub3d9\uad70":48850,"\uc0b0\uccad\uad70":48860,"\ud568\uc591\uad70":48870,"\uac70\ucc3d\uad70":48880,"\ud569\ucc9c\uad70":48890}},"\uc81c\uc8fc\ud2b9\ubcc4\uc790\uce58\ub3c4":{sidoCode:50,sggCodes:{"\uc81c\uc8fc\uc2dc":50110,"\uc11c\uadc0\ud3ec\uc2dc":50130}}},Yl=async function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;try{const{data:r,error:a}=await Se.supabase.functions.invoke("sync-kindergartens",{body:{action:"fetch",sidoCode:e,sggCode:t,pageCnt:n,currentPage:s}});if(a)throw a;if(!r)throw new Error("Edge Function \uc751\ub2f5\uc774 \ube44\uc5b4 \uc788\uc2b5\ub2c8\ub2e4");if(r.error)throw new Error(r.error);return r}catch(r){if(r instanceof Error&&"AbortError"===r.name)throw r;throw console.error("\uc720\uce58\uc6d0 \ub370\uc774\ud130 \uc870\ud68c \uc624\ub958:",r),r}},Kl=(e,t)=>{const n=Hl[e];if(!n)throw new Error("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uc2dc\ub3c4\uc785\ub2c8\ub2e4: ".concat(e));const s=n.sggCodes[t];if(!s)throw new Error("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uc2dc\uad70\uad6c\uc785\ub2c8\ub2e4: ".concat(t));return{sidoCode:n.sidoCode,sggCode:s}},Jl=()=>{var e;const t=ne(),[n,s]=(0,r.useState)(null),[a,i]=(0,r.useState)(!0),[o,l]=(0,r.useState)(!1),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)({}),[m,f]=(0,r.useState)([]),[g,p]=(0,r.useState)(null),[x,v]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),[w,j]=(0,r.useState)(!1),[_,N]=(0,r.useState)(""),[k,C]=(0,r.useState)(""),[S,E]=(0,r.useState)(!1),[P,A]=(0,r.useState)(!1),[T,I]=(0,r.useState)(null),[M,L]=(0,r.useState)("posts"),[R,O]=(0,r.useState)([]),[D,z]=(0,r.useState)([]),[U,F]=(0,r.useState)(!1),[q,B]=(0,r.useState)([]),[V,W]=(0,r.useState)({}),[H,Y]=(0,r.useState)({}),[K,J]=(0,r.useState)({}),[G,X]=(0,r.useState)(null),[$,Z]=(0,r.useState)(null),[Q,ee]=(0,r.useState)(null);(0,r.useEffect)(()=>{re()},[]),(0,r.useEffect)(()=>(document.body.style.overflow=k||S||P?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[k,S,P]),(0,r.useEffect)(()=>{n&&se()},[n]),(0,r.useEffect)(()=>{(async()=>{try{const{data:{user:e}}=await Se.supabase.auth.getUser();if(!e)return;const t=await Ll(e.id);B(t);const n=t||[],s=await Promise.all(n.map(async e=>{try{let o="",l=0,c="";if("kindergarten"===e.target_type){o=te(e.sido_code,e.sgg_code);try{l=(await Ol(String(e.target_id))).average_rating||0}catch(t){}try{const{data:t}=await Se.supabase.from("kindergarten_custom_info").select("building_images").eq("kinder_code",e.target_id).maybeSingle();t&&t.building_images&&t.building_images.length>0&&(c=t.building_images[0])}catch(n){}return{id:e.id,region:o,rating:l,buildingImage:c}}if("childcare"===e.target_type){o=te(void 0,void 0,e.arcode);try{l=(await Fl(String(e.target_id))).average_rating||0}catch(s){}try{const{data:t}=await Se.supabase.from("childcare_custom_info").select("building_images").eq("facility_code",e.target_id).maybeSingle();t&&t.building_images&&t.building_images.length>0&&(c=t.building_images[0])}catch(r){}return{id:e.id,region:o,rating:l,buildingImage:c}}if("playground"===e.target_type){o=te(e.sido_code,e.sgg_code);try{l=(await Wl(String(e.target_id))).average_rating||0}catch(a){}try{const{data:t}=await Se.supabase.from("playground_custom_info").select("building_images").eq("playground_id",e.target_id).eq("is_active",!0).maybeSingle();t&&t.building_images&&t.building_images.length>0&&(c=t.building_images[0])}catch(i){}return{id:e.id,region:o,rating:l,buildingImage:c}}}catch(o){}return{id:e.id,region:"",rating:0,buildingImage:""}}));W(e=>{const t=(0,Ae.A)({},e);return s.forEach(e=>{e&&(t[e.id]=e.region)}),t}),Y(e=>{const t=(0,Ae.A)({},e);return s.forEach(e=>{e&&(t[e.id]=e.rating)}),t}),J(e=>{const t=(0,Ae.A)({},e);return s.forEach(e=>{e&&(t[e.id]=e.buildingImage)}),t})}catch(e){}})()},[]);const te=(e,t,n)=>{try{if(n){const e=parseInt(n),t=Math.floor(e/1e3);for(const[n,s]of Object.entries(Hl))if(s.sidoCode===t)for(const[t,r]of Object.entries(s.sggCodes))if(r===e){const e=n.replace("\ud2b9\ubcc4\uc2dc","\uc2dc").replace("\uad11\uc5ed\uc2dc","\uc2dc").replace("\ud2b9\ubcc4\uc790\uce58\uc2dc","\uc2dc").replace("\ud2b9\ubcc4\uc790\uce58\ub3c4","\ub3c4");return"".concat(e," ").concat(t)}}if(e&&t){const n=parseInt(e),s=parseInt(t);for(const[e,t]of Object.entries(Hl))if(t.sidoCode===n)for(const[n,r]of Object.entries(t.sggCodes))if(r===s){const t=e.replace("\ud2b9\ubcc4\uc2dc","\uc2dc").replace("\uad11\uc5ed\uc2dc","\uc2dc").replace("\ud2b9\ubcc4\uc790\uce58\uc2dc","\uc2dc").replace("\ud2b9\ubcc4\uc790\uce58\ub3c4","\ub3c4");return"".concat(t," ").concat(n)}}}catch(_){console.error("\uc9c0\uc5ed \ucf54\ub4dc \ubcc0\ud658 \uc624\ub958:",_)}return""},se=async()=>{if(n){F(!0);try{const{data:e,error:t}=await Se.supabase.from("community_posts").select("*").eq("author_name",n.nickname||n.full_name).order("created_at",{ascending:!1});if(t)console.error("\uac8c\uc2dc\uae00 \uc870\ud68c \uc624\ub958:",t),O([]);else{const t=(e||[]).map(e=>e.id);if(t.length>0)try{const{data:n,error:s}=await Se.supabase.from("post_likes").select("post_id").in("post_id",t),{data:r,error:a}=await Se.supabase.from("comments").select("post_id").in("post_id",t);s&&console.error("\uc88b\uc544\uc694 \uc218 \uc870\ud68c \uc624\ub958:",s),a&&console.error("\ub313\uae00 \uc218 \uc870\ud68c \uc624\ub958:",a);const i=new Map,o=new Map;n&&n.forEach(e=>{i.set(e.post_id,(i.get(e.post_id)||0)+1)}),r&&r.forEach(e=>{o.set(e.post_id,(o.get(e.post_id)||0)+1)});const l=(e||[]).map(e=>(0,Ae.A)((0,Ae.A)({},e),{},{likes_count:i.get(e.id)||0,comments_count:o.get(e.id)||0}));O(l)}catch(_){console.error("\uce74\uc6b4\ud2b8 \uc870\ud68c \uc624\ub958:",_),O(e||[])}else O([])}const{data:s,error:r}=await Se.supabase.from("comments").select("*").eq("user_name",n.nickname||n.full_name).order("created_at",{ascending:!1});r?(console.error("\ub313\uae00 \uc870\ud68c \uc624\ub958:",r),z([])):z(s||[])}catch(_){console.error("\uc0ac\uc6a9\uc790 \ucf58\ud150\uce20 \uc870\ud68c \uc624\ub958:",_),O([]),z([])}finally{F(!1)}}},re=async()=>{try{const d=localStorage.getItem("isLoggedIn"),u=localStorage.getItem("userProfile");if("true"===d&&u){const e=JSON.parse(u);return s(e),h(e),void i(!1)}const{data:{user:m}}=await Se.supabase.auth.getUser();if(!m)return void t("/login");const{data:f,error:g}=await Se.supabase.from("profiles").select("*").eq("auth_user_id",m.id).single();if(g&&"PGRST116"!==g.code)return console.error("\ud504\ub85c\ud544 \uc870\ud68c \uc624\ub958:",g),void N("\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");if(f)s(f),h(f);else{var e,n,r,a;let t=null===(e=m.app_metadata)||void 0===e?void 0:e.provider;var o;if(!t)t=null===(o=m.user_metadata)||void 0===o?void 0:o.provider;if(!t){var l;const e=null===(l=m.app_metadata)||void 0===l?void 0:l.identities;var c;if(e&&e.length>0)t=null===(c=e[0])||void 0===c?void 0:c.provider}let i="phone";"kakao"===t?i="kakao":"google"===t&&(i="google");const d={id:m.id,email:m.email||void 0,phone:m.phone||void 0,user_type:(null===(n=m.user_metadata)||void 0===n?void 0:n.user_type)||"parent",full_name:(null===(r=m.user_metadata)||void 0===r?void 0:r.full_name)||"",auth_method:i,nickname:(null===(a=m.user_metadata)||void 0===a?void 0:a.nickname)||void 0,profile_image_url:void 0,created_at:(new Date).toISOString(),updated_at:(new Date).toISOString()};s(d),h(d)}}catch(_){console.error("\ud504\ub85c\ud544 \uc870\ud68c \uc624\ub958:",_),N("\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}finally{i(!1)}},ae=()=>{E(!0)},ie=()=>{d(!1),f(he((null===n||void 0===n?void 0:n.children_info)||[])),N("")},oe=()=>{const e={name:"",gender:"",birth_date:"",relationship:"",profile_image_url:void 0,newProfileImage:null,newProfileImagePreview:void 0};f([...m,e])},le=e=>{const t=m.filter((t,n)=>n!==e);f(t)},ce=(e,t,n)=>{const s=[...m];s[e]=(0,Ae.A)((0,Ae.A)({},s[e]),{},{[t]:n}),f(s)},de=(e,t)=>{var n;const s=null===(n=t.target.files)||void 0===n?void 0:n[0];if(s){if(s.size>5242880)return void N("\ud504\ub85c\ud544 \uc0ac\uc9c4\uc740 5MB \uc774\ud558\ub85c \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");if(!s.type.startsWith("image/"))return void N("\uc774\ubbf8\uc9c0 \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4.");const t=[...m];t[e]=(0,Ae.A)((0,Ae.A)({},t[e]),{},{newProfileImage:s});const n=new FileReader;n.onload=t=>{var n;const r=[...m];r[e]=(0,Ae.A)((0,Ae.A)({},r[e]),{},{newProfileImage:s,newProfileImagePreview:null===(n=t.target)||void 0===n?void 0:n.result}),f(r)},n.readAsDataURL(s),N("")}},ue=e=>{const t=[...m];t[e]=(0,Ae.A)((0,Ae.A)({},t[e]),{},{newProfileImage:null,newProfileImagePreview:void 0,profile_image_url:void 0}),f(t)},he=e=>e.map(e=>{let t=e.gender;"male"!==t&&"boy"!==t&&"\ub0a8\uc544"!==t||(t="\ub0a8\uc790"),"female"!==t&&"girl"!==t&&"\uc5ec\uc544"!==t||(t="\uc5ec\uc790");const n={father:"\uc544\ube60",mother:"\uc5c4\ub9c8",grandfather:"\ud560\uc544\ubc84\uc9c0",grandmother:"\ud560\uba38\ub2c8",uncle:"\uc0bc\ucd0c",aunt:"\uc774\ubaa8/\uace0\ubaa8",other:"\uae30\ud0c0"}[e.relationship]||e.relationship;return(0,Ae.A)((0,Ae.A)({},e),{},{gender:t,relationship:n})}),me=e=>{ee(null),Z(e.targetTouches[0].clientX)},fe=e=>{ee(e.targetTouches[0].clientX)};return a?(0,Ee.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."})]})}):n?(0,Ee.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Ee.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,Ee.jsx)("div",{className:"px-4 py-4",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:()=>{c?d(!1):t("/main")},className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(Vo,{className:"w-5 h-5 text-gray-600"})}),(0,Ee.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"\ud504\ub85c\ud544"}),(0,Ee.jsx)("div",{className:"w-10"})]})})}),(0,Ee.jsxs)("div",{className:"max-w-2xl mx-auto p-4",children:[!c&&(0,Ee.jsx)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl p-6 mb-3",children:(0,Ee.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,Ee.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,Ee.jsxs)("div",{className:"w-24 h-24 rounded-3xl overflow-hidden bg-gradient-to-br from-orange-400 to-pink-500 shadow-lg",children:[n.profile_image_url&&!y?(0,Ee.jsx)("img",{src:n.profile_image_url,alt:"\ud504\ub85c\ud544 \uc0ac\uc9c4",className:"w-full h-full object-cover",onError:e=>{var t;console.error("\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \ub85c\ub529 \uc2e4\ud328:",n.profile_image_url),e.currentTarget.style.display="none",null===(t=e.currentTarget.nextElementSibling)||void 0===t||t.classList.remove("hidden")}}):null,(0,Ee.jsx)("div",{className:"w-full h-full flex items-center justify-center ".concat(n.profile_image_url&&!y?"hidden":""),children:(0,Ee.jsx)("span",{className:"text-white text-3xl",children:"\ud83d\udc64"})})]}),o&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsxs)("label",{className:"absolute bottom-0 right-0 w-8 h-8 bg-[#fb8678] rounded-full flex items-center justify-center cursor-pointer hover:bg-[#e67567] transition-colors",children:[(0,Ee.jsx)(Sl,{className:"w-4 h-4 text-white"}),(0,Ee.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;const n=null===(t=e.target.files)||void 0===t?void 0:t[0];if(n){if(n.size>5242880)return void N("\ud504\ub85c\ud544 \uc0ac\uc9c4\uc740 5MB \uc774\ud558\ub85c \uc5c5\ub85c\ub4dc\ud574\uc8fc\uc138\uc694.");if(!n.type.startsWith("image/"))return void N("\uc774\ubbf8\uc9c0 \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4.");p(n);const e=new FileReader;e.onload=e=>{var t;const n=null===(t=e.target)||void 0===t?void 0:t.result;s(e=>e?(0,Ae.A)((0,Ae.A)({},e),{},{profile_image_url:n}):null),v(n)},e.readAsDataURL(n),N("")}},className:"hidden"})]}),n.profile_image_url&&!y&&(0,Ee.jsx)("button",{onClick:()=>{p(null),v(""),b(!0),N("")},className:"absolute top-0 right-0 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center cursor-pointer hover:bg-red-600 transition-colors",title:"\ud504\ub85c\ud544 \uc0ac\uc9c4 \uc0ad\uc81c",children:(0,Ee.jsx)(xl,{className:"w-4 h-4 text-white"})})]})]}),(0,Ee.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ee.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2 min-h-[40px] flex items-center",children:n.full_name}),(0,Ee.jsx)("p",{className:"text-gray-600 mb-1 min-h-[20px] flex items-center",children:"parent"===n.user_type?"\ud559\ubd80\ubaa8":"\uad50\uc0ac"}),(0,Ee.jsxs)("p",{className:"text-sm text-gray-500 min-h-[20px] flex items-center",children:["kakao"===n.auth_method?"\uce74\uce74\uc624\ud1a1":"google"===n.auth_method?"\uad6c\uae00":"\ud734\ub300\ud3f0"," \uacc4\uc815"]})]}),(0,Ee.jsx)("div",{className:"flex space-x-2 flex-shrink-0",children:o?(0,Ee.jsxs)("div",{className:"flex flex-col space-y-2",children:[(0,Ee.jsx)("button",{onClick:()=>{A(!0)},disabled:w,className:"w-10 h-10 bg-[#fb8678] text-white rounded-full hover:bg-[#e67567] disabled:opacity-50 flex items-center justify-center transition-colors",title:"\uc800\uc7a5",children:(0,Ee.jsx)(El,{className:"w-5 h-5"})}),(0,Ee.jsx)("button",{onClick:()=>{l(!1),h(n||{}),p(null),v(""),b(!1),N(""),n&&s(e=>e?(0,Ae.A)((0,Ae.A)({},e),{},{profile_image_url:T||void 0}):null),I(null)},className:"w-10 h-10 bg-gray-500 text-white rounded-full hover:bg-gray-600 transition-colors flex items-center justify-center",title:"\ucde8\uc18c",children:(0,Ee.jsx)(gl,{className:"w-5 h-5"})})]}):"info"===M&&(0,Ee.jsx)("button",{onClick:()=>{I(null===n||void 0===n?void 0:n.profile_image_url),l(!0)},className:"w-10 h-10 bg-[#fb8678] text-white rounded-full hover:bg-[#e67567] flex items-center justify-center",title:"\ud3b8\uc9d1",children:(0,Ee.jsx)(pl,{className:"w-5 h-5"})})})]})}),!c&&!o&&(0,Ee.jsx)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl mb-3",children:(0,Ee.jsxs)("div",{className:"flex space-x-1 bg-gray-100 p-1 rounded-xl",children:[(0,Ee.jsx)("button",{onClick:()=>L("posts"),className:"flex-1 flex flex-col items-center justify-center space-y-1 py-2 px-4 rounded-lg font-medium transition-all duration-200 ".concat("posts"===M?"bg-white text-[#fb8678] shadow-sm":"text-gray-600 hover:text-gray-900"),children:(0,Ee.jsx)(Pl,{className:"w-5 h-5"})}),(0,Ee.jsx)("button",{onClick:()=>L("info"),className:"flex-1 flex flex-col items-center justify-center space-y-1 py-2 px-4 rounded-lg font-medium transition-all duration-200 ".concat("info"===M?"bg-white text-[#fb8678] shadow-sm":"text-gray-600 hover:text-gray-900"),children:(0,Ee.jsx)(Ho,{className:"w-5 h-5"})}),(0,Ee.jsx)("button",{onClick:()=>L("children"),className:"flex-1 flex flex-col items-center justify-center space-y-1 py-2 px-4 rounded-lg font-medium transition-all duration-200 ".concat("children"===M?"bg-white text-[#fb8678] shadow-sm":"text-gray-600 hover:text-gray-900"),children:(0,Ee.jsx)(ml,{className:"w-5 h-5"})})]})}),!c&&"posts"===M&&(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05},className:"bg-white rounded-2xl mb-3 shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsxs)("div",{className:"text-xs text-gray-500 font-semibold flex items-center justify-center space-x-1",children:[(0,Ee.jsx)(ml,{className:"w-3 h-3 text-[#fb8678] fill-current"}),(0,Ee.jsx)("span",{children:"\ub0b4 \ucc1c"})]})}),(0,Ee.jsx)("div",{className:"p-3",children:(0,Ee.jsx)("div",{className:"bg-white rounded-lg",children:0===q.length?(0,Ee.jsxs)("div",{className:"text-center py-6",children:[(0,Ee.jsx)("p",{className:"text-gray-600 text-sm",children:"\uc544\uc9c1 \ucc1c\ud55c \uc2dc\uc124\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"\uad00\uc2ec\uc788\ub294 \uc720\uce58\uc6d0/\uc5b4\ub9b0\uc774\uc9d1\uc744 \ucc1c\ud574 \ubcf4\uc138\uc694."})]}):(0,Ee.jsxs)("div",{className:"space-y-2",children:[q.slice(0,3).map(e=>(0,Ee.jsxs)("div",{className:"relative overflow-hidden rounded-2xl",children:[G===e.id&&(0,Ee.jsx)("div",{className:"absolute -right-4 top-0 bottom-0 w-28 bg-red-500 flex items-center justify-center rounded-r-2xl",children:(0,Ee.jsx)(xl,{className:"w-5 h-5 text-white"})}),(0,Ee.jsx)("div",{className:"w-full bg-white border border-gray-100 rounded-2xl p-3 transition-transform duration-200 relative z-10",style:{transform:G===e.id?"translateX(-80px)":"translateX(0)"},onTouchStart:me,onTouchMove:fe,onTouchEnd:()=>(e=>{if(!$||!Q)return;X($-Q>50?e:null)})(e.id),onClick:()=>{G===e.id&&X(null)},children:(0,Ee.jsxs)("div",{className:"flex items-center",children:[(0,Ee.jsx)("div",{className:"w-12 h-12 rounded-xl overflow-hidden bg-gradient-to-br from-pink-100 to-purple-100 flex items-center justify-center mr-3 flex-shrink-0",children:K[e.id]?(0,Ee.jsx)("img",{src:K[e.id],alt:e.target_name||"\uc2dc\uc124 \uc0ac\uc9c4",className:"w-full h-full object-cover"}):(0,Ee.jsx)(Al,{className:"w-6 h-6 text-gray-400"})}),(0,Ee.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ee.jsx)("div",{className:"text-xs font-semibold text-gray-900 truncate",children:e.target_name||e.target_id}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-1 mt-1 min-w-0",children:[(0,Ee.jsx)(ul,{className:"w-3 h-3 text-[#fb8678] flex-shrink-0"}),(0,Ee.jsx)("span",{className:"text-[10px] text-gray-500 truncate",children:V[e.id]||""})]}),(0,Ee.jsx)("div",{className:"text-[10px] text-gray-400 mt-1",children:"kindergarten"===e.target_type?"\uc720\uce58\uc6d0":"childcare"===e.target_type?"\uc5b4\ub9b0\uc774\uc9d1":"playground"===e.target_type?"\ub180\uc774\uc2dc\uc124":e.target_type})]}),("kindergarten"===e.target_type||"childcare"===e.target_type||"playground"===e.target_type)&&(0,Ee.jsxs)("div",{className:"ml-3 flex items-center px-2 py-0.5 bg-black/80 border border-white rounded-xl",children:[(0,Ee.jsx)(ml,{className:"w-3 h-3 text-[#fb8678] fill-current mr-1"}),(0,Ee.jsx)("span",{className:"text-white text-[11px] font-bold",children:(H[e.id]||0).toFixed(1)})]})]})}),G===e.id&&(0,Ee.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("".concat(e.target_name||"\uc774 \uc2dc\uc124","\uc744(\ub97c) \ucc1c \ubaa9\ub85d\uc5d0\uc11c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))try{const{data:{user:t}}=await Se.supabase.auth.getUser();if(!t)return;await Il(t.id,e.target_type,e.target_id),B(t=>t.filter(t=>t.id!==e.id)),X(null)}catch(_){console.error("\ucc1c \uc0ad\uc81c \uc624\ub958:",_),alert("\uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}})(e),className:"absolute -right-4 top-0 bottom-0 w-28 bg-red-500 rounded-r-2xl flex items-center justify-center active:bg-red-600",children:(0,Ee.jsx)(xl,{className:"w-5 h-5 text-white"})})]},e.id)),q.length>3&&(0,Ee.jsx)("button",{onClick:()=>t("/profile/favorites"),className:"w-full bg-white border border-gray-100 rounded-2xl p-3 hover:bg-gray-50 transition-colors","aria-label":"\ucc1c \ubaa9\ub85d \uc804\uccb4 \ubcf4\uae30",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Ee.jsx)("div",{className:"w-12 h-12 rounded-xl overflow-hidden bg-gradient-to-br from-pink-50 to-purple-50 flex items-center justify-center mr-3 flex-shrink-0",children:(0,Ee.jsx)("span",{className:"text-2xl text-gray-400 font-semibold",children:"+"})}),(0,Ee.jsxs)("div",{className:"flex-1 text-left",children:[(0,Ee.jsx)("div",{className:"text-xs font-semibold text-gray-700",children:"\ub354 \ubcf4\uae30"}),(0,Ee.jsxs)("div",{className:"text-[10px] text-gray-500 mt-1",children:["\ucd1d ",q.length,"\uac1c\uc758 \ucc1c\ud55c \uc2dc\uc124"]})]})]})})]})})})]}),!c&&"info"===M&&(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-white rounded-2xl mb-3 shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uae30\ubcf8 \uc815\ubcf4"})}),(0,Ee.jsx)("div",{className:"p-3",children:(0,Ee.jsx)("div",{className:"bg-white rounded-lg p-3",children:(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uc774\ub984"}),o?(0,Ee.jsx)("input",{type:"text",value:u.full_name||"",onChange:e=>h((0,Ae.A)((0,Ae.A)({},u),{},{full_name:e.target.value})),className:"w-32 px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-orange-500"}):(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:n.full_name})]}),"parent"===n.user_type&&(0,Ee.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\ub2c9\ub124\uc784"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:n.nickname||"-"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uc774\uba54\uc77c"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:n.email||"-"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uacc4\uc815 \uc720\ud615"}),(0,Ee.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat("parent"===n.user_type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"),children:"parent"===n.user_type?"\ud559\ubd80\ubaa8":"\uad50\uc0ac"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uac00\uc785 \ubc29\ubc95"}),(0,Ee.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-semibold ".concat("kakao"===n.auth_method?"bg-yellow-100 text-yellow-800":"google"===n.auth_method?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:"kakao"===n.auth_method?"\uce74\uce74\uc624\ud1a1":"google"===n.auth_method?"\uad6c\uae00":"\ud734\ub300\ud3f0 \ubc88\ud638"})]})]})})})]}),!c&&"posts"===M&&(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl mb-3 shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\ub0b4\uac00 \uc791\uc131\ud55c \uae00"})}),(0,Ee.jsx)("div",{className:"p-3",children:(0,Ee.jsx)("div",{className:"bg-white rounded-lg p-3",children:U?(0,Ee.jsxs)("div",{className:"text-center py-8",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fb8678] mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uae00\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."})]}):0===R.length?(0,Ee.jsxs)("div",{className:"text-center py-8",children:[(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uc544\uc9c1 \uc791\uc131\ud55c \uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{className:"text-gray-500 text-sm",children:"\ucee4\ubba4\ub2c8\ud2f0\uc5d0 \uae00\uc744 \uc791\uc131\ud574\ubcf4\uc138\uc694!"})]}):(0,Ee.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[R.slice(0,5).map(e=>(0,Ee.jsxs)("div",{className:"aspect-square bg-gray-100 rounded-2xl overflow-hidden relative group cursor-pointer",onClick:()=>t("/community/post/".concat(e.id,"?category=").concat(encodeURIComponent(e.category)),{state:{from:"/profile"}}),children:[e.images&&e.images.length>0?(0,Ee.jsx)("img",{src:e.images[0],alt:"\uac8c\uc2dc\uae00 \uc774\ubbf8\uc9c0",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):(0,Ee.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-pink-100 to-purple-100",children:(0,Ee.jsx)(Al,{className:"w-8 h-8 text-gray-400"})}),(0,Ee.jsx)("div",{className:"absolute bottom-2 left-2 right-2",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between bg-black/60 backdrop-blur-sm rounded-xl px-2 py-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Ee.jsx)(ml,{className:"w-3 h-3 text-red-400 fill-current"}),(0,Ee.jsx)("span",{className:"text-white text-xs font-medium",children:e.likes_count})]}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Ee.jsx)(fl,{className:"w-3 h-3 text-blue-400"}),(0,Ee.jsx)("span",{className:"text-white text-xs font-medium",children:e.comments_count})]})]})}),(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-200 flex items-end",children:(0,Ee.jsx)("div",{className:"w-full p-2 text-white opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:(0,Ee.jsx)("div",{className:"text-center",children:(0,Ee.jsx)("p",{className:"text-xs font-medium",children:"\ud074\ub9ad\ud558\uc5ec \ubcf4\uae30"})})})})]},e.id)),R.length>5&&(0,Ee.jsx)("button",{onClick:()=>t("/profile/posts"),className:"aspect-square bg-gray-100 rounded-2xl overflow-hidden relative group cursor-pointer flex items-center justify-center","aria-label":"\ub0b4\uac00 \uc791\uc131\ud55c \uae00 \uc804\uccb4 \ubcf4\uae30",children:(0,Ee.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-pink-50 to-purple-50",children:(0,Ee.jsx)("span",{className:"text-3xl text-gray-400 font-semibold",children:"+"})})})]})})})]}),"children"===M&&n.children_info&&n.children_info.length>0&&(0,Ee.jsx)("div",{className:"space-y-2",children:c?(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsxs)("div",{className:"flex justify-end space-x-2 mb-2",children:[(0,Ee.jsx)("button",{onClick:ae,disabled:w,className:"px-4 py-2 bg-[#fb8678] text-white text-sm rounded-lg hover:bg-[#e67567] disabled:opacity-50 transition-colors",children:w?"\uc800\uc7a5 \uc911...":"\uc800\uc7a5"}),(0,Ee.jsx)("button",{onClick:ie,className:"px-4 py-2 bg-gray-500 text-white text-sm rounded-lg hover:bg-gray-600 transition-colors",children:"\ucde8\uc18c"})]}),m.map((e,t)=>(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"bg-gray-50 px-3 py-2 relative flex items-center justify-center",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:0===t?"\uccab \ubc88\uc9f8 \uc790\ub140 \uc815\ubcf4":"".concat(t+1,"\ubc88\uc9f8 \uc790\ub140 \uc815\ubcf4")}),(0,Ee.jsx)("button",{onClick:()=>le(t),className:"absolute right-3 text-red-500 hover:text-red-700 text-xs font-medium",children:"\uc81c\uac70"})]}),(0,Ee.jsx)("div",{className:"p-3",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,Ee.jsxs)("div",{className:"flex justify-center mb-3",children:[(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("div",{className:"w-20 h-20 rounded-full bg-gray-200 border-2 border-gray-300 flex items-center justify-center cursor-pointer hover:border-orange-400 transition-colors overflow-hidden",onClick:()=>{var e;return null===(e=document.getElementById("edit-child-profile-image-".concat(t)))||void 0===e?void 0:e.click()},children:e.newProfileImagePreview?(0,Ee.jsx)("img",{src:e.newProfileImagePreview,alt:"".concat(e.name," \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):e.profile_image_url?(0,Ee.jsx)("img",{src:e.profile_image_url,alt:"".concat(e.name," \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):(0,Ee.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(e.newProfileImagePreview||e.profile_image_url)&&(0,Ee.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),ue(t)},className:"absolute -top-1 -right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:(0,Ee.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Ee.jsx)("input",{id:"edit-child-profile-image-".concat(t),type:"file",accept:"image/*",onChange:e=>de(t,e),className:"hidden"})]}),(0,Ee.jsxs)("div",{className:"space-y-3 text-xs",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-gray-500 font-semibold mb-1",children:"\uc774\ub984"}),(0,Ee.jsx)("input",{type:"text",placeholder:"\uc790\ub140 \uc774\ub984 *",value:e.name,onChange:e=>ce(t,"name",e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-xs"})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-gray-500 font-semibold mb-1",children:"\uc131\ubcc4"}),(0,Ee.jsxs)("select",{value:e.gender,onChange:e=>ce(t,"gender",e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-xs appearance-none",children:[(0,Ee.jsx)("option",{value:"",children:"\uc131\ubcc4 \uc120\ud0dd *"}),(0,Ee.jsx)("option",{value:"\ub0a8\uc790",children:"\ub0a8\uc544"}),(0,Ee.jsx)("option",{value:"\uc5ec\uc790",children:"\uc5ec\uc544"})]})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-gray-500 font-semibold mb-1",children:"\uc0dd\ub144\uc6d4\uc77c"}),(0,Ee.jsx)("input",{type:"date",value:e.birth_date,onChange:e=>ce(t,"birth_date",e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-xs"})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-gray-500 font-semibold mb-1",children:"\ubcf4\ud638\uc790 \uad00\uacc4"}),(0,Ee.jsxs)("select",{value:e.relationship,onChange:e=>ce(t,"relationship",e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-xs appearance-none",children:[(0,Ee.jsx)("option",{value:"",children:"\uc120\ud0dd\ud574\uc8fc\uc138\uc694"}),(0,Ee.jsx)("option",{value:"\uc544\ube60",children:"\uc544\ube60"}),(0,Ee.jsx)("option",{value:"\uc5c4\ub9c8",children:"\uc5c4\ub9c8"}),(0,Ee.jsx)("option",{value:"\ud560\uc544\ubc84\uc9c0",children:"\ud560\uc544\ubc84\uc9c0"}),(0,Ee.jsx)("option",{value:"\ud560\uba38\ub2c8",children:"\ud560\uba38\ub2c8"}),(0,Ee.jsx)("option",{value:"\uc0bc\ucd0c",children:"\uc0bc\ucd0c"}),(0,Ee.jsx)("option",{value:"\uc774\ubaa8/\uace0\ubaa8",children:"\uc774\ubaa8/\uace0\ubaa8"})]})]})]})]})})]},t)),(0,Ee.jsx)("button",{onClick:oe,className:"w-full text-sm text-[#fb8678] hover:text-[#e67567] font-medium py-2 border border-[#fb8678] rounded-lg hover:bg-[#fb8678] hover:text-white transition-colors",children:"+ \uc790\ub140 \ucd94\uac00\ud558\uae30"})]}):null===(e=n.children_info)||void 0===e?void 0:e.map((e,t)=>{return(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2+.05*t},className:"bg-white rounded-2xl mb-3 shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"bg-gray-50 px-2 py-1 relative flex items-center justify-center",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:0===t?"\uccab \ubc88\uc9f8 \uc790\ub140 \uc815\ubcf4":"".concat(t+1,"\ubc88\uc9f8 \uc790\ub140 \uc815\ubcf4")}),0===t&&(0,Ee.jsx)("button",{onClick:()=>{d(!0),f(he(n.children_info||[]))},className:"absolute right-2 px-2 py-0.5 bg-[#fb8678] text-white text-xs rounded hover:bg-[#e67567] transition-colors",children:"\uc218\uc815"})]}),(0,Ee.jsx)("div",{className:"p-3",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,Ee.jsx)("div",{className:"flex justify-center mb-3",children:(0,Ee.jsx)("div",{className:"w-16 h-16 rounded-full overflow-hidden border-2 border-gray-200 bg-gray-100 flex items-center justify-center",children:e.profile_image_url?(0,Ee.jsx)("img",{src:e.profile_image_url,alt:"".concat(e.name," \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):(0,Ee.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uc774\ub984"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:e.name})]}),(0,Ee.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uc131\ubcc4"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:(r=e.gender,{male:"\ub0a8\uc544",female:"\uc5ec\uc544",boy:"\ub0a8\uc544",girl:"\uc5ec\uc544","\ub0a8\uc790":"\ub0a8\uc544","\uc5ec\uc790":"\uc5ec\uc544","\ub0a8\uc544":"\ub0a8\uc544","\uc5ec\uc544":"\uc5ec\uc544"}[r]||r)})]}),(0,Ee.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uc0dd\ub144\uc6d4\uc77c"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:e.birth_date})]}),(0,Ee.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\ubcf4\ud638\uc790 \uad00\uacc4"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:(s=e.relationship,{father:"\uc544\ube60",mother:"\uc5c4\ub9c8",grandfather:"\ud560\uc544\ubc84\uc9c0",grandmother:"\ud560\uba38\ub2c8",uncle:"\uc0bc\ucd0c",aunt:"\uc774\ubaa8/\uace0\ubaa8",other:"\uae30\ud0c0","\uc544\ube60":"\uc544\ube60","\uc5c4\ub9c8":"\uc5c4\ub9c8","\ud560\uc544\ubc84\uc9c0":"\ud560\uc544\ubc84\uc9c0","\ud560\uba38\ub2c8":"\ud560\uba38\ub2c8","\uc0bc\ucd0c":"\uc0bc\ucd0c","\uc774\ubaa8/\uace0\ubaa8":"\uc774\ubaa8/\uace0\ubaa8","\uc544\ub4e4":"\uc544\ub4e4","\ub538":"\ub538"}[s]||s)})]})]})]})})]},t);var s,r})}),"parent"===n.user_type&&(!n.children_info||0===n.children_info.length)&&!o&&"children"===M&&(0,Ee.jsx)("div",{className:"space-y-2",children:c?(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsxs)("div",{className:"flex justify-end space-x-2 mb-2",children:[(0,Ee.jsx)("button",{onClick:ae,disabled:w,className:"px-4 py-2 bg-[#fb8678] text-white text-sm rounded-lg hover:bg-[#e67567] disabled:opacity-50 transition-colors",children:w?"\uc800\uc7a5 \uc911...":"\uc800\uc7a5"}),(0,Ee.jsx)("button",{onClick:ie,className:"px-4 py-2 bg-gray-500 text-white text-sm rounded-lg hover:bg-gray-600 transition-colors",children:"\ucde8\uc18c"})]}),m.map((e,t)=>(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden mb-2",children:[(0,Ee.jsxs)("div",{className:"bg-gray-50 px-3 py-2 relative flex items-center justify-center",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:0===t?"\uccab \ubc88\uc9f8 \uc790\ub140 \uc815\ubcf4":"".concat(t+1,"\ubc88\uc9f8 \uc790\ub140 \uc815\ubcf4")}),(0,Ee.jsx)("button",{onClick:()=>le(t),className:"absolute right-3 text-red-500 hover:text-red-700 text-xs font-medium",children:"\uc81c\uac70"})]}),(0,Ee.jsx)("div",{className:"p-3",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg",children:[(0,Ee.jsxs)("div",{className:"flex justify-center mb-3",children:[(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("div",{className:"w-20 h-20 rounded-full bg-gray-200 border-2 border-gray-300 flex items-center justify-center cursor-pointer hover:border-orange-400 transition-colors overflow-hidden",onClick:()=>{var e;return null===(e=document.getElementById("edit-child-profile-image-empty-".concat(t)))||void 0===e?void 0:e.click()},children:e.newProfileImagePreview?(0,Ee.jsx)("img",{src:e.newProfileImagePreview,alt:"".concat(e.name," \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):e.profile_image_url?(0,Ee.jsx)("img",{src:e.profile_image_url,alt:"".concat(e.name," \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):(0,Ee.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),(e.newProfileImagePreview||e.profile_image_url)&&(0,Ee.jsx)("button",{type:"button",onClick:e=>{e.stopPropagation(),ue(t)},className:"absolute -top-1 -right-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:(0,Ee.jsx)("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,Ee.jsx)("input",{id:"edit-child-profile-image-empty-".concat(t),type:"file",accept:"image/*",onChange:e=>de(t,e),className:"hidden"})]}),(0,Ee.jsxs)("div",{className:"space-y-3 text-xs",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-gray-500 font-semibold mb-1",children:"\uc774\ub984"}),(0,Ee.jsx)("input",{type:"text",placeholder:"\uc790\ub140 \uc774\ub984 *",value:e.name,onChange:e=>ce(t,"name",e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-xs"})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-gray-500 font-semibold mb-1",children:"\uc131\ubcc4"}),(0,Ee.jsxs)("select",{value:e.gender,onChange:e=>ce(t,"gender",e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-xs appearance-none",children:[(0,Ee.jsx)("option",{value:"",children:"\uc131\ubcc4 \uc120\ud0dd *"}),(0,Ee.jsx)("option",{value:"\ub0a8\uc790",children:"\ub0a8\uc544"}),(0,Ee.jsx)("option",{value:"\uc5ec\uc790",children:"\uc5ec\uc544"})]})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-gray-500 font-semibold mb-1",children:"\uc0dd\ub144\uc6d4\uc77c"}),(0,Ee.jsx)("input",{type:"date",value:e.birth_date,onChange:e=>ce(t,"birth_date",e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-xs"})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("label",{className:"block text-gray-500 font-semibold mb-1",children:"\ubcf4\ud638\uc790 \uad00\uacc4"}),(0,Ee.jsxs)("select",{value:e.relationship,onChange:e=>ce(t,"relationship",e.target.value),className:"w-full px-3 py-1.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-orange-500 focus:border-transparent text-xs appearance-none",children:[(0,Ee.jsx)("option",{value:"",children:"\uc120\ud0dd\ud574\uc8fc\uc138\uc694"}),(0,Ee.jsx)("option",{value:"\uc544\ube60",children:"\uc544\ube60"}),(0,Ee.jsx)("option",{value:"\uc5c4\ub9c8",children:"\uc5c4\ub9c8"}),(0,Ee.jsx)("option",{value:"\ud560\uc544\ubc84\uc9c0",children:"\ud560\uc544\ubc84\uc9c0"}),(0,Ee.jsx)("option",{value:"\ud560\uba38\ub2c8",children:"\ud560\uba38\ub2c8"}),(0,Ee.jsx)("option",{value:"\uc0bc\ucd0c",children:"\uc0bc\ucd0c"}),(0,Ee.jsx)("option",{value:"\uc774\ubaa8/\uace0\ubaa8",children:"\uc774\ubaa8/\uace0\ubaa8"})]})]})]})]})})]},t)),(0,Ee.jsx)("button",{onClick:oe,className:"w-full text-sm text-[#fb8678] hover:text-[#e67567] font-medium py-2 border border-[#fb8678] rounded-lg hover:bg-[#fb8678] hover:text-white transition-colors",children:"+ \uc790\ub140 \ucd94\uac00\ud558\uae30"})]}):(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl mb-3 shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"bg-gray-50 px-2 py-1 relative flex items-center justify-center",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uc790\ub140 \uc815\ubcf4"}),(0,Ee.jsx)("button",{onClick:()=>{d(!0),f([])},className:"absolute right-2 px-2 py-0.5 bg-[#fb8678] text-white text-xs rounded hover:bg-[#e67567] transition-colors",children:"\ucd94\uac00"})]}),(0,Ee.jsx)("div",{className:"p-3",children:(0,Ee.jsx)("div",{className:"bg-white rounded-lg",children:(0,Ee.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,Ee.jsx)("p",{children:"\ub4f1\ub85d\ub41c \uc790\ub140 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{className:"text-sm mt-1",children:"\uc790\ub140 \uc815\ubcf4\ub97c \ucd94\uac00\ud574\uc8fc\uc138\uc694."})]})})})]})}),"teacher"===n.user_type&&!o&&!c&&"info"===M&&(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white rounded-2xl mb-3 shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uad50\uc0ac \uc815\ubcf4"})}),(0,Ee.jsx)("div",{className:"p-3",children:(0,Ee.jsx)("div",{className:"bg-white rounded-lg p-3",children:(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uc18c\uc18d \uae30\uad00\uba85"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:n.school_name||"-"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\ub2f4\ub2f9 \ubc18/\ud559\uae09"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:n.subject||"-"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uacbd\ub825 \uc5f0\ucc28"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-medium",children:[n.experience_years||0,"\ub144"]})]})]})})})]}),!o&&!c&&"info"===M&&(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl mb-3 shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uacc4\uc815 \uc815\ubcf4"})}),(0,Ee.jsx)("div",{className:"p-3",children:(0,Ee.jsx)("div",{className:"bg-white rounded-lg p-3",children:(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uac00\uc785\uc77c"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:new Date(n.created_at).toLocaleDateString("ko-KR")})]}),(0,Ee.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\ucd5c\uadfc \uc218\uc815\uc77c"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:new Date(n.updated_at).toLocaleDateString("ko-KR")})]})]})})})]}),!o&&!c&&"info"===M&&(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"bg-white rounded-2xl mb-3 shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-xs text-gray-600 font-semibold",children:"\ubc95\ub960 \ubc0f \uc57d\uad00"})}),(0,Ee.jsx)("div",{className:"p-3",children:(0,Ee.jsxs)("div",{className:"space-y-3",children:[(0,Ee.jsx)("div",{className:"w-full p-3 text-left border-b border-gray-100 last:border-b-0",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-xs font-medium text-gray-900",children:"\uac1c\uc778\uc815\ubcf4 \ucc98\ub9ac\ubc29\uce68"}),(0,Ee.jsx)("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"\uac1c\uc778\uc815\ubcf4 \uc218\uc9d1 \ubc0f \uc774\uc6a9\uc5d0 \ub300\ud55c \uc548\ub0b4"})]}),(0,Ee.jsx)("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),(0,Ee.jsx)("div",{className:"w-full p-3 text-left border-b border-gray-100 last:border-b-0",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-xs font-medium text-gray-900",children:"\ub9c8\ucf00\ud305 \ud65c\uc6a9 \ub3d9\uc758\uc11c"}),(0,Ee.jsx)("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"\ub9c8\ucf00\ud305 \uc815\ubcf4 \uc218\uc2e0 \ub3d9\uc758 \ubc0f \ucca0\ud68c"})]}),(0,Ee.jsx)("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),(0,Ee.jsx)("div",{className:"w-full p-3 text-left border-b border-gray-100 last:border-b-0",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-xs font-medium text-gray-900",children:"\uc11c\ube44\uc2a4 \uc774\uc6a9\uc57d\uad00"}),(0,Ee.jsx)("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"\uc11c\ube44\uc2a4 \uc774\uc6a9\uc5d0 \ub300\ud55c \uc57d\uad00 \ubc0f \uc815\ucc45"})]}),(0,Ee.jsx)("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),(0,Ee.jsx)("div",{className:"w-full p-3 text-left",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-xs font-medium text-gray-900",children:"\uc704\uce58\uc815\ubcf4 \ucc98\ub9ac\ubc29\uce68"}),(0,Ee.jsx)("p",{className:"text-[10px] text-gray-500 mt-0.5",children:"\uc704\uce58\uc815\ubcf4 \uc218\uc9d1 \ubc0f \uc774\uc6a9\uc5d0 \ub300\ud55c \uc548\ub0b4"})]}),(0,Ee.jsx)("svg",{className:"w-3 h-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})})]}),!o&&!c&&"info"===M&&(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},className:"bg-white rounded-2xl mb-3 shadow-sm border border-red-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-red-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-xs text-red-600 font-semibold",children:"\uacc4\uc815 \uad00\ub9ac"})}),(0,Ee.jsx)("div",{className:"p-3",children:(0,Ee.jsx)("div",{className:"bg-white rounded-lg p-3",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("p",{className:"text-xs text-red-700 mb-4",children:"\ub85c\uadf8\uc544\uc6c3\ud558\uba74 \ud604\uc7ac \uc138\uc158\uc774 \uc885\ub8cc\ub418\uace0 \ub85c\uadf8\uc778 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."}),(0,Ee.jsx)("button",{onClick:async()=>{try{localStorage.removeItem("selectedCommunityCategory");const e=localStorage.getItem("isLoggedIn"),n=localStorage.getItem("userProfile");if("true"===e&&n)return localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userProfile"),console.log("\uc804\ud654\ubc88\ud638 \uac00\uc785 \uc0ac\uc6a9\uc790 \ub85c\uadf8\uc544\uc6c3 \uc131\uacf5"),void t("/login");const{error:s}=await Se.supabase.auth.signOut();s?(console.error("\ub85c\uadf8\uc544\uc6c3 \uc624\ub958:",s),N("\ub85c\uadf8\uc544\uc6c3\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")):(console.log("OAuth \uc0ac\uc6a9\uc790 \ub85c\uadf8\uc544\uc6c3 \uc131\uacf5"),t("/login"))}catch(_){console.error("\ub85c\uadf8\uc544\uc6c3 \uc624\ub958:",_),N("\ub85c\uadf8\uc544\uc6c3\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},className:"w-full px-4 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors font-medium text-xs",children:"\ub85c\uadf8\uc544\uc6c3"})]})})})]}),_&&(0,Ee.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-3",children:(0,Ee.jsx)("p",{className:"text-red-600 text-sm",children:_})}),k&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsx)("div",{className:"bg-white rounded-2xl max-w-sm w-full mx-4 animate-[modalSlideUp_0.3s_cubic-bezier(0.22,0.61,0.36,1)]",children:(0,Ee.jsxs)("div",{className:"p-6 text-center",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ee.jsx)("svg",{className:"w-8 h-8 text-pink-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,Ee.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"\uc800\uc7a5 \uc644\ub8cc"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:k}),(0,Ee.jsx)("button",{onClick:()=>C(""),className:"w-full px-4 py-3 bg-[#fb8678] text-white rounded-xl font-medium hover:bg-[#e67567] transition-colors",children:"\ud655\uc778"})]})})}),P&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsx)("div",{className:"bg-white rounded-2xl max-w-sm w-full mx-4 animate-[modalSlideUp_0.3s_cubic-bezier(0.22,0.61,0.36,1)]",children:(0,Ee.jsxs)("div",{className:"p-6 text-center",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ee.jsx)(ml,{className:"w-8 h-8 text-pink-600 fill-current"})}),(0,Ee.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"\uc800\uc7a5 \ud655\uc778"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"\ud504\ub85c\ud544 \ub0b4\uc6a9\uc774 \uc800\uc7a5\ub429\ub2c8\ub2e4?"}),(0,Ee.jsxs)("div",{className:"flex gap-3",children:[(0,Ee.jsx)("button",{onClick:()=>A(!1),className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(n){j(!0),N(""),A(!1);try{const{data:{user:e}}=await Se.supabase.auth.getUser();if(!e)throw new Error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");let t=n.profile_image_url;if(g)try{t=await(0,Se.O)(g,e.id)}catch(_){return console.error("\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc2e4\ud328:",_),void N("\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}else y&&(t=null);const{error:s}=await Se.supabase.auth.updateUser({data:{user_type:u.user_type,full_name:u.full_name,nickname:u.nickname}});if(s)throw s;const r=(0,Ae.A)((0,Ae.A)({},u),{},{profile_image_url:t,updated_at:(new Date).toISOString()}),{error:a}=await Se.supabase.from("profiles").upsert([r]);if(a)throw a;await re(),l(!1),p(null),v(""),b(!1)}catch(_){console.error("\ud504\ub85c\ud544 \uc800\uc7a5 \uc624\ub958:",_),N("\ud504\ub85c\ud544 \uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{j(!1)}}},className:"flex-1 px-4 py-3 bg-[#fb8678] text-white rounded-xl font-medium hover:bg-[#e67567] transition-colors",children:"\ud655\uc778"})]})]})})}),S&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsx)("div",{className:"bg-white rounded-2xl max-w-sm w-full mx-4 animate-[modalSlideUp_0.3s_cubic-bezier(0.22,0.61,0.36,1)]",children:(0,Ee.jsxs)("div",{className:"p-6 text-center",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ee.jsx)(ml,{className:"w-8 h-8 text-pink-600 fill-current"})}),(0,Ee.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"\uc800\uc7a5 \ud655\uc778"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"\uc790\ub140\uc815\ubcf4 \uc218\uc815\ud55c \ub0b4\uc6a9\uc774 \uc800\uc7a5\ub429\ub2c8\ub2e4?"}),(0,Ee.jsxs)("div",{className:"flex gap-3",children:[(0,Ee.jsx)("button",{onClick:()=>E(!1),className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(n){j(!0),N(""),E(!1);try{const{data:{user:e}}=await Se.supabase.auth.getUser();if(!e)throw new Error("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const t=await Promise.all(m.map(async(t,n)=>{if(t.newProfileImage)try{const s=Date.now(),r="".concat(e.id,"/children/").concat(n,"_").concat(s),{data:a,error:i}=await Se.supabase.storage.from("profile-images").upload(r,t.newProfileImage,{cacheControl:"3600",upsert:!1});if(i)throw i;const{data:{publicUrl:o}}=Se.supabase.storage.from("profile-images").getPublicUrl(r);return(0,Ae.A)((0,Ae.A)({},t),{},{profile_image_url:o,newProfileImage:void 0,newProfileImagePreview:void 0})}catch(_){return console.error("\uc790\ub140 ".concat(n+1," \ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc2e4\ud328:"),_),t}return t})),s=(0,Ae.A)((0,Ae.A)({},n),{},{children_info:t.map(e=>({name:e.name,gender:e.gender,birth_date:e.birth_date,relationship:e.relationship,profile_image_url:e.profile_image_url||null})),updated_at:(new Date).toISOString()}),{error:r}=await Se.supabase.from("profiles").upsert([s]);if(r)throw r;await re(),d(!1),C("\uc790\ub140 \uc815\ubcf4\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),setTimeout(()=>{C("")},3e3)}catch(_){console.error("\uc790\ub140 \uc815\ubcf4 \uc800\uc7a5 \uc624\ub958:",_),N("\uc790\ub140 \uc815\ubcf4 \uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{j(!1)}}},className:"flex-1 px-4 py-3 bg-[#fb8678] text-white rounded-xl font-medium hover:bg-[#e67567] transition-colors",children:"\ud655\uc778"})]})]})})})]})]}):(0,Ee.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("p",{className:"text-gray-600 mb-4",children:"\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("button",{onClick:()=>t("/signup"),className:"px-4 py-2 bg-[#fb8678] text-white rounded-lg hover:bg-[#e67567]",children:"\ud504\ub85c\ud544 \uc124\uc815\ud558\uae30"})]})})},Gl=()=>{const e=ne(),[t,n]=(0,r.useState)(!0),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)("");return(0,r.useEffect)(()=>{(async()=>{try{const t=localStorage.getItem("isLoggedIn"),s=localStorage.getItem("userProfile");let r=null;if("true"===t&&s){const e=JSON.parse(s);r=e.nickname||e.full_name||null}else{const{data:{user:t}}=await Se.supabase.auth.getUser();if(!t)return void e("/login");const{data:n}=await Se.supabase.from("profiles").select("full_name, nickname").eq("auth_user_id",t.id).single();r=(null===n||void 0===n?void 0:n.nickname)||(null===n||void 0===n?void 0:n.full_name)||null}if(!r)return o("\uc791\uc131\uc790 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),void n(!1);const{data:i,error:l}=await Se.supabase.from("community_posts").select("*").eq("author_name",r).order("created_at",{ascending:!1});if(l)o("\uac8c\uc2dc\uae00\uc744 \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4."),a([]);else{const e=(i||[]).map(e=>e.id);if(e.length>0){const{data:t}=await Se.supabase.from("post_likes").select("post_id").in("post_id",e),{data:n}=await Se.supabase.from("comments").select("post_id").in("post_id",e),s=new Map,r=new Map;null===t||void 0===t||t.forEach(e=>s.set(e.post_id,(s.get(e.post_id)||0)+1)),null===n||void 0===n||n.forEach(e=>r.set(e.post_id,(r.get(e.post_id)||0)+1));const o=(i||[]).map(e=>(0,Ae.A)((0,Ae.A)({},e),{},{likes_count:s.get(e.id)||0,comments_count:r.get(e.id)||0}));a(o)}else a([])}}catch(yd){o("\ub370\uc774\ud130 \ub85c\ub529 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),a([])}finally{n(!1)}})()},[e]),(0,Ee.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Ee.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,Ee.jsx)("div",{className:"px-4 py-4",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:()=>e("/profile"),className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(Vo,{className:"w-5 h-5 text-gray-600"})}),(0,Ee.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"\ub0b4\uac00 \uc791\uc131\ud55c \uae00"}),(0,Ee.jsx)("div",{className:"w-10"})]})})}),(0,Ee.jsx)("div",{className:"max-w-2xl mx-auto p-4",children:(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl mb-3 shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uc804\uccb4 \uae00"})}),(0,Ee.jsx)("div",{className:"p-3",children:t?(0,Ee.jsxs)("div",{className:"text-center py-8",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fb8678] mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uae00\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."})]}):i?(0,Ee.jsx)("div",{className:"text-center py-8 text-sm text-red-600",children:i}):0===s.length?(0,Ee.jsx)("div",{className:"text-center py-8 text-gray-600",children:"\uc791\uc131\ud55c \uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}):(0,Ee.jsx)("div",{className:"grid grid-cols-3 gap-2",children:s.map(t=>(0,Ee.jsxs)("div",{className:"aspect-square bg-gray-100 rounded-2xl overflow-hidden relative group cursor-pointer",onClick:()=>e("/community/post/".concat(t.id,"?category=").concat(encodeURIComponent(t.category)),{state:{from:"/profile/posts"}}),children:[t.images&&t.images.length>0?(0,Ee.jsx)("img",{src:t.images[0],alt:"\uac8c\uc2dc\uae00 \uc774\ubbf8\uc9c0",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):(0,Ee.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-pink-100 to-purple-100",children:(0,Ee.jsx)(Al,{className:"w-8 h-8 text-gray-400"})}),(0,Ee.jsx)("div",{className:"absolute bottom-2 left-2 right-2",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between bg-black/60 backdrop-blur-sm rounded-xl px-2 py-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Ee.jsx)(ml,{className:"w-3 h-3 text-red-400 fill-current"}),(0,Ee.jsx)("span",{className:"text-white text-xs font-medium",children:t.likes_count})]}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Ee.jsx)(fl,{className:"w-3 h-3 text-blue-400"}),(0,Ee.jsx)("span",{className:"text-white text-xs font-medium",children:t.comments_count})]})]})})]},t.id))})})]})})]})},Xl=()=>{const e=ne(),[t,n]=(0,r.useState)(!0),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)({}),[l,c]=(0,r.useState)({}),[d,u]=(0,r.useState)({}),[h,m]=(0,r.useState)(""),[f,g]=(0,r.useState)(null),[p,x]=(0,r.useState)(null),[v,y]=(0,r.useState)(null),b=e=>{y(null),x(e.targetTouches[0].clientX)},w=e=>{y(e.targetTouches[0].clientX)},j=(e,t,n)=>{try{if(n){const e=parseInt(n),t=Math.floor(e/1e3);for(const[n,s]of Object.entries(Hl))if(s.sidoCode===t)for(const[t,r]of Object.entries(s.sggCodes))if(r===e){const e=n.replace("\ud2b9\ubcc4\uc2dc","\uc2dc").replace("\uad11\uc5ed\uc2dc","\uc2dc").replace("\ud2b9\ubcc4\uc790\uce58\uc2dc","\uc2dc").replace("\ud2b9\ubcc4\uc790\uce58\ub3c4","\ub3c4");return"".concat(e," ").concat(t)}}if(e&&t){const n=parseInt(e),s=parseInt(t);for(const[e,t]of Object.entries(Hl))if(t.sidoCode===n)for(const[n,r]of Object.entries(t.sggCodes))if(r===s){const t=e.replace("\ud2b9\ubcc4\uc2dc","\uc2dc").replace("\uad11\uc5ed\uc2dc","\uc2dc").replace("\ud2b9\ubcc4\uc790\uce58\uc2dc","\uc2dc").replace("\ud2b9\ubcc4\uc790\uce58\ub3c4","\ub3c4");return"".concat(t," ").concat(n)}}}catch(h){console.error("\uc9c0\uc5ed \ucf54\ub4dc \ubcc0\ud658 \uc624\ub958:",h)}return""};return(0,r.useEffect)(()=>{(async()=>{try{const{data:{user:t}}=await Se.supabase.auth.getUser();if(!t)return void e("/login");const n=await Ll(t.id);a(n);const s=await Promise.all((n||[]).map(async e=>{try{let a="",i=0,o="";if("kindergarten"===e.target_type){a=j(e.sido_code,e.sgg_code);try{i=(await Ol(String(e.target_id))).average_rating||0}catch(t){}try{const{data:t}=await Se.supabase.from("kindergarten_custom_info").select("building_images").eq("kinder_code",e.target_id).maybeSingle();t&&t.building_images&&t.building_images.length>0&&(o=t.building_images[0])}catch(n){}return{id:e.id,region:a,rating:i,buildingImage:o}}if("childcare"===e.target_type){a=j(void 0,void 0,e.arcode);try{i=(await Fl(String(e.target_id))).average_rating||0}catch(s){}try{const{data:t}=await Se.supabase.from("childcare_custom_info").select("building_images").eq("facility_code",e.target_id).maybeSingle();t&&t.building_images&&t.building_images.length>0&&(o=t.building_images[0])}catch(r){}return{id:e.id,region:a,rating:i,buildingImage:o}}}catch(a){}return{id:e.id,region:"",rating:0,buildingImage:""}}));o(e=>{const t=(0,Ae.A)({},e);return s.forEach(e=>{e&&(t[e.id]=e.region)}),t}),c(e=>{const t=(0,Ae.A)({},e);return s.forEach(e=>{e&&(t[e.id]=e.rating)}),t}),u(e=>{const t=(0,Ae.A)({},e);return s.forEach(e=>{e&&(t[e.id]=e.buildingImage)}),t})}catch(yd){m("\ucc1c \ubaa9\ub85d\uc744 \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4."),a([])}finally{n(!1)}})()},[e]),(0,Ee.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Ee.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,Ee.jsx)("div",{className:"px-4 py-4",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:()=>e("/profile"),className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(Vo,{className:"w-5 h-5 text-gray-600"})}),(0,Ee.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"\ub0b4\uac00 \ucc1c\ud55c \uc2dc\uc124"}),(0,Ee.jsx)("div",{className:"w-10"})]})})}),(0,Ee.jsx)("div",{className:"max-w-2xl mx-auto p-4",children:(0,Ee.jsxs)(Uo.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-2xl mb-3 shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uc804\uccb4 \ucc1c \ubaa9\ub85d"})}),(0,Ee.jsx)("div",{className:"p-3",children:t?(0,Ee.jsxs)("div",{className:"text-center py-8",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fb8678] mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\ucc1c \ubaa9\ub85d\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."})]}):h?(0,Ee.jsx)("div",{className:"text-center py-8 text-sm text-red-600",children:h}):0===s.length?(0,Ee.jsxs)("div",{className:"text-center py-8",children:[(0,Ee.jsx)("p",{className:"text-gray-600",children:"\ucc1c\ud55c \uc2dc\uc124\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{className:"text-gray-500 text-sm mt-2",children:"\uad00\uc2ec\uc788\ub294 \uc720\uce58\uc6d0/\uc5b4\ub9b0\uc774\uc9d1\uc744 \ucc1c\ud574 \ubcf4\uc138\uc694!"})]}):(0,Ee.jsx)("div",{className:"space-y-2",children:s.map(e=>(0,Ee.jsxs)("div",{className:"relative overflow-hidden rounded-2xl",children:[f===e.id&&(0,Ee.jsx)("div",{className:"absolute -right-4 top-0 bottom-0 w-28 bg-red-500 flex items-center justify-center rounded-r-2xl",children:(0,Ee.jsx)(xl,{className:"w-5 h-5 text-white"})}),(0,Ee.jsx)("div",{className:"w-full bg-white border border-gray-100 rounded-2xl p-3 transition-transform duration-200 relative z-10",style:{transform:f===e.id?"translateX(-80px)":"translateX(0)"},onTouchStart:b,onTouchMove:w,onTouchEnd:()=>(e=>{if(!p||!v)return;g(p-v>50?e:null)})(e.id),onClick:()=>{f===e.id&&g(null)},children:(0,Ee.jsxs)("div",{className:"flex items-center",children:[(0,Ee.jsx)("div",{className:"w-12 h-12 rounded-xl overflow-hidden bg-gradient-to-br from-pink-100 to-purple-100 flex items-center justify-center mr-3 flex-shrink-0",children:d[e.id]?(0,Ee.jsx)("img",{src:d[e.id],alt:e.target_name||"\uc2dc\uc124 \uc0ac\uc9c4",className:"w-full h-full object-cover"}):(0,Ee.jsx)(Al,{className:"w-6 h-6 text-gray-400"})}),(0,Ee.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ee.jsx)("div",{className:"text-xs font-semibold text-gray-900 truncate",children:e.target_name||e.target_id}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-1 mt-1 min-w-0",children:[(0,Ee.jsx)(ul,{className:"w-3 h-3 text-[#fb8678] flex-shrink-0"}),(0,Ee.jsx)("span",{className:"text-[10px] text-gray-500 truncate",children:i[e.id]||""})]}),(0,Ee.jsx)("div",{className:"text-[10px] text-gray-400 mt-1",children:"kindergarten"===e.target_type?"\uc720\uce58\uc6d0":"childcare"===e.target_type?"\uc5b4\ub9b0\uc774\uc9d1":e.target_type})]}),("kindergarten"===e.target_type||"childcare"===e.target_type)&&(0,Ee.jsxs)("div",{className:"ml-3 flex items-center px-2 py-0.5 bg-black/80 border border-white rounded-xl",children:[(0,Ee.jsx)(ml,{className:"w-3 h-3 text-[#fb8678] fill-current mr-1"}),(0,Ee.jsx)("span",{className:"text-white text-[11px] font-bold",children:(l[e.id]||0).toFixed(1)})]})]})}),f===e.id&&(0,Ee.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("".concat(e.target_name||"\uc774 \uc2dc\uc124","\uc744(\ub97c) \ucc1c \ubaa9\ub85d\uc5d0\uc11c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))try{const{data:{user:t}}=await Se.supabase.auth.getUser();if(!t)return;await Il(t.id,e.target_type,e.target_id),a(t=>t.filter(t=>t.id!==e.id)),g(null)}catch(h){console.error("\ucc1c \uc0ad\uc81c \uc624\ub958:",h),alert("\uc0ad\uc81c\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.")}})(e),className:"absolute -right-4 top-0 bottom-0 w-28 bg-red-500 rounded-r-2xl flex items-center justify-center active:bg-red-600",children:(0,Ee.jsx)(xl,{className:"w-5 h-5 text-white"})})]},e.id))})})]})})]})},$l=Bo("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),Zl=()=>{const{postId:e}=se(),t=ne(),[n]=Ce(),s=ee(),[a,i]=(0,r.useState)(null),[o,l]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[m,f]=(0,r.useState)(!1),[g,p]=(0,r.useState)(0),[x,v]=(0,r.useState)([]),[y,b]=(0,r.useState)(!1),[w,j]=(0,r.useState)(!1),[_,N]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!1),[S,E]=(0,r.useState)(""),[P,A]=(0,r.useState)("spam"),[T,I]=(0,r.useState)(!1),[M,L]=(0,r.useState)(!1),[R,O]=(0,r.useState)(!1),[D,z]=(0,r.useState)(!1),[U,F]=(0,r.useState)(null),[q,B]=(0,r.useState)(0),[V,W]=(0,r.useState)(!1);(0,r.useEffect)(()=>(document.body.style.overflow=k||M||D?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[k,M,D]);const H="".concat(window.location.origin,"/community/post/").concat(e,"?category=").concat(encodeURIComponent((null===a||void 0===a?void 0:a.category)||"")),Y=async()=>{try{await navigator.clipboard.writeText(H),alert("\uacf5\uc720 \ub9c1\ud06c\uac00 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){}z(!1)},[K,J]=(0,r.useState)(!1),[G,X]=(0,r.useState)(""),[$,Z]=(0,r.useState)(null),[Q,te]=(0,r.useState)(""),[re,ae]=(0,r.useState)(null),[ie,oe]=(0,r.useState)(null),[le,ce]=(0,r.useState)(""),[de,ue]=(0,r.useState)(new Set),he=n.get("category")||"\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0",{isLiked:me,toggleLike:fe,refreshLikes:ge}=bl(),pe=(0,r.useCallback)(async e=>{if(e&&!y){b(!0);try{console.log("\ub313\uae00 \uc870\ud68c \uc911:",e);const{data:t,error:n}=await Se.supabase.from("comments").select("*").eq("post_id",e).order("created_at",{ascending:!0});if(n)return void console.error("\ub313\uae00 \uc870\ud68c \uc624\ub958:",n);console.log("\ub313\uae00 \uc870\ud68c \uacb0\uacfc:",t);const s=await Promise.all((t||[]).map(async e=>{var t,n,s;let r=null;const{data:a}=await Se.supabase.from("profiles").select("user_type, children_info").eq("id",e.user_id).maybeSingle();if(a)r=a;else{const{data:t}=await Se.supabase.from("profiles").select("user_type, children_info").eq("auth_user_id",e.user_id).maybeSingle();r=t}const i="parent"===(null===(t=r)||void 0===t?void 0:t.user_type)&&null!==(n=r)&&void 0!==n&&n.children_info?r.children_info.map(e=>e.profile_image_url||null):[];return(0,Ae.A)((0,Ae.A)({},e),{},{user_children_images:i,user_type:null===(s=r)||void 0===s?void 0:s.user_type})}));v(s)}catch(t){console.error("\ub313\uae00 \uc870\ud68c \uc624\ub958:",t)}finally{b(!1)}}},[y]);(0,r.useEffect)(()=>{(async()=>{if(e)try{var t,n,s;const{data:r,error:a}=await Se.supabase.from("community_posts").select("\n            *,\n            profiles!community_posts_author_id_fkey(\n              id,\n              auth_user_id,\n              full_name,\n              nickname,\n              profile_image_url,\n              user_type,\n              children_info\n            )\n          ").eq("id",e).single();if(a)return void console.error("\uac8c\uc2dc\uae00 \uc870\ud68c \uc624\ub958:",a);const{count:o}=await Se.supabase.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",e),{count:l}=await Se.supabase.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",e),c="parent"===(null===(t=r.profiles)||void 0===t?void 0:t.user_type)&&null!==(n=r.profiles)&&void 0!==n&&n.children_info?r.profiles.children_info.map(e=>e.profile_image_url||null):[],d=(0,Ae.A)((0,Ae.A)({},r),{},{user_id:(null===(s=r.profiles)||void 0===s?void 0:s.auth_user_id)||r.author_id,comments_count:o||0,likes_count:l||0,author_children_images:c});i(d),p(0)}catch(r){console.error("\uac8c\uc2dc\uae00 \uc870\ud68c \uc624\ub958:",r)}finally{l(!1)}})()},[e]),(0,r.useEffect)(()=>{a&&e&&!x.length&&pe(e)},[a,e,x.length]),(0,r.useEffect)(()=>{let e=!0;return(async()=>{try{const{data:{user:n}}=await Se.supabase.auth.getUser();if(!e)return;if(n){console.log("\ud83d\udd10 OAuth \uc0ac\uc6a9\uc790 \uac10\uc9c0, profiles \ud14c\uc774\ube14\uc5d0\uc11c \uc815\ubcf4 \uc870\ud68c \uc911...");const{data:t}=await Se.supabase.from("profiles").select("id, full_name, nickname, profile_image_url, user_type, auth_user_id, children_info").eq("auth_user_id",n.id).single();t&&e&&(console.log("\u2705 OAuth \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \uc815\ubcf4:",t),d(t))}else{console.log("\ud83d\udcf1 \ud734\ub300\uc804\ud654 \uac00\uc785 \uc0ac\uc6a9\uc790 \ud655\uc778 \uc911...");const n=localStorage.getItem("isLoggedIn"),s=localStorage.getItem("userProfile");if("true"===n&&s)try{const t=JSON.parse(s);console.log("\ud83d\udcf1 localStorage\uc5d0\uc11c \ud30c\uc2f1\ub41c \ud504\ub85c\ud544:",t),console.log("\ud83d\udd0d profiles \ud14c\uc774\ube14\uc5d0\uc11c user_type \uc870\ud68c \uc911...");const{data:n}=await Se.supabase.from("profiles").select("id, full_name, nickname, profile_image_url, user_type, auth_user_id, children_info").eq("id",t.id).single();if(!e)return;n?(console.log("\u2705 profiles \ud14c\uc774\ube14\uc5d0\uc11c \uac00\uc838\uc628 \uc815\ubcf4:",n),d(n)):(console.log("\u26a0\ufe0f profiles \ud14c\uc774\ube14\uc5d0 \uc815\ubcf4 \uc5c6\uc74c, localStorage \uc815\ubcf4 \uc0ac\uc6a9 (\uae30\ubcf8\uac12: parent)"),d({id:t.id||"local-user",full_name:t.full_name||"",nickname:t.nickname||t.full_name||"",profile_image_url:t.profile_image_url||"",user_type:"parent",children_info:[]}))}catch(t){console.error("\ud504\ub85c\ud544 \ud30c\uc2f1 \uc624\ub958:",t)}else console.log("\u274c \ub85c\uadf8\uc778 \uc0c1\ud0dc\uac00 \uc544\ub2c8\uac70\ub098 \ud504\ub85c\ud544 \uc815\ubcf4 \uc5c6\uc74c")}}catch(n){console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc870\ud68c \uc624\ub958:",n)}})(),()=>{e=!1}},[]),(0,r.useEffect)(()=>{if(c&&e){const e=c.auth_user_id||c.id;ge(e)}},[c,e]),(0,r.useEffect)(()=>(document.body.style.overflow=K?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[K]);const xe=()=>{C(!1),E(""),A("spam")},ve=async()=>{if(G.trim()&&c&&a)try{const e=c.auth_user_id||c.id,{data:t,error:n}=await Se.supabase.from("comments").insert({post_id:a.id,user_id:e,user_name:c.nickname||c.full_name,user_profile_image:c.profile_image_url||"",content:G.trim(),created_at:(new Date).toISOString()}).select().single();if(n)return void console.error("\ub313\uae00 \uc791\uc131 \uc624\ub958:",n);const s="parent"===c.user_type&&c.children_info?c.children_info.map(e=>e.profile_image_url||null):[];v(e=>[...e,(0,Ae.A)((0,Ae.A)({},t),{},{user_children_images:s,user_type:c.user_type})]),X(""),i(e=>e?(0,Ae.A)((0,Ae.A)({},e),{},{comments_count:e.comments_count+1}):null)}catch(e){console.error("\ub313\uae00 \uc791\uc131 \uc624\ub958:",e)}},ye=e=>{Z(e.id),te(e.content),ae(null)},be=async()=>{if($&&Q.trim()&&c)try{const e=(new Date).toISOString();console.log("\ub313\uae00 \uc218\uc815 \uc2dc\ub3c4:",{editingCommentId:$,content:Q.trim(),currentTime:e}),console.log("\ud604\uc7ac \uc0ac\uc6a9\uc790:",c);const{data:t,error:n}=await Se.supabase.from("comments").select("*").eq("id",$).single();if(n)return void console.error("\ud604\uc7ac \ub313\uae00 \uc870\ud68c \uc624\ub958:",n);console.log("\uc218\uc815 \uc804 \ub313\uae00 \uc0c1\ud0dc:",t),console.log("\ub313\uae00 \uc791\uc131\uc790 ID:",t.user_id),console.log("\ud604\uc7ac \uc0ac\uc6a9\uc790 ID:",c.id);const s=c.auth_user_id||c.id;if(t.user_id!==s&&t.user_id!==c.id)return console.error("\uad8c\ud55c \uc5c6\uc74c: \ub313\uae00 \uc791\uc131\uc790\uac00 \uc544\ub2d9\ub2c8\ub2e4"),console.error("\ub313\uae00 \uc791\uc131\uc790 ID:",t.user_id),console.error("\ud604\uc7ac \uc0ac\uc6a9\uc790 ID:",c.id),void console.error("\ud604\uc7ac \uc0ac\uc6a9\uc790 auth_user_id:",c.auth_user_id);const{data:r,error:a}=await Se.supabase.from("comments").update({content:Q.trim(),updated_at:e,is_edited:!0}).eq("id",$).eq("user_id",s).select();if(a)return console.error("\ub313\uae00 \uc218\uc815 \uc624\ub958:",a),void console.error("\uc624\ub958 \uc0c1\uc138:",a.details,a.hint,a.message);if(console.log("\ub313\uae00 \uc218\uc815 \uacb0\uacfc:",r),!r||0===r.length){console.error("\uc5c5\ub370\uc774\ud2b8 \uacb0\uacfc\uac00 \ube44\uc5b4\uc788\uc74c - RLS \uc815\ucc45 \ubb38\uc81c\uc77c \uc218 \uc788\uc74c");const{data:t,error:n}=await Se.supabase.from("comments").update({content:Q.trim(),updated_at:e,is_edited:!0}).eq("id",$).select();return void console.log("RLS \uc6b0\ud68c \ud14c\uc2a4\ud2b8 \uacb0\uacfc:",t,n)}console.log("\ub313\uae00 \uc218\uc815 \uc131\uacf5, \ub85c\uceec \uc0c1\ud0dc \uc5c5\ub370\uc774\ud2b8 \uc911..."),v(t=>t.map(t=>t.id===$?(0,Ae.A)((0,Ae.A)({},t),{},{content:Q.trim(),updated_at:e,is_edited:!0}):t)),Z(null),te("")}catch(e){console.error("\ub313\uae00 \uc218\uc815 \uc624\ub958:",e)}},we=()=>{Z(null),te("")},je=e=>{if(console.log("=== \ub2f5\uae00\ub2ec\uae30 \uc2dc\uc791 ==="),console.log("\ud074\ub9ad\ub41c \ub313\uae00 ID:",e),console.log("\ud604\uc7ac replyingToCommentId:",ie),console.log("\ud604\uc7ac replyContent:",le),ie===e)return console.log("\uc774\ubbf8 \ub2f5\uae00 \uc791\uc131 \uc911\uc778 \ub313\uae00, \ub2eb\uae30"),oe(null),void ce("");console.log("\uc0c8\ub85c\uc6b4 \ub2f5\uae00 \uc791\uc131 \uc2dc\uc791"),oe(e),ce(""),setTimeout(()=>{console.log("\uc0c1\ud0dc \uc5c5\ub370\uc774\ud2b8 \ud6c4 replyingToCommentId:",ie),console.log("\uc0c1\ud0dc \uc5c5\ub370\uc774\ud2b8 \ud6c4 replyContent:",le)},0)},_e=()=>{oe(null),ce("")},Ne=async()=>{if(le.trim()&&c&&a&&ie)try{console.log("=== \ub2f5\uae00 \uc81c\ucd9c \uc2dc\uc791 ==="),console.log("\ub2f5\uae00 \ub0b4\uc6a9:",le.trim()),console.log("\ub2f5\uae00 \ub300\uc0c1 ID:",ie);const e=c.auth_user_id||c.id,t=x.find(e=>e.id===ie);if(!t)return;const{data:n,error:s}=await Se.supabase.from("comments").insert({post_id:a.id,user_id:e,user_name:c.nickname||c.full_name,user_profile_image:c.profile_image_url||"",content:le.trim(),parent_id:ie,created_at:(new Date).toISOString()}).select().single();if(s)return void console.error("\ub2f5\uae00 \uc791\uc131 \uc624\ub958:",s);console.log("\ub2f5\uae00 \uc791\uc131 \uc131\uacf5:",n);const r="parent"===c.user_type&&c.children_info?c.children_info.map(e=>e.profile_image_url||null):[];v(e=>[...e,(0,Ae.A)((0,Ae.A)({},n),{},{user_children_images:r,user_type:c.user_type})]),ce(""),oe(null),i(e=>e?(0,Ae.A)((0,Ae.A)({},e),{},{comments_count:e.comments_count+1}):null),await(0,sl.G)(a.id,n.id,c.auth_user_id||c.id,c.nickname||c.full_name,c.profile_image_url||"",t.user_id),setTimeout(()=>{pe(a.id)},100)}catch(e){console.error("\ub2f5\uae00 \uc791\uc131 \uc624\ub958:",e)}},ke=e=>{ue(t=>{const n=new Set(t);return n.has(e)?n.delete(e):n.add(e),n})},Pe=(0,r.useCallback)(e=>{const t=new Map,n=[];e.forEach(e=>{t.set(e.id,(0,Ae.A)((0,Ae.A)({},e),{},{replies:[]}))}),e.forEach(e=>{if(e.parent_id){const s=t.get(e.parent_id);s?(s.replies=s.replies||[],s.replies.push(t.get(e.id))):n.push(t.get(e.id))}else n.push(t.get(e.id))});const s=e=>{e.forEach(e=>{e.replies&&e.replies.length>0&&(e.replies.sort((e,t)=>new Date(e.created_at).getTime()-new Date(t.created_at).getTime()),s(e.replies))})};return s(n),n},[]),Te=(0,r.useMemo)(()=>Pe(x),[x]),Ie=e=>{let t=0;return e.replies&&e.replies.length>0&&(t+=e.replies.length,e.replies.forEach(e=>{t+=Ie(e)})),t},Me=async e=>{if(c)try{const t=c.auth_user_id||c.id,{data:n,error:s}=await Se.supabase.from("comments").select("user_id").eq("id",e).single();if(s)return void console.error("\ub313\uae00 \uc870\ud68c \uc624\ub958:",s);if(n.user_id!==t&&n.user_id!==c.id)return console.error("\uad8c\ud55c \uc5c6\uc74c: \ub313\uae00 \uc791\uc131\uc790\uac00 \uc544\ub2d9\ub2c8\ub2e4"),console.error("\ub313\uae00 \uc791\uc131\uc790 ID:",n.user_id),console.error("\ud604\uc7ac \uc0ac\uc6a9\uc790 ID:",c.id),void console.error("\ud604\uc7ac \uc0ac\uc6a9\uc790 auth_user_id:",c.auth_user_id);const{error:r}=await Se.supabase.from("comments").update({is_deleted:!0}).eq("id",e).eq("user_id",n.user_id);r&&(console.error("\ub313\uae00 \uc0ad\uc81c \uc624\ub958:",r),console.log("\ub370\uc774\ud130\ubca0\uc774\uc2a4 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328, \ub85c\uceec \uc0c1\ud0dc\ub9cc \uc5c5\ub370\uc774\ud2b8")),v(t=>t.map(t=>t.id===e?(0,Ae.A)((0,Ae.A)({},t),{},{is_deleted:!0,content:"\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):t)),ae(null)}catch(t){console.error("\ub313\uae00 \uc0ad\uc81c \uc624\ub958:",t)}},Le=e=>{ae(re===e?null:e)},Re=()=>{L(!1)},Oe=e=>{const t=new Date,n=new Date(e),s=Math.floor((t.getTime()-n.getTime())/6e4);return s<60?"".concat(s,"\ubd84 \uc804"):s<1440?"".concat(Math.floor(s/60),"\uc2dc\uac04 \uc804"):"".concat(Math.floor(s/1440),"\uc77c \uc804")};return o?(0,Ee.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#fb8678] mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\ub85c\ub529 \uc911..."})]})}):a?(0,Ee.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50 flex flex-col",children:[(0,Ee.jsx)("div",{className:"bg-white/80 backdrop-blur-sm border-b border-white/50 shadow-lg sticky top-0 z-10 flex-shrink-0",children:(0,Ee.jsx)("div",{className:"max-w-md mx-auto px-4 py-4",children:(0,Ee.jsxs)("div",{className:"flex items-center",children:[(0,Ee.jsx)("button",{onClick:()=>{var e,n;return"/profile"===(null===(e=s.state)||void 0===e?void 0:e.from)?(console.log("\ud83d\udd19 PostDetail \ub4a4\ub85c\uac00\uae30 - \ud504\ub85c\ud544 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9"),void t("/profile")):"/profile/posts"===(null===(n=s.state)||void 0===n?void 0:n.from)?(console.log("\ud83d\udd19 PostDetail \ub4a4\ub85c\uac00\uae30 - \ub0b4\uac00 \uc791\uc131\ud55c \uae00 \uc804\uccb4 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9"),void t("/profile/posts")):(console.log("\ud83d\udd19 PostDetail \ub4a4\ub85c\uac00\uae30 - \uce74\ud14c\uace0\ub9ac:",he),void t("/community?category=".concat(encodeURIComponent(he))))},className:"p-2 rounded-full hover:bg-[#fb8678]/10 transition-colors mr-3",children:(0,Ee.jsx)(Vo,{className:"w-6 h-6 text-[#fb8678]"})}),(0,Ee.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"\uac8c\uc2dc\uae00"}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-2 ml-auto",children:[(0,Ee.jsx)("button",{onClick:()=>z(!0),className:"p-2 rounded-full hover:bg-[#fb8678]/10 transition-colors",children:(0,Ee.jsx)($l,{className:"w-5 h-5 text-[#fb8678]"})}),c&&a&&a.author_name===(c.nickname||c.full_name)&&"parent"===c.user_type&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>{h(!u)},className:"p-2 rounded-full hover:bg-[#fb8678]/10 transition-colors",children:(0,Ee.jsx)(hl,{className:"w-5 h-5 text-[#fb8678]"})}),u&&(0,Ee.jsxs)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:[(0,Ee.jsx)("button",{onClick:()=>{console.log("\uc218\uc815\ud560 \uac8c\uc2dc\uae00:",a),h(!1)},className:"w-full px-4 py-2 text-center text-sm text-gray-700 hover:bg-gray-50",children:"\uc218\uc815\ud558\uae30"}),(0,Ee.jsx)("div",{className:"border-t border-gray-200 mx-2"}),(0,Ee.jsx)("button",{onClick:()=>f(!0),className:"w-full px-4 py-2 text-center text-sm text-red-600 hover:bg-red-50",children:"\uc0ad\uc81c\ud558\uae30"})]})]}),c&&a&&a.author_name!==(c.nickname||c.full_name)&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>{N(!_)},className:"p-2 rounded-full hover:bg-[#fb8678]/10 transition-colors",title:"\uac8c\uc2dc\uae00 \uba54\ub274",children:(0,Ee.jsx)(hl,{className:"w-5 h-5 text-[#fb8678]"})}),_&&(0,Ee.jsxs)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:[(0,Ee.jsx)("button",{onClick:()=>{L(!0),N(!1)},className:"w-full px-4 py-2 text-center text-sm text-gray-700 hover:bg-gray-50",children:"\ucc28\ub2e8\ud558\uae30"}),(0,Ee.jsx)("div",{className:"border-t border-gray-200 mx-2"}),(0,Ee.jsx)("button",{onClick:()=>{C(!0),E(""),A("spam"),N(!1)},className:"w-full px-4 py-2 text-center text-sm text-red-600 hover:bg-red-50",children:"\uc2e0\uace0\ud558\uae30"})]})]})]})]})})}),D&&(0,Ee.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>z(!1)}),(0,Ee.jsx)("div",{className:"absolute left-0 right-0 bottom-0 bg-white rounded-t-2xl shadow-xl border-t border-gray-200 p-4 will-change-transform ".concat(V?"transition-none":"transition-transform duration-200"),style:{transform:"translate3d(0, ".concat(q,"px, 0)")},onTouchMove:e=>{if(!V||null===U)return;const t=e.touches[0].clientY-U;t>0&&B(t)},onTouchEnd:()=>{if(!V)return;if(q>100)return W(!1),void requestAnimationFrame(()=>{z(!1),B(0),F(null)});W(!1),requestAnimationFrame(()=>{B(0),F(null)})},children:(0,Ee.jsxs)("div",{className:"animate-[sheetSlideUp_0.28s_cubic-bezier(0.22,0.61,0.36,1)]",children:[(0,Ee.jsx)("div",{className:"w-full flex justify-center py-2 mb-1",onTouchStart:e=>{const t=e.touches[0];W(!0),F(t.clientY),B(0)},children:(0,Ee.jsx)("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),(0,Ee.jsxs)("div",{className:"mb-2",children:[(0,Ee.jsx)("div",{className:"text-base font-semibold text-black pl-1 pb-1",children:"\ub9c1\ud06c \uacf5\uc720"}),(0,Ee.jsx)("div",{className:"mt-1 text-xs text-gray-600 break-all bg-gray-50 rounded-lg px-3 py-2 border border-gray-100",children:H})]}),(0,Ee.jsxs)("div",{className:"flex gap-3 py-2 overflow-x-auto scrollbar-hide",children:[(0,Ee.jsxs)("button",{onClick:async()=>{const e=window.Kakao;try{var t,n;if(null!==e&&void 0!==e&&null!==(t=e.isInitialized)&&void 0!==t&&t.call(e)&&null!==e&&void 0!==e&&e.Share)return await e.Share.sendDefault({objectType:"feed",content:{title:"\ub9d8\ud53d \xb7 \ucee4\ubba4\ub2c8\ud2f0",description:(null===a||void 0===a||null===(n=a.content)||void 0===n?void 0:n.slice(0,70))||"\uac8c\uc2dc\uae00 \uacf5\uc720",imageUrl:"".concat(window.location.origin,"/headericon.png"),link:{mobileWebUrl:H,webUrl:H}}}),void z(!1)}catch(i){}const s=navigator;var r;s.share?await s.share({title:"\ub9d8\ud53d \xb7 \ucee4\ubba4\ub2c8\ud2f0",text:null===a||void 0===a||null===(r=a.content)||void 0===r?void 0:r.slice(0,70),url:H}):await Y();z(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-yellow-300 flex items-center justify-center text-black font-bold",children:"\uce74"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\uce74\uce74\uc624\ud1a1"})]}),(0,Ee.jsxs)("button",{onClick:()=>{window.location.href="mailto:?subject=".concat(encodeURIComponent("\ub9d8\ud53d \xb7 \ucee4\ubba4\ub2c8\ud2f0 \uac8c\uc2dc\uae00"),"&body=").concat(encodeURIComponent(H)),z(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-red-500 text-white flex items-center justify-center font-bold",children:"G"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"Gmail"})]}),(0,Ee.jsxs)("button",{onClick:()=>{var e;const t="https://band.us/plugin/share?body=".concat(encodeURIComponent((null===a||void 0===a||null===(e=a.content)||void 0===e?void 0:e.slice(0,60))||""),"%0A").concat(encodeURIComponent(H),"&route=").concat(encodeURIComponent(H));window.open(t,"_blank"),z(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-green-500 text-white flex items-center justify-center font-bold",children:"B"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"BAND"})]}),(0,Ee.jsxs)("button",{onClick:Y,className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-gray-800 text-white flex items-center justify-center font-bold",children:"\ud83d\udd17"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\ub9c1\ud06c\ubcf5\uc0ac"})]}),(0,Ee.jsxs)("button",{onClick:async()=>{try{const t=navigator;var e;if(t.share)await t.share({title:"\ub9d8\ud53d \xb7 \ucee4\ubba4\ub2c8\ud2f0",text:null===a||void 0===a||null===(e=a.content)||void 0===e?void 0:e.slice(0,70),url:H});else await navigator.clipboard.writeText(H),alert("\uacf5\uc720 \ub9c1\ud06c\uac00 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(t){}z(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-gray-200 text-gray-800 flex items-center justify-center text-lg font-bold",children:"\u22ef"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\ub354\ubcf4\uae30"})]})]})]})})]}),(0,Ee.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,Ee.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-b-2xl p-6 border border-white/50 shadow-lg flex-shrink-0",children:[(0,Ee.jsxs)("div",{className:"flex items-start space-x-3 mb-5",children:[(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("div",{className:"w-14 h-14 rounded-2xl overflow-hidden shadow-lg",children:a.author_profile_image?(0,Ee.jsx)("img",{src:a.author_profile_image,alt:"".concat(a.author_name,"\uc758 \ud504\ub85c\ud544"),className:"w-full h-full object-cover",onError:e=>{const t=e.target;t.style.display="none";const n=t.parentElement;n&&(n.innerHTML='\n                          <div class="w-full h-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-3xl text-white">\n                          '.concat(a.author_name.charAt(0),"\n                        </div>\n                      "))}}):(0,Ee.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-3xl text-white",children:a.author_name.charAt(0)})}),a.author_children_images&&a.author_children_images.length>0&&(0,Ee.jsxs)("div",{className:"absolute -bottom-1 -right-1 flex items-center flex-row-reverse",children:[a.author_children_images.length>2&&(0,Ee.jsx)("div",{className:"w-5 h-5 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center cursor-pointer relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[8px] font-bold",children:["+",a.author_children_images.length-2]})}),a.author_children_images.length>=2&&(0,Ee.jsx)("div",{className:"w-5 h-5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-20 ".concat(a.author_children_images.length>2?"-mr-[6px]":""),children:a.author_children_images[1]?(0,Ee.jsx)("img",{src:a.author_children_images[1],alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover"}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[11px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{className:"w-5 h-5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-10 ".concat(a.author_children_images.length>=2?"-mr-[6px]":""),children:a.author_children_images[0]?(0,Ee.jsx)("img",{src:a.author_children_images[0],alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover"}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[11px]",children:"\ud83d\udc64"})})]})]}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2 mb-1.5",children:[(0,Ee.jsx)("span",{className:"font-bold text-gray-900 text-base",children:a.author_name}),(0,Ee.jsxs)("span",{className:"px-2.5 py-0.5 bg-gradient-to-r from-[#fb8678]/20 to-[#e67567]/20 text-[#fb8678] text-xs rounded-full border border-[#fb8678]/30 font-medium",children:[(0,Ee.jsx)(ul,{className:"w-3.5 h-3.5 inline mr-1"}),a.location]})]}),(0,Ee.jsx)("div",{className:"text-xs text-gray-500",children:Oe(a.created_at)})]})]}),(0,Ee.jsx)("div",{className:"mb-6",children:(0,Ee.jsx)("p",{className:"text-gray-800 text-base leading-relaxed whitespace-pre-line",children:a.content})}),a.images&&a.images.length>0&&(0,Ee.jsx)("div",{className:"mb-6",children:(0,Ee.jsxs)("div",{className:"relative w-full h-80 bg-gray-100 rounded-xl overflow-hidden",children:[(0,Ee.jsx)("div",{className:"flex w-full h-full overflow-x-auto scrollbar-hide snap-x snap-mandatory",onScroll:e=>{const t=e.target,n=t.scrollLeft,s=t.clientWidth,r=Math.round(n/s);p(r)},children:a.images.map((e,t)=>(0,Ee.jsx)("div",{className:"flex-shrink-0 w-full h-full snap-center",children:(0,Ee.jsx)("img",{src:e,alt:"\uac8c\uc2dc\uae00 \uc774\ubbf8\uc9c0 ".concat(t+1),className:"w-full h-full object-cover"})},t))}),a.images.length>1&&(0,Ee.jsxs)("div",{className:"absolute top-4 right-4 bg-black/50 text-white text-sm px-3 py-1.5 rounded-full backdrop-blur-sm",children:[g+1,"/",a.images.length]})]})}),a.emojis&&a.emojis.length>0&&(0,Ee.jsx)("div",{className:"mb-6",children:(0,Ee.jsx)("div",{className:"flex gap-3",children:a.emojis.map((e,t)=>(0,Ee.jsx)("span",{className:"text-3xl",children:e},t))})}),(0,Ee.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:a.hashtags.map((e,t)=>(0,Ee.jsxs)("span",{className:"px-3 py-2 bg-[#fb8678]/10 text-[#fb8678] text-sm rounded-full border border-[#fb8678]/20 font-medium",children:["#",e]},t))}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Ee.jsxs)("button",{onClick:async()=>{if(c&&a&&!w){j(!0);try{const e=c.auth_user_id||c.id,t=me(a.id);await fe(a.id,e,c.nickname||c.full_name),t||await(0,sl.J6)(a.id,e,c.nickname||c.full_name,c.profile_image_url||"",a.user_id);const n=me(a.id);i(e=>e?(0,Ae.A)((0,Ae.A)({},e),{},{likes_count:n?e.likes_count+1:Math.max(0,e.likes_count-1)}):null);const{count:s}=await Se.supabase.from("post_likes").select("*",{count:"exact",head:!0}).eq("post_id",a.id);i(e=>e?(0,Ae.A)((0,Ae.A)({},e),{},{likes_count:s||0}):null)}catch(e){console.error("\uc88b\uc544\uc694 \ucc98\ub9ac \uc624\ub958:",e)}finally{j(!1)}}},className:"flex items-center space-x-2 transition-colors ".concat(me(a.id)?"text-[#fb8678]":"text-gray-600 hover:text-[#fb8678]"," ").concat(w?"opacity-50 cursor-not-allowed":""),disabled:w,children:[(0,Ee.jsx)(ml,{className:"w-6 h-6 ".concat(me(a.id)?"fill-current":"")}),(0,Ee.jsx)("span",{className:"text-base font-medium",children:a.likes_count})]}),(0,Ee.jsxs)("button",{className:"flex items-center space-x-2 text-gray-600 hover:text-[#fb8678] transition-colors",children:[(0,Ee.jsx)(fl,{className:"w-6 h-6"}),(0,Ee.jsx)("span",{className:"text-base font-medium",children:a.comments_count})]})]}),(0,Ee.jsx)("button",{onClick:()=>{J(!0),X(""),oe(null),ce(""),ue(new Set)},className:"px-6 py-2 bg-[#fb8678] text-white text-sm rounded-full hover:bg-[#e67567] transition-colors font-medium",children:"\ub313\uae00 \ub2ec\uae30"})]})]}),(0,Ee.jsxs)("div",{className:"mt-6 bg-white/90 backdrop-blur-sm rounded-t-2xl p-6 border border-white/50 shadow-lg flex-1 flex flex-col",children:[(0,Ee.jsxs)("h3",{className:"text-lg font-bold text-gray-900 mb-4 flex-shrink-0",children:["\ub313\uae00 ",a.comments_count,"\uac1c"]}),(0,Ee.jsx)("div",{className:"space-y-4 flex-1",children:y?(0,Ee.jsxs)("div",{className:"text-center py-8",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fb8678] mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\ub313\uae00\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."})]}):0===x.length?(0,Ee.jsxs)("div",{className:"text-center py-8",children:[(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uc544\uc9c1 \ub313\uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{className:"text-gray-500 text-sm",children:"\uccab \ubc88\uc9f8 \ub313\uae00\uc744 \uc791\uc131\ud574\ubcf4\uc138\uc694!"})]}):Te.map(e=>(0,Ee.jsxs)("div",{className:"space-y-3",children:[(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsxs)("div",{className:"relative w-10 h-10",children:[(0,Ee.jsx)("div",{className:"w-full h-full overflow-hidden bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-sm font-medium",style:{borderRadius:"12px"},children:e.user_profile_image?(0,Ee.jsx)("img",{src:e.user_profile_image,alt:"".concat(e.user_name,"\uc758 \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):e.user_name.charAt(0)}),"teacher"===e.user_type?(0,Ee.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-[0.5px] border-blue-500 bg-white flex items-center justify-center cursor-pointer",children:(0,Ee.jsx)("svg",{className:"w-2 h-2 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})})}):e.user_children_images&&e.user_children_images.length>0&&(0,Ee.jsxs)("div",{className:"absolute -bottom-0.5 -right-0.5 flex items-center flex-row-reverse",children:[e.user_children_images.length>2&&(0,Ee.jsx)("div",{className:"w-3.5 h-3.5 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center cursor-pointer relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[6px] font-bold",children:["+",e.user_children_images.length-2]})}),e.user_children_images.length>=2&&(0,Ee.jsx)("div",{className:"w-3.5 h-3.5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-20 ".concat(e.user_children_images.length>2?"-mr-[4px]":""),children:e.user_children_images[1]?(0,Ee.jsx)("img",{src:e.user_children_images[1],alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[8px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[8px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{className:"w-3.5 h-3.5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-10 ".concat(e.user_children_images.length>=2?"-mr-[4px]":""),children:e.user_children_images[0]?(0,Ee.jsx)("img",{src:e.user_children_images[0],alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[8px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[8px]",children:"\ud83d\udc64"})})]})]}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("span",{className:"font-semibold text-gray-900 text-sm",children:e.user_name}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500",children:e.is_edited&&e.updated_at?"".concat(Oe(e.updated_at)," (\uc218\uc815\ub428)"):Oe(e.created_at)})]}),c&&!e.is_deleted&&(e.user_id===c.id||e.user_id===c.auth_user_id)&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>Le(e.id),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(hl,{className:"w-4 h-4 text-gray-500"})}),re===e.id&&(0,Ee.jsxs)("div",{className:"absolute right-0 top-8 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[100px]",children:[(0,Ee.jsxs)("button",{onClick:()=>ye(e),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[(0,Ee.jsx)(pl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc218\uc815"})]}),(0,Ee.jsxs)("button",{onClick:()=>Me(e.id),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[(0,Ee.jsx)(xl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc0ad\uc81c"})]})]})]})]}),$===e.id?(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsx)("textarea",{value:Q,onChange:e=>te(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent text-sm resize-none",rows:2}),(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("button",{onClick:be,className:"px-3 py-1 bg-[#fb8678] text-white text-xs rounded-lg hover:bg-[#e67567] transition-colors",children:"\uc800\uc7a5"}),(0,Ee.jsx)("button",{onClick:we,className:"px-3 py-1 bg-gray-500 text-white text-xs rounded-lg hover:bg-gray-600 transition-colors",children:"\ucde8\uc18c"})]})]}):e.is_deleted?(0,Ee.jsx)("p",{className:"text-gray-400 text-sm italic",children:"\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,Ee.jsx)("p",{className:"text-gray-800 text-sm",children:e.content}),!e.is_deleted&&(0,Ee.jsx)("div",{className:"flex items-center space-x-4 mt-2",children:c&&e.user_id!==c.id&&e.user_id!==c.auth_user_id&&(0,Ee.jsx)("button",{onClick:()=>{console.log("\ub2f5\uae00\ub2ec\uae30 \ubc84\ud2bc \ud074\ub9ad\ub428:",e.id),console.log("\ud604\uc7ac \uc0ac\uc6a9\uc790 ID:",c.id,"auth_user_id:",c.auth_user_id),console.log("\ub313\uae00 \uc791\uc131\uc790 ID:",e.user_id),je(e.id)},className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"})}),ie===e.id&&(0,Ee.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Ee.jsx)("span",{className:"text-[#fb8678] font-medium text-sm",children:"@"}),(0,Ee.jsx)("span",{className:"text-[#fb8678] font-semibold text-sm",children:e.user_name}),(0,Ee.jsx)("span",{className:"text-gray-500 text-sm",children:"\ub2d8\uc5d0\uac8c \ub2f5\uae00"})]}),(0,Ee.jsx)("textarea",{value:le,onChange:e=>ce(e.target.value),placeholder:"\ub2f5\uae00\uc744 \uc785\ub825\ud558\uc138\uc694...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent text-sm resize-none",rows:2}),(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("button",{onClick:Ne,className:"px-3 py-1 bg-[#fb8678] text-white text-xs rounded-lg hover:bg-[#e67567] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"}),(0,Ee.jsx)("button",{onClick:_e,className:"px-3 py-1 bg-gray-500 text-white text-xs rounded-lg hover:bg-gray-600 transition-colors",children:"\ucde8\uc18c"})]})]})]})]}),e.replies&&e.replies.length>0&&(0,Ee.jsx)("div",{className:"ml-8 space-y-3",children:de.has(e.id)?(0,Ee.jsxs)(Ee.Fragment,{children:[e.replies.map(t=>(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsxs)("div",{className:"relative w-6 h-6",children:[(0,Ee.jsx)("div",{className:"w-full h-full overflow-hidden bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-xs font-medium",style:{borderRadius:"8px"},children:t.user_profile_image?(0,Ee.jsx)("img",{src:t.user_profile_image,alt:"".concat(t.user_name,"\uc758 \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):t.user_name.charAt(0)}),"teacher"===t.user_type?(0,Ee.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-[0.5px] border-blue-500 bg-white flex items-center justify-center cursor-pointer",children:(0,Ee.jsx)("svg",{className:"w-1.5 h-1.5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})})}):t.user_children_images&&t.user_children_images.length>0&&(0,Ee.jsxs)("div",{className:"absolute -bottom-0.5 -right-0.5 flex items-center flex-row-reverse",children:[t.user_children_images.length>2&&(0,Ee.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center cursor-pointer relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[5px] font-bold",children:["+",t.user_children_images.length-2]})}),t.user_children_images.length>=2&&(0,Ee.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-20 ".concat(t.user_children_images.length>2?"-mr-[3px]":""),children:t.user_children_images[1]?(0,Ee.jsx)("img",{src:t.user_children_images[1],alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[7px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[7px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-10 ".concat(t.user_children_images.length>=2?"-mr-[3px]":""),children:t.user_children_images[0]?(0,Ee.jsx)("img",{src:t.user_children_images[0],alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[7px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[7px]",children:"\ud83d\udc64"})})]})]}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("span",{className:"font-semibold text-gray-900 text-xs",children:t.user_name}),(0,Ee.jsx)("span",{className:"text-xs text-gray-400",children:t.is_edited&&t.updated_at?"".concat(Oe(t.updated_at)," (\uc218\uc815\ub428)"):Oe(t.created_at)})]}),c&&!t.is_deleted&&(t.user_id===c.id||t.user_id===c.auth_user_id)&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>Le(t.id),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(hl,{className:"w-3 h-3 text-gray-500"})}),re===t.id&&(0,Ee.jsxs)("div",{className:"absolute right-0 top-6 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[100px]",children:[(0,Ee.jsxs)("button",{onClick:()=>ye(t),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[(0,Ee.jsx)(pl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc218\uc815"})]}),(0,Ee.jsxs)("button",{onClick:()=>Me(t.id),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[(0,Ee.jsx)(xl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc0ad\uc81c"})]})]})]})]}),t.is_deleted?(0,Ee.jsx)("p",{className:"text-gray-400 text-xs italic",children:"\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,Ee.jsxs)("p",{className:"text-gray-800 text-xs",children:[(0,Ee.jsxs)("span",{className:"text-[#fb8678] font-medium",children:["@",e.user_name]}),(0,Ee.jsx)("span",{className:"ml-1",children:t.content})]}),!t.is_deleted&&c&&t.user_id!==c.id&&t.user_id!==c.auth_user_id&&(0,Ee.jsx)("div",{className:"mt-2",children:(0,Ee.jsx)("button",{onClick:()=>{console.log("=== B\uc758 \ub2f5\uae00\uc5d0 \ub300\ud55c \ub2f5\uae00\ub2ec\uae30 \ubc84\ud2bc \ud074\ub9ad ==="),console.log("\ub2f5\uae00 ID (reply.id):",t.id),console.log("\ub2f5\uae00 \uc791\uc131\uc790:",t.user_name),console.log("\ud604\uc7ac \uc0ac\uc6a9\uc790:",c.nickname||c.full_name),console.log("\ud604\uc7ac replyingToCommentId:",ie),je(t.id)},className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"})}),ie===t.id&&(0,Ee.jsxs)("div",{className:"mt-3 space-y-2 ml-8",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Ee.jsx)("span",{className:"text-[#fb8678] font-medium text-xs",children:"@"}),(0,Ee.jsx)("span",{className:"text-[#fb8678] font-semibold text-xs",children:t.user_name}),(0,Ee.jsx)("span",{className:"text-gray-500 text-xs",children:"\ub2d8\uc5d0\uac8c \ub2f5\uae00"})]}),(0,Ee.jsx)("textarea",{value:le,onChange:e=>ce(e.target.value),placeholder:"\ub2f5\uae00\uc744 \uc785\ub825\ud558\uc138\uc694...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent text-xs resize-none",rows:2}),(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("button",{onClick:Ne,className:"px-3 py-1 bg-[#fb8678] text-white text-xs rounded-lg hover:bg-[#e67567] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"}),(0,Ee.jsx)("button",{onClick:_e,className:"px-3 py-1 bg-gray-500 text-white text-xs rounded-lg hover:bg-gray-600 transition-colors",children:"\ucde8\uc18c"})]})]})]})]},t.id)),e.replies&&(()=>{const t=e.replies,n=x.filter(e=>e.parent_id&&t.some(t=>t.id===e.parent_id));return n.length>0?(0,Ee.jsx)("div",{className:"space-y-3",children:n.map(e=>{const n=t.find(t=>t.id===e.parent_id);return(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("div",{className:"w-6 h-6 overflow-hidden bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-xs font-medium",style:{borderRadius:"8px"},children:e.user_profile_image?(0,Ee.jsx)("img",{src:e.user_profile_image,alt:"".concat(e.user_name,"\uc758 \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):e.user_name.charAt(0)}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("span",{className:"font-semibold text-gray-900 text-xs",children:e.user_name}),(0,Ee.jsx)("span",{className:"text-xs text-gray-400",children:e.is_edited&&e.updated_at?"".concat(Oe(e.updated_at)," (\uc218\uc815\ub428)"):Oe(e.created_at)})]}),c&&!e.is_deleted&&(e.user_id===c.id||e.user_id===c.auth_user_id)&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>Le(e.id),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(hl,{className:"w-3 h-3 text-gray-500"})}),re===e.id&&(0,Ee.jsxs)("div",{className:"absolute right-0 top-6 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[100px]",children:[(0,Ee.jsxs)("button",{onClick:()=>ye(e),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[(0,Ee.jsx)(pl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc218\uc815"})]}),(0,Ee.jsxs)("button",{onClick:()=>Me(e.id),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[(0,Ee.jsx)(xl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc0ad\uc81c"})]})]})]})]}),e.is_deleted?(0,Ee.jsx)("p",{className:"text-gray-400 text-xs italic",children:"\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,Ee.jsxs)("p",{className:"text-gray-800 text-xs",children:[(0,Ee.jsxs)("span",{className:"text-[#fb8678] font-medium",children:["@",null===n||void 0===n?void 0:n.user_name]}),(0,Ee.jsx)("span",{className:"ml-1",children:e.content})]}),!e.is_deleted&&c&&e.user_id!==c.id&&e.user_id!==c.auth_user_id&&(0,Ee.jsx)("div",{className:"mt-2",children:(0,Ee.jsx)("button",{onClick:()=>{console.log("=== 2\ucc28 \ub2f5\uae00\uc5d0 \ub300\ud55c \ub2f5\uae00\ub2ec\uae30 \ubc84\ud2bc \ud074\ub9ad ==="),console.log("\ub2f5\uae00 ID (nestedReply.id):",e.id),console.log("\ub2f5\uae00 \uc791\uc131\uc790:",e.user_name),console.log("\ud604\uc7ac \uc0ac\uc6a9\uc790:",c.nickname||c.full_name),console.log("\ud604\uc7ac replyingToCommentId:",ie),je(e.id)},className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"})})]})]},e.id)})}):null})(),(0,Ee.jsx)("div",{className:"mt-3",children:(0,Ee.jsxs)("button",{onClick:()=>ke(e.id),className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors ml-9 flex items-center space-x-1",children:[(0,Ee.jsx)("span",{className:"text-gray-400",children:">"}),(0,Ee.jsx)("span",{className:"font-semibold",children:"\ub2f5\uae00 \uc228\uae30\uae30"})]})})]}):(0,Ee.jsxs)("button",{onClick:()=>ke(e.id),className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors ml-9 flex items-center space-x-1",children:[(0,Ee.jsx)("span",{className:"text-gray-400",children:">"}),(0,Ee.jsxs)("span",{className:"font-semibold",children:["\ub2f5\uae00 ",Ie(e),"\uac1c \ubcf4\uae30"]})]})})]},e.id))})]})]}),m&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-sm w-full mx-4",children:[(0,Ee.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-4 text-center",children:"\uac8c\uc2dc\uae00 \uc0ad\uc81c"}),(0,Ee.jsxs)("p",{className:"text-gray-600 text-center mb-6",children:["\uc815\ub9d0\ub85c \uc774 \uac8c\uc2dc\uae00\uc744 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",(0,Ee.jsx)("br",{}),"\uc0ad\uc81c\ub41c \uac8c\uc2dc\uae00\uc740 \ubcf5\uad6c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."]}),(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(a)try{const{error:e}=await Se.supabase.from("community_posts").delete().eq("id",a.id);if(e)return void console.error("\uac8c\uc2dc\uae00 \uc0ad\uc81c \uc624\ub958:",e);console.log("\ud83d\uddd1\ufe0f \uac8c\uc2dc\uae00 \uc0ad\uc81c \uc131\uacf5! \ucee4\ubba4\ub2c8\ud2f0\ub85c \uc774\ub3d9 - \uce74\ud14c\uace0\ub9ac:",he),t("/community?category=".concat(encodeURIComponent(he)))}catch(e){console.error("\uac8c\uc2dc\uae00 \uc0ad\uc81c \uc624\ub958:",e)}},className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium",children:"\uc0ad\uc81c"})]})]})}),k&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-4 max-w-lg w-full min-h-[500px] max-h-[95vh] flex flex-col",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ee.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"\uac8c\uc2dc\uae00 \uc2e0\uace0"}),(0,Ee.jsx)("button",{onClick:xe,className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-6 h-6 text-gray-500"})})]}),(0,Ee.jsxs)("div",{className:"flex-1 overflow-y-auto mb-6",children:[(0,Ee.jsxs)("p",{className:"text-gray-600 text-sm mb-4",children:[(0,Ee.jsx)("strong",{children:null===a||void 0===a?void 0:a.author_name}),"\ub2d8\uc774 \uc791\uc131\ud55c \uac8c\uc2dc\uae00\uc744 \uc2e0\uace0\ud569\ub2c8\ub2e4."]}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc720\ud615"}),(0,Ee.jsxs)("select",{value:P,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent",children:[(0,Ee.jsx)("option",{value:"spam",children:"\uc2a4\ud338/\uad11\uace0\uc131 \uac8c\uc2dc\uae00"}),(0,Ee.jsx)("option",{value:"inappropriate",children:"\ubd80\uc801\uc808\ud55c \ub0b4\uc6a9"}),(0,Ee.jsx)("option",{value:"harassment",children:"\uad34\ub86d\ud798/\ud3ed\ub825"}),(0,Ee.jsx)("option",{value:"other",children:"\uae30\ud0c0"})]})]}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc0ac\uc720"}),(0,Ee.jsx)("textarea",{value:S,onChange:e=>E(e.target.value),placeholder:"\uc2e0\uace0 \uc0ac\uc720\ub97c \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694...",rows:6,maxLength:500,className:"w-full px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent resize-none text-sm"}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 font-semibold mt-1",children:[(0,Ee.jsx)("span",{children:"\ucd5c\ub300 \ud14d\uc2a4\ud2b8 \uae38\uc774"}),(0,Ee.jsxs)("span",{children:[S.length,"/500"]})]})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3 flex-shrink-0",children:[(0,Ee.jsx)("button",{onClick:xe,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(a&&c&&S.trim()){I(!0);try{const{error:e}=await Se.supabase.from("reports").insert({post_id:a.id,reporter_id:c.id,report_reason:S.trim(),report_type:P});if(e)return console.error("\uc2e0\uace0 \ucc98\ub9ac \uc624\ub958:",e),void alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");alert("\uc2e0\uace0\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),xe()}catch(e){console.error("\uc2e0\uace0 \ucc98\ub9ac \uc624\ub958:",e),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{I(!1)}}},disabled:!S.trim()||T,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:T?"\uc2e0\uace0 \uc911...":"\uc2e0\uace0\ud558\uae30"})]})]})}),M&&a&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[(0,Ee.jsxs)("div",{className:"text-center mb-6",children:[(0,Ee.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ee.jsx)(vl,{className:"w-6 h-6 text-red-600"})}),(0,Ee.jsxs)("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:[a.author_name,"\ub2d8\uc744 \ucc28\ub2e8\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"]}),(0,Ee.jsxs)("div",{className:"text-sm text-gray-600 text-left space-y-2",children:[(0,Ee.jsx)("p",{children:"\u2022 \ucc28\ub2e8\ud558\uba74 \uc0ac\uc6a9\uc790\uac00 \uc791\uc131\ud55c \uae00\uacfc \ub313\uae00\uc774 \ub354 \uc774\uc0c1 \ubcf4\uc774\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{children:"\u2022 \uc0c1\ub300\ubc29\uc740 \ud68c\uc6d0\ub2d8\uc758 \uae00\uc744 \uacc4\uc18d \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{children:"\u2022 \uc815\ub9d0 \ucc28\ub2e8\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("button",{onClick:Re,className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(a&&c){O(!0);try{const e=c.auth_user_id||c.id,{error:n}=await Se.supabase.from("blocked_users").insert({blocker_id:e,blocked_user_id:a.user_id,created_at:(new Date).toISOString()});if(n)return console.error("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958:",n),void alert("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.");alert("\uc0ac\uc6a9\uc790\uac00 \ucc28\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),t(-1)}catch(e){console.error("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958:",e),alert("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{O(!1),Re()}}},disabled:R,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:R?"\ucc28\ub2e8 \uc911...":"\ucc28\ub2e8\ud558\uae30"})]})]})}),K&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-end z-50 overflow-hidden",children:(0,Ee.jsxs)("div",{className:"w-full bg-white rounded-t-3xl transform transition-all duration-500 ease-out animate-slide-up",style:{height:"90vh"},children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,Ee.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"\ub313\uae00"}),(0,Ee.jsx)("button",{onClick:()=>{const e=document.querySelector(".animate-slide-up");e&&(e.classList.add("animate-slide-down"),e.classList.remove("animate-slide-up")),setTimeout(()=>{J(!1),X(""),Z(null),te(""),ae(null),oe(null),ce(""),ue(new Set)},300)},className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-6 h-6 text-gray-500"})})]}),(0,Ee.jsx)("div",{className:"flex-1 overflow-y-auto p-4",style:{height:"calc(90vh - 140px)"},children:y?(0,Ee.jsxs)("div",{className:"text-center py-8",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fb8678] mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\ub313\uae00\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."})]}):0===x.length?(0,Ee.jsxs)("div",{className:"text-center py-8",children:[(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uc544\uc9c1 \ub313\uae00\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{className:"text-gray-500 text-sm",children:"\uccab \ubc88\uc9f8 \ub313\uae00\uc744 \uc791\uc131\ud574\ubcf4\uc138\uc694!"})]}):(0,Ee.jsx)("div",{className:"space-y-4",children:Te.map(e=>(0,Ee.jsxs)("div",{className:"space-y-3",children:[(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsxs)("div",{className:"relative w-8 h-8",children:[(0,Ee.jsx)("div",{className:"w-full h-full overflow-hidden bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-sm font-medium",style:{borderRadius:"12px"},children:e.user_profile_image?(0,Ee.jsx)("img",{src:e.user_profile_image,alt:"".concat(e.user_name,"\uc758 \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):e.user_name.charAt(0)}),"teacher"===e.user_type?(0,Ee.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 rounded-full border-[0.5px] border-blue-500 bg-white flex items-center justify-center cursor-pointer",children:(0,Ee.jsx)("svg",{className:"w-2 h-2 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})})}):e.user_children_images&&e.user_children_images.length>0&&(0,Ee.jsxs)("div",{className:"absolute -bottom-0.5 -right-0.5 flex items-center flex-row-reverse",children:[e.user_children_images.length>2&&(0,Ee.jsx)("div",{className:"w-3 h-3 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center cursor-pointer relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[6px] font-bold",children:["+",e.user_children_images.length-2]})}),e.user_children_images.length>=2&&(0,Ee.jsx)("div",{className:"w-3 h-3 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-20 ".concat(e.user_children_images.length>2?"-mr-[4px]":""),children:e.user_children_images[1]?(0,Ee.jsx)("img",{src:e.user_children_images[1],alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[8px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[8px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{className:"w-3 h-3 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-10 ".concat(e.user_children_images.length>=2?"-mr-[4px]":""),children:e.user_children_images[0]?(0,Ee.jsx)("img",{src:e.user_children_images[0],alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[8px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[8px]",children:"\ud83d\udc64"})})]})]}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("span",{className:"font-semibold text-gray-900 text-sm",children:e.user_name}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500",children:e.is_edited&&e.updated_at?"".concat(Oe(e.updated_at)," (\uc218\uc815\ub428)"):Oe(e.created_at)})]}),c&&!e.is_deleted&&(e.user_id===c.id||e.user_id===c.auth_user_id)&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>Le(e.id),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(hl,{className:"w-4 h-4 text-gray-500"})}),re===e.id&&(0,Ee.jsxs)("div",{className:"absolute right-0 top-8 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[100px]",children:[(0,Ee.jsxs)("button",{onClick:()=>ye(e),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[(0,Ee.jsx)(pl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc218\uc815"})]}),(0,Ee.jsxs)("button",{onClick:()=>Me(e.id),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[(0,Ee.jsx)(xl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc0ad\uc81c"})]})]})]})]}),$===e.id?(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsx)("textarea",{value:Q,onChange:e=>te(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent text-sm resize-none",rows:2}),(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("button",{onClick:be,className:"px-3 py-1 bg-[#fb8678] text-white text-xs rounded-lg hover:bg-[#e67567] transition-colors",children:"\uc800\uc7a5"}),(0,Ee.jsx)("button",{onClick:we,className:"px-3 py-1 bg-gray-500 text-white text-xs rounded-lg hover:bg-gray-600 transition-colors",children:"\ucde8\uc18c"})]})]}):e.is_deleted?(0,Ee.jsx)("p",{className:"text-gray-400 text-sm italic",children:"\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,Ee.jsx)("p",{className:"text-gray-800 text-sm",children:e.content}),!e.is_deleted&&(0,Ee.jsx)("div",{className:"flex items-center space-x-4 mt-2",children:c&&e.user_id!==c.id&&e.user_id!==c.auth_user_id&&(0,Ee.jsx)("button",{onClick:()=>{console.log("\ub313\uae00 \ubaa8\ub2ec \ub0b4 \ub2f5\uae00\ub2ec\uae30 \ubc84\ud2bc \ud074\ub9ad\ub428:",e.id),console.log("\ud604\uc7ac \uc0ac\uc6a9\uc790 ID:",c.id,"auth_user_id:",c.auth_user_id),console.log("\ub313\uae00 \uc791\uc131\uc790 ID:",e.user_id),je(e.id)},className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"})}),ie===e.id&&(0,Ee.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Ee.jsx)("span",{className:"text-[#fb8678] font-medium text-sm",children:"@"}),(0,Ee.jsx)("span",{className:"text-[#fb8678] font-semibold text-sm",children:e.user_name}),(0,Ee.jsx)("span",{className:"text-gray-500 text-sm",children:"\ub2d8\uc5d0\uac8c \ub2f5\uae00"})]}),(0,Ee.jsx)("textarea",{value:le,onChange:e=>ce(e.target.value),placeholder:"\ub2f5\uae00\uc744 \uc785\ub825\ud558\uc138\uc694...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent text-sm resize-none",rows:2}),(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("button",{onClick:Ne,className:"px-3 py-1 bg-[#fb8678] text-white text-xs rounded-lg hover:bg-[#e67567] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"}),(0,Ee.jsx)("button",{onClick:_e,className:"px-3 py-1 bg-gray-500 text-white text-xs rounded-lg hover:bg-gray-600 transition-colors",children:"\ucde8\uc18c"})]})]})]})]}),e.replies&&e.replies.length>0&&(0,Ee.jsx)("div",{className:"ml-8 space-y-3",children:de.has(e.id)?(0,Ee.jsxs)(Ee.Fragment,{children:[e.replies.map(t=>(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsxs)("div",{className:"relative w-6 h-6",children:[(0,Ee.jsx)("div",{className:"w-full h-full overflow-hidden bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-xs font-medium",style:{borderRadius:"8px"},children:t.user_profile_image?(0,Ee.jsx)("img",{src:t.user_profile_image,alt:"".concat(t.user_name,"\uc758 \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):t.user_name.charAt(0)}),"teacher"===t.user_type?(0,Ee.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full border-[0.5px] border-blue-500 bg-white flex items-center justify-center cursor-pointer",children:(0,Ee.jsx)("svg",{className:"w-1.5 h-1.5 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})})}):t.user_children_images&&t.user_children_images.length>0&&(0,Ee.jsxs)("div",{className:"absolute -bottom-0.5 -right-0.5 flex items-center flex-row-reverse",children:[t.user_children_images.length>2&&(0,Ee.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center cursor-pointer relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[5px] font-bold",children:["+",t.user_children_images.length-2]})}),t.user_children_images.length>=2&&(0,Ee.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-20 ".concat(t.user_children_images.length>2?"-mr-[3px]":""),children:t.user_children_images[1]?(0,Ee.jsx)("img",{src:t.user_children_images[1],alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[7px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[7px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{className:"w-2.5 h-2.5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-10 ".concat(t.user_children_images.length>=2?"-mr-[3px]":""),children:t.user_children_images[0]?(0,Ee.jsx)("img",{src:t.user_children_images[0],alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[7px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[7px]",children:"\ud83d\udc64"})})]})]}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("span",{className:"font-semibold text-gray-900 text-xs",children:t.user_name}),(0,Ee.jsx)("span",{className:"text-xs text-gray-400",children:t.is_edited&&t.updated_at?"".concat(Oe(t.updated_at)," (\uc218\uc815\ub428)"):Oe(t.created_at)})]}),c&&!t.is_deleted&&(t.user_id===c.id||t.user_id===c.auth_user_id)&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>Le(t.id),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(hl,{className:"w-3 h-3 text-gray-500"})}),re===t.id&&(0,Ee.jsxs)("div",{className:"absolute right-0 top-6 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[100px]",children:[(0,Ee.jsxs)("button",{onClick:()=>ye(t),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[(0,Ee.jsx)(pl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc218\uc815"})]}),(0,Ee.jsxs)("button",{onClick:()=>Me(t.id),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[(0,Ee.jsx)(xl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc0ad\uc81c"})]})]})]})]}),t.is_deleted?(0,Ee.jsx)("p",{className:"text-gray-400 text-xs italic",children:"\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,Ee.jsxs)("p",{className:"text-gray-800 text-xs",children:[(0,Ee.jsxs)("span",{className:"text-[#fb8678] font-medium",children:["@",e.user_name]}),(0,Ee.jsx)("span",{className:"ml-1",children:t.content})]}),!t.is_deleted&&c&&t.user_id!==c.id&&t.user_id!==c.auth_user_id&&(0,Ee.jsx)("div",{className:"mt-2",children:(0,Ee.jsx)("button",{onClick:()=>{console.log("=== \ub313\uae00 \ubaa8\ub2ec \ub0b4 B\uc758 \ub2f5\uae00\uc5d0 \ub300\ud55c \ub2f5\uae00\ub2ec\uae30 \ubc84\ud2bc \ud074\ub9ad ==="),console.log("\ub2f5\uae00 ID (reply.id):",t.id),console.log("\ub2f5\uae00 \uc791\uc131\uc790:",t.user_name),console.log("\ud604\uc7ac \uc0ac\uc6a9\uc790:",c.nickname||c.full_name),console.log("\ud604\uc7ac replyingToCommentId:",ie),je(t.id)},className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"})}),ie===t.id&&(0,Ee.jsxs)("div",{className:"mt-3 space-y-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Ee.jsx)("span",{className:"text-[#fb8678] font-medium text-xs",children:"@"}),(0,Ee.jsx)("span",{className:"text-[#fb8678] font-semibold text-xs",children:t.user_name}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500",children:"\ub2d8\uc5d0\uac8c \ub2f5\uae00"})]}),(0,Ee.jsx)("textarea",{value:le,onChange:e=>ce(e.target.value),placeholder:"\ub2f5\uae00\uc744 \uc785\ub825\ud558\uc138\uc694...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent text-xs resize-none",rows:2}),(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("button",{onClick:Ne,className:"px-3 py-1 bg-[#fb8678] text-white text-xs rounded-lg hover:bg-[#e67567] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"}),(0,Ee.jsx)("button",{onClick:_e,className:"px-3 py-1 bg-gray-500 text-white text-xs rounded-lg hover:bg-gray-600 transition-colors",children:"\ucde8\uc18c"})]})]})]})]},t.id)),e.replies&&(()=>{const t=e.replies,n=x.filter(e=>e.parent_id&&t.some(t=>t.id===e.parent_id));return n.length>0?(0,Ee.jsx)("div",{className:"space-y-3",children:n.map(e=>{const n=t.find(t=>t.id===e.parent_id);return(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("div",{className:"w-6 h-6 overflow-hidden bg-gradient-to-br from-pink-400 to-purple-500 flex items-center justify-center text-white text-xs font-medium",style:{borderRadius:"8px"},children:e.user_profile_image?(0,Ee.jsx)("img",{src:e.user_profile_image,alt:"".concat(e.user_name,"\uc758 \ud504\ub85c\ud544"),className:"w-full h-full object-cover"}):e.user_name.charAt(0)}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("span",{className:"font-semibold text-gray-900 text-xs",children:e.user_name}),(0,Ee.jsx)("span",{className:"text-xs text-gray-400",children:e.is_edited&&e.updated_at?"".concat(Oe(e.updated_at)," (\uc218\uc815\ub428)"):Oe(e.created_at)})]}),c&&!e.is_deleted&&(e.user_id===c.id||e.user_id===c.auth_user_id)&&(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>Le(e.id),className:"p-1 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(hl,{className:"w-3 h-3 text-gray-500"})}),re===e.id&&(0,Ee.jsxs)("div",{className:"absolute right-0 top-6 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[100px]",children:[(0,Ee.jsxs)("button",{onClick:()=>ye(e),className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center space-x-2",children:[(0,Ee.jsx)(pl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc218\uc815"})]}),(0,Ee.jsxs)("button",{onClick:()=>Me(e.id),className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[(0,Ee.jsx)(xl,{className:"w-4 h-4"}),(0,Ee.jsx)("span",{children:"\uc0ad\uc81c"})]})]})]})]}),e.is_deleted?(0,Ee.jsx)("p",{className:"text-gray-400 text-xs italic",children:"\uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}):(0,Ee.jsxs)("p",{className:"text-gray-800 text-xs",children:[(0,Ee.jsxs)("span",{className:"text-[#fb8678] font-medium",children:["@",null===n||void 0===n?void 0:n.user_name]}),(0,Ee.jsx)("span",{className:"ml-1",children:e.content})]}),!e.is_deleted&&c&&e.user_id!==c.id&&e.user_id!==c.auth_user_id&&(0,Ee.jsx)("div",{className:"mt-2",children:(0,Ee.jsx)("button",{onClick:()=>{console.log("=== \uac8c\uc2dc\uae00 \uc804\uccb4\ubcf4\uae30 \ubaa8\ub2ec \ub0b4 2\ucc28 \ub2f5\uae00\uc5d0 \ub300\ud55c \ub2f5\uae00\ub2ec\uae30 \ubc84\ud2bc \ud074\ub9ad ==="),console.log("\ub2f5\uae00 ID (nestedReply.id):",e.id),console.log("\ub2f5\uae00 \uc791\uc131\uc790:",e.user_name),console.log("\ud604\uc7ac \uc0ac\uc6a9\uc790:",c.nickname||c.full_name),console.log("\ud604\uc7ac replyingToCommentId:",ie),je(e.id)},className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors",children:"\ub2f5\uae00\ub2ec\uae30"})})]})]},e.id)})}):null})(),(0,Ee.jsx)("div",{className:"mt-3",children:(0,Ee.jsxs)("button",{onClick:()=>ke(e.id),className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors ml-9 flex items-center space-x-1",children:[(0,Ee.jsx)("span",{className:"text-gray-400",children:">"}),(0,Ee.jsx)("span",{className:"font-semibold",children:"\ub2f5\uae00 \uc228\uae30\uae30"})]})})]}):(0,Ee.jsxs)("button",{onClick:()=>ke(e.id),className:"text-xs text-gray-500 hover:text-[#fb8678] transition-colors ml-9 flex items-center space-x-1",children:[(0,Ee.jsx)("span",{className:"text-gray-400",children:">"}),(0,Ee.jsxs)("span",{className:"font-semibold",children:["\ub2f5\uae00 ",Ie(e),"\uac1c \ubcf4\uae30"]})]})})]},e.id))})}),(0,Ee.jsx)("div",{className:"p-4 bg-white shadow-[0_-4px_6px_-1px_rgba(0,0,0,0.1)]",children:(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("input",{type:"text",value:G,onChange:e=>X(e.target.value),placeholder:"\ub313\uae00\uc744 \uc785\ub825\ud558\uc138\uc694...",className:"flex-1 px-4 py-3 border border-gray-300 rounded-full focus:ring-2 focus:ring-[#fb8678] focus:border-transparent text-sm",onKeyPress:e=>{"Enter"===e.key&&ve()}}),(0,Ee.jsx)("button",{onClick:ve,disabled:!G.trim(),className:"px-6 py-3 bg-[#fb8678] text-white rounded-full hover:bg-[#e67567] transition-colors disabled:opacity-50 disabled:cursor-not-allowed text-sm font-medium",children:"\uac8c\uc2dc"})]})})]})})]}):(0,Ee.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50 flex items-center justify-center",children:(0,Ee.jsx)("div",{className:"text-center",children:(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uac8c\uc2dc\uae00\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."})})})},Ql=Bo("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),ec=Bo("Smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),tc=()=>{const e=ne(),[t]=Ce(),[n,s]=(0,r.useState)({content:"",location:"",hashtags:[],images:[],emojis:[],category:"",author_id:"",author_name:"",author_profile_image:""}),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(!1),[u,h]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null),[g,p]=(0,r.useState)([]),[x,v]=(0,r.useState)(0),[y,b]=(0,r.useState)(null),[w,j]=(0,r.useState)(null),_=(0,r.useRef)(null),N=t.get("category")||"\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0";(0,r.useEffect)(()=>{(async()=>{try{const{data:{user:t}}=await Se.supabase.auth.getUser();if(console.log("\ud83d\udd10 \ud604\uc7ac \uc778\uc99d\ub41c \uc0ac\uc6a9\uc790:",t),t){const{data:e}=await Se.supabase.from("profiles").select("auth_user_id, full_name, nickname, profile_image_url").eq("auth_user_id",t.id).single();console.log("\ud83d\udc64 OAuth \uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \ub370\uc774\ud130:",e),e&&s(t=>(0,Ae.A)((0,Ae.A)({},t),{},{author_id:e.auth_user_id,author_name:e.nickname||e.full_name,author_profile_image:e.profile_image_url,category:N}))}else{console.log("\ud83d\udcf1 \ud734\ub300\uc804\ud654 \uac00\uc785 \uc0ac\uc6a9\uc790 \ud655\uc778 \uc911...");const t=localStorage.getItem("isLoggedIn"),n=localStorage.getItem("userProfile");if("true"===t&&n)try{const e=JSON.parse(n);console.log("\ud83d\udcf1 localStorage\uc5d0\uc11c \ud30c\uc2f1\ub41c \ud504\ub85c\ud544:",e);const{data:t}=await Se.supabase.from("profiles").select("auth_user_id, full_name, nickname, profile_image_url").eq("auth_user_id",e.id).single();t?(console.log("\u2705 profiles \ud14c\uc774\ube14\uc5d0\uc11c \uac00\uc838\uc628 \uc815\ubcf4:",t),s(e=>(0,Ae.A)((0,Ae.A)({},e),{},{author_id:t.auth_user_id,author_name:t.nickname||t.full_name,author_profile_image:t.profile_image_url,category:N}))):(console.log("\u26a0\ufe0f profiles \ud14c\uc774\ube14\uc5d0 \uc815\ubcf4 \uc5c6\uc74c, localStorage \uc815\ubcf4 \uc0ac\uc6a9"),s(t=>(0,Ae.A)((0,Ae.A)({},t),{},{author_id:e.id,author_name:e.nickname||e.full_name||"",author_profile_image:e.profile_image_url||"",category:N})))}catch(e){console.error("\ud504\ub85c\ud544 \ud30c\uc2f1 \uc624\ub958:",e)}else console.log("\u274c \ub85c\uadf8\uc778 \uc0c1\ud0dc\uac00 \uc544\ub2c8\uac70\ub098 \ud504\ub85c\ud544 \uc815\ubcf4 \uc5c6\uc74c")}}catch(o){console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc870\ud68c \uc624\ub958:",o)}})()},[N]);const k=e=>{if(!m)return;const t=document.createElement("canvas"),n=t.getContext("2d");if(!n)return;const s=new window.Image;s.onload=()=>{let{width:r,height:a}=s,i=0,o=0;switch(e){case"16:9":r/a>16/9?(a=9*r/16,o=(s.height-a)/2):(r=16*a/9,i=(s.width-r)/2);break;case"4:3":r/a>4/3?(a=3*r/4,o=(s.height-a)/2):(r=4*a/3,i=(s.width-r)/2);break;case"9:16":r/a>9/16?(r=9*a/16,i=(s.width-r)/2):(a=16*r/9,o=(s.height-a)/2)}t.width=s.width,t.height=s.height,n.fillStyle="#000000",n.fillRect(0,0,t.width,t.height),n.drawImage(s,i,o,r,a,i,o,r,a),j(t),b(e)},s.src=URL.createObjectURL(m)};return(0,Ee.jsxs)("div",{className:"bg-gradient-to-br from-pink-50 via-purple-50 to-blue-50",children:[(0,Ee.jsx)("div",{className:"bg-white/80 backdrop-blur-sm border-b border-white/50 shadow-lg sticky top-0 z-10",children:(0,Ee.jsx)("div",{className:"max-w-md mx-auto px-4 py-4",children:(0,Ee.jsxs)("div",{className:"flex items-center",children:[(0,Ee.jsx)("button",{onClick:()=>{e("/main?category=".concat(encodeURIComponent(N)))},className:"p-2 rounded-full hover:bg-[#fb8678]/10 transition-colors mr-3",children:(0,Ee.jsx)(Vo,{className:"w-6 h-6 text-[#fb8678]"})}),(0,Ee.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"\uc0c8 \uac8c\uc2dc\uae00 \uc791\uc131"})]})})}),(0,Ee.jsx)("div",{children:(0,Ee.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm py-6 border border-white/50 shadow-lg",children:[(0,Ee.jsx)("div",{className:"mb-6 mx-4 p-4 bg-[#fb8678]/10 border border-[#fb8678]/20 rounded-xl",children:(0,Ee.jsxs)("div",{className:"flex items-center",children:[(0,Ee.jsx)("span",{className:"text-sm font-medium text-[#fb8678] mr-2",children:"\uce74\ud14c\uace0\ub9ac:"}),(0,Ee.jsx)("span",{className:"text-base font-semibold text-[#fb8678]",children:N})]})}),(0,Ee.jsxs)("div",{className:"mb-8",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3 ml-4",children:"\ub0b4\uc6a9"}),(0,Ee.jsx)("textarea",{value:n.content,onChange:e=>{const t=e.target.value;s(e=>(0,Ae.A)((0,Ae.A)({},e),{},{content:t}))},onKeyDown:e=>{if(" "===e.key||"Enter"===e.key){const t=e.currentTarget.value,n=/#[\uac00-\ud7a3a-zA-Z0-9_]+/g,r=t.match(n);if(r){const e=r.map(e=>e.slice(1)),a=t.replace(n,"").trim();s(t=>(0,Ae.A)((0,Ae.A)({},t),{},{content:a,hashtags:[...t.hashtags,...e]}))}}},placeholder:"\ubb34\uc5c7\uc744 \uacf5\uc720\ud558\uace0 \uc2f6\uc73c\uc2e0\uac00\uc694? #\ud574\uc2dc\ud0dc\uadf8 \ub744\uc6cc\uc4f0\uae30\ub97c \ud65c\uc6a9\ud574 \uc0dd\uc131\ud574 \ubcf4\uc138\uc694 (\uc608: #\uc5b4\ub9b0\uc774\uc9d1 #\uc721\uc544\ud301)",className:"w-full p-4 border-t border-b border-gray-300 focus:ring-2 focus:ring-[#fb8678] focus:border-transparent resize-none text-gray-800 text-base leading-relaxed",rows:12}),(0,Ee.jsxs)("div",{className:"flex items-center justify-center py-3 mx-4 space-x-16",children:[(0,Ee.jsxs)("label",{className:"flex flex-col items-center text-gray-500 hover:text-[#fb8678] hover:scale-105 transition-all duration-200 group cursor-pointer",children:[(0,Ee.jsx)("div",{className:"p-3 rounded-xl bg-[#fb8678] shadow-sm group-hover:shadow-md transition-all",children:(0,Ee.jsx)(Ql,{className:"w-5 h-5 text-white"})}),(0,Ee.jsx)("input",{ref:_,type:"file",accept:"image/*",onChange:e=>{if(!e.target.files||0===e.target.files.length)return;const t=e.target.files[0];f(t),b(null),h(!0)},className:"hidden"})]}),(0,Ee.jsx)("button",{onClick:()=>d(!c),className:"flex flex-col items-center text-gray-500 hover:text-[#fb8678] hover:scale-105 transition-all duration-200 group",children:(0,Ee.jsx)("div",{className:"p-3 rounded-xl shadow-sm group-hover:shadow-md transition-all ".concat(c?"bg-[#e67567]":"bg-[#fb8678]"),children:(0,Ee.jsx)(ec,{className:"w-5 h-5 text-white"})})}),"\uc5b4\ub9b0\uc774\uc9d1,\uc720\uce58\uc6d0"===N&&(0,Ee.jsx)("button",{className:"flex flex-col items-center text-gray-500 hover:text-[#fb8678] hover:scale-105 transition-all duration-200 group",children:(0,Ee.jsx)("div",{className:"w-11 h-11 rounded-xl bg-[#fb8678] shadow-sm group-hover:shadow-md transition-all flex items-center justify-center",children:(0,Ee.jsx)("span",{className:"text-white text-lg font-medium",children:"\ud83c\udfeb"})})})]}),n.hashtags.length>0&&(0,Ee.jsx)("div",{className:"mt-4 mx-4",children:(0,Ee.jsx)("div",{className:"flex flex-wrap gap-2",children:n.hashtags.map((e,t)=>(0,Ee.jsxs)("span",{className:"px-3 py-2 bg-[#fb8678]/10 text-[#fb8678] text-sm rounded-full border border-[#fb8678]/20 font-medium",children:["#",e]},t))})}),g.length>0&&(0,Ee.jsx)("div",{className:"mt-4 mx-4",children:(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsxs)("div",{className:"relative w-full h-64 bg-gray-100 rounded-xl overflow-hidden",children:[(0,Ee.jsx)("img",{src:g[x].url,alt:"\uac8c\uc2dc\uae00 \uc774\ubbf8\uc9c0 ".concat(x+1),className:"w-full h-full object-cover"}),g.length>1&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("button",{onClick:()=>{v(e=>0===e?g.length-1:e-1)},className:"absolute left-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-black/50 text-white rounded-full flex items-center justify-center hover:bg-black/70 transition-colors",children:(0,Ee.jsx)(ll,{className:"w-5 h-5"})}),(0,Ee.jsx)("button",{onClick:()=>{v(e=>e===g.length-1?0:e+1)},className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-8 h-8 bg-black/50 text-white rounded-full flex items-center justify-center hover:bg-black/70 transition-colors",children:(0,Ee.jsx)(cl,{className:"w-5 h-5"})})]}),(0,Ee.jsxs)("div",{className:"absolute top-2 right-2 bg-black/50 text-white text-xs px-2 py-1 rounded-full",children:[x+1," / ",g.length]})]}),g.length>1&&(0,Ee.jsx)("div",{className:"flex gap-2 mt-3 overflow-x-auto",children:g.map((e,t)=>(0,Ee.jsx)("button",{onClick:()=>v(t),className:"flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden border-2 transition-all ".concat(t===x?"border-[#fb8678]":"border-gray-200 hover:border-gray-300"),children:(0,Ee.jsx)("img",{src:e.url,alt:"\uc378\ub124\uc77c ".concat(t+1),className:"w-full h-full object-cover"})},e.id))}),(0,Ee.jsx)("button",{onClick:()=>{return e=x,p(t=>t.filter((t,n)=>n!==e)),void s(t=>(0,Ae.A)((0,Ae.A)({},t),{},{images:t.images.filter((t,n)=>n!==e)}));var e},className:"absolute top-2 left-2 w-8 h-8 bg-red-500 text-white rounded-full flex items-center justify-center hover:bg-red-600 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-4 h-4"})})]})}),n.emojis.length>0&&(0,Ee.jsx)("div",{className:"mt-4 mx-4",children:(0,Ee.jsx)("div",{className:"flex flex-wrap gap-2",children:n.emojis.map((e,t)=>(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("span",{className:"text-2xl",children:e}),(0,Ee.jsx)("button",{onClick:()=>(e=>{s(t=>(0,Ae.A)((0,Ae.A)({},t),{},{emojis:t.emojis.filter((t,n)=>n!==e)}))})(t),className:"absolute -top-2 -right-2 w-5 h-5 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-2 h-2"})})]},t))})}),c&&(0,Ee.jsx)("div",{className:"mt-3 mx-4 p-3 bg-white/80 backdrop-blur-sm rounded-xl border border-gray-200",children:(0,Ee.jsx)("div",{className:"flex flex-wrap gap-1",children:["\ud83c\udf1f","\ud83d\udc96","\u2728","\ud83c\udf89","\ud83d\udc4d","\ud83d\udcaf","\ud83c\udf3a","\ud83c\udf08","\ud83c\udf88","\ud83e\udd70","\ud83d\ude0d","\ud83e\udd17","\ud83d\udc95","\ud83d\udc9d","\ud83c\udf8a","\ud83c\udf81"].map((e,t)=>(0,Ee.jsx)("button",{onClick:()=>(e=>{s(t=>(0,Ae.A)((0,Ae.A)({},t),{},{emojis:[...t.emojis,e]}))})(e),className:"text-xl hover:scale-110 transition-transform cursor-pointer p-1 hover:bg-[#fb8678]/10 rounded-lg transition-colors",children:e},t))})})]}),(0,Ee.jsxs)("div",{className:"mb-8 mx-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\uc9c0\uc5ed"}),(0,Ee.jsx)("input",{type:"text",value:n.location,onChange:e=>{s(t=>(0,Ae.A)((0,Ae.A)({},t),{},{location:e.target.value}))},placeholder:"\uc608: \uac15\ub0a8\uad6c",className:"w-full p-4 border border-gray-300 rounded-xl focus:ring-2 focus:ring-[#fb8678] focus:border-transparent text-gray-800 text-base"})]}),o&&(0,Ee.jsx)("div",{className:"mb-4 mx-4 p-3 bg-red-100 border border-red-300 text-red-700 rounded-lg text-sm",children:o}),(0,Ee.jsxs)("div",{className:"flex space-x-3 pt-6 border-t border-gray-100 mx-4",children:[(0,Ee.jsx)("button",{onClick:()=>{e("/main?category=".concat(encodeURIComponent(N)))},disabled:a,className:"flex-1 px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium disabled:opacity-50",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(n.content.trim())if(n.location.trim())if(n.author_id&&"local-user"!==n.author_id){console.log("\ud83d\udcdd \uac8c\uc2dc\uae00 \uc791\uc131 \uc2dc\ub3c4:",{content:n.content.substring(0,50)+"...",location:n.location,author_id:n.author_id,author_name:n.author_name,category:n.category}),i(!0),l("");try{console.log("\ud83d\udd0d \uac8c\uc2dc\uae00 \uc800\uc7a5 \uc2dc\ub3c4:");const{data:{user:t}}=await Se.supabase.auth.getUser();if(console.log("auth.uid():",null===t||void 0===t?void 0:t.id),console.log("postData.author_id:",n.author_id),console.log("postData.author_id \ud0c0\uc785:",typeof n.author_id),console.log("\uc804\uccb4 postData:",n),!n.author_id)throw new Error("\uc791\uc131\uc790 ID\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");const{error:s}=await Se.supabase.from("community_posts").insert({content:n.content,location:n.location,hashtags:n.hashtags,images:n.images,emojis:n.emojis,category:n.category,author_id:n.author_id,author_name:n.author_name,author_profile_image:n.author_profile_image,created_at:(new Date).toISOString()});if(s)throw console.error("\uac8c\uc2dc\uae00 \uc800\uc7a5 \uc624\ub958 \uc0c1\uc138:",s),new Error("\uac8c\uc2dc\uae00 \uc800\uc7a5 \uc2e4\ud328: ".concat(s.message));console.log("\u2705 \uac8c\uc2dc\uae00 \uc791\uc131 \uc131\uacf5!"),e("/main?category=".concat(encodeURIComponent(N)))}catch(o){console.error("\uac8c\uc2dc\uae00 \uc791\uc131 \uc624\ub958:",o),o instanceof Error?l("\uac8c\uc2dc\uae00 \uc791\uc131 \uc2e4\ud328: ".concat(o.message)):l("\uac8c\uc2dc\uae00 \uc791\uc131\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}finally{i(!1)}}else l("\uc0ac\uc6a9\uc790 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694.");else l("\uc9c0\uc5ed\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.");else l("\ub0b4\uc6a9\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.")},disabled:a,className:"flex-1 px-6 py-3 bg-[#fb8678] text-white rounded-xl hover:bg-[#e67567] transition-colors font-medium disabled:opacity-50",children:a?"\uac8c\uc2dc \uc911...":"\uac8c\uc2dc\ud558\uae30"})]})]})}),u&&m&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black flex items-center justify-center z-50",children:(0,Ee.jsxs)("div",{className:"w-full h-full flex flex-col",children:[(0,Ee.jsx)("div",{className:"bg-black/90 backdrop-blur-md border-b border-white/10 p-4",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:()=>{h(!1),f(null),b(null),j(null),_.current&&(_.current.value="")},className:"p-2 rounded-full hover:bg-white/10 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-6 h-6 text-white"})}),(0,Ee.jsx)("h3",{className:"text-lg font-semibold text-white",children:"\ud3b8\uc9d1"}),(0,Ee.jsx)("button",{onClick:()=>{y&&(e=>{if(!m)return;const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)return;const a=new window.Image;a.onload=()=>{let{width:i,height:c}=a,d=0,u=0;switch(e){case"16:9":i/c>16/9?(c=9*i/16,u=(a.height-c)/2):(i=16*c/9,d=(a.width-i)/2);break;case"4:3":i/c>4/3?(c=3*i/4,u=(a.height-c)/2):(i=4*c/3,d=(a.width-i)/2);break;case"9:16":i/c>9/16?(i=9*c/16,d=(a.width-i)/2):(c=16*i/9,u=(a.height-c)/2)}t.width=i,t.height=c,r.drawImage(a,d,u,i,c,0,0,i,c),t.toBlob(async t=>{if(t)try{const r=m.name.split(".").pop(),a="".concat(Date.now(),"-").concat(Math.random(),".").concat(r),o="".concat(a);console.log("\ud83d\udce4 \uc5c5\ub85c\ub4dc \uc2dc\ub3c4:",{bucket:"community-images",filePath:o,fileSize:t.size,fileType:t.type,currentUser:n.author_id,currentUserName:n.author_name});const{data:{user:l}}=await Se.supabase.auth.getUser();console.log("\ud83d\udd10 \uc5c5\ub85c\ub4dc \uc2dc\uc810 \uc778\uc99d \uc0c1\ud0dc:",l);const{error:d}=await Se.supabase.storage.from("community-images").upload(o,t,{cacheControl:"3600",upsert:!1});if(d)throw console.error("Supabase Storage \uc624\ub958 \uc0c1\uc138:",d),new Error("\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc2e4\ud328: ".concat(d.message));console.log("\uc5c5\ub85c\ub4dc \uc131\uacf5:",o);const{data:{publicUrl:u}}=Se.supabase.storage.from("community-images").getPublicUrl(o),g={id:a,url:u,aspectRatio:e,orientation:i>c?"landscape":"portrait"};p(e=>[...e,g]),s(e=>(0,Ae.A)((0,Ae.A)({},e),{},{images:[...e.images,u]})),h(!1),f(null),b(null),j(null),_.current&&(_.current.value="")}catch(o){console.error("\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc624\ub958:",o),o instanceof Error?o.message.includes("row-level security policy")?l("\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \ud734\ub300\uc804\ud654 \uac00\uc785 \uc0ac\uc6a9\uc790\ub294 Storage \uc811\uadfc \uad8c\ud55c\uc774 \uc81c\ud55c\ub429\ub2c8\ub2e4."):o.message.includes("bucket")?l("Storage \ubc84\ud0b7\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. Supabase \uc124\uc815\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694."):l("\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc \uc2e4\ud328: ".concat(o.message)):l("\uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. Supabase \uc124\uc815\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694.")}},"image/jpeg",.8)},a.src=URL.createObjectURL(m)})(y)},disabled:!y,className:"px-4 py-2 rounded-full text-sm font-medium transition-all ".concat(y?"bg-[#fb8678] text-white hover:bg-[#e67567]":"bg-white/20 text-white/50 cursor-not-allowed"),children:"\ub2e4\uc74c"})]})}),(0,Ee.jsx)("div",{className:"flex-1 flex items-center justify-center bg-gradient-to-b from-black via-gray-900 to-black p-4 relative",children:y&&w?(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("canvas",{ref:e=>{if(e&&w){const t=e.getContext("2d");t&&(e.width=w.width,e.height=w.height,t.drawImage(w,0,0))}},className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",style:{maxWidth:"90vw",maxHeight:"75vh"}}),(0,Ee.jsx)("div",{className:"absolute top-4 left-4 bg-black/80 backdrop-blur-sm text-white px-3 py-2 rounded-full text-sm font-medium border border-white/20",children:"original"===y?"\uc6d0\ubcf8":"16:9"===y?"16:9":"4:3"===y?"4:3":"9:16"})]}):(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("img",{src:URL.createObjectURL(m),alt:"\ud3b8\uc9d1\ud560 \uc774\ubbf8\uc9c0",className:"max-w-full max-h-full object-contain rounded-2xl",style:{maxWidth:"90vw",maxHeight:"75vh"}}),(0,Ee.jsx)("div",{className:"absolute top-4 left-4 bg-black/80 backdrop-blur-sm text-white px-3 py-2 rounded-full text-sm font-medium border border-white/20",children:"\uc6d0\ubcf8"})]})}),(0,Ee.jsx)("div",{className:"bg-black/95 backdrop-blur-md border-t border-white/10 p-6",children:(0,Ee.jsxs)("div",{className:"mb-6",children:[(0,Ee.jsx)("h4",{className:"text-sm font-medium text-white/80 mb-4 text-center",children:"\ube44\uc728 \uc120\ud0dd"}),(0,Ee.jsxs)("div",{className:"flex justify-center space-x-4",children:[(0,Ee.jsxs)("button",{onClick:()=>k("original"),className:"flex flex-col items-center p-4 rounded-2xl transition-all duration-300 ".concat("original"===y?"bg-[#fb8678] text-white shadow-lg shadow-[#fb8678]/30 scale-105":"bg-white/10 text-white/80 hover:bg-white/20 hover:scale-105 border border-white/20"),children:[(0,Ee.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-lg mb-2 flex items-center justify-center",children:(0,Ee.jsx)("div",{className:"w-6 h-4 bg-white rounded-sm"})}),(0,Ee.jsx)("div",{className:"font-medium text-sm",children:"\uc6d0\ubcf8"})]}),(0,Ee.jsxs)("button",{onClick:()=>k("16:9"),className:"flex flex-col items-center p-4 rounded-2xl transition-all duration-300 ".concat("16:9"===y?"bg-[#fb8678] text-white shadow-lg shadow-[#fb8678]/30 scale-105":"bg-white/10 text-white/80 hover:bg-white/20 hover:scale-105 border border-white/20"),children:[(0,Ee.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-lg mb-2 flex items-center justify-center",children:(0,Ee.jsx)("div",{className:"w-6 h-3 bg-white rounded-sm"})}),(0,Ee.jsx)("div",{className:"font-medium text-sm",children:"16:9"})]}),(0,Ee.jsxs)("button",{onClick:()=>k("4:3"),className:"flex flex-col items-center p-4 rounded-2xl transition-all duration-300 ".concat("4:3"===y?"bg-[#fb8678] text-white shadow-lg shadow-[#fb8678]/30 scale-105":"bg-white/10 text-white/80 hover:bg-white/20 hover:scale-105 border border-white/20"),children:[(0,Ee.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-lg mb-2 flex items-center justify-center",children:(0,Ee.jsx)("div",{className:"w-5 h-4 bg-white rounded-sm"})}),(0,Ee.jsx)("div",{className:"font-medium text-sm",children:"4:3"})]}),(0,Ee.jsxs)("button",{onClick:()=>k("9:16"),className:"flex flex-col items-center p-4 rounded-2xl transition-all duration-300 ".concat("9:16"===y?"bg-[#fb8678] text-white shadow-lg shadow-[#fb8678]/30 scale-105":"bg-white/10 text-white/80 hover:bg-white/20 hover:scale-105 border border-white/20"),children:[(0,Ee.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-lg mb-2 flex items-center justify-center",children:(0,Ee.jsx)("div",{className:"w-4 h-8 bg-white rounded-sm"})}),(0,Ee.jsx)("div",{className:"font-medium text-sm",children:"9:16"})]})]})]})})]})})]})},nc=Bo("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),sc=()=>{const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)(!0),[a,i]=(0,r.useState)(null),o=ne(),{refreshUnreadCount:l}=al(),[c,d]=(0,r.useState)({});(0,r.useEffect)(()=>{(async()=>{try{const{data:{user:e}}=await Se.supabase.auth.getUser();if(e){const{data:t}=await Se.supabase.from("profiles").select("*").eq("auth_user_id",e.id).single();t&&i(t)}else{const e=localStorage.getItem("isLoggedIn"),t=localStorage.getItem("userProfile");if("true"===e&&t){const e=JSON.parse(t);i(e)}}}catch(e){console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \uc870\ud68c \uc624\ub958:",e)}})()},[]);(0,r.useEffect)(()=>{a&&(async()=>{if(a){s(!0);try{const e=a.id||a.auth_user_id;console.log("=== \uc54c\ub9bc \uc870\ud68c \ub514\ubc84\uae45 ==="),console.log("currentUser:",a),console.log("\uc0ac\uc6a9\ud560 userId:",e);const{data:n,error:s}=await Se.supabase.from("notifications").select("\n          *,\n          posts:post_id(content)\n        ").eq("to_user_id",e).order("created_at",{ascending:!1});if(console.log("\uc54c\ub9bc \uc870\ud68c \uacb0\uacfc:",{data:n,error:s}),s)return void console.error("\uc54c\ub9bc \uc870\ud68c \uc624\ub958:",s);const r=await Promise.all((n||[]).map(async e=>{var t,n,s,r,a,i,o,l,c,d;let u=null;const{data:h}=await Se.supabase.from("profiles").select("user_type, children_info").eq("id",e.from_user_id).maybeSingle();if(h)u=h;else{const{data:t}=await Se.supabase.from("profiles").select("user_type, children_info").eq("auth_user_id",e.from_user_id).maybeSingle();u=t}const m="parent"===(null===(t=u)||void 0===t?void 0:t.user_type)&&null!==(n=u)&&void 0!==n&&n.children_info?u.children_info.map(e=>e.profile_image_url||null):[];return{id:e.id,to_user_id:e.to_user_id,type:e.type,post_id:e.post_id,comment_id:e.comment_id,from_user_id:e.from_user_id,payload:{from_user_name:(null===(s=e.payload)||void 0===s?void 0:s.from_user_name)||"\uc54c \uc218 \uc5c6\uc74c",from_user_profile_image:(null===(r=e.payload)||void 0===r?void 0:r.from_user_profile_image)||"",post_title:(null===(a=e.posts)||void 0===a?void 0:a.content)||(null===(i=e.payload)||void 0===i?void 0:i.post_title)||"",comment_content:(null===(o=e.payload)||void 0===o?void 0:o.comment_content)||"",kindergarten_name:(null===(l=e.payload)||void 0===l?void 0:l.kindergarten_name)||"",message:(null===(c=e.payload)||void 0===c?void 0:c.message)||""},created_at:e.created_at,is_read:e.is_read,from_user_type:null===(d=u)||void 0===d?void 0:d.user_type,from_user_children_images:m}}));t(r)}catch(e){console.error("\uc54c\ub9bc \uc870\ud68c \uc624\ub958:",e)}finally{s(!1)}}})()},[a]);const u=async e=>{try{console.log("\uc54c\ub9bc \uc0ad\uc81c \ucc98\ub9ac:",e);const{error:n}=await Se.supabase.from("notifications").delete().eq("id",e);if(n)return void console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958:",n);console.log("\uc54c\ub9bc \uc0ad\uc81c \uc131\uacf5"),t(t=>t.filter(t=>t.id!==e)),await l()}catch(n){console.error("\uc54c\ub9bc \uc0ad\uc81c \uc624\ub958:",n)}},h=e=>{const t=new Date,n=new Date(e),s=Math.floor((t.getTime()-n.getTime())/6e4);if(s<1)return"\ubc29\uae08 \uc804";if(s<60)return"".concat(s,"\ubd84 \uc804");const r=Math.floor(s/60);if(r<24)return"".concat(r,"\uc2dc\uac04 \uc804");const a=Math.floor(r/24);return a<7?"".concat(a,"\uc77c \uc804"):n.toLocaleDateString("ko-KR")};return(0,Ee.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Ee.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",children:(0,Ee.jsx)("div",{className:"px-4 py-3",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ee.jsx)("button",{onClick:()=>o(-1),className:"p-2 text-gray-600 hover:text-[#fb8678] transition-colors",children:(0,Ee.jsx)(Vo,{className:"w-5 h-5"})}),(0,Ee.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"\uc54c\ub9bc"})]}),(0,Ee.jsx)("button",{onClick:()=>o("/notifications/settings"),className:"p-2 text-gray-600 hover:text-[#fb8678] transition-colors",children:(0,Ee.jsx)(nc,{className:"w-5 h-5"})})]})})}),(0,Ee.jsx)("div",{className:"p-4",children:n?(0,Ee.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fb8678]"})}):0===e.length?(0,Ee.jsxs)("div",{className:"text-center py-12",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-[#fb8678]/10 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ee.jsx)(Qo,{className:"w-8 h-8 text-[#fb8678]"})}),(0,Ee.jsx)("p",{className:"text-gray-500 text-sm",children:"\uc0c8\ub85c\uc6b4 \uc54c\ub9bc\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]}):(0,Ee.jsx)("div",{className:"space-y-3",children:e.map(e=>{const t=(e=>"like"===e.type?{icon:(0,Ee.jsx)(ml,{className:"w-5 h-5 text-red-500 fill-current"}),message:(0,Ee.jsxs)("span",{children:[(0,Ee.jsx)("span",{className:"font-semibold text-gray-900",children:e.payload.from_user_name}),"\ub2d8\uc774 \ud68c\uc6d0\ub2d8\uc758 \uac8c\uc2dc\uae00\uc5d0 ",(0,Ee.jsx)("span",{className:"text-red-500 font-semibold",children:"\ud558\ud2b8"}),"\ub97c \ub20c\ub800\uc2b5\ub2c8\ub2e4."]})}:"reply"===e.type?{icon:(0,Ee.jsx)(fl,{className:"w-5 h-5 text-green-500"}),message:(0,Ee.jsxs)("span",{children:[(0,Ee.jsx)("span",{className:"font-semibold text-gray-900",children:e.payload.from_user_name}),"\ub2d8\uc774 \ud68c\uc6d0\ub2d8\uc758 \ub313\uae00\uc5d0 ",(0,Ee.jsx)("span",{className:"text-green-500 font-semibold",children:"\ub2f5\uae00"}),"\uc744 \ub2ec\uc558\uc2b5\ub2c8\ub2e4."]})}:"comment"===e.type?{icon:(0,Ee.jsx)(fl,{className:"w-5 h-5 text-blue-500"}),message:(0,Ee.jsxs)("span",{children:[(0,Ee.jsx)("span",{className:"font-semibold text-gray-900",children:e.payload.from_user_name}),"\ub2d8\uc774 \ud68c\uc6d0\ub2d8\uc758 \uac8c\uc2dc\uae00\uc5d0 ",(0,Ee.jsx)("span",{className:"text-blue-500 font-semibold",children:"\ub313\uae00"}),"\uc744 \ub2ec\uc558\uc2b5\ub2c8\ub2e4."]})}:"review_like"===e.type?{icon:(0,Ee.jsx)(ml,{className:"w-5 h-5 text-red-500 fill-current"}),message:(0,Ee.jsxs)("span",{children:[(0,Ee.jsx)("span",{className:"font-semibold text-gray-900",children:e.payload.from_user_name}),"\ub2d8\uc774 ",(0,Ee.jsx)("span",{className:"text-[#fb8678] font-semibold",children:e.payload.kindergarten_name})," \uce6d\ucc2c\uc5d0 ",(0,Ee.jsx)("span",{className:"text-red-500 font-semibold",children:"\ud558\ud2b8"}),"\ub97c \ub20c\ub800\uc2b5\ub2c8\ub2e4."]})}:{icon:(0,Ee.jsx)(fl,{className:"w-5 h-5 text-gray-500"}),message:"\uc0c8\ub85c\uc6b4 \uc54c\ub9bc\uc774 \uc788\uc2b5\ub2c8\ub2e4."})(e),n=c[e.id],s=(null===n||void 0===n?void 0:n.currentX)||0;return(0,Ee.jsx)("div",{className:"bg-white rounded-xl p-4 shadow-sm border transition-all ".concat(e.is_read?"border-gray-100":"border-[#fb8678] bg-[#fb8678]/10 shadow-md ring-1 ring-[#fb8678]/20"),style:{transform:"translateX(".concat(s,"px)"),transition:null!==n&&void 0!==n&&n.isDragging?"none":"transform 0.3s ease-out"},onTouchStart:t=>((e,t)=>{const n=e.touches[0];d(e=>(0,Ae.A)((0,Ae.A)({},e),{},{[t]:{startX:n.clientX,currentX:0,isDragging:!0}}))})(t,e.id),onTouchMove:t=>((e,t)=>{const n=c[t];if(!n||!n.isDragging)return;const s=e.touches[0].clientX-n.startX;s<0&&d(e=>(0,Ae.A)((0,Ae.A)({},e),{},{[t]:(0,Ae.A)((0,Ae.A)({},n),{},{currentX:s})}))})(t,e.id),onTouchEnd:()=>(e=>{const t=c[e];if(!t)return;t.currentX<-100&&u(e),d(t=>(0,Ae.A)((0,Ae.A)({},t),{},{[e]:{startX:0,currentX:0,isDragging:!1}}))})(e.id),children:(0,Ee.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Ee.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,Ee.jsxs)("div",{className:"w-10 h-10 bg-[#fb8678] rounded-2xl flex items-center justify-center shadow-lg overflow-hidden",children:[e.payload.from_user_profile_image?(0,Ee.jsx)("img",{src:e.payload.from_user_profile_image,alt:"\ud504\ub85c\ud544",className:"w-full h-full object-cover",onError:t=>{var n;console.error("\ud504\ub85c\ud544 \uc774\ubbf8\uc9c0 \ub85c\ub529 \uc2e4\ud328:",e.payload.from_user_profile_image),t.currentTarget.style.display="none",null===(n=t.currentTarget.nextElementSibling)||void 0===n||n.classList.remove("hidden")}}):null,(0,Ee.jsx)("span",{className:"text-white font-bold text-sm ".concat(e.payload.from_user_profile_image?"hidden":""),children:"\ud83d\udc64"})]}),"teacher"===e.from_user_type?(0,Ee.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 rounded-full border-[0.5px] border-blue-500 bg-white flex items-center justify-center cursor-pointer",children:(0,Ee.jsx)("svg",{className:"w-2 h-2 text-blue-500",fill:"currentColor",viewBox:"0 0 20 20",children:(0,Ee.jsx)("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})})}):e.from_user_children_images&&e.from_user_children_images.length>0&&(0,Ee.jsxs)("div",{className:"absolute -bottom-0.5 -right-0.5 flex items-center flex-row-reverse",children:[e.from_user_children_images.length>2&&(0,Ee.jsx)("div",{className:"w-3.5 h-3.5 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center cursor-pointer relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[6px] font-bold",children:["+",e.from_user_children_images.length-2]})}),e.from_user_children_images.length>=2&&(0,Ee.jsx)("div",{className:"w-3.5 h-3.5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-20 ".concat(e.from_user_children_images.length>2?"-mr-[4px]":""),children:e.from_user_children_images[1]?(0,Ee.jsx)("img",{src:e.from_user_children_images[1],alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[8px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[8px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{className:"w-3.5 h-3.5 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden cursor-pointer relative z-10 ".concat(e.from_user_children_images.length>=2?"-mr-[4px]":""),children:e.from_user_children_images[0]?(0,Ee.jsx)("img",{src:e.from_user_children_images[0],alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover",onError:e=>{e.currentTarget.style.display="none";const t=e.currentTarget.parentElement;if(t){const e=document.createElement("span");e.className="text-gray-400 text-[8px]",e.textContent="\ud83d\udc64",t.appendChild(e)}}}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[8px]",children:"\ud83d\udc64"})})]})]}),(0,Ee.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ee.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-2 mb-1",children:[t.icon,(0,Ee.jsx)("span",{className:"text-sm font-semibold text-gray-900",children:e.payload.from_user_name})]}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-500 flex-shrink-0",children:h(e.created_at)}),(0,Ee.jsx)("button",{onClick:t=>{t.stopPropagation(),u(e.id)},className:"p-1 text-gray-400 hover:text-red-500 hover:bg-red-50 rounded-full transition-colors",title:"\uc54c\ub9bc \uc0ad\uc81c",children:(0,Ee.jsx)(gl,{className:"w-4 h-4"})})]})]}),(0,Ee.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:t.message}),e.payload.post_title&&(0,Ee.jsxs)("div",{className:"bg-gray-50 rounded-lg p-2 mb-2",children:[(0,Ee.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"\uac8c\uc2dc\uae00"}),(0,Ee.jsx)("p",{className:"text-xs text-gray-800 line-clamp-2",children:e.payload.post_title.length>100?e.payload.post_title.substring(0,100)+"...":e.payload.post_title})]}),e.payload.comment_content&&(0,Ee.jsxs)("div",{className:"bg-[#fb8678]/10 rounded-lg p-2",children:[(0,Ee.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"\ub313\uae00"}),(0,Ee.jsx)("p",{className:"text-xs text-gray-800 line-clamp-2 font-semibold",children:e.payload.comment_content})]}),"review_like"===e.type&&e.payload.kindergarten_name&&(0,Ee.jsxs)("div",{className:"bg-orange-50 rounded-lg p-2",children:[(0,Ee.jsx)("p",{className:"text-xs text-gray-600 font-medium",children:"\uc720\uce58\uc6d0"}),(0,Ee.jsx)("p",{className:"text-xs text-gray-800 font-semibold",children:e.payload.kindergarten_name})]})]})]})},e.id)})})})]})},rc={notice:!0,post:!0,comment:!0,reply:!0,review:!0},ac="notificationSettings",ic=()=>{const e=ne(),[t,n]=(0,r.useState)(rc),[s,a]=(0,r.useState)(!1);(0,r.useEffect)(()=>{try{const e=localStorage.getItem(ac);if(e){const t=JSON.parse(e);n((0,Ae.A)((0,Ae.A)({},rc),t))}}catch(yd){console.error("\uc54c\ub9bc \uc124\uc815 \ub85c\ub4dc \uc624\ub958:",yd)}finally{a(!0)}},[]),(0,r.useEffect)(()=>{if(s)try{localStorage.setItem(ac,JSON.stringify(t))}catch(yd){console.error("\uc54c\ub9bc \uc124\uc815 \uc800\uc7a5 \uc624\ub958:",yd)}},[s,t]);const i=e=>{n({notice:e,post:e,comment:e,reply:e,review:e})},o=[{key:"notice",title:"\uacf5\uc9c0\uc0ac\ud56d",desc:"\uc11c\ube44\uc2a4 \uacf5\uc9c0 \ubc0f \uc911\uc694 \uc54c\ub9bc \uc218\uc2e0"},{key:"post",title:"\uac8c\uc2dc\uae00",desc:"\ub0b4 \uac8c\uc2dc\uae00 \uad00\ub828 \ud65c\ub3d9 \uc54c\ub9bc"},{key:"comment",title:"\ub313\uae00",desc:"\ub0b4 \uac8c\uc2dc\uae00\uc5d0 \ub2ec\ub9b0 \ub313\uae00 \uc54c\ub9bc"},{key:"reply",title:"\ub2f5\uae00",desc:"\ub0b4 \ub313\uae00\uc5d0 \ub2ec\ub9b0 \ub2f5\uae00 \uc54c\ub9bc"},{key:"review",title:"\ub9ac\ubdf0",desc:"\ub9ac\ubdf0 \uad00\ub828 \ud65c\ub3d9 \uc54c\ub9bc"}],l=o.every(e=>t[e.key]),c=o.every(e=>!t[e.key]);return(0,Ee.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Ee.jsx)("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50",children:(0,Ee.jsx)("div",{className:"px-4 py-3",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ee.jsx)("button",{onClick:()=>e(-1),className:"p-2 text-gray-600 hover:text-[#fb8678] transition-colors",children:(0,Ee.jsx)(Vo,{className:"w-5 h-5"})}),(0,Ee.jsx)("h1",{className:"text-lg font-bold text-gray-900",children:"\uc54c\ub9bc \uc124\uc815"})]}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("button",{onClick:()=>i(!0),className:"px-3 py-1.5 text-xs font-semibold rounded-full bg-[#fb8678]/10 text-[#fb8678] hover:bg-[#fb8678]/20 transition-colors",disabled:l,children:"\uc804\uccb4 \ucf1c\uae30"}),(0,Ee.jsx)("button",{onClick:()=>i(!1),className:"px-3 py-1.5 text-xs font-semibold rounded-full bg-gray-100 text-gray-700 hover:bg-gray-200 transition-colors",disabled:c,children:"\uc804\uccb4 \ub044\uae30"})]})]})})}),(0,Ee.jsxs)("div",{className:"p-4 space-y-3",children:[(0,Ee.jsx)("div",{className:"bg-white rounded-xl p-4 shadow-sm border border-gray-100",children:(0,Ee.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,Ee.jsx)("div",{className:"w-10 h-10 bg-[#fb8678] rounded-2xl flex items-center justify-center shadow-lg flex-shrink-0",children:(0,Ee.jsx)(Qo,{className:"w-5 h-5 text-white"})}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsx)("p",{className:"text-sm text-gray-800 font-semibold",children:"\uc218\uc2e0\ud560 \uc54c\ub9bc \uc720\ud615\uc744 \uc120\ud0dd\ud558\uc138\uc694"}),(0,Ee.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\uc124\uc815\uc740 \uc774 \uae30\uae30\uc5d0 \uc800\uc7a5\ub429\ub2c8\ub2e4. \ucd94\ud6c4 \uc11c\ubc84 \ub3d9\uae30\ud654\uac00 \ucd94\uac00\ub420 \uc608\uc815\uc785\ub2c8\ub2e4."})]})]})}),(0,Ee.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 divide-y",children:o.map(e=>(0,Ee.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:e.title}),(0,Ee.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:e.desc})]}),(0,Ee.jsx)("button",{onClick:()=>{return t=e.key,void n(e=>(0,Ae.A)((0,Ae.A)({},e),{},{[t]:!e[t]}));var t},className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors ".concat(t[e.key]?"bg-[#fb8678]":"bg-gray-300"),"aria-pressed":t[e.key],"aria-label":"".concat(e.title," \uc54c\ub9bc ").concat(t[e.key]?"\ucf1c\uc9d0":"\uaebc\uc9d0"),children:(0,Ee.jsx)("span",{className:"inline-block h-5 w-5 transform rounded-full bg-white transition-transform ".concat(t[e.key]?"translate-x-5":"translate-x-1")})})]},e.key))})]})]})},oc=Bo("ImageOff",[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M10.41 10.41a2 2 0 1 1-2.83-2.83",key:"1bzlo9"}],["line",{x1:"13.5",x2:"6",y1:"13.5",y2:"21",key:"1q0aeu"}],["line",{x1:"18",x2:"21",y1:"12",y2:"15",key:"5mozeu"}],["path",{d:"M3.59 3.59A1.99 1.99 0 0 0 3 5v14a2 2 0 0 0 2 2h14c.55 0 1.052-.22 1.41-.59",key:"mmje98"}],["path",{d:"M21 15V5a2 2 0 0 0-2-2H9",key:"43el77"}]]),lc=Bo("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),cc=Bo("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),dc=Bo("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),uc=Bo("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),hc=Bo("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),mc="https://fxkftrczarwuytnufprv.supabase.co",fc="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4a2Z0cmN6YXJ3dXl0bnVmcHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODM5NzgsImV4cCI6MjA3MTY1OTk3OH0.L0zzO_KooHRwJdf6z92Cla05pSH8UF7PRGVDK8lS3Ns";console.log("\ud658\uacbd \ubcc0\uc218 \ud655\uc778:",{supabaseUrl:mc?"\uc124\uc815\ub428":"\uc124\uc815\ub418\uc9c0 \uc54a\uc74c",supabaseKey:fc?"\uc124\uc815\ub428":"\uc124\uc815\ub418\uc9c0 \uc54a\uc74c",allEnvKeys:Object.keys({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CHILDCARE_API_KEY:"0e5ed5cfc4c24c2fa8e2cd14558a1688",REACT_APP_CHILDCARE_DETAIL_API_KEY:"f0b9445663684ec5a0fdbce85aa799ff",REACT_APP_CHILDCARE_SEARCH_API_KEY:"123efade8fc94516a2bbb109bb4d3fc5",REACT_APP_KAKAO_MAP_KEY:"270c11461f58d9b67430ed591295dd49",REACT_APP_KAKAO_REST_KEY:"5f0dbbbe9e62053d846a67003eadab91",REACT_APP_KINDERGARTEN_API_KEY:"c5aef787ac5a4473a74264b4b5bfce74",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4a2Z0cmN6YXJ3dXl0bnVmcHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODM5NzgsImV4cCI6MjA3MTY1OTk3OH0.L0zzO_KooHRwJdf6z92Cla05pSH8UF7PRGVDK8lS3Ns",REACT_APP_SUPABASE_URL:"https://fxkftrczarwuytnufprv.supabase.co"}).filter(e=>e.startsWith("REACT_APP_"))});class gc{constructor(){this.supabase=Se.supabase,this.bucketName="kindergarten-cache",this.cacheExpiryDays=7}pathPrefixByCode(e,t){return"regions/".concat(e,"/").concat(t)}latestPathByCode(e,t){return"".concat(this.pathPrefixByCode(e,t),"/latest.json")}pathPrefixLegacy(e,t){const n=encodeURIComponent(e),s=encodeURIComponent(t);return"regions/".concat(n,"/").concat(s)}findRegionCodes(e,t){const n=Hl[e];if(!n)throw new Error("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uc2dc\ub3c4: ".concat(e));const s=n.sggCodes[t];if(void 0===s)throw new Error("\uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \uc2dc\uad70\uad6c: ".concat(t));return{sidoCode:n.sidoCode.toString(),sggCode:String(s)}}snapshotPathByCode(e,t,n){return"".concat(this.pathPrefixByCode(e,t),"/").concat(n,".json")}async getCachedDataByCode(e,t){try{const n=this.latestPathByCode(e,t),{data:s,error:r}=await this.supabase.storage.from(this.bucketName).list(this.pathPrefixByCode(e,t));if(r||!s||0===s.length)return console.log("\ud83d\udcc1 Storage\uc5d0 \uce90\uc2dc \uc5c6\uc74c: ".concat(e,"/").concat(t)),null;if(!s.some(e=>"latest.json"===e.name))return console.log("\ud83d\udcc1 Storage\uc5d0 \uce90\uc2dc \uc5c6\uc74c: ".concat(e,"/").concat(t)),null;const{data:a,error:i}=await this.supabase.storage.from(this.bucketName).download(n);if(i||!a)return console.log("\uce90\uc2dc \uc77d\uae30 \uc2e4\ud328: ".concat(e,"/").concat(t)),null;const o=await a.text(),l=JSON.parse(o),c=new Date(l.meta.lastSyncedAt).getTime(),d=(Date.now()-c)/864e5;return d>this.cacheExpiryDays?(console.log("\uce90\uc2dc \ub9cc\ub8cc: ".concat(e,"/").concat(t," (").concat(d.toFixed(1),"\uc77c \uacbd\uacfc)")),null):(console.log("\u2705 \uce90\uc2dc \uc0ac\uc6a9: ".concat(e,"/").concat(t," (").concat(l.data.length,"\uac1c \ub370\uc774\ud130, ").concat(d.toFixed(1),"\uc77c \uc804)")),l.data)}catch(n){return console.error("\uce90\uc2dc \uc870\ud68c \uc624\ub958:",n),null}}async getCachedData(e,t){const{sidoCode:n,sggCode:s}=this.findRegionCodes(e,t);return this.getCachedDataByCode(n,s)}async getCacheMetadata(e,t){try{const{sidoCode:n,sggCode:s}=this.findRegionCodes(e,t),r=this.pathPrefixByCode(n,s),{data:a,error:i}=await this.supabase.storage.from(this.bucketName).list(r,{limit:1,sortBy:{column:"updated_at",order:"desc"}});if(i||!a||0===a.length)return null;const o=a[0],l=new Date(o.updated_at),c=(Date.now()-l.getTime())/864e5;return{sido:e,sgg:t,lastUpdated:o.updated_at,dataCount:0,filePath:"".concat(r,"/").concat(o.name),isExpired:c>this.cacheExpiryDays}}catch(n){return console.error("\uce90\uc2dc \uba54\ud0c0\ub370\uc774\ud130 \uc870\ud68c \uc624\ub958:",n),null}}async deleteCache(e,t){try{const{sidoCode:n,sggCode:s}=this.findRegionCodes(e,t),r=this.pathPrefixByCode(n,s),{data:a}=await this.supabase.storage.from(this.bucketName).list(r);if(!a||0===a.length)return void console.log("\uc0ad\uc81c\ud560 \uce90\uc2dc \uc5c6\uc74c: ".concat(e,"/").concat(t));const i=a.map(e=>"".concat(r,"/").concat(e.name)),{error:o}=await this.supabase.storage.from(this.bucketName).remove(i);if(o)throw o;console.log("\ud83d\uddd1\ufe0f \uce90\uc2dc \uc0ad\uc81c \uc644\ub8cc: ".concat(e,"/").concat(t," (").concat(i.length,"\uac1c \ud30c\uc77c)"))}catch(n){throw console.error("\uce90\uc2dc \uc0ad\uc81c \uc624\ub958:",n),n}}async cleanupOldCache(e,t){try{const n=e&&t?this.pathPrefixByCode(this.findRegionCodes(e,t).sidoCode,this.findRegionCodes(e,t).sggCode):"regions",{data:s}=await this.supabase.storage.from(this.bucketName).list(n,{limit:1e3});if(!s)return;const r=Date.now()-24*this.cacheExpiryDays*60*60*1e3,a=[];for(const e of s){new Date(e.updated_at).getTime()<r&&"latest.json"!==e.name&&a.push("".concat(n,"/").concat(e.name))}a.length>0&&(await this.supabase.storage.from(this.bucketName).remove(a),console.log("\ud83e\uddf9 \uc624\ub798\ub41c \uce90\uc2dc \uc815\ub9ac \uc644\ub8cc: ".concat(a.length,"\uac1c \ud30c\uc77c \uc0ad\uc81c")))}catch(n){console.error("\uce90\uc2dc \uc815\ub9ac \uc624\ub958:",n)}}async getMultipleCacheStatus(e){const t={};return await Promise.all(e.map(async e=>{let{sido:n,sgg:s}=e;const r="".concat(n,"/").concat(s);try{t[r]=await this.getCacheMetadata(n,s)}catch(a){console.error("\uce90\uc2dc \uc0c1\ud0dc \ud655\uc778 \uc624\ub958: ".concat(r),a),t[r]=null}})),t}async getCacheStats(){try{const{data:e}=await this.supabase.storage.from(this.bucketName).list("regions",{limit:1e3});if(!e)return{totalRegions:0,validCaches:0,expiredCaches:0,totalFiles:0};const t=e.filter(e=>"latest.json"===e.name),n=Date.now()-24*this.cacheExpiryDays*60*60*1e3;let s=0,r=0;for(const a of t){new Date(a.updated_at).getTime()>n?s++:r++}return{totalRegions:t.length,validCaches:s,expiredCaches:r,totalFiles:e.length}}catch(e){return console.error("\uce90\uc2dc \ud1b5\uacc4 \uc870\ud68c \uc624\ub958:",e),{totalRegions:0,validCaches:0,expiredCaches:0,totalFiles:0}}}}class pc{constructor(){this.cacheManager=new gc}async loadKindergartenData(e,t){const n=Date.now(),s="".concat(e,"/").concat(t);try{const r=await this.cacheManager.getCachedData(e,t);if(r&&r.length>0){const e=Date.now()-n;return console.log("\u2705 \uce90\uc2dc\uc5d0\uc11c \ub85c\ub4dc: ".concat(s," (").concat(r.length,"\uac1c, ").concat(e,"ms)")),{data:r,source:"cache",region:s,loadTime:e}}console.log("\ud83d\udd04 API\uc5d0\uc11c \ub85c\ub4dc: ".concat(s));const a=await this.fetchAllPagesFromAPI(e,t);if(0===a.length)throw new Error("API\uc5d0\uc11c \ub370\uc774\ud130\ub97c \ubc1b\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");const i=Date.now()-n;return console.log("\ud83d\udce1 API\uc5d0\uc11c \ub85c\ub4dc \uc644\ub8cc: ".concat(s," (").concat(a.length,"\uac1c, ").concat(i,"ms)")),{data:a,source:"api",region:s,loadTime:i}}catch(r){const e=Date.now()-n,t=r instanceof Error?r.message:"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958";return console.error("\u274c \ub85c\ub529 \uc2e4\ud328: ".concat(s),r),{data:[],source:"api",region:s,loadTime:e,error:t}}}async fetchAllPagesFromAPI(e,t){try{const{sidoCode:s,sggCode:r}=Kl(e,t);let a=1;const i=100,o=[];for(;;){var n;console.log("\ud83d\udcc4 \ud398\uc774\uc9c0 ".concat(a," \ub85c\ub529 \uc911..."));const l=await Yl(s,r,i,a);if("SUCCESS"!==l.status||null===(n=l.kinderInfo)||void 0===n||!n.length)break;if(o.push(...l.kinderInfo),l.kinderInfo.length<i)break;if(a++,a>50){console.warn("\u26a0\ufe0f \ucd5c\ub300 \ud398\uc774\uc9c0 \uc218 \ub3c4\ub2ec: ".concat(e,"/").concat(t));break}}return console.log("\ud83d\udcca \ucd1d ".concat(o.length,"\uac1c \ub370\uc774\ud130 \uc218\uc9d1 \uc644\ub8cc: ").concat(e,"/").concat(t)),await this.saveToCacheViaEdgeFunction(e,t,o),o}catch(s){throw console.error("API \ud638\ucd9c \uc624\ub958: ".concat(e,"/").concat(t),s),s}}async saveToCacheViaEdgeFunction(e,t,n){try{console.log("\ud83d\ude80 Edge Function invoke \uc2dc\uc791: sync-kindergartens");const{data:s,error:r}=await Se.supabase.functions.invoke("sync-kindergartens",{body:{sido:e,sgg:t}});if(r)return void console.error("\u274c Edge Function \uc624\ub958:",r);console.log("\ud83d\udccb Edge Function \uc751\ub2f5:",s),null!==s&&void 0!==s&&s.success?console.log("\ud83d\udcbe Edge Function\uc744 \ud1b5\ud55c \uce90\uc2dc \uc800\uc7a5 \uc644\ub8cc: ".concat(e,"/").concat(t," (").concat(n.length,"\uac1c \ub370\uc774\ud130)")):null!==s&&void 0!==s&&s.error&&console.warn("\u26a0\ufe0f Edge Function \uce90\uc2dc \uc800\uc7a5 \uc2e4\ud328: ".concat(s.error))}catch(s){console.error("\u274c Edge Function \ud638\ucd9c \uc2e4\ud328:",s)}}async loadMultipleRegions(e){console.log("\ud83d\ude80 ".concat(e.length,"\uac1c \uc9c0\uc5ed \ub3d9\uc2dc \ub85c\ub529 \uc2dc\uc791"));const t=Date.now(),n={},s=e.map(async e=>{let{sido:t,sgg:s}=e;const r="".concat(t,"/").concat(s);try{const e=await this.loadKindergartenData(t,s);n[r]=e}catch(a){console.error("".concat(r," \ub85c\ub529 \uc2e4\ud328:"),a),n[r]={data:[],source:"api",region:r,loadTime:0,error:a instanceof Error?a.message:"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958"}}});await Promise.allSettled(s);const r=Date.now()-t,a=Object.values(n).filter(e=>e.data.length>0).length;return console.log("\u2705 \ub2e4\uc911 \uc9c0\uc5ed \ub85c\ub529 \uc644\ub8cc: ".concat(a,"/").concat(e.length," \uc131\uacf5 (").concat(r,"ms)")),n}async getCacheStatus(e){return await this.cacheManager.getMultipleCacheStatus(e)}async refreshCache(e,t){console.log("\ud83d\udd04 \uce90\uc2dc \uac15\uc81c \uc0c8\ub85c\uace0\uce68: ".concat(e,"/").concat(t));try{await this.cacheManager.deleteCache(e,t);const n=await this.loadKindergartenData(e,t);return console.log("\u2705 \uce90\uc2dc \uc0c8\ub85c\uace0\uce68 \uc644\ub8cc: ".concat(e,"/").concat(t)),n}catch(n){throw console.error("\u274c \uce90\uc2dc \uc0c8\ub85c\uace0\uce68 \uc2e4\ud328: ".concat(e,"/").concat(t),n),n}}async getCacheStats(){return await this.cacheManager.getCacheStats()}async cleanupOldCache(e,t){return await this.cacheManager.cleanupOldCache(e,t)}async isCacheValid(e,t){const n=await this.cacheManager.getCacheMetadata(e,t);return null!==n&&!n.isExpired}analyzePerformance(e){const t=Object.values(e).filter(e=>"cache"===e.source).length,n=Object.values(e).filter(e=>"api"===e.source).length,s=Object.values(e).reduce((e,t)=>e+t.data.length,0),r=Object.values(e).reduce((e,t)=>e+t.loadTime,0)/Object.keys(e).length;return{totalRegions:Object.keys(e).length,cacheHits:t,apiCalls:n,cacheHitRate:(t/Object.keys(e).length*100).toFixed(1)+"%",totalDataCount:s,averageLoadTime:Math.round(r)+"ms",trafficSaved:0===n?"100%":(t/Object.keys(e).length*100).toFixed(1)+"%"}}}var xc=n(89);var vc=n(478),yc=n(281);const bc=e=>{let{onClose:t}=e;const n=ne(),[s,a]=(0,r.useState)(null),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)([]),[h,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null),[p,x]=(0,r.useState)(!1),[v,y]=(0,r.useState)(null),[b,w]=(0,r.useState)(!1),[j,_]=(0,r.useState)(null),[N,k]=(0,r.useState)(new Set),[C,S]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{const{data:{user:e}}=await Se.supabase.auth.getUser();if(e){S(e.id);const{data:t}=await Se.supabase.from("favorites").select("target_id").eq("user_id",e.id).eq("target_type","childcare");if(t){const e=new Set(t.map(e=>e.target_id));k(e)}}}catch(e){console.error("\ucc1c \ubaa9\ub85d \ub85c\ub4dc \uc624\ub958:",e)}})()},[]);(0,r.useEffect)(()=>{s&&(async()=>{try{m(!0);const e=await async function(e){const t="https://fxkftrczarwuytnufprv.supabase.co",n="".concat(t,"/functions/v1/childcare-sigungu"),s=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4a2Z0cmN6YXJ3dXl0bnVmcHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODM5NzgsImV4cCI6MjA3MTY1OTk3OH0.L0zzO_KooHRwJdf6z92Cla05pSH8UF7PRGVDK8lS3Ns")},body:JSON.stringify({action:"list",arname:e})});if(!s.ok)throw new Error("\uc2dc\uad70\uad6c \uc870\ud68c \uc2e4\ud328: ".concat(s.status));const r=await s.json();if(r.error)throw new Error(r.error);return r.data||[]}(s);u(e)}catch(yd){u([])}finally{m(!1)}})()},[s]),(0,r.useEffect)(()=>{(async()=>{if("geolocation"in navigator){w(!0);try{const e=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),{latitude:t,longitude:n}=e.coords,s=await(0,yc.reverseGeocodeWithCache)(t,n);s&&(a(s.sidoName),g({sgg:s.sggName,arcode:s.childcareArcode}),await E(s.childcareArcode))}catch(yd){}finally{w(!1)}}})()},[]);const E=async e=>{try{const r=d.find(t=>t.arcode===e);r&&g({sgg:r.sigunname,arcode:e}),x(!0);const a=await vc.smartChildcareLoader.loadChildcareData(e);if(y(a),C)try{const{data:e}=await Se.supabase.from("favorites").select("target_id").eq("user_id",C).eq("target_type","childcare");if(e){const t=new Set(e.map(e=>e.target_id));k(t)}}catch(t){console.error("\ucc1c \ubaa9\ub85d \ub85c\ub4dc \uc624\ub958:",t)}try{const e=(a.data||[]).map(e=>e.crcode||e.crcode||e.stcode).filter(Boolean);if(e.length>0){const t=await Ul(e),s={};try{const{data:t}=await Se.supabase.from("childcare_custom_info").select("facility_code, building_images").in("facility_code",e).eq("is_active",!0);t&&t.forEach(e=>{s[e.facility_code]=e})}catch(n){console.log("\ucee4\uc2a4\ud140 \uc815\ubcf4 \ub85c\ub4dc \uc624\ub958:",n)}const r={};try{const{data:t}=await Se.supabase.from("childcare_application_info").select("childcare_code, monthly_price, available_slots").in("childcare_code",e).eq("is_active",!0);t&&t.forEach(e=>{r[e.childcare_code]=e})}catch(n){console.log("\uac04\ud3b8\uc2e0\uccad \uc815\ubcf4 \ub85c\ub4dc \uc624\ub958:",n)}const i=(a.data||[]).map(e=>{var n;const a=e.crcode||e.stcode||"",i=t[a]||{average:0,count:0},o=s[a],l=r[a],c=N.has(a);return(0,Ae.A)((0,Ae.A)({},e),{},{__avg:i.average||0,__count:i.count||0,__buildingImage:(null===o||void 0===o||null===(n=o.building_images)||void 0===n?void 0:n[0])||null,__monthlyPrice:(null===l||void 0===l?void 0:l.monthly_price)||null,__availableSlots:(null===l||void 0===l?void 0:l.available_slots)||null,__isLiked:c})});_(i)}else _(null)}catch(s){_(null)}}catch(yd){y({data:[],source:"error",error:"\ub85c\ub4dc \uc2e4\ud328"})}finally{x(!1)}};return(0,Ee.jsx)("div",{className:"min-h-screen bg-white",children:(0,Ee.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,Ee.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Ee.jsx)("button",{onClick:()=>{t?t():n("/application")},className:"mr-2 p-1 hover:bg-gray-100 rounded-full transition-colors",children:(0,Ee.jsx)(ll,{className:"w-5 h-5 text-[#fb8678]"})}),"\uc5b4\ub9b0\uc774\uc9d1 \uc2dc\uc124 \ubaa9\ub85d"]}),(0,Ee.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsx)("h3",{className:"text-sm font-bold text-gray-700",children:"\uc2dc\ub3c4 \uc120\ud0dd"}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>{o(!i),c(!1)},className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-left text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#fb8678] focus:border-transparent",children:s||"\uc2dc\ub3c4\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),i&&(0,Ee.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Object.keys(Hl).map(e=>(0,Ee.jsx)("button",{onClick:()=>{a(e),o(!1),c(!1),g(null)},className:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:e},e))})]})]}),s&&(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsx)("h3",{className:"text-sm font-bold text-gray-700",children:"\uc9c0\uc5ed\uad6c \uc120\ud0dd"}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>{c(!l),o(!1)},className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-left text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#fb8678] focus:border-transparent",children:(null===f||void 0===f?void 0:f.sgg)||(h?"\uc2dc\uad70\uad6c \ubd88\ub7ec\uc624\ub294 \uc911...":"\uc9c0\uc5ed\uad6c\ub97c \uc120\ud0dd\ud558\uc138\uc694")}),l&&(0,Ee.jsxs)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:[h&&(0,Ee.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500",children:"\ubd88\ub7ec\uc624\ub294 \uc911..."}),!h&&d.map(e=>(0,Ee.jsx)("button",{onClick:()=>{E(e.arcode),c(!1)},className:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:e.sigunname},"".concat(e.arcode,"-").concat(e.sigunname))),!h&&0===d.length&&(0,Ee.jsx)("div",{className:"px-4 py-3 text-sm text-gray-500",children:"\uc2dc\uad70\uad6c \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"})]})]})]})]}),b&&(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 bg-white rounded-2xl",children:[(0,Ee.jsx)(_l,{className:"w-8 h-8 text-[#fb8678] animate-spin mb-4"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"\uc8fc\ubcc0 \uc2dc\uc124 \ucc3e\ub294 \uc911..."}),(0,Ee.jsx)("p",{className:"text-xs text-gray-500",children:"\ud604\uc7ac \uc704\uce58\ub97c \ud655\uc778\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4"})]}),p&&(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 bg-white rounded-2xl",children:[(0,Ee.jsx)(_l,{className:"w-8 h-8 text-[#fb8678] animate-spin mb-4"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"\uc5b4\ub9b0\uc774\uc9d1 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."}),(0,Ee.jsxs)("p",{className:"text-xs text-gray-500",children:[s," ",(null===f||void 0===f?void 0:f.sgg)||""]})]}),!p&&v&&v.data.length>0&&(0,Ee.jsx)("div",{className:"space-y-4",children:(j||v.data).map((e,t)=>(0,Ee.jsx)("div",{className:"bg-white border border-gray-100 rounded-2xl overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:(0,Ee.jsxs)("div",{className:"flex",children:[(0,Ee.jsxs)("div",{className:"w-24 flex-shrink-0 relative",children:[e.__buildingImage?(0,Ee.jsx)("img",{src:e.__buildingImage,alt:e.crname,className:"w-full h-full object-cover"}):(0,Ee.jsxs)("div",{className:"w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex flex-col items-center justify-center",children:[(0,Ee.jsx)(oc,{className:"w-6 h-6 text-gray-400 mb-1"}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"\uc0ac\uc9c4\uc5c6\uc74c"})]}),(0,Ee.jsx)("div",{className:"absolute inset-y-0 right-0 w-4 bg-gradient-to-r from-transparent to-white"})]}),(0,Ee.jsxs)("div",{className:"flex-1 bg-white p-3",children:[(0,Ee.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ee.jsx)("h3",{className:"font-semibold text-gray-900 text-base mb-1 line-clamp-2 leading-relaxed",children:e.crname||"\uc5b4\ub9b0\uc774\uc9d1"}),(0,Ee.jsxs)("div",{className:"flex items-start gap-1 text-xs text-gray-500 mb-1",children:[(0,Ee.jsx)(ul,{className:"h-3 w-3 flex-shrink-0 mt-0.5"}),(0,Ee.jsx)("span",{className:"line-clamp-2 leading-relaxed",children:e.craddr})]})]}),(0,Ee.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(!C)return void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const t=e.crcode||e.stcode;if(t)try{if(N.has(t)){const{error:n}=await Se.supabase.from("favorites").delete().eq("user_id",C).eq("target_id",t).eq("target_type","childcare");if(!n){const n=new Set(N);n.delete(t),k(n),j&&_(j.map(e=>(e.crcode||e.stcode)===t?(0,Ae.A)((0,Ae.A)({},e),{},{__isLiked:!1}):e)),console.log("\u274c \ucc1c \ud574\uc81c:",e.crname)}}else{const n={user_id:C,target_type:"childcare",target_id:t,target_name:e.crname};null!==f&&void 0!==f&&f.arcode&&(n.arcode=f.arcode);const{error:s}=await Se.supabase.from("favorites").insert(n);if(!s){const n=new Set(N);n.add(t),k(n),j&&_(j.map(e=>(e.crcode||e.stcode)===t?(0,Ae.A)((0,Ae.A)({},e),{},{__isLiked:!0}):e)),console.log("\u2705 \ucc1c \ucd94\uac00:",e.crname)}}}catch(n){console.error("\ucc1c\ud558\uae30 \uc624\ub958:",n),alert("\ucc1c\ud558\uae30 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}else console.error("\uc5b4\ub9b0\uc774\uc9d1 \ucf54\ub4dc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")})(e)},className:"flex-shrink-0 p-1 ml-2",children:e.__isLiked?(0,Ee.jsx)(ml,{className:"h-4 w-4 text-[#fb8678] fill-current"}):(0,Ee.jsx)(ml,{className:"h-4 w-4 text-gray-400"})})]}),(0,Ee.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Ee.jsx)(lc,{className:"h-3 w-3 text-yellow-400 fill-current"}),(0,Ee.jsx)("span",{className:"text-xs font-medium text-gray-900",children:Number(e.__avg||0).toFixed(1)}),(0,Ee.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.__count||0,")"]})]}),(0,Ee.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,Ee.jsx)(cc,{className:"h-3 w-3"}),(0,Ee.jsx)("span",{children:"-"})]})]}),(0,Ee.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,Ee.jsxs)("div",{className:"flex items-center gap-2",children:[e.__monthlyPrice?(0,Ee.jsxs)("span",{className:"text-sm font-bold text-[#fb8678]",children:["\uc6d4 ",e.__monthlyPrice,"\ub9cc\uc6d0"]}):(0,Ee.jsx)("span",{className:"text-sm font-bold text-gray-400",children:"\uc6d4 -\ub9cc\uc6d0"}),e.__availableSlots?(0,Ee.jsxs)("span",{className:"px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded-full font-semibold",children:["\ube48\uc790\ub9ac ",e.__availableSlots,"\uac1c"]}):(0,Ee.jsx)("span",{className:"px-1.5 py-0.5 bg-gray-100 text-gray-400 text-xs rounded-full font-semibold",children:"\ube48\uc790\ub9ac -\uac1c"})]})}),(0,Ee.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,Ee.jsx)("button",{onClick:()=>{const t=e.crcode||e.stcode,s=null===f||void 0===f?void 0:f.arcode;t&&n("/childcare/".concat(t).concat(s?"?arcode=".concat(encodeURIComponent(s)):""))},className:"flex-1 py-2 px-4 bg-[#fb8678] text-white rounded-lg text-sm font-medium hover:bg-[#e67567] transition-colors",children:"\uc2e0\uccad\ud558\uae30"}),(0,Ee.jsx)("button",{onClick:()=>{const t=(e.crtelno||"").replace(/[^0-9+]/g,"");if(t){try{navigator.clipboard.writeText(t)}catch(n){}window.location.href="tel:".concat(t)}else alert("\uc804\ud654\ubc88\ud638 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")},className:"flex-1 py-2 px-4 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600 transition-colors",children:"\uc804\ud654\ubb38\uc758"})]})]})]})},e.crcode||t))}),!p&&v&&0===v.data.length&&f&&(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 bg-white rounded-2xl border border-gray-100",children:[(0,Ee.jsx)(uc,{className:"w-12 h-12 text-gray-400 mb-4"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"\ud574\ub2f9 \uc9c0\uc5ed\uc5d0 \uc5b4\ub9b0\uc774\uc9d1\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,Ee.jsxs)("p",{className:"text-xs text-gray-500",children:[s," ",f.sgg]})]}),!p&&!v&&(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 bg-white rounded-2xl",children:[(0,Ee.jsx)(ul,{className:"w-12 h-12 text-gray-400 mb-4"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"\uc9c0\uc5ed\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694"}),(0,Ee.jsx)("p",{className:"text-xs text-gray-500",children:"\uc704\uc5d0\uc11c \uc2dc\ub3c4\uc640 \uc9c0\uc5ed\uad6c\ub97c \uc120\ud0dd\ud558\uc2dc\uba74 \uc5b4\ub9b0\uc774\uc9d1 \ubaa9\ub85d\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"})]}),(0,Ee.jsx)("div",{className:"h-20"})]})})},wc=()=>{const[e,t]=(0,r.useState)(null),[s,a]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),[l,c]=(0,r.useState)(null),[d,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(null),[f,g]=(0,r.useState)(!1),[p,x]=(0,r.useState)(new Set),[v,y]=(0,r.useState)(null),[b,w]=(0,r.useState)(null),[j,_]=(0,r.useState)(!1),[N,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)([]),[E,P]=(0,r.useState)(!1),A=(0,r.useMemo)(()=>new pc,[]);(0,r.useEffect)(()=>{R()},[]);const T=Object.keys(Hl).reduce((e,t)=>(e[t]=Object.keys(Hl[t].sggCodes),e),{});(0,r.useEffect)(()=>{(async()=>{try{const{supabase:e}=await Promise.resolve().then(n.bind(n,801)),{data:{user:t}}=await e.auth.getUser();if(t){y(t.id);const{data:n,error:s}=await e.from("favorites").select("target_id, target_type").eq("user_id",t.id).eq("target_type","kindergarten");if(!s&&n){const e=new Set(n.map(e=>e.target_id));x(e),console.log("\u2705 \ucc1c \ubaa9\ub85d \ub85c\ub4dc:",e)}}}catch(e){console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \ub85c\ub4dc \uc624\ub958:",e)}})()},[]);const I=e=>{"hospital"!==e.type?alert("".concat(e.name," \uc2e0\uccad\ud558\uae30 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.")):alert("".concat(e.name," \uc608\uc57d\ud558\uae30 \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4."))},M=async e=>{t(e),"kindergarten"===e&&await L()},L=async()=>{if(navigator.geolocation){g(!0);try{const t=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})}),{latitude:n,longitude:s}=t.coords;m({lat:n,lng:s});try{const e=await(0,yc.reverseGeocodeWithCache)(n,s);if(e)return w(e.sidoName),void await z(e.sidoName,e.sggName)}catch(e){}const r=O(n,s);await z(r.sido,r.sgg)}catch(t){console.error("GPS \uc624\ub958:",t),alert("\uc704\uce58 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \uc9c0\uc5ed\uc744 \uc218\ub3d9\uc73c\ub85c \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")}finally{g(!1)}}else alert("GPS\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ube0c\ub77c\uc6b0\uc800\uc785\ub2c8\ub2e4.")},R=async()=>{if(navigator.geolocation&&!E){P(!0);try{var e,t;const a=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4})}),{latitude:i,longitude:o}=a.coords;let l="\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",c="\uc911\uad6c";try{const e=await(0,yc.reverseGeocodeWithCache)(i,o);if(e)l=e.sidoName,c=e.sggName;else{const e=O(i,o);l=e.sido,c=e.sgg}}catch(s){const e=O(i,o);l=e.sido,c=e.sgg}const d=await A.loadKindergartenData(l,c),u=null===(e=Hl[l])||void 0===e?void 0:e.sidoCode,h=null===(t=Hl[l])||void 0===t?void 0:t.sggCodes[c];let m=[];if(d.data&&d.data.length>0){const e=d.data.map((e,t)=>{const n=Number(e.lttdcdnt),s=Number(e.lngtcdnt),r=D(i,o,n,s);return{id:t+1,code:e.kinderCode||e.kindercode||e.kcode||"",name:e.kindername||"\uc720\uce58\uc6d0\uba85 \uc5c6\uc74c",type:"kindergarten",address:e.addr||"\uc8fc\uc18c \uc5c6\uc74c",phone:e.telno||"",rating:0,reviewCount:0,distance:"".concat(r.toFixed(1),"km"),price:"\uc6d4 40\ub9cc\uc6d0",image:"",isLiked:!1,availableSlots:Math.floor(5*Math.random())+1,isRecommended:!0,sidoCode:u,sggCode:h}}),t=e.sort((e,t)=>parseFloat(e.distance)-parseFloat(t.distance)).slice(0,20);try{const e=t.map(e=>e.code).filter(e=>"string"===typeof e&&e.trim().length>0);if(e.length>0){console.log("\ud83d\udd0d \uc720\uce58\uc6d0 \ucd94\ucc9c \uc2dc\uc124 \ucf54\ub4dc:",e),console.log("\ud83d\udd0d \uc720\uce58\uc6d0 \ucd94\ucc9c \uc2dc\uc124 \ubaa9\ub85d:",t.map(e=>({name:e.name,code:e.code})));const s=await Rl(e);console.log("\ud83d\udcca \uc720\uce58\uc6d0 \ub9ac\ubdf0 \ud1b5\uacc4 \uacb0\uacfc:",s);const{supabase:r}=await Promise.resolve().then(n.bind(n,801)),{data:a}=await r.from("kindergarten_custom_info").select("kinder_code, building_images").in("kinder_code",e).eq("is_active",!0),i={};a&&a.forEach(e=>{e.building_images&&e.building_images.length>0&&(i[e.kinder_code]=e.building_images)});const{data:o}=await r.from("kindergarten_application_info").select("kinder_code, monthly_price, available_slots").in("kinder_code",e).eq("is_active",!0),l={};o&&o.forEach(e=>{l[e.kinder_code]={monthly_price:e.monthly_price,available_slots:e.available_slots}});m=t.map(e=>{const t=e.code?s[e.code]:void 0,n=e.code?i[e.code]:null,r=n&&n.length>0?n[0]:"",a=!!e.code&&p.has(e.code),o=e.code?l[e.code]:null;return e.code&&console.log("\ud83d\udcca ".concat(e.name," (").concat(e.code,"): \ud3c9\uc810=").concat((null===t||void 0===t?void 0:t.average)||0,", \uac2f\uc218=").concat((null===t||void 0===t?void 0:t.count)||0)),(0,Ae.A)((0,Ae.A)({},e),{},{rating:(null===t||void 0===t?void 0:t.average)||0,reviewCount:(null===t||void 0===t?void 0:t.count)||0,image:r,isLiked:a,monthlyPrice:(null===o||void 0===o?void 0:o.monthly_price)||null,availableSlotsCount:(null===o||void 0===o?void 0:o.available_slots)||null})}).sort((e,t)=>t.rating!==e.rating?t.rating-e.rating:t.reviewCount-e.reviewCount).slice(0,2)}}catch(r){console.error("\uc720\uce58\uc6d0 \ub370\uc774\ud130 \ubcd1\ud569 \uc624\ub958:",r)}}let f=[];try{const e=await(0,xc.hN)(i,o,10);if(console.log("\ud83d\udd0d GPS \uae30\ubc18 \uadfc\ucc98 \uc5b4\ub9b0\uc774\uc9d1:",e.length,"\uac1c"),e.length>0){const t=await(0,yc.reverseGeocodeWithCache)(i,o),n=null===t||void 0===t?void 0:t.childcareArcode,s=await Promise.all(e.map(async(e,t)=>{try{const s=await(0,xc.iO)(e,i,o,n),r="number"===typeof s.distance?s.distance:0;return{id:1e3+t,code:s.code||e.crcode||e.stcode,name:s.name||e.crname||"\uc5b4\ub9b0\uc774\uc9d1\uba85 \uc5c6\uc74c",type:"childcare",address:s.address||e.craddr||"\uc8fc\uc18c \uc5c6\uc74c",rating:0,reviewCount:0,distance:"".concat(r.toFixed(1),"km"),price:"\uc6d4 -\ub9cc\uc6d0",image:s.image||"",isLiked:!1,availableSlots:void 0,isRecommended:!0,arcode:n}}catch(s){return null}})),a=s.filter(e=>!!e).sort((e,t)=>parseFloat(e.distance)-parseFloat(t.distance));try{const e=a.map(e=>e.code).filter(e=>"string"===typeof e&&e.trim().length>0);if(e.length>0){console.log("\ud83d\udd0d \uc5b4\ub9b0\uc774\uc9d1 \ucd94\ucc9c \uc2dc\uc124 \ucf54\ub4dc:",e),console.log("\ud83d\udd0d \uc5b4\ub9b0\uc774\uc9d1 \ucd94\ucc9c \uc2dc\uc124 \ubaa9\ub85d:",a.map(e=>({name:e.name,code:e.code,distance:e.distance})));const t=await Ul(e);console.log("\ud83d\udcca \uc5b4\ub9b0\uc774\uc9d1 \ub9ac\ubdf0 \ud1b5\uacc4 \uacb0\uacfc:",t);f=a.map(e=>{const n=e.code?t[e.code]:void 0;return console.log("\ud83d\udcca ".concat(e.name," (").concat(e.code,"): \ud3c9\uc810=").concat((null===n||void 0===n?void 0:n.average)||0,", \uac2f\uc218=").concat((null===n||void 0===n?void 0:n.count)||0,", \uac70\ub9ac=").concat(e.distance)),(0,Ae.A)((0,Ae.A)({},e),{},{rating:(null===n||void 0===n?void 0:n.average)||0,reviewCount:(null===n||void 0===n?void 0:n.count)||0})}).sort((e,t)=>t.rating!==e.rating?t.rating-e.rating:t.reviewCount-e.reviewCount).slice(0,2)}}catch(r){console.error("\uc5b4\ub9b0\uc774\uc9d1 \ub9ac\ubdf0 \ud1b5\uacc4 \ubcd1\ud569 \uc624\ub958:",r)}}}catch(r){console.error("\uc5b4\ub9b0\uc774\uc9d1 \ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",r)}const g=[...m,...f];g.length>0&&S(g)}catch(r){console.error("\ucd94\ucc9c\uc2dc\uc124 \ub85c\ub529 \uc624\ub958:",r)}finally{P(!1)}}},O=(e,t)=>{const n=[{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uac15\ub0a8\uad6c",lat:37.5172,lng:127.0473},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uc11c\ucd08\uad6c",lat:37.4837,lng:127.0324},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uc1a1\ud30c\uad6c",lat:37.5145,lng:127.1058},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uac15\ub3d9\uad6c",lat:37.5301,lng:127.1238},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uc911\uad6c",lat:37.5636,lng:126.997},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uc885\ub85c\uad6c",lat:37.5735,lng:126.9788},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uc6a9\uc0b0\uad6c",lat:37.5384,lng:126.9654},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uc131\ub3d9\uad6c",lat:37.5633,lng:127.0366},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uad11\uc9c4\uad6c",lat:37.5385,lng:127.0823},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\ub3d9\ub300\ubb38\uad6c",lat:37.5838,lng:127.0507},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uc911\ub791\uad6c",lat:37.6066,lng:127.0926},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uc131\ubd81\uad6c",lat:37.5894,lng:127.0167},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uac15\ubd81\uad6c",lat:37.6398,lng:127.0253},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\ub3c4\ubd09\uad6c",lat:37.6688,lng:127.0471},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\ub178\uc6d0\uad6c",lat:37.6542,lng:127.0568},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uc740\ud3c9\uad6c",lat:37.6028,lng:126.9291},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uc11c\ub300\ubb38\uad6c",lat:37.5791,lng:126.9368},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\ub9c8\ud3ec\uad6c",lat:37.5663,lng:126.9019},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uc591\ucc9c\uad6c",lat:37.517,lng:126.8664},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uac15\uc11c\uad6c",lat:37.5509,lng:126.8495},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uad6c\ub85c\uad6c",lat:37.4954,lng:126.8874},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uae08\ucc9c\uad6c",lat:37.4602,lng:126.9003},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uc601\ub4f1\ud3ec\uad6c",lat:37.5264,lng:126.8962},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\ub3d9\uc791\uad6c",lat:37.5124,lng:126.9392},{sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uad00\uc545\uad6c",lat:37.4784,lng:126.9515}];let s=n[0],r=D(e,t,s.lat,s.lng);for(const a of n){const n=D(e,t,a.lat,a.lng);n<r&&(r=n,s=a)}return{sido:s.sido,sgg:s.sgg}},D=(e,t,n,s)=>{const r=(n-e)*Math.PI/180,a=(s-t)*Math.PI/180,i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},z=async(e,t)=>{o(!0),u({sido:e,sgg:t});try{const n=await A.loadKindergartenData(e,t);c(n),a(n.data)}catch(n){console.error("\uc9c0\uc5ed \ub370\uc774\ud130 \ub85c\ub529 \uc2e4\ud328:",n)}finally{o(!1)}},U=e=>{var t,n;const s=null!==d&&void 0!==d&&d.sido?null===(t=Hl[d.sido])||void 0===t?void 0:t.sidoCode:void 0,r=null!==d&&void 0!==d&&d.sgg&&null!==d&&void 0!==d&&d.sido?null===(n=Hl[d.sido])||void 0===n?void 0:n.sggCodes[d.sgg]:void 0;return e.map((e,t)=>({id:t+1,code:e.kinderCode||e.kindercode||e.kcode,name:e.kindername||"\uc720\uce58\uc6d0\uba85 \uc5c6\uc74c",type:"kindergarten",address:e.addr||"\uc8fc\uc18c \uc5c6\uc74c",phone:e.telno||"",rating:0,reviewCount:0,distance:"0.5km",price:"\uc6d4 -\ub9cc\uc6d0",image:"",isLiked:!1,availableSlots:void 0,isRecommended:Math.random()>.7,sidoCode:s,sggCode:r}))},[F,q]=(0,r.useState)(null),B=null!==F&&void 0!==F?F:U(s);(0,r.useEffect)(()=>{(async()=>{try{const e=s.map(e=>e.kinderCode||e.kindercode||e.kcode).filter(e=>"string"===typeof e&&e.trim().length>0);if(0===e.length)return void q(null);const t=await Rl(e),{supabase:r}=await Promise.resolve().then(n.bind(n,801)),{data:a}=await r.from("kindergarten_custom_info").select("kinder_code, building_images").in("kinder_code",e).eq("is_active",!0),i={};a&&a.forEach(e=>{e.building_images&&e.building_images.length>0&&(i[e.kinder_code]=e.building_images)});const{data:o}=await r.from("kindergarten_application_info").select("kinder_code, monthly_price, available_slots").in("kinder_code",e).eq("is_active",!0),l={};o&&o.forEach(e=>{l[e.kinder_code]={monthly_price:e.monthly_price,available_slots:e.available_slots}});const c=U(s).map((e,n)=>{const r=s[n],a=(null===r||void 0===r?void 0:r.kinderCode)||(null===r||void 0===r?void 0:r.kindercode)||(null===r||void 0===r?void 0:r.kcode),o=a&&t[a]?t[a]:{average:0,count:0},c=a?i[a]:null,d=c&&c.length>0?c[0]:"",u=!!a&&p.has(a),h=a?l[a]:null;return(0,Ae.A)((0,Ae.A)({},e),{},{rating:o.average||0,reviewCount:o.count||0,image:d,isLiked:u,monthlyPrice:(null===h||void 0===h?void 0:h.monthly_price)||null,availableSlotsCount:(null===h||void 0===h?void 0:h.available_slots)||null})});q(c)}catch(e){console.error("\uc720\uce58\uc6d0 \ub370\uc774\ud130 \ubcd1\ud569 \uc624\ub958:",e),q(null)}})()},[s,p]);B.filter(t=>!e||t.type===e);return(0,Ee.jsxs)("div",{className:"min-h-screen bg-white",children:[!e&&(0,Ee.jsx)("div",{className:"p-4",children:(0,Ee.jsx)("div",{className:"max-w-md mx-auto",children:(0,Ee.jsxs)("div",{className:"space-y-4",children:[(0,Ee.jsx)("div",{onClick:()=>M("kindergarten"),className:"bg-gradient-to-r from-[#fb8678]/10 to-[#e67567]/10 rounded-2xl p-2 border border-[#fb8678]/20 cursor-pointer hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,Ee.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ee.jsx)("div",{className:"w-28 h-28 flex items-center justify-center",children:f?(0,Ee.jsx)(_l,{className:"w-7 h-7 text-[#fb8678] animate-spin"}):(0,Ee.jsx)("img",{src:"/icons/applicationimg1.svg",alt:"\uc720\uce58\uc6d0",className:"w-full h-full object-contain"})}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsx)("h3",{className:"font-bold text-gray-900 text-base",children:"\uc720\uce58\uc6d0"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:f?"\uc704\uce58 \ud655\uc778 \uc911...":"\uac04\ud3b8 \uc2e0\uccad"}),(0,Ee.jsx)("div",{className:"flex items-center mt-2",children:(0,Ee.jsx)("span",{className:"text-xs bg-[#fb8678] text-white px-2 py-1 rounded-full",children:f?"GPS \ud65c\uc131\ud654":"\ube60\ub978 \uc2e0\uccad"})})]}),f?(0,Ee.jsx)(_l,{className:"w-5 h-5 text-[#fb8678] animate-spin"}):(0,Ee.jsx)(cl,{className:"w-5 h-5 text-[#fb8678]"})]})}),(0,Ee.jsx)("div",{onClick:()=>M("childcare"),className:"bg-gradient-to-r from-[#fb8678]/10 to-[#e67567]/10 rounded-2xl p-2 border border-[#fb8678]/20 cursor-pointer hover:shadow-lg transition-all duration-300 hover:scale-105",children:(0,Ee.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ee.jsx)("div",{className:"w-28 h-28 flex items-center justify-center",children:f?(0,Ee.jsx)(_l,{className:"w-7 h-7 text-[#fb8678] animate-spin"}):(0,Ee.jsx)("img",{src:"/icons/applicationimg3.svg",alt:"\uc5b4\ub9b0\uc774\uc9d1",className:"w-full h-full object-contain"})}),(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsx)("h3",{className:"font-bold text-gray-900 text-base",children:"\uc5b4\ub9b0\uc774\uc9d1"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:f?"\uc704\uce58 \ud655\uc778 \uc911...":"\uac04\ud3b8 \uc2e0\uccad"}),(0,Ee.jsx)("div",{className:"flex items-center mt-2",children:(0,Ee.jsx)("span",{className:"text-xs bg-[#fb8678] text-white px-2 py-1 rounded-full",children:f?"GPS \ud65c\uc131\ud654":"\ube60\ub978 \uc2e0\uccad"})})]}),f?(0,Ee.jsx)(_l,{className:"w-5 h-5 text-[#fb8678] animate-spin"}):(0,Ee.jsx)(cl,{className:"w-5 h-5 text-[#fb8678]"})]})})]})})}),e&&"childcare"!==e&&(0,Ee.jsx)("div",{className:"p-4",children:(0,Ee.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,Ee.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[(0,Ee.jsx)("button",{onClick:()=>t(null),className:"mr-2 p-1 hover:bg-gray-100 rounded-full transition-colors",children:(0,Ee.jsx)(cl,{className:"w-5 h-5 rotate-180 text-[#fb8678]"})}),"\uc720\uce58\uc6d0 \uc2dc\uc124 \ubaa9\ub85d"]}),"kindergarten"===e&&(0,Ee.jsxs)("div",{className:"mb-6 space-y-4",children:[(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsx)("h3",{className:"text-sm font-bold text-gray-700",children:"\uc2dc\ub3c4 \uc120\ud0dd"}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>{_(!j),k(!1)},className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-left text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#fb8678] focus:border-transparent",children:b||"\uc2dc\ub3c4\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),j&&(0,Ee.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:Object.keys(T).map(e=>(0,Ee.jsx)("button",{onClick:()=>{w(e),_(!1),k(!1),u(null)},className:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:e},e))})]})]}),b&&(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsx)("h3",{className:"text-sm font-bold text-gray-700",children:"\uc9c0\uc5ed\uad6c \uc120\ud0dd"}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>{k(!N),_(!1)},className:"w-full px-4 py-3 bg-white border border-gray-300 rounded-lg text-left text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-[#fb8678] focus:border-transparent",children:(null===d||void 0===d?void 0:d.sgg)||"\uc9c0\uc5ed\uad6c\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),N&&(0,Ee.jsx)("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-lg shadow-lg max-h-60 overflow-y-auto",children:T[b].map(e=>(0,Ee.jsx)("button",{onClick:()=>{z(b,e),k(!1)},disabled:i,className:"w-full px-4 py-3 text-left text-sm text-gray-700 hover:bg-gray-50 border-b border-gray-100 last:border-b-0 ".concat(i?"opacity-50 cursor-not-allowed":""),children:e},e))})]})]})]}),(0,Ee.jsxs)("div",{className:"space-y-4",children:[f&&(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 bg-white rounded-2xl",children:[(0,Ee.jsx)(_l,{className:"w-8 h-8 text-[#fb8678] animate-spin mb-4"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"\uc8fc\ubcc0 \uc2dc\uc124 \ucc3e\ub294 \uc911..."}),(0,Ee.jsx)("p",{className:"text-xs text-gray-500",children:"\ud604\uc7ac \uc704\uce58\ub97c \ud655\uc778\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4"})]}),i&&!f&&(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 bg-white rounded-2xl",children:[(0,Ee.jsx)(_l,{className:"w-8 h-8 text-[#fb8678] animate-spin mb-4"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"\uc720\uce58\uc6d0 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."}),(0,Ee.jsx)("p",{className:"text-xs text-gray-500",children:d?"".concat(d.sido," ").concat(d.sgg):"\uc9c0\uc5ed\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694"})]}),!i&&B.length>0&&B.map(e=>(0,Ee.jsx)("div",{className:"bg-white border border-gray-100 rounded-2xl overflow-hidden shadow-sm hover:shadow-md transition-shadow",children:(0,Ee.jsxs)("div",{className:"flex",children:[(0,Ee.jsxs)("div",{className:"w-24 flex-shrink-0 relative",children:[e.image?(0,Ee.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}):(0,Ee.jsxs)("div",{className:"w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex flex-col items-center justify-center",children:[(0,Ee.jsx)(oc,{className:"w-6 h-6 text-gray-400 mb-1"}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"\uc0ac\uc9c4\uc5c6\uc74c"})]}),(0,Ee.jsx)("div",{className:"absolute inset-y-0 right-0 w-4 bg-gradient-to-r from-transparent to-white"})]}),(0,Ee.jsxs)("div",{className:"flex-1 bg-white p-3",children:[(0,Ee.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ee.jsx)("h3",{className:"font-semibold text-gray-900 text-base mb-1 line-clamp-2 leading-relaxed",children:e.name}),(0,Ee.jsxs)("div",{className:"flex items-start gap-1 text-xs text-gray-500 mb-1",children:[(0,Ee.jsx)(ul,{className:"h-3 w-3 flex-shrink-0 mt-0.5"}),(0,Ee.jsx)("span",{className:"line-clamp-2 leading-relaxed",children:e.address})]})]}),(0,Ee.jsx)("button",{onClick:t=>{t.stopPropagation(),(async e=>{if(v)if(e.code)try{const{supabase:t}=await Promise.resolve().then(n.bind(n,801));if(p.has(e.code)){const{error:n}=await t.from("favorites").delete().eq("user_id",v).eq("target_id",e.code).eq("target_type","kindergarten");if(!n){const t=new Set(p);t.delete(e.code),x(t),console.log("\u274c \ucc1c \ud574\uc81c:",e.name)}}else{const n={user_id:v,target_type:e.type,target_id:e.code,target_name:e.name};"kindergarten"===e.type?(e.sidoCode&&(n.sido_code=String(e.sidoCode)),e.sggCode&&(n.sgg_code=String(e.sggCode))):"childcare"===e.type&&e.arcode&&(n.arcode=e.arcode);const{error:s}=await t.from("favorites").insert(n);if(!s){const t=new Set(p);t.add(e.code),x(t),console.log("\u2705 \ucc1c \ucd94\uac00:",e.name,"\uc9c0\uc5ed \ucf54\ub4dc:",n)}}}catch(t){console.error("\ucc1c\ud558\uae30 \uc624\ub958:",t),alert("\ucc1c\ud558\uae30 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}else console.error("\uc2dc\uc124 \ucf54\ub4dc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")})(e)},className:"flex-shrink-0 p-1 ml-2",children:e.isLiked?(0,Ee.jsx)(ml,{className:"h-4 w-4 text-[#fb8678] fill-current"}):(0,Ee.jsx)(ml,{className:"h-4 w-4 text-gray-400"})})]}),(0,Ee.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Ee.jsx)(lc,{className:"h-3 w-3 text-yellow-400 fill-current"}),(0,Ee.jsx)("span",{className:"text-xs font-medium text-gray-900",children:Number(e.rating).toFixed(1)}),(0,Ee.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.reviewCount,")"]})]}),(0,Ee.jsxs)("div",{className:"flex items-center gap-1 text-xs text-gray-500",children:[(0,Ee.jsx)(cc,{className:"h-3 w-3"}),(0,Ee.jsx)("span",{children:e.distance})]})]}),"kindergarten"===e.type?(0,Ee.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,Ee.jsxs)("div",{className:"flex items-center gap-2",children:[e.monthlyPrice?(0,Ee.jsxs)("span",{className:"text-sm font-bold text-[#fb8678]",children:["\uc6d4 ",e.monthlyPrice,"\ub9cc\uc6d0"]}):(0,Ee.jsx)("span",{className:"text-sm font-bold text-gray-400",children:"\uc6d4 -\ub9cc\uc6d0"}),e.availableSlotsCount?(0,Ee.jsxs)("span",{className:"px-1.5 py-0.5 bg-green-100 text-green-700 text-xs rounded-full font-semibold",children:["\ube48\uc790\ub9ac ",e.availableSlotsCount,"\uac1c"]}):(0,Ee.jsx)("span",{className:"px-1.5 py-0.5 bg-gray-100 text-gray-500 text-xs rounded-full font-semibold",children:"\ube48\uc790\ub9ac -\uac1c"})]})}):(0,Ee.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,Ee.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Ee.jsx)(dc,{className:"h-3 w-3 text-gray-400"}),(0,Ee.jsxs)("span",{className:"text-xs text-gray-600",children:["\ub2e4\uc74c \uc608\uc57d: ",e.nextAvailableDate]})]})}),(0,Ee.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,Ee.jsx)("button",{onClick:()=>I(e),className:"flex-1 py-2 px-4 bg-[#fb8678] text-white rounded-lg text-sm font-medium hover:bg-[#e67567] transition-colors",children:"kindergarten"===e.type?"\uc2e0\uccad\ud558\uae30":"\uc608\uc57d\ud558\uae30"}),(0,Ee.jsx)("button",{onClick:()=>(async e=>{try{const n=(e.phone||"").replace(/[^0-9+]/g,"");if(!n)return void alert("\uc804\ud654\ubc88\ud638 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.");try{await navigator.clipboard.writeText(n)}catch(t){}window.location.href="tel:".concat(n)}catch(n){}})(e),className:"flex-1 py-2 px-4 bg-green-500 text-white rounded-lg text-sm font-medium hover:bg-green-600 transition-colors",children:"\uc804\ud654\ubb38\uc758"})]})]})]})},e.id)),!i&&0===B.length&&d&&(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 bg-white rounded-2xl border border-gray-100",children:[(0,Ee.jsx)(uc,{className:"w-12 h-12 text-gray-400 mb-4"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"\ud574\ub2f9 \uc9c0\uc5ed\uc5d0 \uc720\uce58\uc6d0\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,Ee.jsxs)("p",{className:"text-xs text-gray-500",children:[d.sido," ",d.sgg]})]}),!i&&0===B.length&&!d&&(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 bg-white rounded-2xl",children:[(0,Ee.jsx)(ul,{className:"w-12 h-12 text-gray-400 mb-4"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:"\uc9c0\uc5ed\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694"}),(0,Ee.jsx)("p",{className:"text-xs text-gray-500",children:"\uc704\uc5d0\uc11c \uc2dc\ub3c4\uc640 \uc9c0\uc5ed\uad6c\ub97c \uc120\ud0dd\ud558\uc2dc\uba74 \uc720\uce58\uc6d0 \ubaa9\ub85d\uc744 \ud655\uc778\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4"})]})]})]})}),"childcare"===e&&(0,Ee.jsx)("div",{className:"p-4",children:(0,Ee.jsx)("div",{className:"max-w-md mx-auto",children:(0,Ee.jsx)(bc,{onClose:()=>t(null)})})}),!e&&(0,Ee.jsx)("div",{className:"p-4",children:(0,Ee.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,Ee.jsxs)("div",{className:"flex items-center gap-2 mb-4",children:[(0,Ee.jsx)(hc,{className:"w-5 h-5 text-[#fb8678]"}),(0,Ee.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"\ub0b4 \uc8fc\ubcc0 \ucd94\ucc9c \uc2dc\uc124"})]}),(0,Ee.jsxs)("div",{className:"space-y-3",children:[E&&(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 bg-white rounded-xl",children:[(0,Ee.jsx)(_l,{className:"w-6 h-6 text-[#fb8678] animate-spin mb-2"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600",children:"\ucd94\ucc9c \uc2dc\uc124 \ucc3e\ub294 \uc911..."})]}),!E&&C.length>0&&C.map(e=>(0,Ee.jsx)("div",{className:"bg-gradient-to-r from-[#fb8678]/5 to-[#e67567]/5 border border-[#fb8678]/10 rounded-xl overflow-hidden shadow-sm",children:(0,Ee.jsxs)("div",{className:"flex",children:[(0,Ee.jsxs)("div",{className:"w-16 h-16 flex-shrink-0 relative",children:[e.image?(0,Ee.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}):(0,Ee.jsxs)("div",{className:"w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex flex-col items-center justify-center",children:[(0,Ee.jsx)(oc,{className:"w-4 h-4 text-gray-400 mb-1"}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"\uc0ac\uc9c4\uc5c6\uc74c"})]}),(0,Ee.jsx)("div",{className:"absolute inset-y-0 right-0 w-3 bg-gradient-to-r from-transparent to-white"})]}),(0,Ee.jsx)("div",{className:"flex-1 bg-white p-3",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsxs)("div",{className:"flex-1",children:[(0,Ee.jsx)("h3",{className:"font-semibold text-gray-900 text-sm",children:e.name}),(0,Ee.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,Ee.jsxs)("div",{className:"flex items-center gap-1",children:[(0,Ee.jsx)(ml,{className:"h-3 w-3 text-pink-500 fill-current"}),(0,Ee.jsx)("span",{className:"text-xs font-medium text-gray-900",children:Number(e.rating).toFixed(1)})]}),(0,Ee.jsxs)("span",{className:"text-xs text-gray-500",children:["(",e.reviewCount,")"]}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500",children:"\u2022"}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500",children:e.distance})]})]}),(0,Ee.jsx)("button",{onClick:()=>I(e),className:"bg-[#fb8678] text-white px-3 py-1 rounded-lg text-xs font-medium hover:bg-[#e67567] transition-colors ml-2",children:"kindergarten"===e.type?"\uc2e0\uccad":"\uc608\uc57d"})]})})]})},e.id)),!E&&0===C.length&&(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center py-8 bg-white rounded-xl",children:[(0,Ee.jsx)(ul,{className:"w-8 h-8 text-gray-400 mb-2"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"\uc8fc\ubcc0\uc5d0 \ucd94\ucc9c\ud560 \uc2dc\uc124\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,Ee.jsx)("p",{className:"text-xs text-gray-500",children:"\ub2e4\ub978 \uc9c0\uc5ed\uc744 \uc120\ud0dd\ud574\ubcf4\uc138\uc694"})]})]})]})}),(0,Ee.jsx)("div",{className:"h-20"})]})},jc=Bo("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),_c=Bo("Locate",[["line",{x1:"2",x2:"5",y1:"12",y2:"12",key:"bvdh0s"}],["line",{x1:"19",x2:"22",y1:"12",y2:"12",key:"1tbv5k"}],["line",{x1:"12",x2:"12",y1:"2",y2:"5",key:"11lu5j"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}],["circle",{cx:"12",cy:"12",r:"7",key:"fim9np"}]]),Nc=Bo("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),kc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CHILDCARE_API_KEY:"0e5ed5cfc4c24c2fa8e2cd14558a1688",REACT_APP_CHILDCARE_DETAIL_API_KEY:"f0b9445663684ec5a0fdbce85aa799ff",REACT_APP_CHILDCARE_SEARCH_API_KEY:"123efade8fc94516a2bbb109bb4d3fc5",REACT_APP_KAKAO_MAP_KEY:"270c11461f58d9b67430ed591295dd49",REACT_APP_KAKAO_REST_KEY:"5f0dbbbe9e62053d846a67003eadab91",REACT_APP_KINDERGARTEN_API_KEY:"c5aef787ac5a4473a74264b4b5bfce74",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4a2Z0cmN6YXJ3dXl0bnVmcHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODM5NzgsImV4cCI6MjA3MTY1OTk3OH0.L0zzO_KooHRwJdf6z92Cla05pSH8UF7PRGVDK8lS3Ns",REACT_APP_SUPABASE_URL:"https://fxkftrczarwuytnufprv.supabase.co"}.REACT_APP_PLAYGROUND_CACHE_BUCKET||"playground-cache",Cc={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CHILDCARE_API_KEY:"0e5ed5cfc4c24c2fa8e2cd14558a1688",REACT_APP_CHILDCARE_DETAIL_API_KEY:"f0b9445663684ec5a0fdbce85aa799ff",REACT_APP_CHILDCARE_SEARCH_API_KEY:"123efade8fc94516a2bbb109bb4d3fc5",REACT_APP_KAKAO_MAP_KEY:"270c11461f58d9b67430ed591295dd49",REACT_APP_KAKAO_REST_KEY:"5f0dbbbe9e62053d846a67003eadab91",REACT_APP_KINDERGARTEN_API_KEY:"c5aef787ac5a4473a74264b4b5bfce74",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4a2Z0cmN6YXJ3dXl0bnVmcHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODM5NzgsImV4cCI6MjA3MTY1OTk3OH0.L0zzO_KooHRwJdf6z92Cla05pSH8UF7PRGVDK8lS3Ns",REACT_APP_SUPABASE_URL:"https://fxkftrczarwuytnufprv.supabase.co"}.REACT_APP_PLAYGROUND_SNAPSHOT_PREFIX||"latest";let Sc=null,Ec=null;const Pc=new Map,Ac=new Set;function Tc(e){return Array.isArray(e)?e:void 0===e||null===e?[]:[e]}async function Ic(e){const t=String(e||"").trim();if(!t)return null;try{var n,s;const e="regions/".concat(t),r="".concat(e,"/latest.json");if(!await Oc(r))return console.log("[PlaygroundCache] latest.json \ubbf8\uc874\uc7ac",{regionCode:t}),null;const{data:a,error:i}=await Se.supabase.storage.from(kc).download(r);if(i||!a){const e=(null===i||void 0===i?void 0:i.statusCode)||(null===i||void 0===i?void 0:i.status)||"unknown",n=(null===i||void 0===i?void 0:i.message)||String(i);return console.log("[PlaygroundCache] latest.json \ub2e4\uc6b4\ub85c\ub4dc \uc2e4\ud328",{regionCode:t,status:e,message:n}),null}const o=await a.text(),l=JSON.parse(o),c=Tc(null!==(n=l.items)&&void 0!==n?n:l.data),d=(0,Ae.A)({regionCode:t,itemCount:c.length},null!==(s=l.meta)&&void 0!==s?s:{});return console.log("[PlaygroundCache] \uc9c0\uc5ed \uce90\uc2dc \uc0ac\uc6a9:",{regionCode:t,itemCount:c.length,snapshot:d.snapshotPrefix}),{items:c,meta:d}}catch(r){return console.error("[PlaygroundCache] \uce90\uc2dc \ub85c\ub529 \uc624\ub958:",{regionCode:t,error:r}),null}}async function Mc(e){var t;const{signal:n,suppressLog:s}=e,r=!s,a=()=>{if(null!==n&&void 0!==n&&n.aborted){const e=new Error("fetchPlaygroundsByRegionGroup aborted");throw e.name="AbortError",e}};a();const i=String(null!==(t=e.regionCode)&&void 0!==t?t:"").trim(),o=e.sggCode?String(e.sggCode).trim().replace(/\D+/g,"").padStart(5,"0"):"",l=await async function(){if(Sc)return Sc;Ec||(Ec=(async()=>{try{return(await Rc("regions",1e3)).filter(e=>/^\d{10}$/.test(e))}catch(e){return console.error("[PlaygroundCache] \uc9c0\uc5ed \ucf54\ub4dc \ubaa9\ub85d \ub85c\ub529 \uc624\ub958:",e),[]}})());const e=await Ec;return Sc=e,e}();a();const c=new Set;if(i&&/^\d{10}$/.test(i)&&c.add(i),o)for(const v of l)v.startsWith(o)&&c.add(v);if(0===c.size)return console.warn("[PlaygroundCache] \uad6c \ub2e8\uc704 \ub300\uc0c1 \ucf54\ub4dc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.",{regionCode:i,sggPrefix:o}),{items:[],regionCodes:[]};const d=Array.from(c),u=[];let h=0,m=[...d];const f=new Set;for(;m.length&&h<=2;){a();const e=new Set;let t=0;for(;t<m.length;){a();const s=m.slice(t,t+4),i=await Promise.all(s.map(async t=>{if(null!==n&&void 0!==n&&n.aborted)return[];const s="regions/".concat(t,"/latest.json");try{var a;const i=await Uc(s);if(null!==n&&void 0!==n&&n.aborted)return[];const o=Tc(null!==(a=null===i||void 0===i?void 0:i.items)&&void 0!==a?a:null===i||void 0===i?void 0:i.data);return null!==n&&void 0!==n&&n.aborted||!o.length||!r||console.log("[PlaygroundCache] \uad6c \ub2e8\uc704 \ub85c\ub4dc",{code:t,count:o.length}),o.length||Ac.has(s)||e.add(t),o}catch(i){return null!==n&&void 0!==n&&n.aborted||(console.warn("[PlaygroundCache] \uad6c \ub2e8\uc704 \ub85c\ub4dc \uc2e4\ud328",{path:s,error:i}),Ac.has(s)||e.add(t)),[]}}));a();for(const e of i)Array.isArray(e)&&e.length&&u.push(...e);t+=4}if(0===e.size)break;if(h+=1,h>2){f.clear(),e.forEach(e=>f.add(e));break}await zc(1200*h),m=Array.from(e)}if(f.size&&r&&console.warn("[PlaygroundCache] \uad6c \ub2e8\uc704 \ub85c\ub4dc \uc77c\ubd80 \uc2e4\ud328 (\uc7ac\uc2dc\ub3c4 \ud55c\uacc4 \ucd08\uacfc)",{failedCodes:Array.from(f),regionCode:i,retryAttempts:h}),a(),0===u.length)return r&&console.warn("[PlaygroundCache] \uad6c \ub2e8\uc704 \ub370\uc774\ud130\uac00 \ube44\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.",{regionCode:i,sggPrefix:o}),{items:[],regionCodes:d};a();const g=new Map;for(const v of u){var p,x;const e=String(null!==(p=null!==(x=v.pfctSn)&&void 0!==x?x:v.pfctNm)&&void 0!==p?p:Math.random().toString(36).slice(2));g.has(e)||g.set(e,v)}return a(),{items:Array.from(g.values()),regionCodes:d}}async function Lc(e,t,n){var s,r,a,i,o,l,c;let d=parseFloat(String(null!==(s=null!==(r=null!==(a=e.latCrtsVl)&&void 0!==a?a:e.y)&&void 0!==r?r:e.lat)&&void 0!==s?s:"")),u=parseFloat(String(null!==(i=null!==(o=null!==(l=e.lotCrtsVl)&&void 0!==l?l:e.x)&&void 0!==o?o:e.lng)&&void 0!==i?i:""));const h=e.ronaAddr||e.roadAddr||e.addr||"",m=e.ronaDaddr||e.dtlAddr||"",f=(e.zip?String(e.zip):"").replace(/[^\d]/g,"").slice(0,5),g=[h,m].map(e=>(e||"").trim()).filter(Boolean).join(" "),p=g&&f?"".concat(g," (").concat(f,")"):g||(f?"\uc6b0\ud3b8\ubc88\ud638 ".concat(f):"");let x=g;if(!x&&f&&(x=f),(!Number.isFinite(d)||!Number.isFinite(u))&&x)try{const e=await(0,yc.ox)(x);e&&(d=e.lat,u=e.lng)}catch(N){}Number.isFinite(d)&&Number.isFinite(u)||(d=37.5665,u=126.978);const v="".concat(e.pfctNm||"playground","_").concat(Math.random().toString(36).slice(2)),y=String(null!==(c=e.pfctSn)&&void 0!==c?c:v),b=String(e.pfctNm||"\uc5b4\ub9b0\uc774\ub180\uc774\uc2dc\uc124");let w=0;Number.isFinite(d)&&Number.isFinite(u)&&Number.isFinite(null!==t&&void 0!==t?t:NaN)&&Number.isFinite(null!==n&&void 0!==n?n:NaN)&&(w=function(e,t,n,s){const r=6371,a=(n-e)*Math.PI/180,i=(s-t)*Math.PI/180,o=Math.sin(a/2)*Math.sin(a/2)+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(i/2)*Math.sin(i/2),l=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return r*l}(t,n,d,u));const{sidoCode:j,sggCode:_}=function(e){const t=String(null!==e&&void 0!==e?e:"").trim();if(!t)return{sidoCode:0,sggCode:0};const n=parseInt(t.slice(0,2),10),s=parseInt(t.slice(0,5),10);return{sidoCode:Number.isFinite(n)?n:0,sggCode:Number.isFinite(s)?s:0}}(e.rgnCd);return{id:y,code:y,name:b,address:p||g,lat:d,lng:u,type:"playground",establishment:e.operYnCdNm?"\uc6b4\uc601\uc0c1\ud0dc ".concat(e.operYnCdNm):"\ub180\uc774\uc2dc\uc124",officeedu:e.instlPlaceCdNm?"".concat(e.instlPlaceCdNm).concat(e.prvtPblcYnCdNm?" \u2022 ".concat(e.prvtPblcYnCdNm):""):e.instlPlaceCd?"\uc124\uce58\uc7a5\uc18c ".concat(e.instlPlaceCd):"",telno:e.tel||"",opertime:"",prmstfcnt:0,ag3fpcnt:0,ag4fpcnt:0,ag5fpcnt:0,hpaddr:"",rating:0,distance:w,image:void 0,sidoCode:j,sggCode:_}}async function Rc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;const n=[];let s=0;for(;;){const{data:r,error:a}=await Se.supabase.storage.from(kc).list(e,{limit:t,offset:s});if(a)throw new Error("Storage \ub9ac\uc2a4\ud2b8 \uc2e4\ud328 (".concat(e,"): ").concat(a.message));if(!r||0===r.length)break;for(const e of r)e&&e.name&&n.push(e.name);if(r.length<t)break;s+=r.length}return n}async function Oc(e){if(Ac.has(e))return!1;if(Pc.has(e))return!0===Pc.get(e);const t=e.split("/").filter(Boolean);if(0===t.length)return!1;const n=t.pop(),s=t.join("/")||"",{data:r,error:a}=await Se.supabase.storage.from(kc).list(s,{limit:100});if(a)return console.warn("[PlaygroundCache] \ud30c\uc77c \uc874\uc7ac \uc5ec\ubd80 \ud655\uc778 \uc2e4\ud328",{path:e,error:a}),Pc.set(e,!1),!1;const i=!(null===r||void 0===r||!r.some(e=>(null===e||void 0===e?void 0:e.name)===n));return Pc.set(e,i),i||Ac.add(e),i}function Dc(e,t,n){let s;const r=new Promise((e,r)=>{s=setTimeout(()=>r(new Error(n)),t)});return Promise.race([e,r]).finally(()=>clearTimeout(s))}async function zc(e){return new Promise(t=>setTimeout(t,e))}async function Uc(e){if(!await Oc(e))return console.log("[PlaygroundCache] \uc2a4\ud1a0\ub9ac\uc9c0 \ud30c\uc77c \uc5c6\uc74c",{path:e}),null;if(Ac.has(e))return null;for(let s=0;s<=3;s+=1)try{const{data:n,error:s}=await Dc(Se.supabase.storage.from(kc).download(e),1e4,"Supabase download timeout (".concat(e,")"));if(s||!n){const t=(null===s||void 0===s?void 0:s.status)||(null===s||void 0===s?void 0:s.statusCode);if(400===t||404===t)return console.log("[PlaygroundCache] \uc2a4\ud1a0\ub9ac\uc9c0 \ud30c\uc77c \uc5c6\uc74c",{path:e,status:t}),Ac.add(e),Pc.set(e,!1),null;throw null!==s&&void 0!==s?s:new Error("Unknown storage download error")}const r=await n.text();try{return JSON.parse(r)}catch(t){return console.warn("[PlaygroundCache] JSON \ud30c\uc2f1 \uc2e4\ud328",{path:e,parseError:t}),null}}catch(n){if(s>=3)return console.warn("[PlaygroundCache] \uc2a4\ud1a0\ub9ac\uc9c0 \ub2e4\uc6b4\ub85c\ub4dc \uc2e4\ud328",{path:e,error:n}),null;await zc(600*(s+1))}return null}async function Fc(){try{const e="pages/".concat(Cc),t=(await Rc(e,200)).filter(e=>/^page-\d{4}\.json$/.test(e)).sort();if(0===t.length)return console.warn("[PlaygroundCache] \uc2a4\ub0c5\uc0f7 \ud398\uc774\uc9c0 \ud30c\uc77c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.",{snapshot:Cc}),[];console.log("[PlaygroundCache] \uc2a4\ub0c5\uc0f7 \uc804\uccb4 \ub85c\ub529 \uc2dc\uc791",{snapshot:Cc,pageCount:t.length});const n=[];let s=0;for(;s<t.length;){const r=t.slice(s,s+4),a=await Promise.all(r.map(async t=>{const n="".concat(e,"/").concat(t);try{var s;const e=await Uc(n),r=Tc(null!==(s=null===e||void 0===e?void 0:e.items)&&void 0!==s?s:null===e||void 0===e?void 0:e.data);return console.log("[PlaygroundCache] \ud398\uc774\uc9c0 \ub85c\ub4dc",{fileName:t,count:r.length}),r}catch(r){return console.warn("[PlaygroundCache] \ud398\uc774\uc9c0 \ub85c\ub4dc \uc2e4\ud328",{path:n,error:r}),[]}}));for(const e of a)Array.isArray(e)&&n.push(...e);s+=4}return console.log("[PlaygroundCache] \uc2a4\ub0c5\uc0f7 \uc804\uccb4 \ub85c\ub529 \uc644\ub8cc",{count:n.length}),n}catch(e){return console.error("[PlaygroundCache] \uc2a4\ub0c5\uc0f7 \ub85c\ub529 \uc624\ub958:",e),[]}}const qc=()=>{(0,r.useEffect)(()=>((()=>{const e=document.querySelector("meta[name=viewport]");e&&e.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=10.0, user-scalable=yes")})(),()=>{(()=>{const e=document.querySelector("meta[name=viewport]");e&&e.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no")})()}),[]);const e=async e=>{try{const t=Array.from(new Set(e.map(e=>e.code).filter(Boolean)));if(0===t.length)return e;const{data:n,error:s}=await Se.supabase.from("kindergarten_custom_info").select("kinder_code, building_images").in("kinder_code",t);if(s||!n)return e;const r={};return n.forEach(e=>{e&&Array.isArray(e.building_images)&&e.building_images.length>0&&(r[String(e.kinder_code)]=e.building_images[0])}),e.map(e=>{const t=e.code?r[String(e.code)]:void 0;return t?(0,Ae.A)((0,Ae.A)({},e),{},{image:t}):e})}catch(t){return e}},t=async e=>{try{const t=e.map(e=>e.code).filter(Boolean);if(0===t.length)return e;console.log("\ud83d\udd0d \ub9ac\ubdf0 \ud3c9\uc810 \uc870\ud68c \uc2dc\uc791, \uc720\uce58\uc6d0 \ucf54\ub4dc\ub4e4:",t);const n=await async function(e){try{const{data:t,error:n}=await Se.supabase.from("kindergarten_reviews").select("kindergarten_code, rating").in("kindergarten_code",e).eq("is_deleted",!1);if(n)return console.error("\uc720\uce58\uc6d0 \ud3c9\uc810 \uc870\ud68c \uc624\ub958:",n),{};const s={};null===t||void 0===t||t.forEach(e=>{s[e.kindergarten_code]||(s[e.kindergarten_code]={total:0,count:0}),s[e.kindergarten_code].total+=e.rating,s[e.kindergarten_code].count+=1});const r={};return Object.keys(s).forEach(e=>{const{total:t,count:n}=s[e];r[e]=Number((t/n).toFixed(1))}),r}catch(t){return console.error("\uc720\uce58\uc6d0 \ud3c9\uc810 \uc870\ud68c \uc2e4\ud328:",t),{}}}(t);console.log("\ud83d\udcca \uc870\ud68c\ub41c \ud3c9\uc810\ub4e4:",n);return e.map(e=>{const t=e.code&&n[e.code]||0;return console.log("\u2b50 ".concat(e.name," (").concat(e.code,"): ").concat(e.rating," -> ").concat(t)),(0,Ae.A)((0,Ae.A)({},e),{},{rating:t})})}catch(t){return console.error("\ub9ac\ubdf0 \ud3c9\uc810 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328:",t),e}},s=()=>{g.current&&clearTimeout(g.current),g.current=window.setTimeout(()=>{const e=Date.now();e-w.current<500||(w.current=e,ct())},500)},a=async e=>{try{const t=e.map(e=>e.code).filter(Boolean);if(0===t.length)return e;const n=await async function(e){try{const{data:t,error:n}=await Se.supabase.from("childcare_reviews").select("childcare_code, rating").in("childcare_code",e).eq("is_deleted",!1);if(n)return console.error("\uc5b4\ub9b0\uc774\uc9d1 \ud3c9\uc810 \uc870\ud68c \uc624\ub958:",n),{};const s={};null===t||void 0===t||t.forEach(e=>{s[e.childcare_code]||(s[e.childcare_code]={total:0,count:0}),s[e.childcare_code].total+=e.rating,s[e.childcare_code].count+=1});const r={};return Object.keys(s).forEach(e=>{const{total:t,count:n}=s[e];r[e]=Number((t/n).toFixed(1))}),r}catch(yd){return console.error("\uc5b4\ub9b0\uc774\uc9d1 \ud3c9\uc810 \uc870\ud68c \uc2e4\ud328:",yd),{}}}(t);return e.map(e=>(0,Ae.A)((0,Ae.A)({},e),{},{rating:e.code&&n[e.code]||0}))}catch(t){return console.error("\uc5b4\ub9b0\uc774\uc9d1 \ud3c9\uc810 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328:",t),e}},i=async e=>{try{const t=e.map(e=>e.id).filter(Boolean);if(0===t.length)return e;console.log("\ud83d\udd0d \ub180\uc774\uc2dc\uc124 \ub9ac\ubdf0 \ud3c9\uc810 \uc870\ud68c \uc2dc\uc791, \ub180\uc774\uc2dc\uc124 ID\ub4e4:",t);const n=await async function(e){try{if(!e||0===e.length)return{};const{data:t,error:n}=await Se.supabase.from("playground_reviews").select("playground_id, rating").in("playground_id",e).eq("is_deleted",!1);if(n)return console.error("\ub180\uc774\uc2dc\uc124 \ud3c9\uc810 \uc870\ud68c \uc624\ub958:",n),{};const s={};null===t||void 0===t||t.forEach(e=>{s[e.playground_id]||(s[e.playground_id]={total:0,count:0}),s[e.playground_id].total+=e.rating,s[e.playground_id].count+=1});const r={};return Object.keys(s).forEach(e=>{const{total:t,count:n}=s[e];r[e]=Number((t/n).toFixed(1))}),r}catch(t){return console.error("\ub180\uc774\uc2dc\uc124 \ud3c9\uc810 \uc870\ud68c \uc2e4\ud328:",t),{}}}(t);console.log("\ud83d\udcca \uc870\ud68c\ub41c \ub180\uc774\uc2dc\uc124 \ud3c9\uc810\ub4e4:",n);return e.map(e=>{const t=e.id&&n[e.id]||0;return console.log("\u2b50 ".concat(e.name," (").concat(e.id,"): ").concat(e.rating," -> ").concat(t)),(0,Ae.A)((0,Ae.A)({},e),{},{rating:t})})}catch(t){return console.error("\ub180\uc774\uc2dc\uc124 \ub9ac\ubdf0 \ud3c9\uc810 \uc5c5\ub370\uc774\ud2b8 \uc2e4\ud328:",t),e}},o=ne(),[l]=Ce(),c=(0,r.useRef)(null),d=(0,r.useRef)(null),u=(0,r.useRef)([]),h=(0,r.useRef)(null),m=(0,r.useRef)([]),f=(0,r.useRef)(null),g=(0,r.useRef)(null),p=(0,r.useRef)(""),x=(0,r.useRef)(""),v=(0,r.useRef)(new Map),y=(0,r.useRef)(null),b=(0,r.useRef)(!1),w=(0,r.useRef)(0),j=(0,r.useRef)([]),_=(0,r.useRef)("markers"),N=(0,r.useRef)(new Set),k=(0,r.useRef)(new Map),C=(0,r.useRef)(new Map),S=(0,r.useRef)(new Set),E=(0,r.useRef)(new Set),P=(0,r.useRef)(new Map),A=(0,r.useRef)(!1),T=(0,r.useRef)(!1),I=(0,r.useRef)(!1),[M,L]=(0,r.useState)(!1),R=(0,r.useRef)(0),O=(0,r.useRef)(""),D=(0,r.useRef)(!1),z=(0,r.useRef)(!1),U=()=>{q(!0)},F=()=>{D.current||S.current.size>0||q(!1)},q=e=>{if(e)return R.current=Date.now(),I.current=!0,void L(!0);const t=Date.now()-R.current,n=()=>{I.current=!1,L(!1)};t<600?setTimeout(n,600-t):n()},B=(0,r.useCallback)(()=>{0===E.current.size&&0===S.current.size||(E.current.forEach(e=>e.abort()),E.current.clear(),S.current.clear(),F())},[F]);(0,r.useEffect)(()=>()=>{B()},[B]);const V=(0,r.useRef)(new pc),W=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(void 0===e||null===e)return;if(void 0===t||null===t)return;const s=String(e).trim(),r=String(t).trim();if(!s||!r)return;y.current=n;const a=re||H||"all";x.current="".concat(s,"_").concat(r,"_").concat(a),T.current=!0,A.current=!1},H=l.get("type"),Y=H||"all",[K,J]=(0,r.useState)([]),[G,X]=(0,r.useState)([]),[$,Z]=(0,r.useState)(!1),[Q,ee]=(0,r.useState)(""),[te,se]=(0,r.useState)("distance"),[re,ae]=(0,r.useState)(Y),[ie,oe]=(0,r.useState)(null),[le,ce]=(0,r.useState)(null),[de,ue]=(0,r.useState)(!1),[he,me]=(0,r.useState)(!1),[fe,ge]=(0,r.useState)(0),[pe,xe]=(0,r.useState)(1),[ve,ye]=(0,r.useState)(null),[be,we]=(0,r.useState)(null),je="playground"===re||"playground"===H,_e=async(e,t,n,s,r)=>{const a={kindergarten:["\uc0ac\ub791\uc720\uce58\uc6d0","\uafc8\ub098\ubb34\uc720\uce58\uc6d0","\ud587\uc0b4\uc720\uce58\uc6d0","\ubcc4\ube5b\uc720\uce58\uc6d0","\ubbf8\ub798\uc720\uce58\uc6d0","\ud589\ubcf5\uc720\uce58\uc6d0","\ud76c\ub9dd\uc720\uce58\uc6d0","\uc0ac\ub791\ub098\ubb34\uc720\uce58\uc6d0","\uafc8\uc758\uc720\uce58\uc6d0","\uc0c8\uc2f9\uc720\uce58\uc6d0","\ud55c\ub9c8\uc74c\uc720\uce58\uc6d0","\uc628\ub204\ub9ac\uc720\uce58\uc6d0","\uc0ac\ub791\ube5b\uc720\uce58\uc6d0","\uafc8\ud130\uc720\uce58\uc6d0","\ud76c\ub9dd\ub098\ubb34\uc720\uce58\uc6d0"],childcare:["\uc0ac\ub791\uc5b4\ub9b0\uc774\uc9d1","\uafc8\ub098\ubb34\uc5b4\ub9b0\uc774\uc9d1","\ud587\uc0b4\uc5b4\ub9b0\uc774\uc9d1","\ubcc4\ube5b\uc5b4\ub9b0\uc774\uc9d1","\ubbf8\ub798\uc5b4\ub9b0\uc774\uc9d1","\ud589\ubcf5\uc5b4\ub9b0\uc774\uc9d1","\ud76c\ub9dd\uc5b4\ub9b0\uc774\uc9d1","\uc0ac\ub791\ub098\ubb34\uc5b4\ub9b0\uc774\uc9d1","\uafc8\uc758\uc5b4\ub9b0\uc774\uc9d1","\uc0c8\uc2f9\uc5b4\ub9b0\uc774\uc9d1","\ud55c\ub9c8\uc74c\uc5b4\ub9b0\uc774\uc9d1","\uc628\ub204\ub9ac\uc5b4\ub9b0\uc774\uc9d1","\uc0ac\ub791\ube5b\uc5b4\ub9b0\uc774\uc9d1","\uafc8\ud130\uc5b4\ub9b0\uc774\uc9d1","\ud76c\ub9dd\ub098\ubb34\uc5b4\ub9b0\uc774\uc9d1"]},i=["\uad6d\uacf5\ub9bd","\uc0ac\ub9bd","\ubc95\uc778","\ubbfc\uac04"],o=["\uc11c\uc6b8\ud2b9\ubcc4\uc2dc\uad50\uc721\uccad","\uacbd\uae30\ub3c4\uad50\uc721\uccad","\uc778\ucc9c\uad11\uc5ed\uc2dc\uad50\uc721\uccad"];let l={sido:"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc",sgg:"\uc911\uad6c",sidoCode:11,sggCode:11140};try{const n=await(0,yc.reverseGeocodeWithCache)(e,t);n&&(l={sido:n.sidoName,sgg:n.sggName,sidoCode:n.kindergartenSidoCode,sggCode:n.kindergartenSggCode},console.log("\ud83d\udccd \uc2e4\uc81c \uc9c0\uc5ed \uc815\ubcf4: ".concat(l.sido," ").concat(l.sgg," (").concat(l.sidoCode,", ").concat(l.sggCode,")")))}catch(g){console.warn("\uc5ed\uc9c0\uc624\ucf54\ub529 \uc2e4\ud328, \uae30\ubcf8\uac12 \uc0ac\uc6a9:",g)}const c=(u=t,(d=e)>=37.55&&d<=37.65&&u>=126.95&&u<=127.1?"\uc11c\uc6b8\uc2dc \uc911\uad6c":d>=37.57&&d<=37.61&&u>=126.95&&u<=127?"\uc11c\uc6b8\uc2dc \uc885\ub85c\uad6c":d>=37.52&&d<=37.56&&u>=126.95&&u<=127.05?"\uc11c\uc6b8\uc2dc \uc6a9\uc0b0\uad6c":d>=37.5&&d<=37.6&&u>=127&&u<=127.1?"\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c":"\uc11c\uc6b8\uc2dc \uc911\uad6c");var d,u;const h=["\ud14c\ud5e4\ub780\ub85c","\uac15\ub0a8\ub300\ub85c","\uc11c\ucd08\ub300\ub85c","\uc62c\ub9bc\ud53d\ub300\ub85c","\uc138\uc885\ub300\ub85c","\uc744\uc9c0\ub85c","\uc885\ub85c","\uba85\ub3d9\uae38","\ub0a8\ub300\ubb38\ub85c","\ud0dc\ud3c9\ub85c"],m=[],f="all"===n?[...a.kindergarten,...a.childcare]:a[n]||a.kindergarten;for(let p=0;p<20;p++){const n=f[Math.floor(Math.random()*f.length)],a=n.includes("\uc720\uce58\uc6d0"),d=e+.015*(Math.random()-.5),u=t+.015*(Math.random()-.5),g=h[Math.floor(Math.random()*h.length)];m.push({id:"sample_".concat(p),name:"".concat(n),address:"".concat(c," ").concat(g," ").concat(100+p,"\ubc88\uae38 ").concat(p+1),lat:d,lng:u,type:a?"kindergarten":"childcare",establishment:i[Math.floor(Math.random()*i.length)],officeedu:o[Math.floor(Math.random()*o.length)],telno:"02-".concat(String(Math.floor(9e3*Math.random())+1e3),"-").concat(String(Math.floor(9e3*Math.random())+1e3)),opertime:["08:00-17:00","09:00-18:00","07:30-19:00","08:30-16:30"][Math.floor(4*Math.random())],prmstfcnt:Math.floor(80*Math.random())+30,ag3fpcnt:Math.floor(20*Math.random())+5,ag4fpcnt:Math.floor(20*Math.random())+5,ag5fpcnt:Math.floor(20*Math.random())+5,hpaddr:"https://".concat(n.replace(/[^\uac00-\ud7a3a-zA-Z0-9]/g,""),".com"),rating:0,distance:s&&r?et(s,r,d,u):0,image:void 0,sidoCode:l.sidoCode,sggCode:l.sggCode})}return m.sort((e,t)=>(e.distance||0)-(t.distance||0))};(0,r.useEffect)(()=>{const e=/Android/i.test(navigator.userAgent),t=setTimeout(()=>{var e,t;if(window.kakao&&window.kakao.maps)return console.log("\uce74\uce74\uc624 \ub9f5\uc774 \uc774\ubbf8 \ub85c\ub4dc\ub428"),Ne(),void ke();const n=/Android/i.test(navigator.userAgent)||"android"===(null===(e=window.Capacitor)||void 0===e?void 0:e.getPlatform())||"file:"===window.location.protocol;console.log("\ud50c\ub7ab\ud3fc \uac10\uc9c0:",{userAgent:navigator.userAgent,capacitor:null===(t=window.Capacitor)||void 0===t?void 0:t.getPlatform(),protocol:window.location.protocol,isAndroid:n});const s="270c11461f58d9b67430ed591295dd49";console.log("\uce74\uce74\uc624\ub9f5 \ud0a4 \ud655\uc778:",s?"\ud0a4 \uc874\uc7ac":"\ud0a4 \uc5c6\uc74c"),console.log("REACT_APP_KAKAO_MAP_KEY:","270c11461f58d9b67430ed591295dd49");if(document.querySelector('script[src*="dapi.kakao.com"]')){if(console.log("\uce74\uce74\uc624 \ub9f5 \uc2a4\ud06c\ub9bd\ud2b8\uac00 \uc774\ubbf8 \uc874\uc7ac\ud568"),window.kakao&&window.kakao.maps)window.kakao.maps.load(()=>{console.log("\uce74\uce74\uc624 \ub9f5 \ucd08\uae30\ud654 \uc644\ub8cc"),Ne(),ke()});else{const e=setInterval(()=>{window.kakao&&window.kakao.maps&&(clearInterval(e),window.kakao.maps.load(()=>{console.log("\uce74\uce74\uc624 \ub9f5 \ucd08\uae30\ud654 \uc644\ub8cc"),Ne(),ke()}))},100);setTimeout(()=>{clearInterval(e),console.error("\uce74\uce74\uc624 \ub9f5 \ub85c\ub4dc \ud0c0\uc784\uc544\uc6c3"),alert("\uce74\uce74\uc624\ub9f5\uc744 \ub85c\ub4dc\ud558\ub294\ub370 \uc2dc\uac04\uc774 \uc624\ub798 \uac78\ub9ac\uace0 \uc788\uc2b5\ub2c8\ub2e4.\n\ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694.")},15e3)}return}const r=document.createElement("script");r.src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=".concat(s,"&autoload=false"),r.async=!0,n||(r.crossOrigin="anonymous"),r.onerror=e=>{console.error("\uce74\uce74\uc624 \ub9f5 \uc2a4\ud06c\ub9bd\ud2b8 \ub85c\ub4dc \uc2e4\ud328:",e),console.error("\uc0ac\uc6a9\ub41c \ud0a4:",s),console.error("\ud50c\ub7ab\ud3fc:",n?"Android":"Web"),console.error("User Agent:",navigator.userAgent),console.error("\ud604\uc7ac URL:",window.location.href),console.error("\ud504\ub85c\ud1a0\ucf5c:",window.location.protocol),console.error("\uc2a4\ud06c\ub9bd\ud2b8 URL:",r.src),e instanceof Event?(console.error("\uc5d0\ub7ec \ud0c0\uc785:",e.type),console.error("\uc5d0\ub7ec \ud0c0\uac9f:",e.target)):console.error("\uc5d0\ub7ec \uba54\uc2dc\uc9c0:",String(e)),console.error("\uc5d0\ub7ec \uc0c1\uc138:",e);alert(n?"\uce74\uce74\uc624\ub9f5\uc744 \ub85c\ub4dc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n\uc571\uc744 \ub2e4\uc2dc \ube4c\ub4dc\ud558\uace0 \uc2e4\ud589\ud574\uc8fc\uc138\uc694.\n\ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0\uc744 \ud655\uc778\ud574\uc8fc\uc138\uc694.":"\uce74\uce74\uc624\ub9f5\uc744 \ub85c\ub4dc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.\n\ub124\ud2b8\uc6cc\ud06c \uc5f0\uacb0\uacfc API \ud0a4\ub97c \ud655\uc778\ud574\uc8fc\uc138\uc694.")},r.onload=()=>{console.log("\uce74\uce74\uc624 \ub9f5 \uc2a4\ud06c\ub9bd\ud2b8 \ub85c\ub4dc \uc131\uacf5"),console.log("\ud50c\ub7ab\ud3fc:",n?"Android":"Web"),console.log("User Agent:",navigator.userAgent);const e=n?1e4:3e3,t=setInterval(()=>{window.kakao&&window.kakao.maps&&(clearInterval(t),console.log("\uce74\uce74\uc624 \ub9f5 API \uac1d\uccb4 \ud655\uc778\ub428, \ucd08\uae30\ud654 \uc2dc\uc791"),window.kakao.maps.load(()=>{console.log("\uce74\uce74\uc624 \ub9f5 \ucd08\uae30\ud654 \uc644\ub8cc"),Ne(),ke()}))},100);setTimeout(()=>{if(clearInterval(t),!window.kakao||!window.kakao.maps){var e;console.error("\uce74\uce74\uc624 \ub9f5 API \ucd08\uae30\ud654 \ud0c0\uc784\uc544\uc6c3"),console.error("window.kakao:",window.kakao),console.error("window.kakao.maps:",null===(e=window.kakao)||void 0===e?void 0:e.maps);alert(n?"\uce74\uce74\uc624\ub9f5 \ucd08\uae30\ud654\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.\n\uc571\uc744 \ub2e4\uc2dc \ube4c\ub4dc\ud558\uace0 \uc2e4\ud589\ud574\uc8fc\uc138\uc694.":"\uce74\uce74\uc624\ub9f5 API\uac00 \ub85c\ub4dc\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4.")}},e)},document.head.appendChild(r)},e?1e3:100);return()=>{clearTimeout(t)}},[]);const Ne=async()=>{if(!z.current)if(c.current){var e;if(!window.kakao||!window.kakao.maps)return console.error("\uce74\uce74\uc624 \ub9f5 API\uac00 \ub85c\ub4dc\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4"),console.error("window.kakao:",window.kakao),void console.error("window.kakao.maps:",null===(e=window.kakao)||void 0===e?void 0:e.maps);try{const e={center:new window.kakao.maps.LatLng(37.5665,126.978),level:5};c.current&&(c.current.style.width="100%",c.current.style.height="100%",c.current.style.minHeight="400px",c.current.style.position="relative",c.current.style.overflow="hidden",c.current.style.backgroundColor="#f5f5f5"),d.current=new window.kakao.maps.Map(c.current,e),h.current=new window.kakao.maps.InfoWindow({zIndex:1}),window.kakao.maps.event.addListener(d.current,"tilesloaded",()=>{console.log("\uc9c0\ub3c4 \ud0c0\uc77c \ub85c\ub529 \uc644\ub8cc"),setTimeout(()=>{d.current&&(d.current.relayout(),console.log("\uc9c0\ub3c4 \ub808\uc774\uc544\uc6c3 \uc0c8\ub85c\uace0\uce68 \uc644\ub8cc"),setTimeout(()=>{if(d.current){const e=d.current.getCenter(),t=d.current.getLevel();d.current.setCenter(e),d.current.setLevel(t),console.log("\uc9c0\ub3c4 \ud0c0\uc77c \uac15\uc81c \uc0c8\ub85c\uace0\uce68 \uc644\ub8cc")}},500))},1e3)}),window.kakao.maps.event.addListener(d.current,"dragstart",()=>{b.current=!0,g.current&&(clearTimeout(g.current),g.current=null)}),window.kakao.maps.event.addListener(d.current,"dragend",()=>{b.current=!1,s()}),window.kakao.maps.event.addListener(d.current,"zoom_changed",()=>{b.current||s()}),window.kakao.maps.event.addListener(d.current,"idle",()=>{b.current||s()}),window.kakao.maps.event.addListener(d.current,"resize",()=>{console.log("\uc9c0\ub3c4 \ud06c\uae30 \ubcc0\uacbd\ub428"),setTimeout(()=>{d.current&&d.current.relayout()},100)}),console.log("JavaScript \uc9c0\ub3c4 \ucd08\uae30\ud654 \uc131\uacf5"),console.log("\uc9c0\ub3c4 \uc778\uc2a4\ud134\uc2a4:",d.current),z.current=!0}catch(t){console.error("\uc9c0\ub3c4 \ucd08\uae30\ud654 \uc2e4\ud328:",t),t instanceof Error?(console.error("\uc5d0\ub7ec \uc0c1\uc138:",t.message),console.error("\uc2a4\ud0dd \ud2b8\ub808\uc774\uc2a4:",t.stack)):console.error("\uc5d0\ub7ec \uc0c1\uc138:",String(t))}}else console.error("\uc9c0\ub3c4 \ucee8\ud14c\uc774\ub108\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4")},ke=()=>{He||Ke.current?console.log("\uc774\ubbf8 \ub85c\ub529 \uc911\uc774\ubbc0\ub85c \uc704\uce58 \ub85c\ub4dc \uac74\ub108\ub700"):Ve()},[Pe,Te]=(0,r.useState)(0),[Ie,Me]=(0,r.useState)(!1),[Le,Re]=(0,r.useState)(!1),[Oe,De]=(0,r.useState)(null),[ze,Ue]=(0,r.useState)(null),[Fe,qe]=(0,r.useState)(null),Be=e=>{let t=!1;null!==Oe&&(navigator.geolocation.clearWatch(Oe),De(null),t=!0),null!==ze&&(clearTimeout(ze),Ue(null),t=!0),Me(!1),Re(!1),Te(0),t&&console.log("GPS \uc694\uccad\uc774 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.".concat(e?" (".concat(e,")"):""))},Ve=()=>{if(navigator.geolocation){Be("\uc0c8\ub85c\uc6b4 \uc704\uce58 \uc694\uccad"),Me(!0);const e={enableHighAccuracy:!0,timeout:3e4,maximumAge:0},t=navigator.geolocation.watchPosition(e=>{const n=e.coords.latitude,s=e.coords.longitude,r=e.coords.accuracy;if(console.log("GPS \uc704\uce58 (\uc2dc\ub3c4 ".concat(Pe+1,"):"),{lat:n,lng:s,accuracy:r}),0===Pe&&(qe({lat:n,lng:s,accuracy:r}),console.log("\uccab \ubc88\uc9f8 GPS \uacb0\uacfc \uc800\uc7a5:",{lat:n,lng:s,accuracy:r})),r>1e4)console.warn("\uc704\uce58 \uc815\ud655\ub3c4\uac00 \ub9e4\uc6b0 \ub0ae\uc2b5\ub2c8\ub2e4. (\uc624\ucc28: ".concat(Math.round(r),"m) - \ud604\uc7ac \uc704\uce58\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.")),alert("GPS \uc815\ud655\ub3c4\uac00 \ub9e4\uc6b0 \ub0ae\uc2b5\ub2c8\ub2e4. (\uc624\ucc28: ".concat(Math.round(r),"m)\n\ud604\uc7ac \uc704\uce58\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."));else{if(r>2e3&&0===Pe){console.warn("\uc704\uce58 \uc815\ud655\ub3c4\uac00 \ub0ae\uc2b5\ub2c8\ub2e4. (\uc624\ucc28: ".concat(Math.round(r),"m) - \uc7ac\uc2dc\ub3c4 \uc911... (1/1)")),Te(1);const e=setTimeout(()=>{if(navigator.geolocation){const e=navigator.geolocation.watchPosition(t=>{const n=t.coords.latitude,s=t.coords.longitude,r=t.coords.accuracy;if(console.log("GPS \uc704\uce58 (\uc7ac\uc2dc\ub3c4):",{lat:n,lng:s,accuracy:r}),r>2e3){if(console.warn("\uc7ac\uc2dc\ub3c4 \ud6c4\uc5d0\ub3c4 \uc815\ud655\ub3c4\uac00 \ub0ae\uc2b5\ub2c8\ub2e4. (\uc624\ucc28: ".concat(Math.round(r),"m) - \uccab \ubc88\uc9f8 \uacb0\uacfc\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.")),Fe){console.log("\uccab \ubc88\uc9f8 GPS \uacb0\uacfc \uc0ac\uc6a9:",Fe);const{lat:t,lng:n}=Fe;if(navigator.geolocation.clearWatch(e),De(null),oe({lat:t,lng:n}),Te(0),Me(!1),Re(!0),d.current){const e=new window.kakao.maps.LatLng(t,n);d.current.setCenter(e),d.current.setLevel(3);const s=new window.kakao.maps.CustomOverlay({position:e,content:'\n                              <div style="\n                                position: relative;\n                                width: 20px;\n                                height: 20px;\n                                display: flex;\n                                align-items: center;\n                                justify-content: center;\n                              ">\n                                <div style="\n                                  position: absolute;\n                                  width: 40px;\n                                  height: 40px;\n                                  background: #4285f4;\n                                  border-radius: 50%;\n                                  opacity: 0.2;\n                                  animation: pulse 2s infinite;\n                                  transform: translate(-50%, -50%);\n                                  top: 50%;\n                                  left: 50%;\n                                "></div>\n                                <div style="\n                                  position: relative;\n                                  width: 20px;\n                                  height: 20px;\n                                  background: #4285f4;\n                                  border: 3px solid #ffffff;\n                                  border-radius: 50%;\n                                  box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n                                  z-index: 1;\n                                "></div>\n                              </div>\n                              <style>\n                                @keyframes pulse {\n                                  0% { \n                                    transform: translate(-50%, -50%) scale(1); \n                                    opacity: 0.2; \n                                  }\n                                  50% { \n                                    transform: translate(-50%, -50%) scale(1.2); \n                                    opacity: 0.1; \n                                  }\n                                  100% { \n                                    transform: translate(-50%, -50%) scale(1); \n                                    opacity: 0.2; \n                                  }\n                                }\n                              </style>\n                            ',yAnchor:.5,xAnchor:.5});s.setMap(d.current),ye(s),we(null),console.log("\uccab \ubc88\uc9f8 GPS \uc704\uce58\uc5d0\uc11c \uadfc\ucc98 \uc720\uce58\uc6d0 \uac80\uc0c9 \uc2dc\uc791"),xe(2),Xe(t,n)}}}else if(console.log("\uc7ac\uc2dc\ub3c4 GPS \uacb0\uacfc \uc0ac\uc6a9:",{lat:n,lng:s,accuracy:r}),navigator.geolocation.clearWatch(e),De(null),oe({lat:n,lng:s}),Te(0),Me(!1),Re(!0),d.current){const e=new window.kakao.maps.LatLng(n,s);d.current.setCenter(e),d.current.setLevel(3);const t=new window.kakao.maps.CustomOverlay({position:e,content:'\n                            <div style="\n                              position: relative;\n                              width: 20px;\n                              height: 20px;\n                              display: flex;\n                              align-items: center;\n                              justify-content: center;\n                            ">\n                              <div style="\n                                position: absolute;\n                                width: 40px;\n                                height: 40px;\n                                background: #4285f4;\n                                border-radius: 50%;\n                                opacity: 0.2;\n                                animation: pulse 2s infinite;\n                                transform: translate(-50%, -50%);\n                                top: 50%;\n                                left: 50%;\n                              "></div>\n                              <div style="\n                                position: relative;\n                                width: 20px;\n                                height: 20px;\n                                background: #4285f4;\n                                border: 3px solid #ffffff;\n                                border-radius: 50%;\n                                box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n                                z-index: 1;\n                              "></div>\n                            </div>\n                            <style>\n                              @keyframes pulse {\n                                0% { \n                                  transform: translate(-50%, -50%) scale(1); \n                                  opacity: 0.2; \n                                }\n                                50% { \n                                  transform: translate(-50%, -50%) scale(1.2); \n                                  opacity: 0.1; \n                                }\n                                100% { \n                                  transform: translate(-50%, -50%) scale(1); \n                                  opacity: 0.2; \n                                }\n                              }\n                            </style>\n                          ',yAnchor:.5,xAnchor:.5});t.setMap(d.current),ye(t),we(null),console.log("\uc7ac\uc2dc\ub3c4 GPS \uc704\uce58\uc5d0\uc11c \uadfc\ucc98 \uc720\uce58\uc6d0 \uac80\uc0c9 \uc2dc\uc791"),xe(2),Xe(n,s)}},t=>{console.error("\uc7ac\uc2dc\ub3c4 GPS \uc624\ub958:",t);let n="\uc54c \uc218 \uc5c6\ub294 \uc624\ub958";switch(t.code){case t.PERMISSION_DENIED:n="\uc704\uce58 \uad8c\ud55c\uc774 \uac70\ubd80\ub418\uc5c8\uc2b5\ub2c8\ub2e4";break;case t.POSITION_UNAVAILABLE:n="\uc704\uce58 \uc815\ubcf4\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4";break;case t.TIMEOUT:n="\uc704\uce58 \uc694\uccad \uc2dc\uac04 \ucd08\uacfc"}if(console.log("GPS \uc624\ub958: ".concat(n)),Fe){console.log("\uc7ac\uc2dc\ub3c4 \uc2e4\ud328, \uccab \ubc88\uc9f8 GPS \uacb0\uacfc \uc0ac\uc6a9:",Fe);const{lat:t,lng:n}=Fe;if(navigator.geolocation.clearWatch(e),De(null),oe({lat:t,lng:n}),Te(0),Me(!1),Re(!0),d.current){const e=new window.kakao.maps.LatLng(t,n);d.current.setCenter(e),d.current.setLevel(3);const s=new window.kakao.maps.CustomOverlay({position:e,content:'\n                            <div style="\n                              position: relative;\n                              width: 20px;\n                              height: 20px;\n                              display: flex;\n                              align-items: center;\n                              justify-content: center;\n                            ">\n                              <div style="\n                                position: absolute;\n                                width: 40px;\n                                height: 40px;\n                                background: #4285f4;\n                                border-radius: 50%;\n                                opacity: 0.2;\n                                animation: pulse 2s infinite;\n                                transform: translate(-50%, -50%);\n                                top: 50%;\n                                left: 50%;\n                              "></div>\n                              <div style="\n                                position: relative;\n                                width: 20px;\n                                height: 20px;\n                                background: #4285f4;\n                                border: 3px solid #ffffff;\n                                border-radius: 50%;\n                                box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n                                z-index: 1;\n                              "></div>\n                            </div>\n                            <style>\n                              @keyframes pulse {\n                                0% { \n                                  transform: translate(-50%, -50%) scale(1); \n                                  opacity: 0.2; \n                                }\n                                50% { \n                                  transform: translate(-50%, -50%) scale(1.2); \n                                  opacity: 0.1; \n                                }\n                                100% { \n                                  transform: translate(-50%, -50%) scale(1); \n                                  opacity: 0.2; \n                                }\n                              }\n                            </style>\n                          ',yAnchor:.5,xAnchor:.5});s.setMap(d.current),ye(s),we(null),console.log("\uccab \ubc88\uc9f8 GPS \uc704\uce58\uc5d0\uc11c \uadfc\ucc98 \uc720\uce58\uc6d0 \uac80\uc0c9 \uc2dc\uc791"),xe(2),Xe(t,n)}}},{enableHighAccuracy:!0,timeout:3e4,maximumAge:0});De(e)}},3e3);return void Ue(e)}if(r>2e3){if(console.warn("1\ubc88 \uc2dc\ub3c4 \ud6c4\uc5d0\ub3c4 \uc815\ud655\ub3c4\uac00 \ub0ae\uc2b5\ub2c8\ub2e4. (\uc624\ucc28: ".concat(Math.round(r),"m) - \uccab \ubc88\uc9f8 \uacb0\uacfc\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4.")),Fe){console.log("\uccab \ubc88\uc9f8 GPS \uacb0\uacfc \uc0ac\uc6a9:",Fe);const{lat:e,lng:t}=Fe;if(oe({lat:e,lng:t}),Te(0),Me(!1),Re(!0),ve&&ve.setMap(null),be&&be.setMap(null),d.current){const n=new window.kakao.maps.LatLng(e,t);d.current.setCenter(n),d.current.setLevel(3);const s=new window.kakao.maps.CustomOverlay({position:n,content:'\n                    <div style="\n                      position: relative;\n                      width: 20px;\n                      height: 20px;\n                      display: flex;\n                      align-items: center;\n                      justify-content: center;\n                    ">\n                      <div style="\n                        position: absolute;\n                        width: 40px;\n                        height: 40px;\n                        background: #4285f4;\n                        border-radius: 50%;\n                        opacity: 0.2;\n                        animation: pulse 2s infinite;\n                        transform: translate(-50%, -50%);\n                        top: 50%;\n                        left: 50%;\n                      "></div>\n                      <div style="\n                        position: relative;\n                        width: 20px;\n                        height: 20px;\n                        background: #4285f4;\n                        border: 3px solid #ffffff;\n                        border-radius: 50%;\n                        box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n                        z-index: 1;\n                      "></div>\n                    </div>\n                    <style>\n                      @keyframes pulse {\n                        0% { \n                          transform: translate(-50%, -50%) scale(1); \n                          opacity: 0.2; \n                        }\n                        50% { \n                          transform: translate(-50%, -50%) scale(1.2); \n                          opacity: 0.1; \n                        }\n                        100% { \n                          transform: translate(-50%, -50%) scale(1); \n                          opacity: 0.2; \n                        }\n                      }\n                    </style>\n                  ',yAnchor:.5,xAnchor:.5});s.setMap(d.current),ye(s),we(null),console.log("\uccab \ubc88\uc9f8 GPS \uc704\uce58\uc5d0\uc11c \uadfc\ucc98 \uc720\uce58\uc6d0 \uac80\uc0c9 \uc2dc\uc791"),xe(2),Xe(e,t)}return}console.warn("\uccab \ubc88\uc9f8 \uacb0\uacfc\uac00 \uc5c6\uc5b4 \ud604\uc7ac \uc704\uce58\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."),alert("GPS \uc815\ud655\ub3c4\uac00 \ub0ae\uc2b5\ub2c8\ub2e4. (\uc624\ucc28: ".concat(Math.round(r),"m)\n\ud604\uc7ac \uc704\uce58\ub97c \uc0ac\uc6a9\ud569\ub2c8\ub2e4."))}}if(navigator.geolocation.clearWatch(t),De(null),oe({lat:n,lng:s}),Te(0),Me(!1),Re(!0),ve&&ve.setMap(null),be&&be.setMap(null),d.current){const e=new window.kakao.maps.LatLng(n,s);d.current.setCenter(e),d.current.setLevel(3);const t=new window.kakao.maps.CustomOverlay({position:e,content:'\n                <div style="\n                  position: relative;\n                  width: 20px;\n                  height: 20px;\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                ">\n                  \x3c!-- \ud384\uc2a4 \uc560\ub2c8\uba54\uc774\uc158 \ub9c1 --\x3e\n                  <div style="\n                    position: absolute;\n                    width: 40px;\n                    height: 40px;\n                    background: #4285f4;\n                    border-radius: 50%;\n                    opacity: 0.2;\n                    animation: pulse 2s infinite;\n                    transform: translate(-50%, -50%);\n                    top: 50%;\n                    left: 50%;\n                  "></div>\n                  \x3c!-- \uba54\uc778 \ub9c8\ucee4 --\x3e\n                  <div style="\n                    position: relative;\n                    width: 20px;\n                    height: 20px;\n                    background: #4285f4;\n                    border: 3px solid #ffffff;\n                    border-radius: 50%;\n                    box-shadow: 0 2px 8px rgba(0,0,0,0.3);\n                    z-index: 1;\n                  "></div>\n                </div>\n                <style>\n                  @keyframes pulse {\n                    0% { \n                      transform: translate(-50%, -50%) scale(1); \n                      opacity: 0.2; \n                    }\n                    50% { \n                      transform: translate(-50%, -50%) scale(1.2); \n                      opacity: 0.1; \n                    }\n                    100% { \n                      transform: translate(-50%, -50%) scale(1); \n                      opacity: 0.2; \n                    }\n                  }\n                </style>\n              ',yAnchor:.5,xAnchor:.5});ve&&ve.setMap(null),be&&be.setMap(null),t.setMap(d.current),ye(t),we(null),console.log("GPS \uc704\uce58\uc5d0\uc11c \uadfc\ucc98 \uc720\uce58\uc6d0 \uac80\uc0c9 \uc2dc\uc791"),xe(2),Xe(n,s)}},e=>{console.error("\uc704\uce58 \uc815\ubcf4 \uc624\ub958:",e),navigator.geolocation.clearWatch(t),De(null),Me(!1),Re(!1),Te(0);let n="\uc704\uce58 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.";switch(e.code){case e.PERMISSION_DENIED:n="\uc704\uce58 \uc811\uadfc \uad8c\ud55c\uc774 \uac70\ubd80\ub418\uc5c8\uc2b5\ub2c8\ub2e4.";break;case e.POSITION_UNAVAILABLE:n="\uc704\uce58 \uc815\ubcf4\ub97c \uc0ac\uc6a9\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.";break;case e.TIMEOUT:n="\uc704\uce58 \uc694\uccad \uc2dc\uac04\uc774 \ucd08\uacfc\ub418\uc5c8\uc2b5\ub2c8\ub2e4."}alert(n)},e);De(t)}else alert("\uc704\uce58 \uc11c\ube44\uc2a4\ub97c \uc9c0\uc6d0\ud558\uc9c0 \uc54a\ub294 \ube0c\ub77c\uc6b0\uc800\uc785\ub2c8\ub2e4.")},We=()=>{xe(2),ie?Xe(ie.lat,ie.lng):$e("\uc11c\uc6b8\ud2b9\ubcc4\uc2dc","\uac15\ub0a8\uad6c")},[He,Ye]=(0,r.useState)(!1),Ke=(0,r.useRef)(!1),Je=(0,r.useRef)(""),Ge=(0,r.useRef)(null),Xe=async(s,r)=>{const i="".concat(s.toFixed(6),"_").concat(r.toFixed(6));if(He||Ke.current||Je.current===i)return void console.log("\uc774\ubbf8 \ub85c\ub529 \uc911\uc774\uac70\ub098 \ub3d9\uc77c\ud55c \uc694\uccad\uc774\ubbc0\ub85c \uc911\ubcf5 \uc2e4\ud589 \ubc29\uc9c0");if("playground"===re||"playground"===H)return console.log("\ub180\uc774\uc2dc\uc124 \ubaa8\ub4dc - \ucd08\uae30 \uadfc\ucc98 \ub85c\ub529 \uc2a4\ud0b5, \ubdf0\ud3ec\ud2b8 \ub85c\ub529\uc73c\ub85c \ucc98\ub9ac"),Z(!1),A.current=!1,void(T.current=!1);A.current=!0,T.current=!1,Ge.current&&Ge.current.abort();const o=new AbortController;Ge.current=o,Je.current=i,Ke.current=!0,Ye(!0),Z(!0);try{if("childcare"===re||"childcare"===H){console.log("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc2dc\uc2a4\ud15c\uc744 \uc0ac\uc6a9\ud558\uc5ec \ub370\uc774\ud130 \ub85c\ub529");let e=null,t=null;try{var l,c;console.log("\uc5b4\ub9b0\uc774\uc9d1\uc6a9 \uc5ed\uc9c0\uc624\ucf54\ub529\uc73c\ub85c \uc815\ud655\ud55c \uc9c0\uc5ed \ucc3e\uae30 \uc2dc\uc791");const i=await(0,yc.reverseGeocodeWithCache)(s,r);if(!i){console.error("\uc5b4\ub9b0\uc774\uc9d1 \uc5ed\uc9c0\uc624\ucf54\ub529 \uc2e4\ud328");const e=await _e(s,r,"childcare",s,r);return J(()=>e),X(()=>e),rt(e),void Z(!1)}const{sidoName:o,sggName:d,childcareArcode:u}=i;if(e=null!==(l=i.kindergartenSidoCode)&&void 0!==l?l:null,t=null!==(c=i.kindergartenSggCode)&&void 0!==c?c:null,!u){console.warn("\uc5b4\ub9b0\uc774\uc9d1 \uc9c0\uc5ed\ucf54\ub4dc(arcode)\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4");const n=await(0,xc.hN)(s,r,10);if(console.log("\ud3f4\ubc31 API \uacb0\uacfc:",n.length,"\uac1c"),n.length>0){const a=n.map(e=>(0,xc.iO)(e,s,r,void 0)),i=(await Promise.all(a)).sort((e,t)=>(e.distance||0)-(t.distance||0));J(()=>i),X(()=>i),W(e,t,i),rt(i)}return void Z(!1)}console.log("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc2dc\uc2a4\ud15c\uc744 \ud1b5\ud55c \ub370\uc774\ud130 \ub85c\ub529 \uc2dc\uc791"),console.log("\uc9c0\uc5ed:",o,d,"arcode:",u);const{smartChildcareLoader:h}=await Promise.resolve().then(n.bind(n,478)),m=await h.loadChildcareData(u,"".concat(o," ").concat(d));if(console.log("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \ub85c\ub529 \uacb0\uacfc:",{source:m.source,dataCount:m.data.length,loadTime:m.loadTime+"ms"}),m.error)throw new Error("\uc5b4\ub9b0\uc774\uc9d1 \ub370\uc774\ud130 \ub85c\ub529 \uc2e4\ud328: ".concat(m.error));if(m.data.length>0){console.log("\uc5b4\ub9b0\uc774\uc9d1 \uc9c0\uc624\ucf54\ub529 \uc2dc\uc791...");const n=m.data.map(e=>(0,xc.iO)(e,s,r,u)),i=(await Promise.all(n)).sort((e,t)=>(e.distance||0)-(t.distance||0));console.log("\u2705 \uc5b4\ub9b0\uc774\uc9d1 \ub370\uc774\ud130 \ubcc0\ud658 \uc644\ub8cc: ".concat(i.length,"\uac1c"));const o=await a(i);J(()=>o),X(()=>o),W(e,t,o),rt(o)}else console.log("\uadfc\ucc98\uc5d0 \uc5b4\ub9b0\uc774\uc9d1\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),J([]),X([]),W(e,t,[])}catch(h){console.error("\uc5b4\ub9b0\uc774\uc9d1 \uce90\uc2dc \uc2dc\uc2a4\ud15c \uc624\ub958:",h);const n=await _e(s,r,"childcare",s,r);J(()=>n),X(()=>n),W(e,t,n),rt(n)}}else{var u;console.log("\uce74\uce74\uc624 \uc5ed\uc9c0\uc624\ucf54\ub529\uc73c\ub85c \uc815\ud655\ud55c \uc9c0\uc5ed \ucc3e\uae30 \uc2dc\uc791");const n=await(0,yc.reverseGeocodeWithCache)(s,r);if(!n){console.error("\uc5ed\uc9c0\uc624\ucf54\ub529 \uc2e4\ud328");const e=await _e(s,r,"kindergarten",s,r);return J(()=>e),X(()=>e),y.current=e,rt(e),void Z(!1)}const{sidoName:a,sggName:i,kindergartenSidoCode:o,kindergartenSggCode:l}=n;console.log("\uce90\uc2dc \uc2dc\uc2a4\ud15c\uc744 \ud1b5\ud55c \ub370\uc774\ud130 \ub85c\ub529 \uc2dc\uc791"),console.log("\uc9c0\uc5ed:",a,i),console.log("\uc2dc\ub3c4\ucf54\ub4dc:",o,"\uc2dc\uad70\uad6c\ucf54\ub4dc:",l);const c={sido:a,sgg:i};console.log("\uc9c0\uc5ed\uba85:",c),console.log("\ud604\uc7ac \uc9c0\uc5ed\uc758 \uc720\uce58\uc6d0\ub9cc \ub85c\ub529:",c.sido,c.sgg);const h=await V.current.loadKindergartenData(c.sido,c.sgg);if(console.log("\uce90\uc2dc \ub85c\ub529 \uacb0\uacfc:",{source:h.source,dataCount:h.data.length,loadTime:h.loadTime+"ms"}),h.error)throw new Error("\ub370\uc774\ud130 \ub85c\ub529 \uc2e4\ud328: ".concat(h.error));const m={status:"SUCCESS",kinderInfo:h.data};if(console.log("\uce90\uc2dc\uc5d0\uc11c \ub85c\ub4dc\ub41c \ub370\uc774\ud130:",m),console.log("API \uc751\ub2f5 \ud0a4\ub4e4:",Object.keys(m)),console.log("kinderInfo \ud0c0\uc785:",typeof m.kinderInfo),console.log("kinderInfo \uae38\uc774:",null===(u=m.kinderInfo)||void 0===u?void 0:u.length),m.kinderInfo&&m.kinderInfo.length>0){console.log("\ud83d\udd0d \ub370\uc774\ud130 \ubcc0\ud658 \uc2dc\uc791 - \uc6d0\ubcf8 \ub370\uc774\ud130 \uc0d8\ud50c:",m.kinderInfo[0]);const n=m.kinderInfo.filter(e=>{const t=parseFloat(e.lttdcdnt),n=parseFloat(e.lngtcdnt),s=st(t,n);return s||console.warn("\u274c \uc720\ud6a8\ud558\uc9c0 \uc54a\uc740 \uc88c\ud45c: ".concat(e.kindername," - lat: ").concat(t,", lng: ").concat(n)),s}).map(e=>{const t=parseFloat(e.lttdcdnt),n=parseFloat(e.lngtcdnt),a=et(s,r,t,n);return console.log("\uac70\ub9ac \uacc4\uc0b0: \ud604\uc7ac\uc704\uce58(".concat(s,", ").concat(r,") -> \uc720\uce58\uc6d0(").concat(t,", ").concat(n,") = ").concat(a.toFixed(2),"km")),{id:String(e.kinderCode||e.kindercode||e.kcode),code:String(e.kinderCode||e.kindercode||e.kcode),name:e.kindername||"\uc720\uce58\uc6d0\uba85 \uc5c6\uc74c",address:e.addr||"\uc8fc\uc18c \uc5c6\uc74c",lat:t,lng:n,type:"kindergarten",establishment:Qe(e.establish),officeedu:e.officeedu||"\uad50\uc721\uccad \uc815\ubcf4 \uc5c6\uc74c",telno:e.telno||"",opertime:e.opertime||"",prmstfcnt:parseInt(e.prmstfcnt)||0,ag3fpcnt:parseInt(e.ag3fpcnt)||0,ag4fpcnt:parseInt(e.ag4fpcnt)||0,ag5fpcnt:parseInt(e.ag5fpcnt)||0,hpaddr:e.hpaddr||"",rating:0,distance:a,image:void 0,sidoCode:o,sggCode:l}}).sort((e,t)=>(e.distance||0)-(t.distance||0));console.log("\u2705 \ub370\uc774\ud130 \ubcc0\ud658 \uc644\ub8cc: ".concat(n.length,"\uac1c \uc720\ud6a8\ud55c \uc720\uce58\uc6d0")),console.log("\ubcc0\ud658\ub41c \uc720\uce58\uc6d0 \ub370\uc774\ud130:",n);const a=await e(n),i=await t(a);J(()=>i),X(()=>i),W(o,l,i),rt(i)}else{console.log("API\uc5d0\uc11c \uc720\uce58\uc6d0 \ub370\uc774\ud130\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c"),console.log("API \uc751\ub2f5 \uc804\uccb4:",m),console.log("\ub2e4\ub978 \uc9c0\uc5ed \ucf54\ub4dc\ub85c \uc7ac\uc2dc\ub3c4 \uc911...");if(await tt(s,r)||(J([]),X([]),W(o,l,[])),d.current){document.querySelectorAll(".marker").forEach(e=>e.remove())}}}}catch(m){if(m instanceof Error&&"AbortError"===m.name)return void console.log("API \uc694\uccad\uc774 \ucde8\uc18c\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");console.error("\uadfc\ucc98 \uc720\uce58\uc6d0 \uac80\uc0c9 \uc624\ub958:",m),alert("\uc720\uce58\uc6d0 \uc815\ubcf4\ub97c \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.\n\uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."),J([]),X([])}finally{Z(!1),Ye(!1),Ke.current=!1,Ge.current=null,setTimeout(()=>{Je.current=""},5e3),A.current=!1,y.current&&!T.current&&(T.current=!0)}},$e=async(n,s)=>{Z(!0),A.current=!0,T.current=!1;const{sidoCode:r,sggCode:a}=Kl(n,s);try{if("childcare"===re||"childcare"===H){console.log("\uc804\uad6d\uc5b4\ub9b0\uc774\uc9d1 \ud3ec\ud138 API\ub97c \uc0ac\uc6a9\ud558\uc5ec \uc9c0\uc5ed\ubcc4 \uc5b4\ub9b0\uc774\uc9d1 \ub370\uc774\ud130 \ub85c\ub529");try{const e=Ze(n,s),t=await(0,xc.cc)(e);if(console.log("\uc804\uad6d\uc5b4\ub9b0\uc774\uc9d1 \ud3ec\ud138 API \uacb0\uacfc:",t.length,"\uac1c"),t.length>0){console.log("\uc9c0\uc5ed\ubcc4 \uc9c0\uc624\ucf54\ub529 \uc2dc\uc791..."),console.log("\ud83d\udd0d arcode \uc804\ub2ec:",e);const n=t.map(t=>(0,xc.iO)(t,null===ie||void 0===ie?void 0:ie.lat,null===ie||void 0===ie?void 0:ie.lng,e)),s=(await Promise.all(n)).sort((e,t)=>(e.distance||0)-(t.distance||0));console.log("\u2705 \uc9c0\uc5ed\ubcc4 \uc5b4\ub9b0\uc774\uc9d1 \ub370\uc774\ud130 \ubcc0\ud658 \uc644\ub8cc: ".concat(s.length,"\uac1c")),J(()=>s),X(()=>s),W(r,a,s),rt(s)}else console.log("\ud574\ub2f9 \uc9c0\uc5ed\uc5d0 \uc5b4\ub9b0\uc774\uc9d1\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."),J([]),X([]),W(r,a,[])}catch(i){console.error("\uc804\uad6d\uc5b4\ub9b0\uc774\uc9d1 \ud3ec\ud138 API \uc624\ub958:",i);const e=37.5665,t=126.978,n=await _e(e,t,"childcare",null===ie||void 0===ie?void 0:ie.lat,null===ie||void 0===ie?void 0:ie.lng);J(()=>n),X(()=>n),W(r,a,n),rt(n)}}else{0;const n="https://e-childschoolinfo.moe.go.kr/api/notice/basicInfo2.do?key=".concat("c5aef787ac5a4473a74264b4b5bfce74","&sidoCode=").concat(r,"&sggCode=").concat(a);console.log("\uc9c0\uc5ed\ubcc4 API \ud638\ucd9c \uc2dc\ub3c4:",n);const s="https://api.allorigins.win/raw?url=".concat(encodeURIComponent(n));console.log("\uc9c0\uc5ed\ubcc4 \ud504\ub85d\uc2dc\ub97c \ud1b5\ud55c API \ud638\ucd9c: ".concat(s));const i=await fetch(s,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}});if(!i.ok)throw new Error("\uc9c0\uc5ed\ubcc4 \ud504\ub85d\uc2dc API \ud638\ucd9c \uc2e4\ud328: ".concat(i.status));const o=await i.json();if(console.log("\uc9c0\uc5ed\ubcc4 API \uc751\ub2f5 \ub370\uc774\ud130:",o),o.kinderInfo&&o.kinderInfo.length>0){const n=37.5665,s=126.978;console.log("\ud83d\udd0d \uac70\ub9ac \uacc4\uc0b0 - currentLocation:",ie);let i={lat:n,lng:s};if(d.current){const e=d.current.getCenter();i={lat:e.getLat(),lng:e.getLng()},console.log("\ud83d\udd0d \uc9c0\ub3c4 \uc911\uc2ec \uc88c\ud45c:",i)}const l=ie||i,c=o.kinderInfo.filter(e=>st(parseFloat(e.lttdcdnt),parseFloat(e.lngtcdnt))).map(e=>({id:String(e.kinderCode||e.kindercode||e.kcode),code:String(e.kinderCode||e.kindercode||e.kcode),name:e.kindername,address:e.addr,lat:parseFloat(e.lttdcdnt),lng:parseFloat(e.lngtcdnt),type:"kindergarten",establishment:Qe(e.establish),officeedu:e.officeedu,telno:e.telno,opertime:e.opertime,prmstfcnt:parseInt(e.prmstfcnt)||0,ag3fpcnt:parseInt(e.ag3fpcnt)||0,ag4fpcnt:parseInt(e.ag4fpcnt)||0,ag5fpcnt:parseInt(e.ag5fpcnt)||0,hpaddr:e.hpaddr,rating:0,distance:et(l.lat,l.lng,parseFloat(e.lttdcdnt),parseFloat(e.lngtcdnt)),image:void 0,sidoCode:r,sggCode:a})),u=await e(c),h=await t(u);J(()=>h),X(()=>h),W(r,a,h),rt(h),F()}else{console.log("\uc9c0\uc5ed\ubcc4 API\uc5d0\uc11c \uc720\uce58\uc6d0 \ub370\uc774\ud130\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c, \uc0d8\ud50c \ub370\uc774\ud130 \uc0ac\uc6a9");const e=37.5665,t=126.978,n=await _e(e,t,re,null===ie||void 0===ie?void 0:ie.lat,null===ie||void 0===ie?void 0:ie.lng);J(()=>n),X(()=>n),W(r,a,n),rt(n)}}}catch(o){console.error("\uc720\uce58\uc6d0 \ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",o);const e=37.5665,t=126.978,n=await _e(e,t,re,null===ie||void 0===ie?void 0:ie.lat,null===ie||void 0===ie?void 0:ie.lng);J(()=>n),X(()=>n),W(r,a,n),rt(n)}finally{Z(!1),A.current=!1,y.current&&!T.current&&(T.current=!0)}},Ze=(e,t)=>{const n={"\uc11c\uc6b8\ud2b9\ubcc4\uc2dc":{"\uc911\uad6c":"11140","\uc885\ub85c\uad6c":"11110","\uc131\ub3d9\uad6c":"11200","\uc6a9\uc0b0\uad6c":"11170","\uc601\ub4f1\ud3ec\uad6c":"11560","\ub3d9\uc791\uad6c":"11590","\uad00\uc545\uad6c":"11620","\uac15\ub0a8\uad6c":"11680","\uac15\ub3d9\uad6c":"11740","\uac15\ubd81\uad6c":"11305","\uac15\uc11c\uad6c":"11500","\uad11\uc9c4\uad6c":"11215","\uad6c\ub85c\uad6c":"11530","\uae08\ucc9c\uad6c":"11545","\ub178\uc6d0\uad6c":"11350","\ub3c4\ubd09\uad6c":"11320","\ub3d9\ub300\ubb38\uad6c":"11230","\ub9c8\ud3ec\uad6c":"11440","\uc11c\ub300\ubb38\uad6c":"11410","\uc11c\ucd08\uad6c":"11650","\uc1a1\ud30c\uad6c":"11710","\uc591\ucc9c\uad6c":"11470","\uc740\ud3c9\uad6c":"11380","\uc911\ub791\uad6c":"11260"}}[e];return n&&t&&n[t]||"11140"},Qe=e=>({1:"\uad6d\uacf5\ub9bd",2:"\uc0ac\ub9bd",3:"\ubc95\uc778",4:"\ubbfc\uac04",5:"\uc9c1\uc7a5",6:"\uac00\uc815",7:"\ubd80\ubaa8\ud611\ub3d9",8:"\uc0ac\ud68c\ubcf5\uc9c0\ubc95\uc778",9:"\uae30\ud0c0"}[e]||e),et=(e,t,n,s)=>{const r=(n-e)*Math.PI/180,a=(s-t)*Math.PI/180,i=Math.sin(r/2)*Math.sin(r/2)+Math.cos(e*Math.PI/180)*Math.cos(n*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},tt=async(n,s)=>{const r=[{sidoCode:11,sggCode:11140,name:"\uc911\uad6c"},{sidoCode:11,sggCode:11110,name:"\uc885\ub85c\uad6c"},{sidoCode:11,sggCode:11200,name:"\uc131\ub3d9\uad6c"},{sidoCode:11,sggCode:11170,name:"\uc6a9\uc0b0\uad6c"},{sidoCode:11,sggCode:11560,name:"\uc601\ub4f1\ud3ec\uad6c"},{sidoCode:11,sggCode:11590,name:"\ub3d9\uc791\uad6c"},{sidoCode:11,sggCode:11620,name:"\uad00\uc545\uad6c"}];for(const i of r)try{0,console.log("".concat(i.name,"(").concat(i.sggCode,")\ub85c \uc7ac\uc2dc\ub3c4 \uc911...")),await new Promise(e=>setTimeout(e,1e3));const r="https://e-childschoolinfo.moe.go.kr/api/notice/basicInfo2.do?key=".concat("c5aef787ac5a4473a74264b4b5bfce74","&sidoCode=").concat(i.sidoCode,"&sggCode=").concat(i.sggCode),a="https://api.allorigins.win/raw?url=".concat(encodeURIComponent(r)),o=await fetch(a,{method:"GET",headers:{"X-Requested-With":"XMLHttpRequest"}});if(o.ok){const r=await o.text(),a=JSON.parse(r);if(a.kinderInfo&&a.kinderInfo.length>0){console.log("".concat(i.name,"\uc5d0\uc11c \uc720\uce58\uc6d0 \ub370\uc774\ud130 \ubc1c\uacac!"),a.kinderInfo.length,"\uac1c");const r=a.kinderInfo.filter(e=>st(parseFloat(e.lttdcdnt),parseFloat(e.lngtcdnt))).map(e=>({id:String(e.kindercode||e.kcode),code:String(e.kindercode||e.kcode),name:e.kindername||"\uc720\uce58\uc6d0\uba85 \uc5c6\uc74c",address:e.addr||"\uc8fc\uc18c \uc5c6\uc74c",lat:parseFloat(e.lttdcdnt),lng:parseFloat(e.lngtcdnt),type:"kindergarten",establishment:Qe(e.establish),officeedu:e.officeedu||"\uad50\uc721\uccad \uc815\ubcf4 \uc5c6\uc74c",telno:e.telno||"",opertime:e.opertime||"",prmstfcnt:parseInt(e.prmstfcnt)||0,ag3fpcnt:parseInt(e.ag3fpcnt)||0,ag4fpcnt:parseInt(e.ag4fpcnt)||0,ag5fpcnt:parseInt(e.ag5fpcnt)||0,hpaddr:e.hpaddr||"",rating:2*Math.random()+3,distance:et(n,s,parseFloat(e.lttdcdnt),parseFloat(e.lngtcdnt)),image:void 0,sidoCode:i.sidoCode,sggCode:i.sggCode})).sort((e,t)=>(e.distance||0)-(t.distance||0)),o=await e(r),l=await t(o);return J(()=>l),X(()=>l),rt(l),!0}}}catch(a){console.warn("".concat(i.name," \uc7ac\uc2dc\ub3c4 \uc2e4\ud328:"),a);continue}return console.log("\ubaa8\ub4e0 \ub300\uc548 \uc9c0\uc5ed\uc5d0\uc11c\ub3c4 \ub370\uc774\ud130\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c"),alert("\ud574\ub2f9 \uc9c0\uc5ed\uc5d0 \uc720\uce58\uc6d0 \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.\n\ub2e4\ub978 \uc9c0\uc5ed\uc744 \uc120\ud0dd\ud574\ubcf4\uc138\uc694."),!1},nt=e=>{if(!d.current)return;if("markers"!==_.current)return u.current.forEach(e=>e.setMap(null)),void m.current.forEach(e=>e.setMap(null));const t=v.current,n=new Set;e.forEach(e=>{var s;console.log("\ud83d\udccd \ub9c8\ucee4 \uc0dd\uc131:",e.name,"\uac70\ub9ac:",(null===(s=e.distance)||void 0===s?void 0:s.toFixed(2))||"0","km");const r=new window.kakao.maps.LatLng(e.lat,e.lng),a=String(e.id);n.add(a);let i=t.get(a);if(i){if(!i.marker){const t=new window.kakao.maps.Marker({position:r,map:d.current,title:e.name,zIndex:1});i.marker=t}i.marker.setMap(d.current),i.marker.setPosition(r),"function"===typeof i.marker.setTitle&&i.marker.setTitle(e.name),i.marker.setZIndex(1),i.ratingOverlay||(i.ratingOverlay=new window.kakao.maps.CustomOverlay({position:r,content:""})),i.ratingOverlay.setPosition(r),i.ratingOverlay.setContent('\n          <div style="\n            background: rgba(0, 0, 0, 0.8);\n            color: white;\n            padding: 2px 6px;\n            border-radius: 10px;\n            font-size: 12px;\n            font-weight: bold;\n            white-space: nowrap;\n            text-align: center;\n            border: 1px solid #fff;\n            position: relative;\n            top: -38px;\n            left: 0px;\n          ">\n            <span style="color:#fb8678;">\u2764</span> '.concat(e.rating?e.rating.toFixed(1):"0.0","\n          </div>\n        ")),i.ratingOverlay.setMap(d.current),i.data=e}else{const n=new window.kakao.maps.Marker({position:r,map:d.current,title:e.name,zIndex:1}),s=new window.kakao.maps.CustomOverlay({position:r,content:'\n          <div style="\n            background: rgba(0, 0, 0, 0.8);\n            color: white;\n            padding: 2px 6px;\n            border-radius: 10px;\n            font-size: 12px;\n            font-weight: bold;\n            white-space: nowrap;\n            text-align: center;\n            border: 1px solid #fff;\n            position: relative;\n            top: -38px;\n            left: 0px;\n          ">\n            <span style="color:#fb8678;">\u2764</span> '.concat(e.rating?e.rating.toFixed(1):"0.0","\n          </div>\n        "),yAnchor:1});window.kakao.maps.event.addListener(n,"click",()=>{f.current&&f.current.setMap(null),f.current=new window.kakao.maps.CustomOverlay({position:r,zIndex:1e4,content:'\n            <div style="\n              background: white;\n              border: 1px solid #ddd;\n              border-radius: 12px;\n              padding: 16px;\n              box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n              min-width: 240px;\n              max-width: 320px;\n              font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n              position: relative;\n              top: -70px;\n              left: 0px;\n              z-index: 1000;\n            ">\n              <div style="\n                display: flex;\n                align-items: center;\n                justify-content: space-between;\n                margin-bottom: 12px;\n                padding-bottom: 8px;\n                border-bottom: 1px solid #f0f0f0;\n              ">\n                <div style="\n                  display: flex;\n                  align-items: center;\n                  flex: 1;\n                ">\n                  <div style="\n                    width: 8px;\n                    height: 8px;\n                    border-radius: 50%;\n                    background: '.concat("kindergarten"===e.type?"#4CAF50":"childcare"===e.type?"#2196F3":"#9C27B0",';\n                    margin-right: 8px;\n                  "></div>\n                  <h3 style="\n                    margin: 0;\n                    color: #333;\n                    font-size: 16px;\n                    font-weight: 600;\n                    line-height: 1.3;\n                    word-break: keep-all;\n                    overflow-wrap: break-word;\n                    max-width: 240px;\n                    white-space: normal;\n                    hyphens: auto;\n                  ">\n                    ').concat(e.name,'\n                  </h3>\n                </div>\n                <button \n                  onclick="window.closeInfoWindow && window.closeInfoWindow()"\n                  style="\n                    background: none;\n                    border: none;\n                    font-size: 18px;\n                    color: #999;\n                    cursor: pointer;\n                    padding: 4px;\n                    margin-left: 8px;\n                    width: 24px;\n                    height: 24px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    border-radius: 50%;\n                    transition: all 0.2s;\n                  "\n                  onmouseover="this.style.backgroundColor=\'#f5f5f5\'; this.style.color=\'#666\'"\n                  onmouseout="this.style.backgroundColor=\'transparent\'; this.style.color=\'#999\'"\n                >\n                  \xd7\n                </button>\n              </div>\n              \n              <div style="margin-bottom: 8px;">\n                <p style="\n                  margin: 0;\n                  color: #666;\n                  font-size: 13px;\n                  line-height: 1.4;\n                  word-break: keep-all;\n                  overflow-wrap: break-word;\n                  max-width: 260px;\n                  white-space: normal;\n                  hyphens: auto;\n                ">\n                  ').concat(e.address,"\n                </p>\n              </div>\n              \n              ").concat("childcare"===e.type&&e.crceoname?'\n                <div style="margin-bottom: 8px;">\n                  <p style="\n                    margin: 0;\n                    color: #666;\n                    font-size: 12px;\n                    line-height: 1.4;\n                  ">\n                    \uc6d0\uc7a5: '.concat(e.crceoname,"\n                  </p>\n                </div>\n              "):"",'\n              \n              <div style="\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                margin-bottom: 12px;\n              ">\n                <div style="\n                  color: #666;\n                  font-size: 13px;\n                  display: flex;\n                  align-items: center;\n                  gap: 4px;\n                ">\n                  <span style="color:#fb8678;">\u2764</span>\n                  <span>\uce6d\ucc2c : ').concat(e.rating?e.rating.toFixed(1):"0.0",'</span>\n                </div>\n                <div style="\n                  color: #666;\n                  font-size: 13px;\n                ">\n                  ').concat(e.telno||"\uc5c6\uc74c","\n                </div>\n              </div>\n              \n              ").concat("childcare"===e.type&&e.crcapat?'\n                <div style="margin-bottom: 8px;">\n                  <p style="\n                    margin: 0;\n                    color: #666;\n                    font-size: 12px;\n                    line-height: 1.4;\n                  ">\n                    \uc815\uc6d0: '.concat(e.crcapat,"\uba85\n                  </p>\n                </div>\n              "):"","\n              \n              <button id=\"detail-nav\" style=\"\n                width: 100%;\n                background: linear-gradient(135deg, #fb8678 0%, #ff6b9d 100%);\n                color: white;\n                border: none;\n                padding: 10px 16px;\n                border-radius: 8px;\n                cursor: pointer;\n                font-size: 14px;\n                font-weight: 500;\n                transition: all 0.2s ease;\n                box-shadow: 0 2px 8px rgba(251, 134, 120, 0.3);\n              \" onmouseover=\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 12px rgba(251, 134, 120, 0.4)'\" onmouseout=\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(251, 134, 120, 0.3)'\">\n                \uc790\uc138\ud788 \ubcf4\uae30\n              </button>\n            </div>\n          "),yAnchor:1}),f.current.setMap(d.current),ce(e),n.setZIndex(100),setTimeout(()=>{const t=document.getElementById("detail-nav");t&&(t.onclick=()=>{var t,n;const s=e.type,r=encodeURIComponent(String(e.id)),a=String(null!==(t=e.sidoCode)&&void 0!==t?t:""),i=String(null!==(n=e.sggCode)&&void 0!==n?n:"");if("playground"===s){B();try{var o,l,c,d,u,h,m,f,g;window.sessionStorage.setItem("mompick:lastPlaygroundSelection",JSON.stringify({id:e.id,code:null!==(o=e.code)&&void 0!==o?o:e.id,name:e.name,address:e.address,lat:e.lat,lng:e.lng,establishment:e.establishment,officeedu:e.officeedu,telno:null!==(l=e.telno)&&void 0!==l?l:"",opertime:null!==(c=e.opertime)&&void 0!==c?c:"",prmstfcnt:null!==(d=e.prmstfcnt)&&void 0!==d?d:0,rating:null!==(u=e.rating)&&void 0!==u?u:0,distance:null!==(h=e.distance)&&void 0!==h?h:null,image:null!==(m=e.image)&&void 0!==m?m:"",type:e.type,sidoCode:null!==(f=e.sidoCode)&&void 0!==f?f:null,sggCode:null!==(g=e.sggCode)&&void 0!==g?g:null}))}catch(p){console.warn("[PlaygroundDetail] \uc138\uc158 \uc800\uc7a5 \uc2e4\ud328:",p)}const t=new URLSearchParams;a&&t.set("sidoCode",a),i&&t.set("sggCode",i);const n=t.toString();return void(window.location.href="/playground/".concat(r).concat(n?"?".concat(n):""))}if("childcare"===s){const e="/childcare/".concat(r).concat(i?"?arcode=".concat(i):"");window.location.href=e}else{const e=new URLSearchParams;a&&e.set("sidoCode",a),i&&e.set("sggCode",i);const t=e.toString();window.location.href="/kindergarten/".concat(r).concat(t?"?".concat(t):"")}})},0)}),t.set(a,{marker:n,ratingOverlay:s,data:e}),n.setMap(d.current),s.setMap(d.current)}}),u.current=Array.from(t.values()).map(e=>e.marker),m.current=Array.from(t.values()).map(e=>e.ratingOverlay)},st=(e,t)=>!isNaN(e)&&!isNaN(t)&&0!==e&&0!==t,rt=e=>{var t,n,s;if(!d.current)return;if(b.current)return;const r=null!==(t=null===(n=(s=d.current).getLevel)||void 0===n?void 0:n.call(s))&&void 0!==t?t:0,a=d.current.getBounds(),i=null===a||void 0===a?void 0:a.getSouthWest(),o=null===a||void 0===a?void 0:a.getNorthEast(),l=e.filter(e=>!i||!o||e.lat>=i.getLat()&&e.lat<=o.getLat()&&e.lng>=i.getLng()&&e.lng<=o.getLng()),c="playground"===re||"playground"===H,u=new Set,h=new Set;for(const d of l)d.sggCode&&u.add(String(d.sggCode)),d.sidoCode&&h.add(String(d.sidoCode));const m=c?r>=8:r>=8||r>=7&&h.size>=2||u.size>=5,f=c?!m&&r>=7:!m&&(r>=7||r>=6&&u.size>=3);return m?(U(),void at("city").finally(()=>{it("city"),F()})):f?(U(),void at("district").finally(()=>{it("district"),F()})):c?(j.current.forEach(e=>e.setMap(null)),j.current=[],_.current="markers",D.current=!0,nt(l),D.current=!1,void F()):"city"===_.current&&r>=8?(U(),void it("city")):"district"===_.current&&!m&&r>=7?(U(),void it("district")):m?(U(),void at("city").finally(()=>{it("city"),F()})):f?(U(),void at("district").finally(()=>{it("district"),F()})):(D.current=!0,j.current.forEach(e=>e.setMap(null)),j.current=[],_.current="markers",nt(l),D.current=!1,void F())},at=async s=>{try{if(!d.current)return;const v=d.current.getBounds();if(!v)return;const b=v.getSouthWest(),w=v.getNorthEast(),j="district"===s?[0,.5,1]:[0,1],_=("district"===s?[0,.5,1]:[0,1]).map(e=>b.getLat()+(w.getLat()-b.getLat())*e),A=j.map(e=>b.getLng()+(w.getLng()-b.getLng())*e),T=[];_.forEach(e=>A.forEach(t=>T.push({lat:e,lng:t})));const I=(await Promise.all(T.map(e=>(0,yc.reverseGeocodeWithCache)(e.lat,e.lng)))).reduce((e,t,n)=>{if(!t)return e;const s=T[n];return e.push({sidoName:t.sidoName,sggName:t.sggName,sidoCode:t.kindergartenSidoCode,sggCode:t.kindergartenSggCode,arcode:t.childcareArcode,hcode:t.hcode,sampleLat:null===s||void 0===s?void 0:s.lat,sampleLng:null===s||void 0===s?void 0:s.lng}),e},[]),M=[],L=new Set;I.forEach(e=>{const t="".concat(e.sidoCode,"_").concat(e.sggCode);if(!L.has(t)){L.add(t),M.push(e);const n=e.sampleLat,r=e.sampleLng;"district"===s?void 0!==n&&void 0!==r&&k.current.set(String(e.sggCode),{lat:n,lng:r,label:e.sggName,sidoCode:e.sidoCode,sggCode:e.sggCode}):void 0!==n&&void 0!==r&&C.current.set(String(e.sidoCode),{lat:n,lng:r,label:e.sidoName,sidoCode:e.sidoCode})}});const R=M.filter(e=>{if("childcare"===re||"childcare"===H){const t="cc:".concat(e.arcode);return!!e.arcode&&!N.current.has(t)}if("playground"===re||"playground"===H){if("city"===s||"district"===s)return!1;const t=e.hcode?"pg:".concat(e.hcode):e.sggCode?"pg:".concat(e.sidoCode,"_").concat(e.sggCode):null;return!!t&&!N.current.has(t)}const t="kg:".concat(e.sidoName,"/").concat(e.sggName);return!N.current.has(t)});if(0===R.length)return;if("childcare"===re||"childcare"===H){const{smartChildcareLoader:e}=await Promise.resolve().then(n.bind(n,478)),t=[];for(const n of R){const s="cc:".concat(n.arcode);if(S.current.size>=2)break;if(!S.current.has(s)&&!N.current.has(s)){S.current.add(s);try{var r;const a=await e.loadChildcareData(n.arcode,"".concat(n.sidoName," ").concat(n.sggName));if(null!==(r=a.data)&&void 0!==r&&r.length){const e=a.data.filter(e=>!!e.crcode),r=await Promise.all(e.map(e=>(0,xc.iO)(e,void 0,void 0,n.arcode)));t.push(...r),N.current.add(s)}}finally{S.current.delete(s)}}}if(t.length){const e=await a(t),n=y.current||[];y.current=pt(n,e)}}else if("playground"===re||"playground"===H){const e=[];for(const t of R){var i,o,l,c,u,h,m,f;const n=t.sggCode?String(t.sggCode).padStart(5,"0"):"",s=n?"sgg:".concat(n):t.hcode?"reg:".concat(t.hcode):"",r=s?"pg:".concat(s):null;if(!r)continue;if(S.current.size>=2)break;if(S.current.has(r))continue;if(N.current.has(r))continue;const a=s?P.current.get(s):void 0,g=null!==(i=null!==(o=t.sampleLat)&&void 0!==o?o:null===(l=d.current)||void 0===l||null===(c=l.getCenter())||void 0===c?void 0:c.getLat())&&void 0!==i?i:37.5665,v=null!==(u=null!==(h=t.sampleLng)&&void 0!==h?h:null===(m=d.current)||void 0===m||null===(f=m.getCenter())||void 0===f?void 0:f.getLng())&&void 0!==u?u:126.978;if(null!==a&&void 0!==a&&a.length){const t=await Promise.all(a.map(e=>Lc(e,g,v)));e.push(...t),N.current.add(r);continue}S.current.add(r);const y=new AbortController;E.current.add(y);try{const a=await Mc({regionCode:t.hcode,sggCode:n,signal:y.signal});if(a.items.length){const t=await Promise.all(a.items.map(e=>Lc(e,g,v)));e.push(...t),s&&P.current.set(s,a.items),N.current.add(r)}}catch(p){if("AbortError"===(null===p||void 0===p?void 0:p.name))return console.log("[PlaygroundMap] \uad6c \ub2e8\uc704 \uce90\uc2dc \ub85c\ub4dc \uc911\ub2e8",{regionCode:t.hcode,sggCode:n}),s&&P.current.delete(s),x.current="",void F();throw p}finally{E.current.delete(y),S.current.delete(r)}}if(e.length){const t=y.current||[];y.current=pt(t,e)}}else{const n=[];for(const s of R){const r="kg:".concat(s.sidoName,"/").concat(s.sggName);if(S.current.size>=2)break;if(!S.current.has(r)&&!N.current.has(r)){S.current.add(r);try{var g;const a=await V.current.loadKindergartenData(s.sidoName,s.sggName);if(null!==(g=a.data)&&void 0!==g&&g.length){const i=a.data.filter(e=>st(parseFloat(e.lttdcdnt),parseFloat(e.lngtcdnt))).map(e=>({id:String(e.kinderCode||e.kindercode||e.kcode),code:String(e.kinderCode||e.kindercode||e.kcode),name:e.kindername,address:e.addr,lat:parseFloat(e.lttdcdnt),lng:parseFloat(e.lngtcdnt),type:"kindergarten",establishment:Qe(e.establish),officeedu:e.officeedu,telno:e.telno,opertime:e.opertime,prmstfcnt:parseInt(e.prmstfcnt)||0,ag3fpcnt:parseInt(e.ag3fpcnt)||0,ag4fpcnt:parseInt(e.ag4fpcnt)||0,ag5fpcnt:parseInt(e.ag5fpcnt)||0,hpaddr:e.hpaddr,rating:0,distance:0,image:void 0,sidoCode:s.sidoCode,sggCode:s.sggCode})),o=await t(i),l=await e(o);n.push(...l),N.current.add(r)}}finally{S.current.delete(r)}}}if(n.length){const e=y.current||[];y.current=pt(e,n)}}}catch(yd){console.warn("ensureDataForBounds \uc624\ub958:",yd)}},it=(e,t)=>{if(D.current=!0,!d.current)return;u.current.forEach(e=>e.setMap(null)),m.current.forEach(e=>e.setMap(null)),_.current=e,j.current.forEach(e=>e.setMap(null)),j.current=[];const n=d.current.getBounds(),s=null===n||void 0===n?void 0:n.getSouthWest(),r=null===n||void 0===n?void 0:n.getNorthEast(),a=e=>!s||!r||e.lat>=s.getLat()&&e.lat<=r.getLat()&&e.lng>=s.getLng()&&e.lng<=r.getLng(),i=t||y.current||[],o=new Map,l=new Map;for(const d of i){if(!a(d))continue;const t=String("district"===e?d.sggCode||"":d.sidoCode||"");if(t&&(o.set(t,(o.get(t)||0)+1),!l.has(t)))if("district"===e){var c,h,f;const e=k.current.get(t),n=null!==(c=null===e||void 0===e?void 0:e.label)&&void 0!==c?c:lt(String(d.sidoCode||""),t);l.set(t,{lat:null!==(h=null===e||void 0===e?void 0:e.lat)&&void 0!==h?h:d.lat,lng:null!==(f=null===e||void 0===e?void 0:e.lng)&&void 0!==f?f:d.lng,label:n})}else{var g,p,x;const e=C.current.get(t),n=null!==(g=null===e||void 0===e?void 0:e.label)&&void 0!==g?g:ot(t);l.set(t,{lat:null!==(p=null===e||void 0===e?void 0:e.lat)&&void 0!==p?p:d.lat,lng:null!==(x=null===e||void 0===e?void 0:e.lng)&&void 0!==x?x:d.lng,label:n})}}"district"===e?k.current.forEach((e,t)=>{(!s||!r||e.lat>=s.getLat()&&e.lat<=r.getLat()&&e.lng>=s.getLng()&&e.lng<=r.getLng())&&(l.has(t)||l.set(t,{lat:e.lat,lng:e.lng,label:e.label}),o.has(t)||o.set(t,0))}):C.current.forEach((e,t)=>{(!s||!r||e.lat>=s.getLat()&&e.lat<=r.getLat()&&e.lng>=s.getLng()&&e.lng<=r.getLng())&&(l.has(t)||l.set(t,{lat:e.lat,lng:e.lng,label:e.label}),o.has(t)||o.set(t,0))}),l.forEach((t,n)=>{if("markers"===_.current&&"district"===e&&O.current&&n===O.current)return;const s=new window.kakao.maps.LatLng(t.lat,t.lng),r=e=>'\n          <div style="\n            background: rgba(0, 0, 0, 0.85);\n            color: #ffffff;\n            padding: 6px 10px;\n            border-radius: 10px;\n            font-size: 12px;\n            font-weight: 700;\n            white-space: nowrap;\n            text-align: center;\n            border: 1px solid #ffffff;\n            box-shadow: 0 4px 12px rgba(0,0,0,0.25);\n            position: relative;\n            left: 0px;\n          ">\n            '.concat(e,"\n          </div>\n        "),a=new window.kakao.maps.CustomOverlay({position:s,content:r(t.label),yAnchor:1,zIndex:2});a.setMap(d.current),j.current.push(a);/^(\uad6c\s*\d+|\d{4,})$/.test(t.label)&&(async()=>{try{const n=await(0,yc.reverseGeocodeWithCache)(t.lat,t.lng);if(!n)return;const s="district"===e?n.sggName||t.label:n.sidoName||t.label;s&&s!==t.label&&a.setContent(r(s))}catch(n){}})()}),D.current=!1,F()},ot=e=>{const t=parseInt(e),n=Object.entries(Hl).find(e=>{let[n,s]=e;return s.sidoCode===t});return n?n[0]:"\uc2dc\ub3c4 ".concat(e)},lt=(e,t)=>{var n;const s=parseInt(e),r=parseInt(t),a=Object.entries(Hl).find(e=>{let[t,n]=e;return n.sidoCode===s});if(!a)return"\uad6c ".concat(t);return(null===(n=Object.entries(a[1].sggCodes).find(e=>{let[t,n]=e;return n===r}))||void 0===n?void 0:n[0])||"\uad6c ".concat(t)},ct=async()=>{var s,r,o;if(!d.current)return;if(b.current)return;if(A.current)return y.current&&rt(y.current),void F();if(!T.current&&"playground"!==re&&"playground"!==H)return y.current&&rt(y.current),void F();U();const l=d.current.getCenter();if(!l)return void F();const c=l.getLat(),u=l.getLng(),h=null!==(s=null===(r=(o=d.current).getLevel)||void 0===r?void 0:r.call(o))&&void 0!==s?s:0;if(je&&h>=7)return rt(y.current||[]),void F();const m="".concat(h.toString(),"_").concat(c.toFixed(4),"_").concat(u.toFixed(4),"_").concat(re);if(p.current!==m){p.current=m;try{const s=await(0,yc.reverseGeocodeWithCache)(c,u);if(!s)return void F();const r="".concat(s.kindergartenSidoCode,"_").concat(s.kindergartenSggCode,"_").concat(re||H||"all");if(x.current===r&&y.current)return rt(y.current),void F();if(x.current=r,"childcare"===re||"childcare"===H){const{smartChildcareLoader:e}=await Promise.resolve().then(n.bind(n,478)),t=await e.loadChildcareData(s.childcareArcode,"".concat(s.sidoName," ").concat(s.sggName));if(!t.data||0===t.data.length)return nt([]),W(s.kindergartenSidoCode,s.kindergartenSggCode,[]),void F();const r=t.data.filter(e=>!!e.crcode),i=(await Promise.all(r.map(e=>(0,xc.iO)(e,c,u,s.childcareArcode)))).map(e=>(0,Ae.A)({},e)),o=await a(i);J(()=>o),X(()=>o),W(s.kindergartenSidoCode,s.kindergartenSggCode,o),rt(o),F()}else if("playground"===re||"playground"===H){var f,g,v,w,j;if((null!==(f=null===(g=d.current)||void 0===g||null===(v=g.getLevel)||void 0===v?void 0:v.call(g))&&void 0!==f?f:h)>=7)return rt(y.current||[]),void F();const e={lat:c,lng:u},t=s.hcode?String(s.hcode):"";let n=null;t&&(n=await Ic(t));const r=s.kindergartenSggCode?String(s.kindergartenSggCode).replace(/\D+/g,"").padStart(5,"0"):"",a=r?"sgg:".concat(r):t?"reg:".concat(t):"";let o=null!==(w=null===(j=n)||void 0===j?void 0:j.items)&&void 0!==w?w:[];var _,N;if(o.length)console.log("[PlaygroundMap] \uc9c0\uc5ed \uce90\uc2dc \uc0ac\uc6a9",{regionCode:t,received:o.length,snapshot:null===(_=n)||void 0===_||null===(N=_.meta)||void 0===N?void 0:N.snapshotPrefix});if(!o.length){const e=a?P.current.get(a):void 0;null!==e&&void 0!==e&&e.length&&(o=e,console.log("[PlaygroundMap] \uad6c \ub2e8\uc704 \uce90\uc2dc \uc0ac\uc6a9",{regionCode:t,sggCode:r,received:o.length}))}if(!o.length){console.log("[PlaygroundMap] \uc9c0\uc5ed \uce90\uc2dc \uc5c6\uc74c \u2192 \uad6c \ub2e8\uc704 \uce90\uc2dc \ub85c\ub529 \uc2dc\ub3c4",{regionCode:t,sggCode:r});const e=new AbortController;E.current.add(e);try{const n=await Mc({regionCode:t,sggCode:r,signal:e.signal});n.items.length&&(o=n.items,a&&P.current.set(a,n.items),console.log("[PlaygroundMap] \uad6c \ub2e8\uc704 \uce90\uc2dc \ub85c\ub4dc \uc131\uacf5",{regionCode:t,sggCode:r,regionCount:n.regionCodes.length,received:n.items.length}))}catch(k){if("AbortError"===(null===k||void 0===k?void 0:k.name))return console.log("[PlaygroundMap] \uad6c \ub2e8\uc704 \uce90\uc2dc \ub85c\ub4dc \uc911\ub2e8",{regionCode:t,sggCode:r}),a&&P.current.delete(a),x.current="",void F();console.warn("[PlaygroundMap] \uad6c \ub2e8\uc704 \uce90\uc2dc \ub85c\ub4dc \uc2e4\ud328",{regionCode:t,sggCode:r,error:k})}finally{E.current.delete(e)}}if(o.length||(console.log("[PlaygroundMap] \uad6c \ub2e8\uc704 \uce90\uc2dc \uc2e4\ud328 \u2192 \uc804\uccb4 \uc2a4\ub0c5\uc0f7 \ub85c\ub529 \uc2dc\ub3c4"),o=await Fc(),console.log("[PlaygroundMap] \uc2a4\ub0c5\uc0f7 \ub85c\ub4dc \uacb0\uacfc",{snapshotCount:o.length})),!o.length)return nt([]),W(s.kindergartenSidoCode,s.kindergartenSggCode,[]),void F();try{console.log("[PlaygroundMap] \uc6d0\ubcf8 items \ubc30\uc5f4 \uae38\uc774:",o.length,"\uc9c0\uc5ed\ucf54\ub4dc:",t),o.length>0&&console.log("[PlaygroundMap] \uccab \ud56d\ubaa9 \uc0d8\ud50c:",o[0])}catch(C){}const l=await Promise.all(o.map(t=>Lc(t,e.lat,e.lng)));try{console.log("[PlaygroundMap] \uc9c0\ub3c4 \ubcc0\ud658 \ub370\uc774\ud130 \uac1c\uc218:",l.length),l.length>0&&console.log("[PlaygroundMap] \ubcc0\ud658 \uc0d8\ud50c:",l[0])}catch(S){}const m=l.map(t=>(0,Ae.A)((0,Ae.A)({},t),{},{distance:et(e.lat,e.lng,t.lat,t.lng)})),p=m.sort((e,t)=>{var n,s;return(null!==(n=e.distance)&&void 0!==n?n:Number.POSITIVE_INFINITY)-(null!==(s=t.distance)&&void 0!==s?s:Number.POSITIVE_INFINITY)}).slice(0,250),b=await(async e=>{try{const t=Array.from(new Set(e.map(e=>e.id).filter(Boolean)));if(0===t.length)return e;const{data:n,error:s}=await Se.supabase.from("playground_custom_info").select("playground_id, building_images").in("playground_id",t).eq("is_active",!0);if(s||!n)return e;const r={};return n.forEach(e=>{e&&Array.isArray(e.building_images)&&e.building_images.length>0&&(r[String(e.playground_id)]=e.building_images[0])}),e.map(e=>{const t=e.id?r[String(e.id)]:void 0;return t?(0,Ae.A)((0,Ae.A)({},e),{},{image:t}):e})}catch(t){return e}})(p),A=await i(b);J(()=>A),X(()=>A),W(s.kindergartenSidoCode,s.kindergartenSggCode,A),rt(A),at("district").catch(e=>{console.warn("Playground viewport prefetch failed:",e)}),F()}else{const n=(await V.current.loadKindergartenData(s.sidoName,s.sggName)).data||[],r=ie||{lat:c,lng:u};console.log("\ud83d\udd0d \ubdf0\ud3ec\ud2b8 \ub85c\ub529 - \uac70\ub9ac \uacc4\uc0b0 \uae30\uc900:",ie?"\ud604\uc7ac \uc704\uce58":"\uc9c0\ub3c4 \uc911\uc2ec",r);const a=n.filter(e=>st(parseFloat(e.lttdcdnt),parseFloat(e.lngtcdnt))).map(e=>({id:String(e.kinderCode||e.kindercode||e.kcode),code:String(e.kinderCode||e.kindercode||e.kcode),name:e.kindername,address:e.addr,lat:parseFloat(e.lttdcdnt),lng:parseFloat(e.lngtcdnt),type:"kindergarten",establishment:Qe(e.establish),officeedu:e.officeedu,telno:e.telno,opertime:e.opertime,prmstfcnt:parseInt(e.prmstfcnt)||0,ag3fpcnt:parseInt(e.ag3fpcnt)||0,ag4fpcnt:parseInt(e.ag4fpcnt)||0,ag5fpcnt:parseInt(e.ag5fpcnt)||0,hpaddr:e.hpaddr,rating:0,distance:et(r.lat,r.lng,parseFloat(e.lttdcdnt),parseFloat(e.lngtcdnt)),image:void 0,sidoCode:s.kindergartenSidoCode,sggCode:s.kindergartenSggCode})),i=await e(a),o=await t(i);J(()=>o),X(()=>o),W(s.kindergartenSidoCode,s.kindergartenSggCode,o),rt(o),F()}}catch(yd){console.error("\ubdf0\ud3ec\ud2b8 \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",yd)}finally{F()}}else F()},dt=()=>{f.current&&f.current.setMap(null),ce(null)};(0,r.useEffect)(()=>{let e=K;Q&&(e=e.filter(e=>e.name.toLowerCase().includes(Q.toLowerCase())||e.address.toLowerCase().includes(Q.toLowerCase()))),"all"!==re&&(e=e.filter(e=>e.type===re)),e.sort((e,t)=>"distance"===te?(e.distance||0)-(t.distance||0):(t.rating||0)-(e.rating||0)),X(e)},[K,Q,re,te]),(0,r.useEffect)(()=>{nt(G)},[G]);const ut=()=>{me(!1)},ht=e=>{e.ctrlKey&&(e.preventDefault(),e.stopPropagation())},mt=(0,r.useRef)(null),ft=(0,r.useRef)(null),gt=(0,r.useRef)(null);(0,r.useEffect)(()=>()=>{Be(),Ge.current&&(Ge.current.abort(),Ge.current=null)},[]),(0,r.useEffect)(()=>{const e=mt.current,t=ft.current,n=gt.current;return e&&e.addEventListener("wheel",ht,{passive:!1}),t&&t.addEventListener("wheel",ht,{passive:!1}),n&&n.addEventListener("wheel",ht,{passive:!1}),window.closeInfoWindow=dt,()=>{e&&e.removeEventListener("wheel",ht),t&&t.removeEventListener("wheel",ht),n&&n.removeEventListener("wheel",ht),delete window.closeInfoWindow}},[]);const pt=(e,t)=>{const n=e||[],s=new Map;for(const a of n)s.set(String(a.id),a);for(const a of t){const e=String(a.id),t=s.get(e);if(t){var r;const n=(0,Ae.A)((0,Ae.A)((0,Ae.A)({},t),a),{},{image:null!==(r=a.image)&&void 0!==r?r:t.image});s.set(e,n)}else s.set(e,a)}return Array.from(s.values())};return(0,r.useEffect)(()=>{if(!d.current)return;const e=d.current;je&&M?(e.setDraggable(!1),e.setZoomable(!1)):(e.setDraggable(!0),e.setZoomable(!0))},[M,je]),(0,Ee.jsxs)("div",{className:"h-screen flex flex-col bg-white",children:[(0,Ee.jsxs)("div",{className:"bg-gradient-to-r from-[#fb8678]/10 to-[#e67567]/10 border-b border-[#fb8678]/20",children:[(0,Ee.jsxs)("div",{className:"px-3 py-2 flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:()=>o("/main"),className:"p-1.5 hover:bg-white/50 rounded-lg transition-colors",children:(0,Ee.jsx)(ll,{className:"w-4 h-4 text-gray-700"})}),(0,Ee.jsx)("h1",{className:"text-base font-bold text-gray-900",children:(()=>{switch(H){case"kindergarten":return"\uc720\uce58\uc6d0";case"childcare":return"\uc5b4\ub9b0\uc774\uc9d1";case"playground":return"\ub180\uc774\uc2dc\uc124";default:return"\uc720\uce58\uc6d0 & \uc5b4\ub9b0\uc774\uc9d1"}})()}),(0,Ee.jsx)("div",{className:"w-6"})]}),(0,Ee.jsxs)("div",{ref:mt,className:"px-3 pb-2",children:[(0,Ee.jsx)("div",{className:"relative mb-2",children:(0,Ee.jsxs)("div",{className:"flex items-center bg-white rounded-lg border border-[#fb8678]/20 p-2 shadow-sm",children:[(0,Ee.jsx)(jc,{className:"w-3.5 h-3.5 text-[#fb8678] mr-2"}),(0,Ee.jsx)("input",{type:"text",placeholder:"\uc2dc\uc124\uba85 \ub610\ub294 \uc8fc\uc18c\ub85c \uac80\uc0c9",value:Q,onChange:e=>ee(e.target.value),onKeyPress:e=>{"Enter"===e.key&&We()},className:"flex-1 bg-transparent text-gray-900 placeholder-gray-500 outline-none text-xs"}),(0,Ee.jsx)("button",{onClick:We,className:"ml-2 px-3 py-1.5 bg-[#fb8678] text-white rounded-md text-xs font-medium hover:bg-[#e67567] transition-colors",children:"\uac80\uc0c9"})]})}),(0,Ee.jsxs)("div",{ref:ft,className:"flex items-center justify-between",children:[(0,Ee.jsxs)("div",{className:"flex space-x-1.5",children:[(0,Ee.jsx)("button",{onClick:()=>se("distance"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 ".concat("distance"===te?"bg-[#fb8678] text-white shadow-sm":"bg-white text-gray-600 border border-[#fb8678]/20 hover:bg-[#fb8678]/5"),children:"\uac70\ub9ac\uc21c"}),(0,Ee.jsx)("button",{onClick:()=>se("rating"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 ".concat("rating"===te?"bg-[#fb8678] text-white shadow-sm":"bg-white text-gray-600 border border-[#fb8678]/20 hover:bg-[#fb8678]/5"),children:"\uce6d\ucc2c\uc21c"})]}),!H&&(0,Ee.jsxs)("div",{className:"flex space-x-1.5",children:[(0,Ee.jsx)("button",{onClick:()=>ae("all"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 ".concat("all"===re?"bg-[#fb8678] text-white shadow-sm":"bg-white text-gray-600 border border-[#fb8678]/20 hover:bg-[#fb8678]/5"),children:"\uc804\uccb4"}),(0,Ee.jsx)("button",{onClick:()=>ae("kindergarten"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 ".concat("kindergarten"===re?"bg-[#fb8678] text-white shadow-sm":"bg-white text-gray-600 border border-[#fb8678]/20 hover:bg-[#fb8678]/5"),children:"\uc720\uce58\uc6d0"}),(0,Ee.jsx)("button",{onClick:()=>ae("childcare"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 ".concat("childcare"===re?"bg-[#fb8678] text-white shadow-sm":"bg-white text-gray-600 border border-[#fb8678]/20 hover:bg-[#fb8678]/5"),children:"\uc5b4\ub9b0\uc774\uc9d1"}),(0,Ee.jsx)("button",{onClick:()=>ae("playground"),className:"px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-200 ".concat("playground"===re?"bg-[#fb8678] text-white shadow-sm":"bg-white text-gray-600 border border-[#fb8678]/20 hover:bg-[#fb8678]/5"),children:"\ub180\uc774\uc2dc\uc124"})]})]})]})]}),(0,Ee.jsxs)("div",{className:"flex-1 relative",children:[(0,Ee.jsx)("div",{ref:c,className:"w-full h-full"}),je&&M&&(0,Ee.jsx)("div",{className:"absolute inset-0 z-30 flex flex-col items-center justify-center bg-black/30 backdrop-blur-[2px]",children:(0,Ee.jsxs)("div",{className:"rounded-full bg-white/95 px-5 py-3 shadow-lg flex items-center gap-3",children:[(0,Ee.jsx)(_l,{className:"h-5 w-5 animate-spin text-[#fb8678]"}),(0,Ee.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"\uc8fc\ubcc0 \ub180\uc774\uc2dc\uc124\uc744 \ubd88\ub7ec\uc624\ub294 \uc911\uc774\uc5d0\uc694\u2026"})]})}),(0,Ee.jsx)("button",{onClick:Ve,disabled:Ie,className:"absolute top-4 right-4 p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 z-10 border group ".concat(Le?"bg-[#fb8678] border-[#fb8678] text-white":"bg-white border-gray-200 hover:bg-gray-50"," ").concat(Ie?"opacity-50 cursor-not-allowed":""),title:Le?"\uc704\uce58 \uac31\uc2e0":"\ud604\uc7ac \uc704\uce58 \ucc3e\uae30",children:Ie?(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-current"}):(0,Ee.jsx)(_c,{className:"w-5 h-5 transition-colors duration-200 ".concat(Le?"text-white":"text-gray-700 group-hover:text-[#fb8678]")})}),(0,Ee.jsx)("button",{type:"button",className:"absolute top-[64px] right-4 p-3 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 z-10 border group ".concat(M?"bg-white border-gray-200":"bg-[#10b981] border-[#10b981] text-white"),title:M?"\ub85c\ub529 \uc911":"\ub85c\ub529 \uc644\ub8cc",disabled:!0,children:M?(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-[#fb8678] border-t-transparent"}):(0,Ee.jsx)(Nl,{className:"w-5 h-5 text-white"})})]}),pe>0&&(0,Ee.jsxs)("div",{ref:gt,className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-2xl shadow-2xl transition-all duration-300 z-20 flex flex-col ".concat(1===pe?"h-[10%]":"h-2/3"),children:[(0,Ee.jsx)("div",{className:"flex justify-center py-3 cursor-grab active:cursor-grabbing",onMouseDown:e=>{me(!0),ge(e.clientY);const t=t=>{const n=e.clientY-t.clientY;n>50?xe(2):(n>20||n<-20)&&xe(1)},n=()=>{me(!1),document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n)};document.addEventListener("mousemove",t),document.addEventListener("mouseup",n)},onMouseUp:ut,onMouseLeave:ut,onTouchStart:e=>{me(!0),ge(e.touches[0].clientY);const t=t=>{const n=e.touches[0].clientY-t.touches[0].clientY;n>50?xe(2):(n>20||n<-20)&&xe(1)},n=()=>{me(!1),document.removeEventListener("touchmove",t),document.removeEventListener("touchend",n)};document.addEventListener("touchmove",t,{passive:!0}),document.addEventListener("touchend",n)},onTouchEnd:()=>{me(!1)},children:(0,Ee.jsx)("div",{className:"w-12 h-1 bg-gray-300 rounded-full"})}),(0,Ee.jsx)("div",{className:"px-4 pb-2",children:(0,Ee.jsx)("div",{className:"flex items-center justify-center",children:(0,Ee.jsxs)("h3",{className:"font-semibold text-gray-900",children:["\uac80\uc0c9 \uacb0\uacfc (",G.length,"\uac1c)"]})})}),pe>1&&(0,Ee.jsx)("div",{className:"flex-1 overflow-y-auto min-h-0",children:$||M?(0,Ee.jsxs)("div",{className:"space-y-3 px-4 pb-6",children:[Array.from({length:4}).map((e,t)=>(0,Ee.jsx)("div",{className:"p-4 border border-gray-200 rounded-xl bg-white shadow-sm animate-pulse",children:(0,Ee.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ee.jsx)("div",{className:"w-14 h-14 rounded-lg bg-gray-200"}),(0,Ee.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,Ee.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,Ee.jsx)("div",{className:"h-3 bg-gray-200 rounded w-full"}),(0,Ee.jsx)("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]})},"skeleton-".concat(t))),(0,Ee.jsxs)("div",{className:"flex items-center justify-center pt-2 text-sm text-gray-500",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-[#fb8678] border-t-transparent mr-2"}),"\ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4..."]})]}):0===G.length?(0,Ee.jsx)("div",{className:"text-center py-8",children:(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uac80\uc0c9 \uacb0\uacfc\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})}):(0,Ee.jsx)("div",{className:"space-y-2 p-4",children:G.map((e,t)=>(0===t&&console.log("\ud83d\udd0d \ub9ac\uc2a4\ud2b8 \uccab \ubc88\uc9f8 \ud56d\ubaa9 - distance:",e.distance,"name:",e.name),(0,Ee.jsx)("div",{className:"rounded-lg border cursor-pointer transition-all overflow-hidden ".concat((null===le||void 0===le?void 0:le.id)===e.id?"border-[#fb8678] bg-[#fb8678]/5":"border-gray-200 hover:border-gray-300 hover:shadow-sm"),onClick:()=>{if(ce(e),d.current){const t=new window.kakao.maps.LatLng(e.lat,e.lng);d.current.setCenter(t),d.current.setLevel(3);u.current.find(t=>t.getTitle()===e.name)&&(f.current&&f.current.setMap(null),f.current=new window.kakao.maps.CustomOverlay({position:t,zIndex:1e4,content:'\n                                <div style="\n                                  background: white;\n                                  border: 1px solid #ddd;\n                                  border-radius: 12px;\n                                  padding: 16px;\n                                  box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n                                  min-width: 240px;\n                                  max-width: 320px;\n                                  font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n                                  position: relative;\n                                  top: -70px;\n                                  left: 0px;\n                                ">\n                                  <div style="\n                                    display: flex;\n                                    align-items: center;\n                                    justify-content: space-between;\n                                    margin-bottom: 12px;\n                                    padding-bottom: 8px;\n                                    border-bottom: 1px solid #f0f0f0;\n                                  ">\n                                    <div style="\n                                      display: flex;\n                                      align-items: center;\n                                      flex: 1;\n                                    ">\n                                      <div style="\n                                        width: 8px;\n                                        height: 8px;\n                                        border-radius: 50%;\n                                        background: '.concat("kindergarten"===e.type?"#4CAF50":"childcare"===e.type?"#2196F3":"#9C27B0",';\n                                        margin-right: 8px;\n                                      "></div>\n                                      <h3 style="\n                                        margin: 0;\n                                        color: #333;\n                                        font-size: 16px;\n                                        font-weight: 600;\n                                        line-height: 1.3;\n                                        word-break: keep-all;\n                                        overflow-wrap: break-word;\n                                        max-width: 240px;\n                                        white-space: normal;\n                                        hyphens: auto;\n                                      ">\n                                        ').concat(e.name,'\n                                      </h3>\n                                    </div>\n                                    <button \n                                      onclick="window.closeInfoWindow && window.closeInfoWindow()"\n                                      style="\n                                        background: none;\n                                        border: none;\n                                        font-size: 18px;\n                                        color: #999;\n                                        cursor: pointer;\n                                        padding: 4px;\n                                        margin-left: 8px;\n                                        width: 24px;\n                                        height: 24px;\n                                        display: flex;\n                                        align-items: center;\n                                        justify-content: center;\n                                        border-radius: 50%;\n                                        transition: all 0.2s;\n                                      "\n                                      onmouseover="this.style.backgroundColor=\'#f5f5f5\'; this.style.color=\'#666\'"\n                                      onmouseout="this.style.backgroundColor=\'transparent\'; this.style.color=\'#999\'"\n                                    >\n                                      \xd7\n                                    </button>\n                                  </div>\n                                  \n                                  <div style="margin-bottom: 8px;">\n                                    <p style="\n                                      margin: 0;\n                                      color: #666;\n                                      font-size: 13px;\n                                      line-height: 1.4;\n                                      word-break: keep-all;\n                                      overflow-wrap: break-word;\n                                      max-width: 260px;\n                                      white-space: normal;\n                                      hyphens: auto;\n                                    ">\n                                      ').concat(e.address,"\n                                    </p>\n                                  </div>\n                                  \n                                  ").concat("childcare"===e.type&&e.crceoname?'\n                                    <div style="margin-bottom: 8px;">\n                                      <p style="\n                                        margin: 0;\n                                        color: #666;\n                                        font-size: 12px;\n                                        line-height: 1.4;\n                                      ">\n                                        \uc6d0\uc7a5: '.concat(e.crceoname,"\n                                      </p>\n                                    </div>\n                                  "):"",'\n                                  \n                                  <div style="\n                                    display: flex;\n                                    justify-content: space-between;\n                                    align-items: center;\n                                    margin-bottom: 12px;\n                                  ">\n                                    <div style="\n                                      color: #666;\n                                      font-size: 13px;\n                                      display: flex;\n                                      align-items: center;\n                                      gap: 4px;\n                                    ">\n                                      <span style="color:#fb8678;">\u2764</span>\n                                      <span>\uce6d\ucc2c : ').concat(e.rating?e.rating.toFixed(1):"0.0",'</span>\n                                    </div>\n                                    <div style="\n                                      color: #666;\n                                      font-size: 13px;\n                                    ">\n                                      ').concat(e.telno||"\uc5c6\uc74c","\n                                    </div>\n                                  </div>\n                                  \n                                  ").concat("childcare"===e.type&&e.crcapat?'\n                                    <div style="margin-bottom: 8px;">\n                                      <p style="\n                                        margin: 0;\n                                        color: #666;\n                                        font-size: 12px;\n                                        line-height: 1.4;\n                                      ">\n                                        \uc815\uc6d0: '.concat(e.crcapat,"\uba85\n                                      </p>\n                                    </div>\n                                  "):"","\n                                  \n                                  <button id=\"detail-nav\" style=\"\n                                    width: 100%;\n                                    background: linear-gradient(135deg, #fb8678 0%, #ff6b9d 100%);\n                                    color: white;\n                                    border: none;\n                                    padding: 10px 16px;\n                                    border-radius: 8px;\n                                    cursor: pointer;\n                                    font-size: 14px;\n                                    font-weight: 500;\n                                    transition: all 0.2s ease;\n                                    box-shadow: 0 2px 8px rgba(251, 134, 120, 0.3);\n                                  \" onmouseover=\"this.style.transform='translateY(-1px)'; this.style.boxShadow='0 4px 12px rgba(251, 134, 120, 0.4)'\" onmouseout=\"this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(251, 134, 120, 0.3)'\">\n                                    \uc790\uc138\ud788 \ubcf4\uae30\n                                  </button>\n                                </div>\n                              "),yAnchor:1}),f.current.setMap(d.current),setTimeout(()=>{const t=document.getElementById("detail-nav");t&&(t.onclick=()=>{var t,n;const s=e.type,r=encodeURIComponent(String(e.id)),a=String(null!==(t=e.sidoCode)&&void 0!==t?t:""),i=String(null!==(n=e.sggCode)&&void 0!==n?n:"");if("playground"===s){B();try{var o,l,c,d,u,h,m,f,g;window.sessionStorage.setItem("mompick:lastPlaygroundSelection",JSON.stringify({id:e.id,code:null!==(o=e.code)&&void 0!==o?o:e.id,name:e.name,address:e.address,lat:e.lat,lng:e.lng,establishment:e.establishment,officeedu:e.officeedu,telno:null!==(l=e.telno)&&void 0!==l?l:"",opertime:null!==(c=e.opertime)&&void 0!==c?c:"",prmstfcnt:null!==(d=e.prmstfcnt)&&void 0!==d?d:0,rating:null!==(u=e.rating)&&void 0!==u?u:0,distance:null!==(h=e.distance)&&void 0!==h?h:null,image:null!==(m=e.image)&&void 0!==m?m:"",type:e.type,sidoCode:null!==(f=e.sidoCode)&&void 0!==f?f:null,sggCode:null!==(g=e.sggCode)&&void 0!==g?g:null}))}catch(p){console.warn("[PlaygroundDetail] \uc138\uc158 \uc800\uc7a5 \uc2e4\ud328:",p)}const t=new URLSearchParams;a&&t.set("sidoCode",a),i&&t.set("sggCode",i);const n=t.toString();return void(window.location.href="/playground/".concat(r).concat(n?"?".concat(n):""))}if("childcare"===s){const e="/childcare/".concat(r).concat(i?"?arcode=".concat(i):"");window.location.href=e}else{const e=new URLSearchParams;a&&e.set("sidoCode",a),i&&e.set("sggCode",i);const t=e.toString();window.location.href="/kindergarten/".concat(r).concat(t?"?".concat(t):"")}})},0))}},children:(0,Ee.jsxs)("div",{className:"flex",children:[(0,Ee.jsxs)("div",{className:"w-20 flex-shrink-0 relative",children:[e.image?(0,Ee.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-cover"}):(0,Ee.jsxs)("div",{className:"w-full h-full bg-gradient-to-br from-gray-100 to-gray-200 flex flex-col items-center justify-center",children:[(0,Ee.jsx)("div",{className:"w-6 h-6 text-gray-400 mb-1 flex items-center justify-center",children:(0,Ee.jsx)("svg",{className:"w-full h-full",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500 font-medium",children:"\uc0ac\uc9c4\uc5c6\uc74c"})]}),(0,Ee.jsx)("div",{className:"absolute inset-y-0 right-0 w-3 bg-gradient-to-r from-transparent to-white"})]}),(0,Ee.jsxs)("div",{className:"flex-1 bg-white p-3",children:[(0,Ee.jsxs)("div",{className:"flex items-start justify-between mb-1",children:[(0,Ee.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,Ee.jsx)("h4",{className:"font-semibold text-gray-900 text-sm mb-1 line-clamp-2 leading-relaxed break-words",children:e.name}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,Ee.jsx)("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 text-xs rounded-full",children:e.establishment}),(0,Ee.jsx)("span",{className:"px-2 py-1 bg-green-50 text-green-600 text-xs rounded-full",children:e.officeedu})]})]}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Ee.jsx)(ml,{className:"w-3 h-3 text-[#fb8678] fill-current"}),(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:e.rating?e.rating.toFixed(1):"0.0"})]})]}),(0,Ee.jsxs)("div",{className:"space-y-1 text-xs text-gray-600",children:[(0,Ee.jsxs)("div",{className:"flex items-start space-x-1",children:[(0,Ee.jsx)(ul,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),(0,Ee.jsx)("span",{className:"line-clamp-2 leading-snug",children:e.address})]}),e.telno&&(0,Ee.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Ee.jsx)(Wo,{className:"w-3 h-3"}),(0,Ee.jsx)("span",{children:e.telno})]}),e.distance&&(0,Ee.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Ee.jsx)(Nc,{className:"w-3 h-3"}),(0,Ee.jsxs)("span",{className:"text-[#fb8678] font-medium",children:[e.distance.toFixed(1),"km"]})]}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,Ee.jsx)(Zo,{className:"w-3 h-3"}),(0,Ee.jsxs)("span",{children:["\ucd1d ",e.prmstfcnt,"\uba85 \uc815\uc6d0"]})]})]})]})]})},e.id)))})})]})]})},Bc=Bo("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Vc=Bo("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Wc=Bo("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),Hc=Bo("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]),Yc=Bo("GraduationCap",[["path",{d:"M22 10v6M2 10l10-5 10 5-10 5z",key:"1ef52a"}],["path",{d:"M6 12v5c3 3 9 3 12 0v-5",key:"1f75yj"}]]),Kc=Bo("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Jc=Bo("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Gc=Bo("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);const Xc=new class{constructor(){this.supabase=Se.supabase,this.bucketName="kindergarten-detail-cache",this.cacheExpiryDays=7}detailPath(e){return"details/".concat(e,"/latest.json")}snapshotPath(e,t){return"details/".concat(e,"/").concat(t,".json")}async getCachedDetail(e){try{const t=this.detailPath(e);console.log("\ud83d\udd0d \uce90\uc2dc \uc870\ud68c \uc2dc\uc791: ".concat(this.bucketName,"/").concat(t));const{data:n,error:s}=await this.supabase.storage.from(this.bucketName).list("details/".concat(e));if(console.log("\ud83d\udcc1 \ud3f4\ub354 \ub0b4 \ud30c\uc77c \ubaa9\ub85d:",null===n||void 0===n?void 0:n.map(e=>e.name)),s||!n||0===n.length)return console.log("\ud83d\udcc1 Storage\uc5d0 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc5c6\uc74c: ".concat(e)),null;const r=n.find(e=>"latest.json"===e.name);if(!r)return console.log("\ud83d\udcc1 latest.json \ud30c\uc77c \uc5c6\uc74c: ".concat(e)),console.log("\ud83d\udcc1 \uc0ac\uc6a9 \uac00\ub2a5\ud55c \ud30c\uc77c:",n.map(e=>e.name)),null;const a=new Date(r.updated_at).getTime(),i=(Date.now()-a)/864e5;if(i>this.cacheExpiryDays)return console.log("\u23f0 \ud30c\uc77c \uba54\ud0c0\ub370\uc774\ud130 \uae30\uc900 \uce90\uc2dc \ub9cc\ub8cc: ".concat(e," (").concat(i.toFixed(1),"\uc77c \uacbd\uacfc)")),null;console.log("\ud83d\udcc4 latest.json \ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc \uc2dc\uc791: ".concat(t," (").concat(i.toFixed(1),"\uc77c \uc804)"));const{data:o,error:l}=await this.supabase.storage.from(this.bucketName).download(t);if(l||!o)return console.log("\uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc77d\uae30 \uc2e4\ud328: ".concat(e)),null;const c=await o.text(),d=JSON.parse(c);return console.log("\u2705 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc0ac\uc6a9: ".concat(e," (").concat(i.toFixed(1),"\uc77c \uc804)")),d.data}catch(t){return console.error("\uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc870\ud68c \uc624\ub958:",t),null}}async saveDetailCache(e,t){try{const n=new Date,s=n.toISOString().split("T")[0],r={meta:{kindercode:e,lastSyncedAt:n.toISOString(),apiVersion:"1.0"},data:t},a=this.detailPath(e),i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),{error:o}=await this.supabase.storage.from(this.bucketName).upload(a,i,{cacheControl:"3600",upsert:!0});if(o)throw o;const l=this.snapshotPath(e,s),{error:c}=await this.supabase.storage.from(this.bucketName).upload(l,i,{cacheControl:"3600",upsert:!0});c&&console.warn("\uc2a4\ub0c5\uc0f7 \uc800\uc7a5 \uc2e4\ud328:",c),console.log("\ud83d\udcbe \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc800\uc7a5 \uc644\ub8cc: ".concat(e))}catch(n){throw console.error("\uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc800\uc7a5 \uc624\ub958:",n),n}}async getCacheMetadata(e){try{const t="details/".concat(e),{data:n,error:s}=await this.supabase.storage.from(this.bucketName).list(t,{limit:1,sortBy:{column:"updated_at",order:"desc"}});if(s||!n||0===n.length)return null;const r=n[0],a=new Date(r.updated_at),i=(Date.now()-a.getTime())/864e5;return{kindercode:e,lastUpdated:r.updated_at,filePath:"".concat(t,"/").concat(r.name),isExpired:i>this.cacheExpiryDays}}catch(t){return console.error("\uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uba54\ud0c0\ub370\uc774\ud130 \uc870\ud68c \uc624\ub958:",t),null}}async deleteDetailCache(e){try{const t="details/".concat(e),{data:n}=await this.supabase.storage.from(this.bucketName).list(t);if(!n||0===n.length)return void console.log("\uc0ad\uc81c\ud560 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc5c6\uc74c: ".concat(e));const s=n.map(e=>"".concat(t,"/").concat(e.name)),{error:r}=await this.supabase.storage.from(this.bucketName).remove(s);if(r)throw r;console.log("\ud83d\uddd1\ufe0f \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc0ad\uc81c \uc644\ub8cc: ".concat(e," (").concat(s.length,"\uac1c \ud30c\uc77c)"))}catch(t){throw console.error("\uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc0ad\uc81c \uc624\ub958:",t),t}}async cleanupOldDetailCache(){try{const{data:e}=await this.supabase.storage.from(this.bucketName).list("details",{limit:1e3});if(!e)return;const t=Date.now()-24*this.cacheExpiryDays*60*60*1e3,n=[];for(const s of e){new Date(s.updated_at).getTime()<t&&"latest.json"!==s.name&&n.push("details/".concat(s.name))}n.length>0&&(await this.supabase.storage.from(this.bucketName).remove(n),console.log("\ud83e\uddf9 \uc624\ub798\ub41c \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc815\ub9ac \uc644\ub8cc: ".concat(n.length,"\uac1c \ud30c\uc77c \uc0ad\uc81c")))}catch(e){console.error("\uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc815\ub9ac \uc624\ub958:",e)}}async getDetailCacheStats(){try{const{data:e}=await this.supabase.storage.from(this.bucketName).list("details",{limit:1e3});if(!e)return{totalDetails:0,validCaches:0,expiredCaches:0,totalFiles:0};const t=e.filter(e=>"latest.json"===e.name),n=Date.now()-24*this.cacheExpiryDays*60*60*1e3;let s=0,r=0;for(const a of t){new Date(a.updated_at).getTime()>n?s++:r++}return{totalDetails:t.length,validCaches:s,expiredCaches:r,totalFiles:e.length}}catch(e){return console.error("\uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \ud1b5\uacc4 \uc870\ud68c \uc624\ub958:",e),{totalDetails:0,validCaches:0,expiredCaches:0,totalFiles:0}}}},$c=async(e,t,s)=>{try{const{supabase:a}=await Promise.resolve().then(n.bind(n,801));try{const{data:n,error:r}=await a.functions.invoke("kindergarten-detail",{body:(0,Ae.A)({kindercode:e},t&&s?{sidoCode:t,sggCode:s}:{})});if(console.log("\ud83d\udcca invoke \uc751\ub2f5:",{data:n,error:r}),r)throw console.error("\u274c invoke \uc624\ub958:",r),new Error("Edge Function \uc624\ub958: ".concat(r.message));if(!n)throw new Error("Edge Function \uc751\ub2f5\uc774 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4");if(!0!==n.success)throw console.error("\u274c Edge Function \uc2e4\ud328 \uc751\ub2f5:",n),new Error(n.error||"Edge Function \uc2e4\ud589 \uc2e4\ud328");if(!n.data)throw new Error("Edge Function \uc751\ub2f5\uc5d0 \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4");return console.log("\u2705 Edge Function \uc751\ub2f5 \uc131\uacf5 (invoke)"),n.data}catch(r){console.warn("\u26a0\ufe0f invoke \uc2e4\ud328, \uc9c1\uc811 \ud638\ucd9c \uc7ac\uc2dc\ub3c4:",r);const n="https://fxkftrczarwuytnufprv.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4a2Z0cmN6YXJ3dXl0bnVmcHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODM5NzgsImV4cCI6MjA3MTY1OTk3OH0.L0zzO_KooHRwJdf6z92Cla05pSH8UF7PRGVDK8lS3Ns";if(!n||!a)throw new Error("Supabase \ud658\uacbd \ubcc0\uc218\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4");const i="".concat(n,"/functions/v1/kindergarten-detail");console.log("\ud83d\udce1 \uc9c1\uc811 \ud638\ucd9c URL:",i),console.log("\ud83d\udd11 Authorization \ud5e4\ub354 \ud3ec\ud568\ud558\uc5ec \ud638\ucd9c...");const o=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a),apikey:a},body:JSON.stringify((0,Ae.A)({kindercode:e},t&&s?{sidoCode:t,sggCode:s}:{}))});if(console.log("\ud83d\udcca \uc9c1\uc811 \ud638\ucd9c \uc751\ub2f5 \uc0c1\ud0dc:",o.status,o.statusText),!o.ok){const e=await o.text();throw console.error("\u274c \uc9c1\uc811 \ud638\ucd9c \uc2e4\ud328:",e),new Error("\uc9c1\uc811 \ud638\ucd9c \uc2e4\ud328: ".concat(o.status," ").concat(o.statusText," - ").concat(e))}const l=await o.json();if(console.log("\ud83d\udcca \uc9c1\uc811 \ud638\ucd9c \uc751\ub2f5 \ub370\uc774\ud130:",l),!l)throw new Error("\uc9c1\uc811 \ud638\ucd9c \uc751\ub2f5\uc774 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4");if(!0!==l.success)throw console.error("\u274c Edge Function \uc2e4\ud328 \uc751\ub2f5:",l),new Error(l.error||"Edge Function \uc2e4\ud589 \uc2e4\ud328");if(!l.data)throw new Error("Edge Function \uc751\ub2f5\uc5d0 \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4");return console.log("\u2705 Edge Function \uc751\ub2f5 \uc131\uacf5 (\uc9c1\uc811 \ud638\ucd9c)"),l.data}}catch(a){throw console.error("\u274c Edge Function \ud638\ucd9c \uc2e4\ud328:",a),a}},Zc=async(e,t,n)=>{t&&n&&console.log("\ud83d\udccd \uc9c0\uc5ed \uc815\ubcf4 \ud3ec\ud568:",{sidoCode:t,sggCode:n});try{return(await $c(e,t,n)).basic}catch(s){throw console.log("\uac1c\ubcc4 \uc720\uce58\uc6d0 \uc870\ud68c \uc2e4\ud328:",s),s}},Qc=e=>({1:"\uad6d\uacf5\ub9bd",2:"\uc0ac\ub9bd",3:"\ubc95\uc778",4:"\ubbfc\uac04",5:"\uc9c1\uc7a5",6:"\uac00\uc815",7:"\ubd80\ubaa8\ud611\ub3d9",8:"\uc0ac\ud68c\ubcf5\uc9c0\ubc95\uc778",9:"\uae30\ud0c0"}[e]||e),ed=new Map,td=async(e,t,s)=>{const r="".concat(e,"-").concat(t||"null","-").concat(s||"null");if(ed.has(r))return console.log("\ud83d\udd04 \uc774\ubbf8 \uc9c4\ud589 \uc911\uc778 \uc694\uccad\uc774 \uc788\uc2b5\ub2c8\ub2e4. \ub300\uae30 \uc911...",e),await ed.get(r);const a=(async()=>{try{console.log("\uc720\uce58\uc6d0 \uc0c1\uc138 \uc815\ubcf4 \uc870\ud68c \uc2dc\ub3c4:",e);let r=t,v=s;if(!r||!v){const t=(e=>e.includes("1ecec08c")||e.includes("1ecec08d")?{sidoCode:27,sggCode:27140}:null)(e);t&&(r=t.sidoCode,v=t.sggCode,console.log("\ud83d\udccd \uc720\uce58\uc6d0 \ucf54\ub4dc\uc5d0\uc11c \uc9c0\uc5ed \uc815\ubcf4 \ucd94\ucd9c:",{sidoCode:r,sggCode:v}))}r&&v&&console.log("\ud83d\udccd \uc9c0\uc5ed \uc815\ubcf4 \ud3ec\ud568:",{sidoCode:r,sggCode:v});const y=await Xc.getCachedDetail(e);if(y){console.log("\u2705 \uce90\uc2dc\uc5d0\uc11c \uc0c1\uc138 \uc815\ubcf4 \ub85c\ub4dc:",e);try{const{supabase:t}=await Promise.resolve().then(n.bind(n,801)),{data:s}=await t.from("kindergarten_custom_info").select("building_images, meal_images").eq("kinder_code",e).eq("is_active",!0).maybeSingle();s?(y.customInfo={building_images:s.building_images||[],meal_images:s.meal_images||[]},console.log("\u2705 \ucee4\uc2a4\ud140 \uc815\ubcf4 \ucd94\uac00:",y.customInfo)):console.log("\ud83d\udce6 \ucee4\uc2a4\ud140 \uc815\ubcf4 \uc5c6\uc74c")}catch(g){console.log("\ucee4\uc2a4\ud140 \uc815\ubcf4 \uc870\ud68c \uc624\ub958:",g)}return y}console.log("\ud83d\udce1 \uce90\uc2dc \uc5c6\uc74c, API \ud638\ucd9c \uc2dc\uc791:",e);try{var a;const t=await Zc(e,r,v);if(console.log("API \uc751\ub2f5 \ub370\uc774\ud130:",t),console.log("API \uc751\ub2f5 \uad6c\uc870 \ubd84\uc11d:"),console.log("- status:",null===t||void 0===t?void 0:t.status),console.log("- kinderInfo \ud0c0\uc785:",typeof(null===t||void 0===t?void 0:t.kinderInfo)),console.log("- kinderInfo \uae38\uc774:",null===t||void 0===t||null===(a=t.kinderInfo)||void 0===a?void 0:a.length),console.log("- \uc804\uccb4 \uc751\ub2f5 \ud0a4:",Object.keys(t||{})),t&&t.kinderInfo&&Array.isArray(t.kinderInfo)){var i,o,l,c,d,u,h,m,f;console.log("API\uc5d0\uc11c \ubc1b\uc740 \uc720\uce58\uc6d0 \uc218:",t.kinderInfo.length);const s=t.kinderInfo.find(t=>t.kindercode===e);if(!s)return console.warn("\ud574\ub2f9 kindercode(".concat(e,")\uc5d0 \ub300\ud55c \uc720\uce58\uc6d0 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")),console.log("\uc0ac\uc6a9 \uac00\ub2a5\ud55c kindercode\ub4e4:",t.kinderInfo.map(e=>e.kindercode).slice(0,5)),null;const a=s;console.log("\ucc3e\uc740 \uc720\uce58\uc6d0 \uae30\ubcf8 \uc815\ubcf4:",a);const p=parseInt(a.prmstfcnt)||0,x=(parseInt(a.ppcnt3)||0)+(parseInt(a.ppcnt4)||0)+(parseInt(a.ppcnt5)||0)+(parseInt(a.mixppcnt)||0)+(parseInt(a.shppcnt)||0),y=(parseInt(a.clcnt3)||0)+(parseInt(a.clcnt4)||0)+(parseInt(a.clcnt5)||0)+(parseInt(a.mixclcnt)||0)+(parseInt(a.shclcnt)||0);let b=Math.max(1,Math.ceil(x/15)),w="1:".concat(Math.round(x/b));const j=await $c(e,r,v);console.log("\ud83d\udcca Edge Function\uc5d0\uc11c \ubc1b\uc740 \uc0c1\uc138 \uc815\ubcf4:",j);let _={lastCheckDate:void 0,issues:0,status:"\ubbf8\uc0c1"},N={lastCheckDate:void 0,status:"\ubbf8\uc0c1"},k={mode:"\ubbf8\uc0c1",hasDietitian:!1},C={inOperation:!1,vehicleCount:0,hasGuardian:!1,dclrVhcnt:void 0,psg9DclrVhcnt:void 0,psg12DclrVhcnt:void 0,psg15DclrVhcnt:void 0},S={inOperation:!1,programs:[],operatingHours:"",inorClcnt:void 0,pmRrgnClcnt:void 0,operTime:void 0,inorPtcKpcnt:void 0,pmRrgnPtcKpcnt:void 0,fxrlThcnt:void 0,shcntThcnt:void 0,incnt:void 0},E={pbntSemScCd:void 0,safeTpCd1:void 0,safeTpCd2:void 0,safeTpCd3:void 0,safeTpCd4:void 0,safeTpCd5:void 0,safeTpCd6:void 0,safeTpCd7:void 0,safeTpCd8:void 0};if(j.environmentHygiene&&"SUCCESS"===j.environmentHygiene.status&&(null===(i=j.environmentHygiene.kinderInfo)||void 0===i?void 0:i.length)>0){const t=j.environmentHygiene.kinderInfo.find(t=>t.kindercode===e);if(t){const e=[t.arql_chk_dt,t.fxtm_dsnf_chk_dt,t.mdst_chk_dt,t.ilmn_chk_dt].filter(e=>e&&"-"!==e&&8===e.length),n=e.length>0?e.sort().reverse()[0]:void 0,s=n?"".concat(n.slice(0,4),"-").concat(n.slice(4,6),"-").concat(n.slice(6,8)):void 0;let r="\ubbf8\uc0c1";"\uc801\ud569"===t.arql_chk_rslt_tp_cd?r="\uc801\ud569":t.arql_chk_rslt_tp_cd&&"-"!==t.arql_chk_rslt_tp_cd&&(r="\uc870\uce58"),N={lastCheckDate:s,status:r}}}if(j.safetyEdu&&"SUCCESS"===j.safetyEdu.status&&(null===(o=j.safetyEdu.kinderInfo)||void 0===o?void 0:o.length)>0){const t=j.safetyEdu.kinderInfo.find(t=>t.kindercode===e);t&&(_={lastCheckDate:t.checkdate,issues:"\uc870\uce58"===t.result?1:0,status:"\uc801\ud569"===t.result?"\uc801\ud569":"\uc870\uce58"})}if(j.meal&&"SUCCESS"===j.meal.status&&(null===(l=j.meal.kinderInfo)||void 0===l?void 0:l.length)>0){const t=j.meal.kinderInfo.find(t=>t.kindercode===e);t&&(console.log("\ud83c\udf7d\ufe0f \uae09\uc2dd \uc815\ubcf4 API \uc751\ub2f5:",t),k={mode:"\uc790\uccb4\uae09\uc2dd"===t.mealtype?"\uc790\uccb4":"\uc704\ud0c1",hasDietitian:"Y"===t.dietitian,consEntsNm:t.cons_ents_nm||"",ntrtTchrAgmtYn:t.ntrt_tchr_agmt_yn||"",sngeAgmtNtrtThcnt:parseInt(t.snge_agmt_ntrt_thcnt)||0,cprtAgmtNtrtThcnt:parseInt(t.cprt_agmt_ntrt_thcnt)||0,cprtAgmtIttNm:t.cprt_agmt_itt_nm||"",ckcnt:parseInt(t.ckcnt)||0,cmcnt:parseInt(t.cmcnt)||0,masMsplDclrYn:t.mas_mspl_dclr_yn||""})}if(j.transportation&&"SUCCESS"===j.transportation.status&&(null===(c=j.transportation.kinderInfo)||void 0===c?void 0:c.length)>0){const t=j.transportation.kinderInfo.find(t=>t.kindercode===e);t&&(C={inOperation:"Y"===t.vhcl_oprn_yn,vehicleCount:parseInt(t.opra_vhcnt)||0,hasGuardian:!1,dclrVhcnt:t.dclr_vhcnt?parseInt(t.dclr_vhcnt):void 0,psg9DclrVhcnt:t.psg9_dclr_vhcnt?parseInt(t.psg9_dclr_vhcnt):void 0,psg12DclrVhcnt:t.psg12_dclr_vhcnt?parseInt(t.psg12_dclr_vhcnt):void 0,psg15DclrVhcnt:t.psg15_dclr_vhcnt?parseInt(t.psg15_dclr_vhcnt):void 0})}if(j.afterSchool&&"SUCCESS"===j.afterSchool.status&&(null===(d=j.afterSchool.kinderInfo)||void 0===d?void 0:d.length)>0){const t=j.afterSchool.kinderInfo.find(t=>t.kindercode===e);if(t){S={inOperation:parseInt(t.pm_rrgn_ptcn_kpcnt||"0")+parseInt(t.inor_ptcn_kpcnt||"0")>0,programs:["\ubc29\uacfc\ud6c4 \uacfc\uc815"],operatingHours:t.oper_time||"\uc815\ubcf4 \uc5c6\uc74c",inorClcnt:parseInt(t.inor_clcnt||"0")||void 0,pmRrgnClcnt:parseInt(t.pm_rrgn_clcnt||"0")||void 0,operTime:t.oper_time?t.oper_time.replace(/\uc2dc/g,":").replace(/\ubd84/g,""):void 0,inorPtcKpcnt:parseInt(t.inor_ptcn_kpcnt||"0")||void 0,pmRrgnPtcKpcnt:parseInt(t.pm_rrgn_ptcn_kpcnt||"0")||void 0,fxrlThcnt:parseInt(t.fxrl_thcnt||"0")||void 0,shcntThcnt:parseInt(t.shcnt_thcnt||"0")||void 0,incnt:parseInt(t.incnt||"0")||void 0}}}if(console.log("\ud83d\udee1\ufe0f \uc548\uc804\uad50\uc721 \ud604\ud669 API \uc751\ub2f5:",j.safetyInstruct),j.safetyInstruct&&"SUCCESS"===j.safetyInstruct.status&&(null===(u=j.safetyInstruct.kinderInfo)||void 0===u?void 0:u.length)>0){console.log("\ud83d\udee1\ufe0f \uc548\uc804\uad50\uc721 \ud604\ud669 \ub370\uc774\ud130 \uc874\uc7ac:",j.safetyInstruct.kinderInfo);const t=j.safetyInstruct.kinderInfo.find(t=>t.kindercode===e);console.log("\ud83d\udee1\ufe0f \ud574\ub2f9 \uc720\uce58\uc6d0 \uc548\uc804\uad50\uc721 \ud604\ud669:",t),t?(E={pbntSemScCd:t.pbnt_sem_sc_cd||void 0,safeTpCd1:t.safe_tp_cd1||void 0,safeTpCd2:t.safe_tp_cd2||void 0,safeTpCd3:t.safe_tp_cd3||void 0,safeTpCd4:t.safe_tp_cd4||void 0,safeTpCd5:t.safe_tp_cd5||void 0,safeTpCd6:t.safe_tp_cd6||void 0,safeTpCd7:t.safe_tp_cd7||void 0,safeTpCd8:t.safe_tp_cd8||void 0},console.log("\ud83d\udee1\ufe0f \ud30c\uc2f1\ub41c \uc548\uc804\uad50\uc721 \ud604\ud669 \ub370\uc774\ud130:",E)):console.log("\ud83d\udee1\ufe0f \ud574\ub2f9 \uc720\uce58\uc6d0\uc758 \uc548\uc804\uad50\uc721 \ud604\ud669 \ub370\uc774\ud130\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc74c")}else console.log("\ud83d\udee1\ufe0f \uc548\uc804\uad50\uc721 \ud604\ud669 API \uc751\ub2f5\uc774 \uc5c6\uac70\ub098 \uc2e4\ud328:",j.safetyInstruct);let P={};if(j.teacher&&"SUCCESS"===j.teacher.status&&(null===(h=j.teacher.kinderInfo)||void 0===h?void 0:h.length)>0){const t=j.teacher.kinderInfo.find(t=>t.kindercode===e);t&&(P={principal:parseInt(t.drcnt)||0,vicePrincipal:parseInt(t.adcnt)||0,generalTeacher:parseInt(t.gnrl_thcnt)||0,specialTeacher:parseInt(t.spcn_thcnt)||0,healthTeacher:parseInt(t.ntcnt)||0,nutritionTeacher:parseInt(t.ntrt_thcnt)||0,contractTeacher:parseInt(t.shcnt_thcnt)||0,staff:parseInt(t.owcnt)||0})}if(j.yearOfWork&&"SUCCESS"===j.yearOfWork.status&&(null===(m=j.yearOfWork.kinderInfo)||void 0===m?void 0:m.length)>0){const t=j.yearOfWork.kinderInfo.find(t=>t.kindercode===e);t&&(P=(0,Ae.A)((0,Ae.A)({},P),{},{yy1UndrThcnt:parseInt(t.yy1_undr_thcnt)||0,yy1AbvYy2UndrThcnt:parseInt(t.yy1_abv_yy2_undr_thcnt)||0,yy2AbvYy4UndrThcnt:parseInt(t.yy2_abv_yy4_undr_thcnt)||0,yy4AbvYy6UndrThcnt:parseInt(t.yy4_abv_yy6_undr_thcnt)||0,yy6AbvThcnt:parseInt(t.yy6_abv_thcnt)||0}))}if(j.safetyEdu&&"SUCCESS"===j.safetyEdu.status&&(null===(f=j.safetyEdu.kinderInfo)||void 0===f?void 0:f.length)>0){const t=j.safetyEdu.kinderInfo.find(t=>t.kindercode===e);t&&(_=(0,Ae.A)((0,Ae.A)({},_),{},{fireAvdYn:t.fire_avd_yn,fireAvdDt:t.fire_avd_dt,gasCkYn:t.gas_ck_yn,gasCkDt:t.gas_ck_dt,fireSafeYn:t.fire_safe_yn,fireSafeDt:t.fire_safe_dt,electCkYn:t.elect_ck_yn,electCkDt:t.elect_ck_dt,plygCkYn:t.plyg_ck_yn,plygCkDt:t.plyg_ck_dt,plygCkRsCd:t.plyg_ck_rs_cd,cctvIstYn:t.cctv_ist_yn,cctvIstTotal:parseInt(t.cctv_ist_total)||0,cctvIstIn:parseInt(t.cctv_ist_in)||0,cctvIstOut:parseInt(t.cctv_ist_out)||0}))}const A=P.generalTeacher+P.specialTeacher+P.healthTeacher+P.nutritionTeacher+P.contractTeacher;A>0&&(b=A,w="1:".concat(Math.round(x/Math.max(1,b))));const T={id:e,name:a.kindername||"\uc720\uce58\uc6d0",type:Qc(a.establish),address:a.addr||"\uc8fc\uc18c \uc815\ubcf4 \uc5c6\uc74c",phone:a.telno||void 0,capacity:p,enrolled:x,classCount:y,teacherCount:b,ratio:w,safety:_,hygiene:N,meal:k,bus:C,afterSchool:S,safetyEducation:E,teachers:P,lastSyncedAt:(new Date).toISOString(),rppnname:a.rppnname||"",ldgrname:a.ldgrname||"",edate:a.edate||"",odate:a.odate||""};try{const{supabase:t}=await Promise.resolve().then(n.bind(n,801)),{data:s}=await t.from("kindergarten_custom_info").select("building_images, meal_images").eq("kinder_code",e).eq("is_active",!0).maybeSingle();s&&(T.customInfo={building_images:s.building_images||[],meal_images:s.meal_images||[]},console.log("\u2705 \ucee4\uc2a4\ud140 \uc815\ubcf4 \ucd94\uac00 (API \ub85c\ub4dc):",T.customInfo))}catch(g){console.log("\ucee4\uc2a4\ud140 \uc815\ubcf4 \uc5c6\uc74c:",g)}return Xc.saveDetailCache(e,T).catch(e=>{console.warn("\uce90\uc2dc \uc800\uc7a5 \uc2e4\ud328:",e)}),console.log("\u2705 API\uc5d0\uc11c \uc0c1\uc138 \uc815\ubcf4 \ub85c\ub4dc \ubc0f \uce90\uc2dc \uc800\uc7a5:",e),T}{console.warn("API \uc751\ub2f5\uc5d0 \uc720\uce58\uc6d0 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4:",t);const n=["1ecec08c-ffcd-b044-e053-0a32095ab044","b0005379-c35f-4cdf-8d60-e1c2bd49b158","b0005379-c35f-4cdf-8d60-e1c2bd49b159","b0005379-c35f-4cdf-8d60-e1c2bd49b160","1114010001","1114010002","1114010003"];console.log("\ub2e4\ub978 \uc720\uce58\uc6d0 \ucf54\ub4dc\ub85c \ud14c\uc2a4\ud2b8 \uc2dc\ub3c4...");for(const t of n)if(t!==e)try{const e=await Zc(t);if(e&&e.kinderInfo&&Array.isArray(e.kinderInfo)&&e.kinderInfo.length>0){console.log("\u2705 \ud14c\uc2a4\ud2b8 \ucf54\ub4dc ".concat(t,"\uc5d0\uc11c \ub370\uc774\ud130 \ubc1c\uacac:"),e.kinderInfo[0]);break}}catch(p){console.log("\ud14c\uc2a4\ud2b8 \ucf54\ub4dc ".concat(t," \uc2e4\ud328:"),p)}}}catch(x){console.warn("API \ud638\ucd9c \uc2e4\ud328:",x)}console.log("\u26a0\ufe0f API \uc2e4\ud328, \uc0d8\ud50c \ub370\uc774\ud130 \uc0ac\uc6a9:",e),console.log("\ud604\uc7ac \uc720\uce58\uc6d0 \ucf54\ub4dc\uac00 \uad50\uc721\ubd80 API\uc5d0\uc11c \uc81c\uacf5\ub418\uc9c0 \uc54a\uc744 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");return{id:e,name:"\uc720\uce58\uc6d0 (".concat(e.slice(-4),")"),type:"\uc0ac\ub9bd",address:"\uc8fc\uc18c \uc815\ubcf4\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4",capacity:0,enrolled:0,classCount:0,teacherCount:0,ratio:"\ubbf8\uc0c1",safety:{lastCheckDate:void 0,issues:0,status:"\ubbf8\uc0c1"},hygiene:{lastCheckDate:void 0,status:"\ubbf8\uc0c1"},meal:{mode:"\ubbf8\uc0c1",hasDietitian:!1},bus:{inOperation:!1,vehicleCount:0,hasGuardian:!1},afterSchool:{inOperation:!1,programs:[],operatingHours:""},lastSyncedAt:(new Date).toISOString()}}catch(v){return console.error("\uc720\uce58\uc6d0 \uc0c1\uc138 \uc815\ubcf4 \uc870\ud68c \uc624\ub958:",v),null}finally{ed.delete(r)}})();return ed.set(r,a),await a},nd=()=>{var e,t,s,a,i,o,l,c,d,u,h,m,f,g;const{kindercode:p}=se(),x=ne(),[v]=Ce(),y=ee(),[b,w]=(0,r.useState)(null),[j,_]=(0,r.useState)(!0),[N,k]=(0,r.useState)(null),[C,S]=(0,r.useState)("detail"),[E,P]=(0,r.useState)(!1),[A,T]=(0,r.useState)(null),[I,M]=(0,r.useState)(!1),[L,R]=(0,r.useState)(0),[O,D]=(0,r.useState)(0),[z,U]=(0,r.useState)(!1),[F,q]=(0,r.useState)({yesterday:[],today:[],tomorrow:[]}),[B,V]=(0,r.useState)(!1),[W,H]=(0,r.useState)(!1),[Y,K]=(0,r.useState)(!1),[J,G]=(0,r.useState)(!1),[X,$]=(0,r.useState)(!1),[Z,Q]=(0,r.useState)(!1),[te,re]=(0,r.useState)([]),[ae,ie]=(0,r.useState)(0),[oe,le]=(0,r.useState)(null),[ce,de]=(0,r.useState)(!1),[ue,he]=(0,r.useState)(!1),[me,fe]=(0,r.useState)(""),[ge,pe]=(0,r.useState)("wrong_purpose"),[xe,ve]=(0,r.useState)(!1),[ye,be]=(0,r.useState)(!1),[we,je]=(0,r.useState)(!1),[_e,Ne]=(0,r.useState)("\uc804\uccb4"),[ke,Pe]=(0,r.useState)(!1);(0,r.useEffect)(()=>(document.body.style.overflow=X||Z||ke?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[X,Z,ke]);const[Te,Ie]=(0,r.useState)([]),[Me,Le]=(0,r.useState)(!1),[Re,Oe]=(0,r.useState)(!1),[De,ze]=(0,r.useState)(null),[Ue,Fe]=(0,r.useState)(null),[qe,Be]=(0,r.useState)(1),[Ve,We]=(0,r.useState)(!1),[He,Ye]=(0,r.useState)(!1),[Ke,Je]=(0,r.useState)(!1),[Ge,Xe]=(0,r.useState)(""),[$e,Ze]=(0,r.useState)("spam"),[Qe,et]=(0,r.useState)(!1),[tt,nt]=(0,r.useState)(!1),[st,rt]=(0,r.useState)(null),[at,it]=(0,r.useState)(null),[ot,lt]=(0,r.useState)(!1),[ct,dt]=(0,r.useState)(null),[ut,ht]=(0,r.useState)(""),[mt,ft]=(0,r.useState)(new Set),[gt,pt]=(0,r.useState)(new Set),[xt,vt]=(0,r.useState)(null),[yt,bt]=(0,r.useState)(null),[wt,jt]=(0,r.useState)(null),[_t,Nt]=(0,r.useState)(null),[kt,Ct]=(0,r.useState)(!1),[St,Et]=(0,r.useState)(null),[Pt,At]=(0,r.useState)(0),[Tt,It]=(0,r.useState)(!1),Mt=(null===Ue||void 0===Ue?void 0:Ue.rating_distribution)||{5:0,4:0,3:0,2:0,1:0},Lt=(null===Ue||void 0===Ue?void 0:Ue.average_rating)||0,Rt=(null===Ue||void 0===Ue?void 0:Ue.total_reviews)||0,Ot=Te.filter(e=>!e.is_hidden).filter(e=>e.images&&e.images.length>0).sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime()),Dt=Ot.slice(0,4),zt=Ot.flatMap(e=>{var t;return(null===(t=e.images)||void 0===t?void 0:t.map(e=>e.image_url))||[]}),Ut=(()=>{const e=[];let t=0;return Ot.forEach(n=>{(n.images||[]).forEach(s=>{e.push({imageUrl:s.image_url,rating:n.rating,globalIndex:t}),t++})}),e})(),Ft=Ut.length,qt=Ut.slice(0,4),Bt=(0,r.useRef)(!1),Vt=v.get("sidoCode")?parseInt(v.get("sidoCode")):void 0,Wt=v.get("sggCode")?parseInt(v.get("sggCode")):void 0;(0,r.useEffect)(()=>((async()=>{try{const{data:{user:e}}=await Se.supabase.auth.getUser();if(e&&(T(e.id),p)){const t=await Ml(e.id,"kindergarten",String(p));P(t)}}catch(e){}})(),p&&!Bt.current&&(Bt.current=!0,Yt()),()=>{Bt.current=!1}),[p]),(0,r.useEffect)(()=>{var e;null!==(e=y.state)&&void 0!==e&&e.activeTab&&S(y.state.activeTab)},[y.state]),(0,r.useEffect)(()=>{"reviews"===C&&p&&(Kt(),Gt(),Xt())},[C,p]),(0,r.useEffect)(()=>{"meal"===C&&p&&Ht()},[C,p]);const Ht=async()=>{if(p)try{const e=new Date,t=new Date(e);t.setDate(t.getDate()-1);const n=new Date(e);n.setDate(n.getDate()+1);const s=e=>e.toISOString().split("T")[0],{data:r}=await Se.supabase.from("kindergarten_meals").select("meal_date, meal_images").eq("kindergarten_code",p).in("meal_date",[s(t),s(e),s(n)]).eq("is_active",!0),a={yesterday:[],today:[],tomorrow:[]};null===r||void 0===r||r.forEach(r=>{r.meal_date===s(t)?a.yesterday=r.meal_images||[]:r.meal_date===s(e)?a.today=r.meal_images||[]:r.meal_date===s(n)&&(a.tomorrow=r.meal_images||[])}),q(a),console.log("\u2705 \uae09\uc2dd \uc0ac\uc9c4 \ub85c\ub4dc:",a)}catch(N){console.error("\uae09\uc2dd \uc0ac\uc9c4 \ub85c\ub4dc \uc624\ub958:",N)}};(0,r.useEffect)(()=>{(async()=>{try{const{data:{user:e}}=await Se.supabase.auth.getUser();if(vt((null===e||void 0===e?void 0:e.id)||null),null!==e&&void 0!==e&&e.id)try{const{data:t,error:n}=await Se.supabase.from("profiles").select("id, user_type").eq("auth_user_id",e.id).maybeSingle();!n&&null!==t&&void 0!==t&&t.id?(bt(t.id),jt(t.user_type)):(bt(null),jt(null))}catch(yd){bt(null),jt(null)}else bt(null),jt(null)}catch(yd){vt(null),bt(null),jt(null)}})()},[p]),(0,r.useEffect)(()=>(document.body.style.overflow=He||Ke||kt?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[He,Ke,kt]);const Yt=async()=>{try{_(!0),k(null),console.log("\ud83d\udccd \uc720\uce58\uc6d0 \uc0c1\uc138 \uc815\ubcf4 \ub85c\ub529:",{kindercode:p,sidoCode:Vt,sggCode:Wt});const e=await td(p,Vt,Wt);e?(w(e),e.name.includes("\uc720\uce58\uc6d0 (")&&"\uc8fc\uc18c \uc815\ubcf4\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"===e.address&&(console.warn("\u26a0\ufe0f \uc2e4\uc81c API \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc5b4 \uc784\uc2dc \ub370\uc774\ud130\ub97c \ud45c\uc2dc\ud569\ub2c8\ub2e4."),U(!0))):k("\uc720\uce58\uc6d0 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}catch(e){console.error("\uc720\uce58\uc6d0 \uc0c1\uc138 \uc815\ubcf4 \ub85c\ub529 \uc624\ub958:",e),k("\uc720\uce58\uc6d0 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{_(!1),Bt.current=!1}},Kt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(p)try{Le(!0);const n=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"latest";try{let r=Se.supabase.from("kindergarten_reviews").select("\n        *,\n        images:kindergarten_review_images (\n          id,\n          review_id,\n          image_url,\n          image_order,\n          created_at\n        ),\n        helpful_count:kindergarten_review_helpful(count)\n      ").eq("kindergarten_code",e).eq("is_deleted",!1);switch(s){case"latest":r=r.order("created_at",{ascending:!1});break;case"rating":r=r.order("rating",{ascending:!1}).order("created_at",{ascending:!1});break;case"helpful":r=r.order("helpful_count",{ascending:!1}).order("created_at",{ascending:!1})}const a=(t-1)*n,i=a+n-1;r=r.range(a,i);const{data:o,error:l}=await r;if(l)return console.error("\ub9ac\ubdf0 \ubaa9\ub85d \uc870\ud68c \uc624\ub958:",l),{reviews:[],hasMore:!1};const{count:c}=await Se.supabase.from("kindergarten_reviews").select("*",{count:"exact",head:!0}).eq("kindergarten_code",e).eq("is_deleted",!1),d=!!c&&t*n<c,u=await Promise.all((o||[]).map(async e=>{try{const{data:t,error:n}=await Se.supabase.from("profiles").select("full_name, nickname, profile_image_url, children_info").eq("auth_user_id",e.user_id).maybeSingle(),{count:s,error:r}=await Se.supabase.from("kindergarten_review_helpful").select("*",{count:"exact",head:!0}).eq("review_id",e.id);return n?(console.warn("profiles \ud14c\uc774\ube14 \uc870\ud68c \uc2e4\ud328, \uae30\ubcf8\uac12 \uc0ac\uc6a9:",n),(0,Ae.A)((0,Ae.A)({},e),{},{user_profile:{full_name:"\uc775\uba85",nickname:"\uc775\uba85",profile_image_url:null},helpful_count:s||0})):(console.log("\ub9ac\ubdf0 \ud504\ub85c\ud544 \uc815\ubcf4 \uc870\ud68c \uc131\uacf5:",t),(0,Ae.A)((0,Ae.A)({},e),{},{user_profile:t,helpful_count:s||0}))}catch(l){return console.warn("\uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \ub85c\ub529 \uc2e4\ud328:",l),(0,Ae.A)((0,Ae.A)({},e),{},{user_profile:{full_name:"\uc775\uba85",nickname:"\uc775\uba85",profile_image_url:null},helpful_count:0})}}));return{reviews:u,hasMore:d}}catch(N){throw console.error("\ub9ac\ubdf0 \ubaa9\ub85d \uc870\ud68c \uc2e4\ud328:",N),N}}(p,e,10,"latest");if(n){const{reviews:s,hasMore:r}=n;t?Ie(e=>[...e,...s]):(Ie(s),await Jt(s)),We(r),Be(e)}else Ie([]),We(!1)}catch(n){console.error("\ub9ac\ubdf0 \ub85c\ub529 \uc624\ub958:",n),Ie([]),We(!1)}finally{Le(!1)}},Jt=async e=>{try{const{data:{user:t}}=await Se.supabase.auth.getUser();if(!t)return;const{data:n,error:s}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",t.id).single();if(s||!n)return void console.error("\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \uac00\uc838\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4:",s);const r=e.map(e=>e.id),{data:a,error:i}=await Se.supabase.from("kindergarten_review_helpful").select("review_id").eq("user_id",n.id).in("review_id",r);if(!i&&a){const e=new Set(a.map(e=>e.review_id));ft(e)}const o=e.filter(e=>e.user_id===t.id).map(e=>e.id);if(o.length>0){const{data:e,error:t}=await Se.supabase.from("review_delete_requests").select("review_id").eq("review_type","kindergarten").eq("requester_id",n.id).eq("status","pending").in("review_id",o);if(!t&&e){const t=new Set(e.map(e=>e.review_id));pt(t)}}}catch(N){console.error("\ub3c4\uc6c0\ub428 \ub9ac\ubdf0 \ub85c\ub4dc \uc624\ub958:",N)}},Gt=async()=>{if(p)try{const e=await async function(e){try{const{data:{user:n},error:s}=await Se.supabase.auth.getUser();if(s||!n)return null;const{data:r,error:a}=await Se.supabase.from("kindergarten_reviews").select("\n        *,\n        images:kindergarten_review_images (\n          id,\n          review_id,\n          image_url,\n          image_order,\n          created_at\n        )\n      ").eq("kindergarten_code",e).eq("user_id",n.id).eq("is_deleted",!1).maybeSingle();if(a)return console.error("\uc0ac\uc6a9\uc790 \ub9ac\ubdf0 \uc870\ud68c \uc624\ub958:",a),null;if(r)try{const{data:e,error:t}=await Se.supabase.from("profiles").select("full_name, nickname, profile_image_url, children_info").eq("auth_user_id",r.user_id).maybeSingle();return t?(console.warn("profiles \ud14c\uc774\ube14 \uc870\ud68c \uc2e4\ud328, \uae30\ubcf8\uac12 \uc0ac\uc6a9:",t),(0,Ae.A)((0,Ae.A)({},r),{},{user_profile:{full_name:"\uc775\uba85",nickname:"\uc775\uba85",profile_image_url:null}})):(0,Ae.A)((0,Ae.A)({},r),{},{user_profile:e})}catch(t){return console.warn("\uc0ac\uc6a9\uc790 \ud504\ub85c\ud544 \ub85c\ub529 \uc2e4\ud328:",t),(0,Ae.A)((0,Ae.A)({},r),{},{user_profile:{full_name:"\uc775\uba85",nickname:"\uc775\uba85",profile_image_url:null}})}return r}catch(N){return console.error("\uc0ac\uc6a9\uc790 \ub9ac\ubdf0 \uc870\ud68c \uc2e4\ud328:",N),null}}(p);ze(e)}catch(e){console.error("\uc0ac\uc6a9\uc790 \ub9ac\ubdf0 \ub85c\ub529 \uc624\ub958:",e)}},Xt=async()=>{if(p)try{const e=await Ol(p);Fe(e)}catch(e){console.error("\ub9ac\ubdf0 \ud1b5\uacc4 \ub85c\ub529 \uc624\ub958:",e)}},$t=async e=>{try{const t=await async function(e,t){try{const{data:{user:r},error:a}=await Se.supabase.auth.getUser();if(a||!r)throw new Error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const{data:i,error:o}=await Se.supabase.from("kindergarten_reviews").select("user_id, helpful_count").eq("id",e).single();if(o)throw o;const{data:l,error:c}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",r.id).single();if(c||!l)throw new Error("\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const d=l.id,{data:u,error:h}=await Se.supabase.from("kindergarten_review_helpful").select("id").eq("review_id",e).eq("user_id",d).maybeSingle();let m=!1,f=!!u;if(h&&"PGRST116"!==h.code)throw h;if(u){const{error:t}=await Se.supabase.from("kindergarten_review_helpful").delete().eq("review_id",e).eq("user_id",d);if(t)throw t;m=!1}else{const{error:t}=await Se.supabase.from("kindergarten_review_helpful").insert({review_id:e,user_id:d});if(t)throw t;m=!0}const{count:g,error:p}=await Se.supabase.from("kindergarten_review_helpful").select("*",{count:"exact",head:!0}).eq("review_id",e);if(p)return console.error("\ub3c4\uc6c0\ub428 \uce74\uc6b4\ud2b8 \uc870\ud68c \uc624\ub958:",p),{isHelpful:m,helpfulCount:g||0};if(m&&!f)try{const{createReviewLikeNotification:s}=await Promise.resolve().then(n.bind(n,498)),{data:a,error:o}=await Se.supabase.from("profiles").select("full_name, nickname, profile_image_url").eq("auth_user_id",r.id).single();if(!o&&a){const{data:n,error:r}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",i.user_id).single();!r&&n&&d!==n.id&&await s(e,t,d,a.nickname||a.full_name,a.profile_image_url||"",n.id)}}catch(s){console.error("\ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc \uc0dd\uc131 \uc624\ub958:",s)}else if(!m&&f)try{const{deleteReviewLikeNotification:t}=await Promise.resolve().then(n.bind(n,498)),{data:s,error:r}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",i.user_id).single();!r&&s&&d!==s.id&&await t(e,d,s.id)}catch(s){console.error("\ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc \uc0ad\uc81c \uc624\ub958:",s)}return{isHelpful:m,helpfulCount:g||0}}catch(N){throw console.error("\ub3c4\uc6c0\ub428 \ud1a0\uae00 \uc2e4\ud328:",N),N}}(e,(null===b||void 0===b?void 0:b.name)||"\uc720\uce58\uc6d0");Ie(n=>n.map(n=>n.id===e?(0,Ae.A)((0,Ae.A)({},n),{},{helpful_count:t.helpfulCount}):n)),ft(n=>{const s=new Set(n);return t.isHelpful?s.add(e):s.delete(e),s})}catch(t){console.error("\ub3c4\uc6c0\ub428 \ud1a0\uae00 \uc624\ub958:",t)}},Zt=e=>{switch(e){case"\uc801\ud569":return(0,Ee.jsx)(Bc,{className:"w-3 h-3 text-green-500",strokeWidth:2.5});case"\uc870\uce58":return(0,Ee.jsx)(kl,{className:"w-3 h-3"});default:return(0,Ee.jsx)(Vc,{className:"w-3 h-3"})}},Qt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e&&0!==e.length&&(re(e),ie(Math.min(Math.max(t,0),e.length-1)),Q(!0),je(r),be(!1),le(void 0!==n&&void 0!==s?{reviewId:n,reviewIndex:s}:null),de(!1))},en=()=>{0!==te.length&&ie(e=>(e-1+te.length)%te.length)},tn=()=>{0!==te.length&&ie(e=>(e+1)%te.length)},nn=(0,r.useRef)(null),sn=(0,r.useRef)(null),rn=(0,r.useRef)(0),an=e=>e&&"\uc815\ubcf4 \uc5c6\uc74c"!==e?8===e.length&&/^\d{8}$/.test(e)?"".concat(e.slice(0,4),"-").concat(e.slice(4,6),"-").concat(e.slice(6,8)):e:"\uc815\ubcf4 \uc5c6\uc74c",on=async()=>{try{const e="".concat(window.location.origin).concat(y.pathname).concat(y.search),t="\ub9d8\ud53d \xb7 ".concat((null===b||void 0===b?void 0:b.name)||"\uc720\uce58\uc6d0"," \uc0c1\uc138\uc815\ubcf4"),n="".concat((null===b||void 0===b?void 0:b.name)||"\uc720\uce58\uc6d0"," \uc815\ubcf4\ub97c \uacf5\uc720\ud569\ub2c8\ub2e4."),s=navigator;if(s.share)return void await s.share({title:t,text:n,url:e});if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(e),alert("\uacf5\uc720 \ub9c1\ud06c\uac00 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");else{const t=document.createElement("input");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),alert("\uacf5\uc720 \ub9c1\ud06c\uac00 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}}catch(N){try{const e="".concat(window.location.origin).concat(y.pathname).concat(y.search);await navigator.clipboard.writeText(e),alert("\uacf5\uc720 \ub9c1\ud06c\uac00 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){}}};return j?(0,Ee.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uc720\uce58\uc6d0 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."})]})}):N||!b?(0,Ee.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ee.jsx)(kl,{className:"w-8 h-8 text-red-500"})}),(0,Ee.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"\uc624\ub958 \ubc1c\uc0dd"}),(0,Ee.jsx)("p",{className:"text-gray-600 mb-4",children:N}),(0,Ee.jsx)("button",{onClick:()=>x("/kindergarten-map?type=kindergarten&selected=".concat(p)),className:"px-4 py-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors",children:"\ub3cc\uc544\uac00\uae30"})]})}):(0,Ee.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Ee.jsxs)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:[(0,Ee.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:()=>x("/kindergarten-map?type=kindergarten&selected=".concat(p)),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)(ll,{className:"w-5 h-5 text-gray-700"})}),(0,Ee.jsx)("h1",{className:"text-lg font-semibold text-gray-900 truncate flex-1 mx-3",children:b.name}),(0,Ee.jsxs)("div",{className:"flex items-center",children:[(0,Ee.jsx)("button",{onClick:()=>Pe(!0),className:"mr-2 p-1 hover:bg-gray-100 rounded-full transition-colors",title:"\uc815\ubcf4 \ucd9c\ucc98 \ud655\uc778",children:(0,Ee.jsx)(Wc,{className:"w-4 h-4 text-gray-500 hover:text-[#fb8678] transition-colors"})}),(0,Ee.jsx)("span",{className:"px-2 py-1 bg-[#fb8678]/10 text-[#fb8678] text-xs rounded-full font-medium",children:b.type})]})]}),(0,Ee.jsx)("div",{className:"flex",children:[{id:"detail",label:"\uc0c1\uc138",icon:$o},{id:"meal",label:"\uae09\uc2dd",icon:Hc},{id:"reviews",label:"\uce6d\ucc2c",icon:ml}].map(e=>{let{id:t,label:n,icon:s}=e;return(0,Ee.jsx)("button",{onClick:()=>S(t),className:"flex-1 flex items-center justify-center py-3 px-2 transition-colors ".concat(C===t?"text-[#fb8678] border-b-2 border-[#fb8678]":"text-gray-500 hover:text-gray-700"),children:(0,Ee.jsx)(s,{className:"w-5 h-5"})},t)})})]}),z&&(0,Ee.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mx-4 mt-4",children:(0,Ee.jsxs)("div",{className:"flex",children:[(0,Ee.jsx)("div",{className:"flex-shrink-0",children:(0,Ee.jsx)(Vc,{className:"h-5 w-5 text-yellow-400"})}),(0,Ee.jsx)("div",{className:"ml-3",children:(0,Ee.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,Ee.jsx)("strong",{children:"\uc8fc\uc758:"})," \ud604\uc7ac \uc720\uce58\uc6d0 \uc0c1\uc138 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc5b4 \uc784\uc2dc \ub370\uc774\ud130\ub97c \ud45c\uc2dc\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."]})})]})}),(0,Ee.jsxs)("div",{children:["detail"===C&&(0,Ee.jsx)("div",{className:"space-y-4",children:(0,Ee.jsxs)("div",{className:"bg-white pb-16 shadow-sm",children:[(0,Ee.jsx)("div",{className:"mb-4",children:null!==b&&void 0!==b&&null!==(e=b.customInfo)&&void 0!==e&&e.building_images&&b.customInfo.building_images.length>0?(0,Ee.jsxs)("div",{className:"relative bg-gray-100 h-40 cursor-pointer",onClick:()=>{re(b.customInfo.building_images),ie(O||0),Q(!0)},children:[(0,Ee.jsx)("img",{src:b.customInfo.building_images[O||0],alt:"".concat(b.name," \uac74\ubb3c"),className:"w-full h-full object-cover"}),b.customInfo.building_images.length>1&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:[(O||0)+1," / ",b.customInfo.building_images.length]}),(O||0)>0&&(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),D((O||0)-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80",children:(0,Ee.jsx)(ll,{className:"w-4 h-4"})}),(O||0)<b.customInfo.building_images.length-1&&(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),D((O||0)+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80",children:(0,Ee.jsx)(cl,{className:"w-4 h-4"})})]}),(0,Ee.jsx)("div",{className:"absolute top-2 left-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:"\ud074\ub9ad\ud558\uc5ec \ud06c\uac8c\ubcf4\uae30"})]}):(0,Ee.jsx)("div",{className:"bg-gray-100 h-40 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)(Sl,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-500",children:"\ud604\uc7ac \uc0ac\uc9c4\uc5c6\uc74c"})]})})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"\uc0c1\uc138 \uc124\uba85"})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsx)("div",{className:"bg-gray-50 rounded-lg p-3",children:(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\ub300\ud45c\uc790\uba85"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:b.rppnname||"\uc815\ubcf4 \uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uc6d0\uc7a5\uba85"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:b.ldgrname||"\uc815\ubcf4 \uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uc124\ub9bd\uc77c"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:an(b.edate)})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uac1c\uc6d0\uc77c"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:an(b.odate)})]})]})})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsxs)("div",{className:"grid grid-cols-5 gap-2",children:[(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-[10px] text-gray-500 font-semibold",children:"\uc815\uc6d0"})}),(0,Ee.jsxs)("div",{className:"flex flex-col items-center text-center p-2",children:[(0,Ee.jsx)(Zo,{className:"w-5 h-5 mb-1 text-[#fb8678]"}),(0,Ee.jsxs)("div",{className:"text-xs font-semibold text-gray-900",children:[b.capacity,"\uba85"]})]})]}),(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-[10px] text-gray-500 font-semibold",children:"\ud604\uc6d0"})}),(0,Ee.jsxs)("div",{className:"flex flex-col items-center text-center p-2",children:[(0,Ee.jsx)(Zo,{className:"w-5 h-5 mb-1 text-[#fb8678]"}),(0,Ee.jsxs)("div",{className:"text-xs font-semibold text-gray-900",children:[b.enrolled,"\uba85"]})]})]}),(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-[10px] text-gray-500 font-semibold",children:"\uad50\uc0ac"})}),(0,Ee.jsxs)("div",{className:"flex flex-col items-center text-center p-2",children:[(0,Ee.jsx)(Yc,{className:"w-5 h-5 mb-1 text-[#fb8678]"}),(0,Ee.jsxs)("div",{className:"text-xs font-semibold text-gray-900",children:[b.teacherCount,"\uba85"]})]})]}),(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-[10px] text-gray-500 font-semibold",children:"\ud559\uae09"})}),(0,Ee.jsxs)("div",{className:"flex flex-col items-center text-center p-2",children:[(0,Ee.jsx)(cc,{className:"w-5 h-5 mb-1 text-[#fb8678]"}),(0,Ee.jsxs)("div",{className:"text-xs font-semibold text-gray-900",children:[b.classCount,"\uac1c"]})]})]}),(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-[10px] text-gray-500 font-semibold",children:"CCTV"})}),(0,Ee.jsxs)("div",{className:"flex flex-col items-center text-center p-2",children:[(0,Ee.jsx)(Sl,{className:"w-5 h-5 mb-1 text-[#fb8678]"}),(0,Ee.jsxs)("div",{className:"text-xs font-semibold text-gray-900",children:[b.safety.cctvIstTotal||0,"\ub300"]})]})]})]})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-3 py-2 text-center",children:(0,Ee.jsxs)("div",{className:"text-xs text-gray-500 font-semibold",children:["\uc704\uc0dd\uad00\ub9ac \uc810\uac80\uc77c: ",b.hygiene.lastCheckDate||"\uc815\ubcf4 \uc5c6\uc74c"]})}),(0,Ee.jsxs)("div",{className:"p-4 space-y-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uc2e4\ub0b4\uacf5\uae30\uc9c8"}),(0,Ee.jsxs)("div",{className:"flex items-center",children:[Zt(b.hygiene.status),(0,Ee.jsx)("span",{className:"ml-2 text-xs font-semibold ".concat((e=>{switch(e){case"\uc801\ud569":return"text-green-600 bg-green-50";case"\uc870\uce58":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}})(b.hygiene.status)," px-1.5 py-0.5 rounded-full"),children:b.hygiene.status||"\ubbf8\uc0c1"})]})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uc74c\uc6a9\uc218"}),(0,Ee.jsx)("span",{className:"text-xs font-semibold text-gray-900",children:"\uc815\uc218\uae30 \uc0ac\uc6a9"})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uc815\uae30\uc18c\ub3c5"}),(0,Ee.jsxs)("div",{className:"flex items-center",children:[Zt("\uc801\ud569"),(0,Ee.jsx)("span",{className:"ml-2 text-xs font-semibold text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full",children:"\uc2e4\uc2dc"})]})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\ubbf8\uc138\uba3c\uc9c0"}),(0,Ee.jsxs)("div",{className:"flex items-center",children:[Zt("\uc801\ud569"),(0,Ee.jsx)("span",{className:"ml-2 text-xs font-semibold text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full",children:"\uc810\uac80 \uc644\ub8cc"})]})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uc870\ub3c4\uad00\ub9ac"}),(0,Ee.jsxs)("div",{className:"flex items-center",children:[Zt("\uc801\ud569"),(0,Ee.jsx)("span",{className:"ml-2 text-xs font-semibold text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full",children:"\uc810\uac80 \uc644\ub8cc"})]})]})]})]})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-3 py-2 text-center",children:(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uc548\uc804\uc810\uac80 \ud604\ud669"})}),(0,Ee.jsx)("div",{className:"p-4",children:(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc18c\ubc29\ub300\ud53c\ud6c8\ub828"}),(0,Ee.jsxs)("div",{className:"flex items-center",children:["Y"===b.safety.fireAvdYn&&(0,Ee.jsx)(Bc,{className:"w-3 h-3 text-green-500 mr-1",strokeWidth:2.5}),(0,Ee.jsx)("span",{className:"font-semibold ".concat("Y"===b.safety.fireAvdYn?"text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full text-xs":"text-gray-500"),children:"Y"===b.safety.fireAvdYn?"\uc2e4\uc2dc":"\ubbf8\uc2e4\uc2dc"})]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ud6c8\ub828\uc77c\uc790"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:"Y"===b.safety.fireAvdYn&&b.safety.fireAvdDt?an(b.safety.fireAvdDt):"\uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uac00\uc2a4\uc810\uac80"}),(0,Ee.jsxs)("div",{className:"flex items-center",children:["Y"===b.safety.gasCkYn&&(0,Ee.jsx)(Bc,{className:"w-3 h-3 text-green-500 mr-1",strokeWidth:2.5}),(0,Ee.jsx)("span",{className:"font-semibold ".concat("Y"===b.safety.gasCkYn?"text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full text-xs":"text-gray-500"),children:"Y"===b.safety.gasCkYn?"\uc2e4\uc2dc":"\ubbf8\uc2e4\uc2dc"})]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc810\uac80\uc77c\uc790"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:"Y"===b.safety.gasCkYn&&b.safety.gasCkDt?an(b.safety.gasCkDt):"\uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc18c\ubc29\uc548\uc804\uc810\uac80"}),(0,Ee.jsxs)("div",{className:"flex items-center",children:["Y"===b.safety.fireSafeYn&&(0,Ee.jsx)(Bc,{className:"w-3 h-3 text-green-500 mr-1",strokeWidth:2.5}),(0,Ee.jsx)("span",{className:"font-semibold ".concat("Y"===b.safety.fireSafeYn?"text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full text-xs":"text-gray-500"),children:"Y"===b.safety.fireSafeYn?"\uc2e4\uc2dc":"\ubbf8\uc2e4\uc2dc"})]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc810\uac80\uc77c\uc790"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:"Y"===b.safety.fireSafeYn&&b.safety.fireSafeDt?an(b.safety.fireSafeDt):"\uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc804\uae30\uc124\ube44\uc810\uac80"}),(0,Ee.jsxs)("div",{className:"flex items-center",children:["Y"===b.safety.electCkYn&&(0,Ee.jsx)(Bc,{className:"w-3 h-3 text-green-500 mr-1",strokeWidth:2.5}),(0,Ee.jsx)("span",{className:"font-semibold ".concat("Y"===b.safety.electCkYn?"text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full text-xs":"text-gray-500"),children:"Y"===b.safety.electCkYn?"\uc2e4\uc2dc":"\ubbf8\uc2e4\uc2dc"})]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc810\uac80\uc77c\uc790"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:"Y"===b.safety.electCkYn&&b.safety.electCkDt?an(b.safety.electCkDt):"\uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub180\uc774\uc2dc\uc124 \uc548\uc804\uac80\uc0ac"}),(0,Ee.jsxs)("div",{className:"flex items-center",children:["Y"===b.safety.plygCkYn&&(0,Ee.jsx)(Bc,{className:"w-3 h-3 text-green-500 mr-1",strokeWidth:2.5}),(0,Ee.jsx)("span",{className:"font-semibold ".concat("Y"===b.safety.plygCkYn?"text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full text-xs":"text-gray-500"),children:"Y"===b.safety.plygCkYn?"\ub300\uc0c1":"\ube44\ub300\uc0c1"})]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc810\uac80\uc77c\uc790"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:"Y"===b.safety.plygCkYn&&b.safety.plygCkDt?an(b.safety.plygCkDt):"\uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"CCTV \uc124\uce58"}),(0,Ee.jsxs)("div",{className:"flex items-center",children:["Y"===b.safety.cctvIstYn&&(0,Ee.jsx)(Bc,{className:"w-3 h-3 text-green-500 mr-1",strokeWidth:2.5}),(0,Ee.jsx)("span",{className:"font-semibold ".concat("Y"===b.safety.cctvIstYn?"text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full text-xs":"text-gray-500"),children:"Y"===b.safety.cctvIstYn?"\uc124\uce58":"\ubbf8\uc124\uce58"})]})]}),void 0!==b.safety.cctvIstTotal&&b.safety.cctvIstTotal>0&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ucd1d \uc124\uce58\uc218"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.safety.cctvIstTotal,"\ub300"]})]}),void 0!==b.safety.cctvIstIn&&b.safety.cctvIstIn>0&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uac74\ubb3c \uc548"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.safety.cctvIstIn,"\ub300"]})]}),void 0!==b.safety.cctvIstOut&&b.safety.cctvIstOut>0&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uac74\ubb3c \ubc16"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.safety.cctvIstOut,"\ub300"]})]})]})})]})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"bg-gray-50 px-3 py-2 flex items-center justify-between",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uad50\uc0ac \ud604\ud669"}),(0,Ee.jsx)("button",{onClick:()=>V(!B),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:B?(0,Ee.jsx)(Kc,{className:"w-4 h-4 text-[#fb8678]"}):(0,Ee.jsx)(Jc,{className:"w-4 h-4 text-[#fb8678]"})})]}),(0,Ee.jsxs)("div",{className:"p-4",children:[(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc6d0\uc7a5"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[(null===(t=b.teachers)||void 0===t?void 0:t.principal)||0,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc6d0\uac10"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[(null===(s=b.teachers)||void 0===s?void 0:s.vicePrincipal)||0,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc77c\ubc18\uad50\uc0ac"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[(null===(a=b.teachers)||void 0===a?void 0:a.generalTeacher)||0,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ud2b9\uc218\uad50\uc0ac"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[(null===(i=b.teachers)||void 0===i?void 0:i.specialTeacher)||0,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ubcf4\uac74\uad50\uc0ac"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[(null===(o=b.teachers)||void 0===o?void 0:o.healthTeacher)||0,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc601\uc591\uad50\uc0ac"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[(null===(l=b.teachers)||void 0===l?void 0:l.nutritionTeacher)||0,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uae30\uac04\uc81c\uad50\uc0ac"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[(null===(c=b.teachers)||void 0===c?void 0:c.contractTeacher)||0,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc0ac\ubb34\uc9c1\uc6d0"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[(null===(d=b.teachers)||void 0===d?void 0:d.staff)||0,"\uba85"]})]})]}),(0,Ee.jsxs)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(B?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:[(0,Ee.jsx)("div",{className:"border-t border-gray-200 my-3"}),(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"1\ub144\ubbf8\ub9cc"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[(null===(u=b.teachers)||void 0===u?void 0:u.yy1UndrThcnt)||0,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"1\ub144\uc774\uc0c12\ub144\ubbf8\ub9cc"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[(null===(h=b.teachers)||void 0===h?void 0:h.yy1AbvYy2UndrThcnt)||0,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"2\ub144\uc774\uc0c14\ub144\ubbf8\ub9cc"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[(null===(m=b.teachers)||void 0===m?void 0:m.yy2AbvYy4UndrThcnt)||0,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"4\ub144\uc774\uc0c16\ub144\ubbf8\ub9cc"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[(null===(f=b.teachers)||void 0===f?void 0:f.yy4AbvYy6UndrThcnt)||0,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"6\ub144\uc774\uc0c1"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[(null===(g=b.teachers)||void 0===g?void 0:g.yy6AbvThcnt)||0,"\uba85"]})]})]})]})]})]})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"bg-gray-50 px-3 py-2 flex items-center justify-between",children:[(0,Ee.jsxs)("div",{className:"text-xs text-gray-500 font-semibold flex items-center",children:[(0,Ee.jsx)("img",{src:"/icons/schoolbusicon.svg",alt:"\ud1b5\ud559 \ucc28\ub7c9",className:"w-4 h-4 mr-1"}),"\ud1b5\ud559\ucc28\ub7c9 \ud604\ud669"]}),(0,Ee.jsx)("button",{onClick:()=>H(!W),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:W?(0,Ee.jsx)(Kc,{className:"w-4 h-4 text-[#fb8678]"}):(0,Ee.jsx)(Jc,{className:"w-4 h-4 text-[#fb8678]"})})]}),(0,Ee.jsxs)("div",{className:"p-4",children:[(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc6b4\uc601 \uc5ec\ubd80"}),(0,Ee.jsx)("span",{className:"font-semibold ".concat(b.bus.inOperation?"text-green-600":"text-gray-500"),children:b.bus.inOperation?"\uc6b4\uc601":"\ubbf8\uc6b4\uc601"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ucc28\ub7c9 \uc218"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.bus.vehicleCount,"\ub300"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub3d9\uc2b9 \ubcf4\ud638\uc790"}),(0,Ee.jsx)("span",{className:"font-semibold ".concat(b.bus.hasGuardian?"text-green-600":"text-gray-500"),children:b.bus.hasGuardian?"\uc788\uc74c":"\uc5c6\uc74c"})]}),void 0!==b.bus.dclrVhcnt&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc2e0\uace0\ucc28\ub7c9\uc218"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.bus.dclrVhcnt,"\ub300"]})]})]}),(0,Ee.jsxs)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(W?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:[(0,Ee.jsx)("div",{className:"border-t border-gray-200 my-3"}),(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"9\uc778\uc2b9 \uc2e0\uace0\ucc28\ub7c9"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.bus.psg9DclrVhcnt||0,"\ub300"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"12\uc778\uc2b9 \uc2e0\uace0\ucc28\ub7c9"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.bus.psg12DclrVhcnt||0,"\ub300"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"15\uc778\uc2b9 \uc2e0\uace0\ucc28\ub7c9"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.bus.psg15DclrVhcnt||0,"\ub300"]})]})]})]})]})]})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"bg-gray-50 px-3 py-2 flex items-center justify-between",children:[(0,Ee.jsxs)("div",{className:"text-xs text-gray-500 font-semibold flex items-center",children:[(0,Ee.jsx)("img",{src:"/icons/schoolaftericon.svg",alt:"\ubc29\uacfc\ud6c4 \uacfc\uc815",className:"w-4 h-4 mr-1"}),"\ubc29\uacfc\ud6c4 \uacfc\uc815 \ud604\ud669"]}),(0,Ee.jsx)("button",{onClick:()=>K(!Y),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:Y?(0,Ee.jsx)(Kc,{className:"w-4 h-4 text-[#fb8678]"}):(0,Ee.jsx)(Jc,{className:"w-4 h-4 text-[#fb8678]"})})]}),(0,Ee.jsxs)("div",{className:"p-4",children:[(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc6b4\uc601 \uc5ec\ubd80"}),(0,Ee.jsx)("span",{className:"font-semibold ".concat(b.afterSchool.inOperation?"text-green-600":"text-gray-500"),children:b.afterSchool.inOperation?"\uc6b4\uc601":"\ubbf8\uc6b4\uc601"})]}),b.afterSchool.operTime&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc6b4\uc601\uc2dc\uac04"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold text-xs",children:b.afterSchool.operTime})]})]}),(0,Ee.jsxs)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(Y?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:[(0,Ee.jsx)("div",{className:"border-t border-gray-200 my-3"}),(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[void 0!==b.afterSchool.inorClcnt&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub3c5\ub9bd\ud3b8\uc131\ud559\uae09\uc218"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.afterSchool.inorClcnt,"\ud559\uae09"]})]}),void 0!==b.afterSchool.pmRrgnClcnt&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc624\ud6c4\uc7ac\ud3b8\uc131\ud559\uae09\uc218"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.afterSchool.pmRrgnClcnt,"\ud559\uae09"]})]}),void 0!==b.afterSchool.inorPtcKpcnt&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub3c5\ub9bd\ud3b8\uc131\ucc38\uc5ec\uc6d0\uc544\uc218"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.afterSchool.inorPtcKpcnt,"\uba85"]})]}),void 0!==b.afterSchool.pmRrgnPtcKpcnt&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc624\ud6c4\uc7ac\ud3b8\uc131\ucc38\uc5ec\uc6d0\uc544\uc218"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.afterSchool.pmRrgnPtcKpcnt,"\uba85"]})]}),void 0!==b.afterSchool.fxrlThcnt&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc815\uaddc\uad50\uc0ac\uc218"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.afterSchool.fxrlThcnt,"\uba85"]})]}),void 0!==b.afterSchool.shcntThcnt&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uae30\uac04\uc81c\uad50\uc0ac\uc218"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.afterSchool.shcntThcnt,"\uba85"]})]}),void 0!==b.afterSchool.incnt&&(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc804\ub2f4\uc0ac\uc218"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[b.afterSchool.incnt,"\uba85"]})]})]})]})]})]})}),b.safetyEducation&&(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"bg-gray-50 px-3 py-2 flex items-center justify-between",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uc548\uc804\uad50\uc721 \uacfc\uc815 \ud604\ud669"}),(0,Ee.jsx)("button",{onClick:()=>G(!J),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:J?(0,Ee.jsx)(Kc,{className:"w-4 h-4 text-[#fb8678]"}):(0,Ee.jsx)(Jc,{className:"w-4 h-4 text-[#fb8678]"})})]}),(0,Ee.jsxs)("div",{className:"p-4",children:[(0,Ee.jsx)("div",{className:"text-center text-xs",children:(0,Ee.jsxs)("div",{className:"flex justify-center items-center",children:[(0,Ee.jsx)("span",{className:"text-gray-600 mr-2",children:"\ud559\uae30"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:b.safetyEducation.pbntSemScCd?"".concat(b.safetyEducation.pbntSemScCd,"\ud559\uae30"):"\uc815\ubcf4 \uc5c6\uc74c"})]})}),(0,Ee.jsx)("div",{className:"overflow-hidden transition-all duration-300 ".concat(J?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:(0,Ee.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc0dd\ud65c\uc548\uc804\uad50\uc721"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:b.safetyEducation.safeTpCd1?"".concat(b.safetyEducation.safeTpCd1,"\ud68c"):"\uc815\ubcf4 \uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uad50\ud1b5\uc548\uc804\uad50\uc721"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:b.safetyEducation.safeTpCd2?"".concat(b.safetyEducation.safeTpCd2,"\ud68c"):"\uc815\ubcf4 \uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ud3ed\ub825\uc608\ubc29 \uc2e0\ubcc0\ubcf4\ud638\uad50\uc721"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:b.safetyEducation.safeTpCd3?"".concat(b.safetyEducation.safeTpCd3,"\ud68c"):"\uc815\ubcf4 \uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc57d\ubb3c\uc911\ub3c5\uc608\ubc29\uad50\uc721"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:b.safetyEducation.safeTpCd4?"".concat(b.safetyEducation.safeTpCd4,"\ud68c"):"\uc815\ubcf4 \uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc0ac\uc774\ubc84\uc911\ub3c5\uc608\ubc29\uad50\uc721"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:b.safetyEducation.safeTpCd5?"".concat(b.safetyEducation.safeTpCd5,"\ud68c"):"\uc815\ubcf4 \uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc7ac\ub09c\uc548\uc804\uad50\uc721"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:b.safetyEducation.safeTpCd6?"".concat(b.safetyEducation.safeTpCd6,"\ud68c"):"\uc815\ubcf4 \uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc9c1\uc5c5\uc548\uc804\uad50\uc721"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:b.safetyEducation.safeTpCd7?"".concat(b.safetyEducation.safeTpCd7,"\ud68c"):"\uc815\ubcf4 \uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc751\uae09\ucc98\uce58\uad50\uc721"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-semibold",children:b.safetyEducation.safeTpCd8?"".concat(b.safetyEducation.safeTpCd8,"\ud68c"):"\uc815\ubcf4 \uc5c6\uc74c"})]})]})})})]})]})})]})}),"meal"===C&&(0,Ee.jsx)("div",{className:"min-h-screen bg-white",children:(0,Ee.jsx)("div",{className:"pt-4 px-4 pb-20",children:(0,Ee.jsxs)("div",{className:"mb-4 bg-white rounded-xl",children:[(0,Ee.jsxs)("h3",{className:"text-base font-semibold text-gray-900 mb-2 flex items-center justify-between",children:[(0,Ee.jsxs)("div",{className:"flex items-center",children:[(0,Ee.jsx)("img",{src:"/icons/foodicon.svg",alt:"\uae09\uc2dd",className:"w-8 h-8 mr-2"}),"\uae09\uc2dd \uc6b4\uc601"]}),(0,Ee.jsx)("button",{onClick:()=>x("/kindergarten/".concat(p,"/meal-calendar")),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,Ee.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-5 h-5 text-gray-500",children:(0,Ee.jsx)("path",{d:"m9 18 6-6-6-6"})})})]}),(0,Ee.jsx)("div",{className:"mb-4",children:(0,Ee.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,Ee.jsx)("button",{onClick:()=>{R(e=>(e-1+3)%3)},className:"absolute left-0 z-10 p-1 bg-white rounded-full shadow-md hover:bg-gray-50 transition-colors",children:(0,Ee.jsx)(ll,{className:"w-4 h-4 text-gray-600"})}),(0,Ee.jsxs)("div",{className:"flex justify-center space-x-2 mx-8",children:[(0,Ee.jsx)("div",{className:"flex-shrink-0 w-24 h-24 bg-gray-100 rounded-2xl overflow-hidden shadow-sm transition-transform duration-300 ".concat(0===L?"scale-105":"scale-100"," ").concat(F.yesterday.length>0?"cursor-pointer":""),onClick:()=>{F.yesterday.length>0&&Qt(F.yesterday,0,void 0,void 0,!0)},children:F.yesterday.length>0?(0,Ee.jsx)("img",{src:F.yesterday[0],alt:"\uc5b4\uc81c \uae09\uc2dd",className:"w-full h-full object-cover"}):(0,Ee.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,Ee.jsx)(Hc,{className:"w-8 h-8 text-gray-400"})})}),(0,Ee.jsx)("div",{className:"flex-shrink-0 w-24 h-24 bg-gray-100 rounded-2xl overflow-hidden shadow-sm transition-transform duration-300 ".concat(1===L?"scale-105":"scale-100"," ").concat(F.today.length>0?"cursor-pointer":""),onClick:()=>{F.today.length>0&&Qt(F.today,0,void 0,void 0,!0)},children:F.today.length>0?(0,Ee.jsx)("img",{src:F.today[0],alt:"\uc624\ub298 \uae09\uc2dd",className:"w-full h-full object-cover"}):(0,Ee.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,Ee.jsx)(Hc,{className:"w-8 h-8 text-gray-400"})})}),(0,Ee.jsx)("div",{className:"flex-shrink-0 w-24 h-24 bg-gray-100 rounded-2xl overflow-hidden shadow-sm transition-transform duration-300 ".concat(2===L?"scale-105":"scale-100"," ").concat(F.tomorrow.length>0?"cursor-pointer":""),onClick:()=>{F.tomorrow.length>0&&Qt(F.tomorrow,0,void 0,void 0,!0)},children:F.tomorrow.length>0?(0,Ee.jsx)("img",{src:F.tomorrow[0],alt:"\ub0b4\uc77c \uae09\uc2dd",className:"w-full h-full object-cover"}):(0,Ee.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,Ee.jsx)(Hc,{className:"w-8 h-8 text-gray-400"})})})]}),(0,Ee.jsx)("button",{onClick:()=>{R(e=>(e+1)%3)},className:"absolute right-0 z-10 p-1 bg-white rounded-full shadow-md hover:bg-gray-50 transition-colors",children:(0,Ee.jsx)(cl,{className:"w-4 h-4 text-gray-600"})})]})}),(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-3 py-2 text-center",children:(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uae09\uc2dd \uc6b4\uc601 \uc815\ubcf4"})}),(0,Ee.jsxs)("div",{className:"p-4 space-y-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uae09\uc2dd \ud615\ud0dc"}),(0,Ee.jsx)("span",{className:"text-xs font-semibold text-gray-900",children:b.meal.mode})]}),"\uc704\ud0c1"===b.meal.mode&&(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uc704\ud0c1\uc5c5\uccb4\uba85"}),(0,Ee.jsx)("span",{className:"text-xs font-semibold text-gray-900",children:b.meal.consEntsNm||"\uc815\ubcf4 \uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uc601\uc591\uc0ac \uc0c1\uc8fc"}),(0,Ee.jsx)("span",{className:"text-xs font-semibold ".concat(b.meal.hasDietitian?"text-green-600":"text-gray-500"),children:b.meal.hasDietitian?"\uc788\uc74c":"\uc5c6\uc74c"})]}),b.meal.ntrtTchrAgmtYn&&(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uc601\uc591\uad50\uc0ac \ubc30\uce58"}),(0,Ee.jsx)("span",{className:"text-xs font-semibold ".concat("Y"===b.meal.ntrtTchrAgmtYn?"text-green-600":"text-gray-500"),children:"Y"===b.meal.ntrtTchrAgmtYn?"\ubc30\uce58\ub428":"\ubbf8\ubc30\uce58"})]}),(void 0!==b.meal.sngeAgmtNtrtThcnt||void 0!==b.meal.cprtAgmtNtrtThcnt)&&(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uc601\uc591\uad50\uc0ac \uc218"}),(0,Ee.jsxs)("div",{className:"flex gap-2",children:[(0,Ee.jsxs)("span",{className:"text-xs font-semibold text-blue-600 bg-blue-50 px-2 py-1 rounded-full",children:["\ub2e8\ub3c5 ",b.meal.sngeAgmtNtrtThcnt||0,"\uba85"]}),(0,Ee.jsxs)("span",{className:"text-xs font-semibold text-purple-600 bg-purple-50 px-2 py-1 rounded-full",children:["\uacf5\ub3d9 ",b.meal.cprtAgmtNtrtThcnt||0,"\uba85"]})]})]}),b.meal.cprtAgmtIttNm&&(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uacf5\ub3d9\ubc30\uce58\uae30\uad00"}),(0,Ee.jsx)("span",{className:"text-xs font-medium text-gray-900",children:b.meal.cprtAgmtIttNm})]}),(void 0!==b.meal.ckcnt||void 0!==b.meal.cmcnt)&&(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uc870\ub9ac \uc778\ub825"}),(0,Ee.jsxs)("div",{className:"flex gap-2",children:[(0,Ee.jsxs)("span",{className:"text-xs font-semibold text-orange-600 bg-orange-50 px-2 py-1 rounded-full",children:["\uc870\ub9ac\uc0ac ",b.meal.ckcnt||0,"\uba85"]}),(0,Ee.jsxs)("span",{className:"text-xs font-semibold text-red-600 bg-red-50 px-2 py-1 rounded-full",children:["\uc870\ub9ac\uc778\ub825 ",b.meal.cmcnt||0,"\uba85"]})]})]}),b.meal.masMsplDclrYn&&(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uc9d1\ub2e8\uae09\uc2dd\uc18c \uc2e0\uace0"}),(0,Ee.jsx)("span",{className:"text-xs font-semibold ".concat("Y"===b.meal.masMsplDclrYn?"text-green-600":"text-gray-500"),children:"Y"===b.meal.masMsplDclrYn?"\uc2e0\uace0\ub428":"\ubbf8\uc2e0\uace0"})]})]})]})]})})}),"reviews"===C&&(0,Ee.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Ee.jsxs)("div",{className:"px-4 py-4 border-b border-gray-100",children:[(0,Ee.jsx)("div",{className:"mb-3",children:(0,Ee.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["\uce6d\ucc2c (",Rt,")"]})}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:Lt}),(0,Ee.jsx)("div",{className:"flex items-center justify-center space-x-1",children:[1,2,3,4,5].map(e=>(0,Ee.jsx)(ml,{className:"w-4 h-4 ".concat(e<=Math.floor(parseFloat(Lt.toString()))?"text-[#fb8678] fill-current":"text-gray-300")},e))}),(0,Ee.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["\ucd1d ",Rt,"\uac1c"]})]}),(0,Ee.jsx)("div",{className:"flex-1 space-y-1",children:[5,4,3,2,1].map(e=>(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsxs)("span",{className:"text-xs text-gray-600 w-6 font-semibold",children:[e,"\uc810"]}),(0,Ee.jsx)(ml,{className:"w-3 h-3 text-[#fb8678] fill-current"}),(0,Ee.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-1.5",children:(0,Ee.jsx)("div",{className:"bg-yellow-400 h-1.5 rounded-full transition-all duration-300",style:{width:"".concat(Rt>0?Mt[e]/Rt*100:0,"%")}})}),(0,Ee.jsxs)("span",{className:"text-[10px] text-gray-600 w-6 text-right",children:["(",Mt[e],")"]})]},e))})]})]}),(0,Ee.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ee.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"\uce6d\ucc2c \uc0ac\uc9c4"}),Ft>4&&(0,Ee.jsx)("button",{onClick:()=>$(!0),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:(0,Ee.jsx)(cl,{className:"w-4 h-4 text-gray-600"})})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3 overflow-x-auto",children:[qt.map((e,t)=>(0,Ee.jsxs)("div",{className:"flex-shrink-0 w-20 h-20 aspect-square bg-gray-100 rounded-lg relative overflow-hidden cursor-zoom-in",onClick:()=>{const t=Te.find(t=>!t.is_hidden&&t.images&&t.images.some(t=>t.image_url===e.imageUrl)),n=t?Te.findIndex(e=>e.id===t.id):-1;Qt(zt,e.globalIndex,null===t||void 0===t?void 0:t.id,n>=0?n:void 0)},children:[(0,Ee.jsx)("img",{src:e.imageUrl,alt:"\uce6d\ucc2c \uc0ac\uc9c4 ".concat(t+1),className:"w-full h-full object-cover"}),(0,Ee.jsxs)("div",{className:"absolute top-1 right-1 bg-black/60 text-white text-xs px-1 py-0.5 rounded",children:[e.rating,"\uc810"]}),3===t&&Ft>4&&(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:(0,Ee.jsxs)("span",{className:"text-white text-sm font-semibold",children:["+",Ft-4]})})]},t)),0===Dt.length&&(0,Ee.jsx)("div",{className:"flex items-center justify-center w-full h-20 text-gray-500 text-sm",children:"\ub4f1\ub85d\ub41c \uc0ac\uc9c4\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"})]})]}),(0,Ee.jsx)("div",{className:"px-4 py-3",children:(0,Ee.jsx)("div",{className:"flex items-center space-x-4",children:(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("button",{onClick:()=>Ne("\uc804\uccb4"),className:"px-3 py-1 text-sm rounded-full transition-colors ".concat("\uc804\uccb4"===_e?"bg-[#fb8678] text-white":"text-gray-600 hover:bg-gray-100"),children:"\uc804\uccb4"}),(0,Ee.jsx)("button",{onClick:()=>Ne("\ucd5c\uc2e0\uc21c"),className:"px-3 py-1 text-sm rounded-full transition-colors ".concat("\ucd5c\uc2e0\uc21c"===_e?"bg-[#fb8678] text-white":"text-gray-600 hover:bg-gray-100"),children:"\ucd5c\uc2e0\uc21c"})]})})}),(0,Ee.jsx)("div",{className:"divide-y divide-gray-100",children:Me?(0,Ee.jsxs)("div",{className:"px-4 py-8 text-center",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fb8678] mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uce6d\ucc2c\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."})]}):0===Te.length?(0,Ee.jsxs)("div",{className:"px-4 py-8 text-center",children:[(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uc544\uc9c1 \uce6d\ucc2c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{className:"text-gray-500 text-sm",children:"\uccab \ubc88\uc9f8 \uce6d\ucc2c\uc744 \ub0a8\uaca8\ubcf4\uc138\uc694!"})]}):Te.map(e=>{var t,n,s,r,a,i,o,l,c,d,u,h,m,f,g,p,x,v,y,b,w,j,_,N,k,C,S,E,P,A,T,I,M,L,R,O,D,z,U;return(0,Ee.jsxs)("div",{className:"px-4 py-4",children:[(0,Ee.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ee.jsxs)("div",{className:"relative",children:[null!==(t=e.user_profile)&&void 0!==t&&t.profile_image_url?(0,Ee.jsx)("img",{src:e.user_profile.profile_image_url,alt:(null===(n=e.user_profile)||void 0===n?void 0:n.nickname)||"\ud504\ub85c\ud544",className:"w-10 h-10 rounded-2xl object-cover"}):(0,Ee.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-2xl flex items-center justify-center",children:(0,Ee.jsx)("span",{className:"text-sm font-medium text-gray-600",children:(null===(s=e.user_profile)||void 0===s||null===(r=s.nickname)||void 0===r?void 0:r.charAt(0))||(null===(a=e.user_profile)||void 0===a||null===(i=a.full_name)||void 0===i?void 0:i.charAt(0))||"?"})}),Array.isArray(null===(o=e.user_profile)||void 0===o?void 0:o.children_info)&&(null!==(l=null===(c=e.user_profile)||void 0===c||null===(d=c.children_info)||void 0===d?void 0:d.length)&&void 0!==l?l:0)>0&&(0,Ee.jsxs)("div",{className:"absolute -bottom-1 -right-1 flex items-center flex-row-reverse",children:[(null!==(u=null===(h=e.user_profile)||void 0===h||null===(m=h.children_info)||void 0===m?void 0:m.length)&&void 0!==u?u:0)>2&&(0,Ee.jsx)("div",{className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[7px] font-bold",children:["+",(null!==(f=null===(g=e.user_profile)||void 0===g||null===(p=g.children_info)||void 0===p?void 0:p.length)&&void 0!==f?f:0)-2]})}),(null!==(x=null===(v=e.user_profile)||void 0===v||null===(y=v.children_info)||void 0===y?void 0:y.length)&&void 0!==x?x:0)>=2&&(0,Ee.jsx)("div",{className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden relative z-20 ".concat((null!==(b=null===(w=e.user_profile)||void 0===w||null===(j=w.children_info)||void 0===j?void 0:j.length)&&void 0!==b?b:0)>2?"-mr-[5px]":""),children:null!==(_=e.user_profile)&&void 0!==_&&null!==(N=_.children_info)&&void 0!==N&&null!==(k=N[1])&&void 0!==k&&k.profile_image_url?(0,Ee.jsx)("img",{src:null===(C=e.user_profile)||void 0===C||null===(S=C.children_info)||void 0===S||null===(E=S[1])||void 0===E?void 0:E.profile_image_url,alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover"}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[10px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden relative z-10 ".concat((null!==(P=null===(A=e.user_profile)||void 0===A||null===(T=A.children_info)||void 0===T?void 0:T.length)&&void 0!==P?P:0)>=2?"-mr-[5px]":""),children:null!==(I=e.user_profile)&&void 0!==I&&null!==(M=I.children_info)&&void 0!==M&&null!==(L=M[0])&&void 0!==L&&L.profile_image_url?(0,Ee.jsx)("img",{src:null===(R=e.user_profile)||void 0===R||null===(O=R.children_info)||void 0===O||null===(D=O[0])||void 0===D?void 0:D.profile_image_url,alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover"}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[10px]",children:"\ud83d\udc64"})})]})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("div",{className:"font-semibold text-gray-900 text-sm",children:(null===(z=e.user_profile)||void 0===z?void 0:z.nickname)||(null===(U=e.user_profile)||void 0===U?void 0:U.full_name)||"\uc775\uba85"}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(t=>(0,Ee.jsx)(ml,{className:"w-3 h-3 ".concat(t<=e.rating?"text-[#fb8678] fill-current":"text-gray-300")},t))}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString("ko-KR")})]})]})]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>{return t=e.id,void Nt(e=>e===t?null:t);var t},className:"p-2 rounded-full hover:bg-[#fb8678]/10 transition-colors","aria-label":"\uce6d\ucc2c \uc635\uc158",children:(0,Ee.jsx)(Gc,{className:"w-5 h-5 text-[#fb8678]"})}),_t===e.id&&(0,Ee.jsx)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:xt&&e.user_id===xt?(0,Ee.jsx)("button",{onClick:()=>{var t;(t=e.id)&&(dt(t),ht(""),lt(!0))},disabled:gt.has(e.id),className:"w-full px-4 py-2 text-center text-sm ".concat(gt.has(e.id)?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50"),children:gt.has(e.id)?"\uc0ad\uc81c\uc694\uccad \ub300\uae30\uc911":"\uc0ad\uc81c\uc694\uccad"}):(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("button",{onClick:()=>(async e=>{e&&(rt(e),Je(!0))})(e.user_id),className:"w-full px-4 py-2 text-center text-sm text-gray-700 hover:bg-gray-50",children:"\ucc28\ub2e8\ud558\uae30"}),(0,Ee.jsx)("div",{className:"border-t border-gray-200 mx-2"}),(0,Ee.jsx)("button",{onClick:()=>(async(e,t)=>{it({reviewId:e,authorAuthUserId:t}),Ye(!0)})(e.id,e.user_id),className:"w-full px-4 py-2 text-center text-sm text-red-600 hover:bg-red-50",children:"\uc2e0\uace0\ud558\uae30"})]})})]})]}),(0,Ee.jsx)("div",{className:"text-gray-800 text-sm leading-relaxed mb-3",children:e.is_hidden?"\uad00\ub9ac\uc790\uc5d0 \uc758\ud574 \uc228\uae40\ucc98\ub9ac\ub41c \uce6d\ucc2c\uc785\ub2c8\ub2e4.":e.content}),e.images&&e.images.length>0&&(0,Ee.jsx)("div",{className:"flex space-x-3 overflow-x-auto mb-3",children:e.images.map((t,n)=>(0,Ee.jsx)("div",{className:"w-20 h-20 aspect-square bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0 ".concat(e.is_hidden?"":"cursor-zoom-in"),onClick:e.is_hidden?void 0:()=>{const t=Te.findIndex(t=>t.id===e.id);Qt(e.images.map(e=>e.image_url),n,e.id,t)},children:e.is_hidden?(0,Ee.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,Ee.jsx)("span",{className:"text-gray-400 text-xs",children:"\uc228\uae40"})}):(0,Ee.jsx)("img",{src:t.image_url,alt:"\uce6d\ucc2c \uc774\ubbf8\uc9c0 ".concat(n+1),className:"w-full h-full object-cover"})},n))}),(0,Ee.jsx)("div",{className:"flex items-center",children:(0,Ee.jsxs)("button",{onClick:()=>$t(e.id),className:"flex items-center space-x-1 transition-colors ".concat(mt.has(e.id)?"text-red-500 hover:text-red-600":"text-gray-500 hover:text-gray-700"),children:[(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:mt.has(e.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,Ee.jsxs)("span",{className:"text-xs",children:["\ub3c4\uc6c0\ub428 ",e.helpful_count]})]})})]},e.id)})}),Ve&&(0,Ee.jsx)("div",{className:"px-4 py-4 text-center",children:(0,Ee.jsx)("button",{onClick:()=>{!Me&&Ve&&Kt(qe+1,!0)},disabled:Me,className:"w-full py-3 text-sm text-gray-600 border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:Me?(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}),"\ub85c\ub529 \uc911..."]}):"\uce6d\ucc2c \ub354\ubcf4\uae30"})})]}),"reviews"===C&&(0,Ee.jsxs)(Ee.Fragment,{children:[Re&&(0,Ee.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>Oe(!1)}),Re&&(0,Ee.jsx)("div",{className:"fixed bottom-40 right-4 bg-white rounded-2xl shadow-lg border border-gray-200 z-50 min-w-[160px]",children:(0,Ee.jsx)("button",{onClick:()=>{if(De)return alert("\uc774\ubbf8 \uce6d\ucc2c\uc744 \ub0a8\uacbc\uc2b5\ub2c8\ub2e4."),void Oe(!1);const e="/kindergarten/".concat(p,"/review").concat(Vt&&Wt?"?sidoCode=".concat(Vt,"&sggCode=").concat(Wt):"");x(e),Oe(!1)},disabled:!!De,className:"w-full px-4 py-2 text-[#fb8678] rounded-xl shadow-lg border border-[#fb8678]/20 hover:bg-[#fb8678]/10 transition-all duration-300 whitespace-nowrap font-semibold ".concat(De?"text-gray-400 border-gray-200 cursor-not-allowed !bg-white":""),children:De?"\uc774\ubbf8 \uce6d\ucc2c \ub0a8\uacbc\uc2b5\ub2c8\ub2e4":"\uce6d\ucc2c \ub0a8\uae30\uae30"})}),"teacher"!==wt&&(0,Ee.jsx)("button",{onClick:()=>Oe(!Re),className:"fixed bottom-24 right-4 w-14 h-14 text-white rounded-full shadow-lg transition-all duration-200 flex items-center justify-center z-40 ".concat(Re?"bg-gray-500 hover:bg-gray-600":"bg-[#fb8678] hover:bg-[#fb8678]/90"),children:(0,Ee.jsx)("svg",{className:"w-6 h-6 transition-transform duration-200 ".concat(Re?"rotate-45":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]})]}),He&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-4 max-w-lg w-full min-h-[500px] max-h-[95vh] flex flex-col",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ee.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"\uce6d\ucc2c \uc2e0\uace0"}),(0,Ee.jsx)("button",{onClick:()=>Ye(!1),className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-6 h-6 text-gray-500"})})]}),(0,Ee.jsxs)("div",{className:"flex-1 overflow-y-auto mb-6",children:[(0,Ee.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"\uc120\ud0dd\ud55c \uce6d\ucc2c\uc744 \uc2e0\uace0\ud569\ub2c8\ub2e4."}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc720\ud615"}),(0,Ee.jsxs)("select",{value:$e,onChange:e=>Ze(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent",children:[(0,Ee.jsx)("option",{value:"spam",children:"\uc2a4\ud338/\uad11\uace0\uc131 \uac8c\uc2dc\uae00"}),(0,Ee.jsx)("option",{value:"inappropriate",children:"\ubd80\uc801\uc808\ud55c \ub0b4\uc6a9"}),(0,Ee.jsx)("option",{value:"harassment",children:"\uad34\ub86d\ud798/\ud3ed\ub825"}),(0,Ee.jsx)("option",{value:"other",children:"\uae30\ud0c0"})]})]}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc0ac\uc720"}),(0,Ee.jsx)("textarea",{value:Ge,onChange:e=>Xe(e.target.value),placeholder:"\uc2e0\uace0 \uc0ac\uc720\ub97c \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694...",rows:6,maxLength:500,className:"w-full px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent resize-none text-sm"}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 font-semibold mt-1",children:[(0,Ee.jsx)("span",{children:"\ucd5c\ub300 \ud14d\uc2a4\ud2b8 \uae38\uc774"}),(0,Ee.jsxs)("span",{children:[Ge.length,"/500"]})]})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3 flex-shrink-0",children:[(0,Ee.jsx)("button",{onClick:()=>Ye(!1),className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(at&&yt)try{et(!0);const{data:e}=await Se.supabase.from("reports").select("id").eq("reporter_id",yt).eq("facility_type","kindergarten").eq("facility_code",p||"").eq("target_type","kindergarten_review").eq("target_id",at.reviewId).maybeSingle();if(e)return alert("\uc774\ubbf8 \uc2e0\uace0\ud55c \uce6d\ucc2c\uc785\ub2c8\ub2e4."),Ye(!1),it(null),void Nt(null);const t={facility_address:(null===b||void 0===b?void 0:b.address)||null},{error:n}=await Se.supabase.from("reports").insert({reporter_id:yt,report_reason:Ge.trim(),report_type:$e,status:"pending",target_type:"kindergarten_review",target_id:at.reviewId,facility_type:"kindergarten",facility_code:p||null,facility_name:(null===b||void 0===b?void 0:b.name)||null,admin_notes:JSON.stringify(t)});if(n){if("23505"===n.code)return alert("\uc774\ubbf8 \uc2e0\uace0\ud55c \uce6d\ucc2c\uc785\ub2c8\ub2e4."),Ye(!1),it(null),void Nt(null);throw n}Ye(!1),it(null),Xe(""),Ze("spam"),Nt(null),alert("\uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(N){"23505"===(null===N||void 0===N?void 0:N.code)?(alert("\uc774\ubbf8 \uc2e0\uace0\ud55c \uce6d\ucc2c\uae00\uc785\ub2c8\ub2e4."),Ye(!1),it(null),Nt(null),Xe(""),Ze("spam")):(console.error("\ub9ac\ubdf0 \uc2e0\uace0 \uc624\ub958:",N),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."))}finally{et(!1)}else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")},disabled:Qe||!Ge.trim(),className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:Qe?"\uc2e0\uace0 \uc911...":"\uc2e0\uace0\ud558\uae30"})]})]})}),ue&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-4 max-w-lg w-full min-h-[500px] max-h-[95vh] flex flex-col",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ee.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:we?"\uae09\uc2dd\uc0ac\uc9c4 \uc2e0\uace0":ye?"\uac74\ubb3c\uc0ac\uc9c4 \uc2e0\uace0":"\uc0ac\uc9c4 \uc2e0\uace0"}),(0,Ee.jsx)("button",{onClick:()=>{he(!1),fe(""),pe("wrong_purpose"),be(!1),je(!1)},className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-6 h-6 text-gray-500"})})]}),(0,Ee.jsxs)("div",{className:"flex-1 overflow-y-auto mb-6",children:[(0,Ee.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:we?"\uc774 \uae09\uc2dd\uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774\ub098 \uc0ac\uc9c4\uc774 \ub2e4\ub974\uac70\ub098 \ubd80\uc801\uc808\ud55c \uacbd\uc6b0 \uc2e0\uace0\ud574\uc8fc\uc138\uc694. \uad00\ub9ac\uc790\uac00 \ud655\uc778 \ud6c4 \uc870\uce58\ud558\uaca0\uc2b5\ub2c8\ub2e4.":ye?"\uc774 \uac74\ubb3c\uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774\ub098 \uc0ac\uc9c4\uc774 \ub2e4\ub974\uac70\ub098 \ubd80\uc801\uc808\ud55c \uacbd\uc6b0 \uc2e0\uace0\ud574\uc8fc\uc138\uc694. \uad00\ub9ac\uc790\uac00 \ud655\uc778 \ud6c4 \uc870\uce58\ud558\uaca0\uc2b5\ub2c8\ub2e4.":"\uc120\ud0dd\ud55c \uc0ac\uc9c4\uc744 \uc2e0\uace0\ud569\ub2c8\ub2e4."}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc720\ud615"}),(0,Ee.jsx)("select",{value:ge,onChange:e=>pe(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent",children:(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("option",{value:"wrong_purpose",children:"\uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774 \ub2e4\ub984"}),(0,Ee.jsx)("option",{value:"wrong_image",children:"\uc0ac\uc9c4\uc774 \ub2e4\ub984"}),(0,Ee.jsx)("option",{value:"inappropriate",children:"\ubd80\uc801\uc808\ud55c \ub0b4\uc6a9"}),(0,Ee.jsx)("option",{value:"other",children:"\uae30\ud0c0"})]})})]}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc0ac\uc720"}),(0,Ee.jsx)("textarea",{value:me,onChange:e=>fe(e.target.value),placeholder:we?"\uae09\uc2dd\uc0ac\uc9c4\uc774 \uc65c \ubd80\uc801\uc808\ud55c\uc9c0 \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694. \uc608: \uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774 \ub2e4\ub974\uac70\ub098, \uc798\ubabb\ub41c \uc0ac\uc9c4\uc774 \uc62c\ub77c\uc654\uc2b5\ub2c8\ub2e4...":ye?"\uac74\ubb3c\uc0ac\uc9c4\uc774 \uc65c \ubd80\uc801\uc808\ud55c\uc9c0 \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694. \uc608: \uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774 \ub2e4\ub974\uac70\ub098, \uc798\ubabb\ub41c \uc0ac\uc9c4\uc774 \uc62c\ub77c\uc654\uc2b5\ub2c8\ub2e4...":"\uc0ac\uc9c4\uc774 \uc65c \ubd80\uc801\uc808\ud55c\uc9c0 \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694. \uc608: \uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774 \ub2e4\ub974\uac70\ub098, \uc798\ubabb\ub41c \uc0ac\uc9c4\uc774 \uc62c\ub77c\uc654\uc2b5\ub2c8\ub2e4...",rows:6,maxLength:500,className:"w-full px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent resize-none text-sm"}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 font-semibold mt-1",children:[(0,Ee.jsx)("span",{children:"\ucd5c\ub300 \ud14d\uc2a4\ud2b8 \uae38\uc774"}),(0,Ee.jsxs)("span",{children:[me.length,"/500"]})]})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3 flex-shrink-0",children:[(0,Ee.jsx)("button",{onClick:()=>{he(!1),fe(""),pe("wrong_purpose"),be(!1),je(!1)},className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(yt)if(we)try{ve(!0);const e=te[ae]||null,t={reported_image_url:e,facility_address:(null===b||void 0===b?void 0:b.address)||null,report_source:"meal_tab"},{error:n}=await Se.supabase.from("reports").insert({reporter_id:yt,report_reason:me.trim(),report_type:ge,status:"pending",target_type:"meal_image",target_id:null,facility_type:"kindergarten",facility_code:p||null,facility_name:(null===b||void 0===b?void 0:b.name)||null,admin_notes:JSON.stringify(t)});if(n)throw n;he(!1),fe(""),pe("wrong_purpose"),je(!1),alert("\uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(N){console.error("\uae09\uc2dd \uc0ac\uc9c4 \uc2e0\uace0 \uc624\ub958:",N),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{ve(!1)}else if(ye)try{ve(!0);const e=te[ae]||null,t={reported_image_url:e,facility_address:(null===b||void 0===b?void 0:b.address)||null},{error:n}=await Se.supabase.from("reports").insert({reporter_id:yt,report_reason:me.trim(),report_type:ge,status:"pending",target_type:"building_image",target_id:null,facility_type:"kindergarten",facility_code:p||null,facility_name:(null===b||void 0===b?void 0:b.name)||null,admin_notes:JSON.stringify(t)});if(n)throw n;he(!1),fe(""),pe("wrong_purpose"),be(!1),alert("\uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(N){console.error("\uac74\ubb3c\uc0ac\uc9c4 \uc2e0\uace0 \uc624\ub958:",N),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{ve(!1)}else if(oe)try{ve(!0);const e=te[ae]||null,t={reported_image_url:e,facility_address:(null===b||void 0===b?void 0:b.address)||null},{error:n}=await Se.supabase.from("reports").insert({reporter_id:yt,report_reason:me.trim(),report_type:ge,status:"pending",target_type:"kindergarten_review_image",target_id:oe.reviewId,facility_type:"kindergarten",facility_code:p||null,facility_name:(null===b||void 0===b?void 0:b.name)||null,admin_notes:JSON.stringify(t)});if(n)throw n;he(!1),fe(""),pe("wrong_purpose"),de(!1),alert("\uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(N){console.error("\uc774\ubbf8\uc9c0 \uc2e0\uace0 \uc624\ub958:",N),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{ve(!1)}else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")},disabled:xe||!me.trim(),className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:xe?"\uc2e0\uace0 \uc911...":"\uc2e0\uace0\ud558\uae30"})]})]})}),Ke&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[(0,Ee.jsxs)("div",{className:"text-center mb-6",children:[(0,Ee.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ee.jsx)(vl,{className:"w-6 h-6 text-red-600"})}),(0,Ee.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:"\uc0ac\uc6a9\uc790\ub97c \ucc28\ub2e8\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),(0,Ee.jsxs)("div",{className:"text-sm text-gray-600 text-left space-y-2",children:[(0,Ee.jsx)("p",{children:"\u2022 \ucc28\ub2e8\ud558\uba74 \ud574\ub2f9 \uc0ac\uc6a9\uc790\uc758 \uce6d\ucc2c\uc640 \ud65c\ub3d9\uc774 \ub354 \uc774\uc0c1 \ubcf4\uc774\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{children:"\u2022 \uc0c1\ub300\ubc29\uc740 \ud68c\uc6d0\ub2d8\uc758 \uae00\uc744 \uacc4\uc18d \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{children:"\u2022 \uc815\ub9d0 \ucc28\ub2e8\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("button",{onClick:()=>{Je(!1),rt(null)},className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(st)try{nt(!0);const{data:{user:e}}=await Se.supabase.auth.getUser();if(!e)throw new Error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const{error:t}=await Se.supabase.from("blocked_users").insert({blocker_id:e.id,blocked_user_id:st,created_at:(new Date).toISOString()});if(t)throw t;Je(!1),rt(null),Nt(null),alert("\ucc28\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(N){console.error("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958:",N),alert("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{nt(!1)}},disabled:tt,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:tt?"\ucc28\ub2e8 \uc911...":"\ucc28\ub2e8\ud558\uae30"})]})]})}),(0,Ee.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 h-20 flex items-center p-3",children:(0,Ee.jsxs)("div",{className:"flex space-x-3 w-full",children:[(0,Ee.jsx)("button",{onClick:()=>Ct(!0),className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)($l,{className:"w-5 h-5"})}),(0,Ee.jsx)("button",{onClick:async()=>{const e=((null===b||void 0===b?void 0:b.phone)||"").replace(/[^0-9+]/g,"");if(e){try{await navigator.clipboard.writeText(e)}catch(t){}window.location.href="tel:".concat(e)}else alert("\uc804\ud654\ubc88\ud638 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")},className:"flex-1 py-3 px-4 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"\ubb38\uc758\ud558\uae30"}),(0,Ee.jsxs)("button",{onClick:async()=>{if(z)return void alert("API \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud574 \uc784\uc2dc \uc815\ubcf4\ub97c \ud45c\uc2dc \uc911\uc785\ub2c8\ub2e4. \uc2e4\uc81c \ub370\uc774\ud130\uc5d0\uc11c\ub9cc \ucc1c\ud558\uae30\uac00 \uac00\ub2a5\ud569\ub2c8\ub2e4.");const e=!E;P(e);try{A&&p&&(e?(await Tl(A,"kindergarten",String(p),null===b||void 0===b?void 0:b.name,{sidoCode:Vt,sggCode:Wt}),M(!0),setTimeout(()=>M(!1),700)):await Il(A,"kindergarten",String(p)))}catch(yd){P(!e)}},className:"flex-1 py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2 ".concat(E?"bg-red-50 text-red-600 hover:bg-red-100":"bg-[#fb8678] text-white hover:bg-[#fb8678]/90"),children:[(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)(ml,{className:"w-5 h-5 ".concat(E?"fill-current animate-heart-bounce":"")}),I&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("div",{className:"heart-particle left-[-14px] text-red-400",children:"\u2764"}),(0,Ee.jsx)("div",{className:"heart-particle left-0 text-pink-400",style:{animationDelay:"60ms"},children:"\u2764"}),(0,Ee.jsx)("div",{className:"heart-particle left-[14px] text-rose-400",style:{animationDelay:"120ms"},children:"\u2764"})]})]}),(0,Ee.jsx)("span",{children:E?"\ucc1c\uc644\ub8cc":"\ucc1c\ud558\uae30"})]})]})}),(0,Ee.jsx)("div",{className:"h-20"}),X&&(0,Ee.jsxs)("div",{className:"fixed inset-0 bg-white z-50 flex flex-col overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white flex-shrink-0",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ee.jsx)("button",{onClick:()=>$(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Ee.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"\uce6d\ucc2c \uc0ac\uc9c4"})]}),(0,Ee.jsxs)("div",{className:"text-sm text-gray-500",children:[Ot.reduce((e,t)=>{var n;return e+((null===(n=t.images)||void 0===n?void 0:n.length)||0)},0),"\uc7a5"]})]}),(0,Ee.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto",children:[(0,Ee.jsx)("div",{className:"grid grid-cols-3 gap-3",children:Ot.map((e,t)=>{var n;return null===(n=e.images)||void 0===n?void 0:n.map((n,s)=>{var r,a;const i=Ot.slice(0,Ot.indexOf(e)).reduce((e,t)=>{var n;return e+((null===(n=t.images)||void 0===n?void 0:n.length)||0)},0)+s;return(0,Ee.jsxs)("div",{className:"aspect-square bg-gray-100 rounded-lg relative overflow-hidden group cursor-zoom-in",onClick:()=>{Qt(zt,i,e.id,t)},children:[(0,Ee.jsx)("img",{src:n.image_url,alt:"\uce6d\ucc2c \uc0ac\uc9c4 ".concat(s+1),className:"w-full h-full object-cover"}),(0,Ee.jsxs)("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white text-xs px-1 py-0.5 rounded",children:[e.rating,"\uc810"]}),(0,Ee.jsxs)("div",{className:"absolute bottom-2 left-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,Ee.jsx)("div",{className:"font-medium",children:(null===(r=e.user_profile)||void 0===r?void 0:r.nickname)||(null===(a=e.user_profile)||void 0===a?void 0:a.full_name)||"\uc775\uba85"}),(0,Ee.jsx)("div",{className:"text-[10px] opacity-75",children:new Date(e.created_at).toLocaleDateString()})]})]},"".concat(t,"-").concat(s))})})}),0===Ot.reduce((e,t)=>{var n;return e+((null===(n=t.images)||void 0===n?void 0:n.length)||0)},0)&&(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[(0,Ee.jsx)(Sl,{className:"w-16 h-16 mb-4 text-gray-300"}),(0,Ee.jsx)("p",{className:"text-lg font-medium",children:"\ub4f1\ub85d\ub41c \uc0ac\uc9c4\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,Ee.jsx)("p",{className:"text-sm",children:"\uccab \ubc88\uc9f8 \uce6d\ucc2c \uc0ac\uc9c4\uc744 \uc62c\ub824\ubcf4\uc138\uc694!"})]})]})]}),Z&&(0,Ee.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center touch-pan-y",onWheel:e=>{if(Math.abs(e.deltaX)<=Math.abs(e.deltaY))return;const t=Date.now();t-rn.current<300||(rn.current=t,e.deltaX>0?tn():e.deltaX<0&&en())},onTouchStart:e=>{const t=e.touches[0];nn.current=t.clientX,sn.current=t.clientY},onTouchMove:e=>{null!==nn.current&&sn.current},onTouchEnd:e=>{if(null===nn.current)return;const t=e.changedTouches[0].clientX-nn.current;Math.abs(t)>50&&(t>0?en():tn()),nn.current=null,sn.current=null},onClick:e=>{e.target.closest(".image-viewer-menu-container")||de(!1)},children:[(0,Ee.jsx)("button",{onClick:()=>{Q(!1),de(!1),le(null),je(!1),be(!1)},className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white/10 text-white z-10","aria-label":"\ub2eb\uae30",children:(0,Ee.jsx)(gl,{className:"w-6 h-6"})}),oe?(()=>{const e=Te.find(e=>e.id===oe.reviewId);return e&&xt&&e.user_id===xt?null:(0,Ee.jsxs)("div",{className:"absolute top-4 right-16 image-viewer-menu-container z-10",children:[(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),de(!ce)},className:"p-2 rounded-full hover:bg-white/10 text-white","aria-label":"\uc635\uc158 \uba54\ub274",children:(0,Ee.jsx)(Gc,{className:"w-6 h-6"})}),ce&&(0,Ee.jsx)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),be(!1),pe("wrong_purpose"),fe(""),he(!0),de(!1)},className:"w-full px-4 py-2 text-center text-sm text-red-600 hover:bg-red-50",children:"\uc2e0\uace0\ud558\uae30"})})]})})():(0,Ee.jsxs)("div",{className:"absolute top-4 right-16 image-viewer-menu-container z-10",children:[(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),de(!ce)},className:"p-2 rounded-full hover:bg-white/10 text-white","aria-label":"\uc635\uc158 \uba54\ub274",children:(0,Ee.jsx)(Gc,{className:"w-6 h-6"})}),ce&&(0,Ee.jsx)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),we?(je(!0),be(!1),pe("wrong_purpose")):(be(!0),je(!1),pe("wrong_purpose")),fe(""),he(!0),de(!1)},className:"w-full px-4 py-2 text-center text-sm text-red-600 hover:bg-red-50",children:"\uc2e0\uace0\ud558\uae30"})})]}),te.length>1&&(0,Ee.jsx)("button",{onClick:en,className:"absolute left-2 sm:left-4 p-3 rounded-full hover:bg-white/10 text-white","aria-label":"\uc774\uc804 \uc774\ubbf8\uc9c0",children:(0,Ee.jsx)(ll,{className:"w-7 h-7"})}),(0,Ee.jsxs)("div",{className:"max-w-full max-h-full",children:[(0,Ee.jsx)("img",{src:te[ae],alt:"\uce6d\ucc2c \uc804\uccb4 \uc774\ubbf8\uc9c0",className:"max-w-full max-h-[85vh] object-contain"}),te.length>1&&(0,Ee.jsxs)("div",{className:"mt-3 text-center text-xs text-white/70",children:[ae+1," / ",te.length]})]}),te.length>1&&(0,Ee.jsx)("button",{onClick:tn,className:"absolute right-2 sm:right-4 p-3 rounded-full hover:bg-white/10 text-white","aria-label":"\ub2e4\uc74c \uc774\ubbf8\uc9c0",children:(0,Ee.jsx)(cl,{className:"w-7 h-7"})})]}),ot&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full max-h-[90vh] flex flex-col",children:[(0,Ee.jsxs)("div",{className:"mb-6",children:[(0,Ee.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 text-center",children:"\uce6d\ucc2c \uc0ad\uc81c\uc694\uccad"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 text-center mb-4",children:"\uc0ad\uc81c\uc694\uccad\uc744 \ud558\uc2dc\uba74 \uad00\ub9ac\uc790 \uac80\ud1a0 \ud6c4 \uc0ad\uc81c\ub429\ub2c8\ub2e4."}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uc0ad\uc81c\uc694\uccad \uc0ac\uc720 ",(0,Ee.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ee.jsx)("textarea",{value:ut,onChange:e=>ht(e.target.value),placeholder:"\uc0ad\uc81c\uc694\uccad \uc0ac\uc720\ub97c \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694...",rows:6,maxLength:500,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent resize-none text-sm"}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[(0,Ee.jsx)("span",{children:"\ucd5c\uc18c 10\uc790 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694"}),(0,Ee.jsxs)("span",{className:ut.trim().length<10?"text-red-500":"",children:[ut.length,"/500"]})]})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3 mt-auto",children:[(0,Ee.jsx)("button",{onClick:()=>{lt(!1),dt(null),ht("")},className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(!ct)return;const e=ut.trim();if(e.length<10)alert("\uc0ad\uc81c\uc694\uccad \uc0ac\uc720\ub97c \ucd5c\uc18c 10\uc790 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694.");else if(e.length>500)alert("\uc0ad\uc81c\uc694\uccad \uc0ac\uc720\ub294 \ucd5c\ub300 500\uc790\uae4c\uc9c0 \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.");else try{await async function(e,t){try{const{data:{user:n},error:s}=await Se.supabase.auth.getUser();if(s||!n)throw new Error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const{data:r,error:a}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",n.id).single();if(a||!r)throw new Error("\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const{data:i,error:o}=await Se.supabase.from("kindergarten_reviews").select("id, user_id").eq("id",e).eq("user_id",n.id).single();if(o||!i)throw new Error("\ub9ac\ubdf0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uac70\ub098 \uc0ad\uc81c \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const{data:l}=await Se.supabase.from("review_delete_requests").select("id").eq("review_id",e).eq("review_type","kindergarten").eq("requester_id",r.id).eq("status","pending").maybeSingle();if(l)throw new Error("\uc774\ubbf8 \uc0ad\uc81c\uc694\uccad\uc774 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");const{error:c}=await Se.supabase.from("review_delete_requests").insert({review_id:e,review_type:"kindergarten",requester_id:r.id,status:"pending",request_reason:(null===t||void 0===t?void 0:t.trim())||null});if(c)throw console.error("\uc0ad\uc81c\uc694\uccad \uc0dd\uc131 \uc624\ub958:",c),c}catch(N){throw console.error("\uc0ad\uc81c\uc694\uccad \uc0dd\uc131 \uc2e4\ud328:",N),N}}(ct,e),lt(!1),ht(""),pt(e=>new Set(e).add(ct)),dt(null),Nt(null),alert("\uc0ad\uc81c\uc694\uccad\uc774 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790 \uc2b9\uc778 \ud6c4 \uc0ad\uc81c\ub429\ub2c8\ub2e4.")}catch(N){console.error("\uc0ad\uc81c\uc694\uccad \uc2e4\ud328:",N),alert((null===N||void 0===N?void 0:N.message)||"\uc0ad\uc81c\uc694\uccad \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},disabled:ut.trim().length<10||ut.trim().length>500,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"\uc0ad\uc81c\uc694\uccad"})]})]})}),kt&&(0,Ee.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>Ct(!1)}),(0,Ee.jsx)("div",{className:"absolute left-0 right-0 bottom-0 bg-white rounded-t-2xl shadow-xl border-t border-gray-200 p-4 will-change-transform ".concat(Tt?"transition-none":"transition-transform duration-200"),style:{transform:"translate3d(0, ".concat(Pt,"px, 0)")},onTouchMove:e=>{if(!Tt||null===St)return;const t=e.touches[0].clientY-St;t>0&&At(t)},onTouchEnd:()=>{if(!Tt)return;if(Pt>100)return It(!1),void requestAnimationFrame(()=>{Ct(!1),At(0),Et(null)});It(!1),requestAnimationFrame(()=>{At(0),Et(null)})},children:(0,Ee.jsxs)("div",{className:"animate-[sheetSlideUp_0.28s_cubic-bezier(0.22,0.61,0.36,1)]",children:[(0,Ee.jsx)("div",{className:"w-full flex justify-center py-2 mb-1",onTouchStart:e=>{const t=e.touches[0];It(!0),Et(t.clientY),At(0)},children:(0,Ee.jsx)("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),(0,Ee.jsxs)("div",{className:"mb-2",children:[(0,Ee.jsx)("div",{className:"text-base font-semibold text-black pl-1 pb-1",children:"\ub9c1\ud06c \uacf5\uc720"}),(0,Ee.jsx)("div",{className:"mt-1 text-xs text-gray-600 break-all bg-gray-50 rounded-lg px-3 py-2 border border-gray-100",children:"".concat(window.location.origin).concat(y.pathname).concat(y.search)})]}),(0,Ee.jsxs)("div",{className:"flex gap-3 py-2 overflow-x-auto scrollbar-hide",children:[(0,Ee.jsxs)("button",{onClick:async()=>{const e=window.Kakao,t="".concat(window.location.origin).concat(y.pathname).concat(y.search),n="".concat((null===b||void 0===b?void 0:b.name)||"\uc720\uce58\uc6d0"," \uc815\ubcf4");try{var s;if(null!==e&&void 0!==e&&null!==(s=e.isInitialized)&&void 0!==s&&s.call(e)&&null!==e&&void 0!==e&&e.Share)return await e.Share.sendDefault({objectType:"feed",content:{title:n,description:"\ub9d8\ud53d \uc720\uce58\uc6d0 \uc0c1\uc138\uc815\ubcf4",imageUrl:"".concat(window.location.origin,"/headericon.png"),link:{mobileWebUrl:t,webUrl:t}}}),void Ct(!1)}catch(r){}await on(),Ct(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-yellow-300 flex items-center justify-center text-black font-bold",children:"\uce74"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\uce74\uce74\uc624\ud1a1"})]}),(0,Ee.jsxs)("button",{onClick:()=>{const e="\ub9d8\ud53d \xb7 ".concat((null===b||void 0===b?void 0:b.name)||"\uc720\uce58\uc6d0"," \uc815\ubcf4 \uacf5\uc720"),t="".concat(window.location.origin).concat(y.pathname).concat(y.search),n="".concat((null===b||void 0===b?void 0:b.name)||"\uc720\uce58\uc6d0"," \uc815\ubcf4\ub97c \uacf5\uc720\ud569\ub2c8\ub2e4.\n\n").concat(t);window.location.href="mailto:?subject=".concat(encodeURIComponent(e),"&body=").concat(encodeURIComponent(n)),Ct(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-red-500 text-white flex items-center justify-center font-bold",children:"G"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"Gmail"})]}),(0,Ee.jsxs)("button",{onClick:()=>{const e="".concat(window.location.origin).concat(y.pathname).concat(y.search),t="".concat((null===b||void 0===b?void 0:b.name)||"\uc720\uce58\uc6d0"," \uc815\ubcf4\ub97c \uacf5\uc720\ud569\ub2c8\ub2e4."),n="https://band.us/plugin/share?body=".concat(encodeURIComponent(t+"\n"+e),"&route=").concat(encodeURIComponent(e));window.open(n,"_blank"),Ct(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-green-500 text-white flex items-center justify-center font-bold",children:"B"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"BAND"})]}),(0,Ee.jsxs)("button",{onClick:()=>{const e="".concat(window.location.origin).concat(y.pathname).concat(y.search),t="".concat((null===b||void 0===b?void 0:b.name)||"\uc720\uce58\uc6d0"," \uc815\ubcf4\ub97c \uacf5\uc720\ud569\ub2c8\ub2e4.\n\n").concat(e);window.location.href="sms:?body=".concat(encodeURIComponent(t)),Ct(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-blue-500 text-white flex items-center justify-center text-[11px] font-bold",children:"SMS"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\ubb38\uc790"})]}),(0,Ee.jsxs)("button",{onClick:async()=>{const e="".concat(window.location.origin).concat(y.pathname).concat(y.search);try{await navigator.clipboard.writeText(e),alert("\uacf5\uc720 \ub9c1\ud06c\uac00 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(t){const n=document.createElement("input");n.value=e,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),alert("\uacf5\uc720 \ub9c1\ud06c\uac00 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}Ct(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-gray-800 text-white flex items-center justify-center font-bold",children:"\ud83d\udd17"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\ub9c1\ud06c\ubcf5\uc0ac"})]}),(0,Ee.jsxs)("button",{onClick:async()=>{await on(),Ct(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-gray-200 text-gray-800 flex items-center justify-center text-lg font-bold",children:"\u22ef"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\ub354\ubcf4\uae30"})]})]})]})})]}),ke&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsx)("div",{className:"bg-white rounded-2xl max-w-sm w-full mx-4 animate-[modalSlideUp_0.3s_cubic-bezier(0.22,0.61,0.36,1)]",children:(0,Ee.jsxs)("div",{className:"p-6",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ee.jsxs)("div",{className:"flex items-center",children:[(0,Ee.jsx)("div",{className:"w-10 h-10 bg-[#fb8678]/10 rounded-full flex items-center justify-center mr-3",children:(0,Ee.jsx)(Wc,{className:"w-5 h-5 text-[#fb8678]"})}),(0,Ee.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\uc815\ubcf4 \ucd9c\ucc98"})]}),(0,Ee.jsx)("button",{onClick:()=>Pe(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,Ee.jsx)(gl,{className:"w-5 h-5 text-gray-500"})})]}),(0,Ee.jsxs)("div",{className:"space-y-4",children:[(0,Ee.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,Ee.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Ee.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mr-2",children:(0,Ee.jsx)("span",{className:"text-white text-xs font-bold",children:"i"})}),(0,Ee.jsx)("span",{className:"text-sm font-semibold text-blue-800",children:"\uc720\uce58\uc6d0\uc54c\ub9ac\ubbf8"})]}),(0,Ee.jsxs)("p",{className:"text-xs text-blue-700 leading-relaxed mb-3",children:["\uc774 \uc720\uce58\uc6d0 \uc815\ubcf4\ub294 ",(0,Ee.jsx)("strong",{children:"\uc720\uce58\uc6d0\uc54c\ub9ac\ubbf8"}),"\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uacf5\uc2dd API\ub97c \ud1b5\ud574 \uc218\uc9d1\ub41c \ub370\uc774\ud130\uc785\ub2c8\ub2e4."]}),(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-xs font-medium text-blue-900",children:"\uc815\ud655\ud55c \uc815\ubcf4"}),(0,Ee.jsx)("p",{className:"text-[10px] text-blue-600",children:"\uad50\uc721\ubd80\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uacf5\uc2dd \ub370\uc774\ud130"})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-xs font-medium text-blue-900",children:"\uc2e4\uc2dc\uac04 \uc5c5\ub370\uc774\ud2b8"}),(0,Ee.jsx)("p",{className:"text-[10px] text-blue-600",children:"\uc815\uae30\uc801\uc73c\ub85c \ucd5c\uc2e0 \uc815\ubcf4\ub85c \uac31\uc2e0"})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-xs font-medium text-blue-900",children:"\uc2e0\ub8b0\ud560 \uc218 \uc788\ub294 \ucd9c\ucc98"}),(0,Ee.jsx)("p",{className:"text-[10px] text-blue-600",children:"\uc815\ubd80\uae30\uad00\uc5d0\uc11c \uac80\uc99d\ub41c \uc815\ubcf4"})]})]})]}),(0,Ee.jsx)("div",{className:"bg-gray-50 rounded-xl p-4",children:(0,Ee.jsxs)("p",{className:"text-xs text-gray-600 text-center",children:["\ub354 \uc790\uc138\ud55c \uc815\ubcf4\ub294 ",(0,Ee.jsx)("strong",{children:"\uc720\uce58\uc6d0\uc54c\ub9ac\ubbf8"})," \uacf5\uc2dd \uc0ac\uc774\ud2b8\uc5d0\uc11c \ud655\uc778\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]})})]}),(0,Ee.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,Ee.jsx)("button",{onClick:()=>Pe(!1),className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:"\ud655\uc778"}),(0,Ee.jsx)("button",{onClick:()=>{window.open("https://e-childschoolinfo.moe.go.kr/main.do","_blank"),Pe(!1)},className:"flex-1 px-4 py-3 bg-[#fb8678] text-white rounded-xl font-medium hover:bg-[#e67567] transition-colors",children:"\uc0ac\uc774\ud2b8 \ubc29\ubb38"})]})]})})})]})};const sd=new Map,rd=new Map,ad=async(e,t,s)=>{if(sd.has(e))return await sd.get(e);const r=(async()=>{try{null!==s&&void 0!==s&&s.silent||console.log("\ud83c\udfe2 \uc5b4\ub9b0\uc774\uc9d1 \uc0c1\uc138\uc815\ubcf4 \ub85c\ub529:",{stcode:e,arcode:t});const{childcareDetailCacheManager:o}=await n.e(878).then(n.bind(n,878)),l=await o.getCachedDetail(e);if(l){if(null===s||void 0===s||!s.silent){const t=rd.get(e)||0,n=Date.now();n-t>1e3&&(console.log("\u26a1 \uce90\uc2dc \uc0c1\uc138 \uc0ac\uc6a9 (\uc5b4\ub9b0\uc774\uc9d1):",e),rd.set(e,n))}return l}if(null!==s&&void 0!==s&&s.cacheOnly)return null;const c=await(async(e,t,s)=>{try{const{supabase:a}=await Promise.resolve().then(n.bind(n,801));null!==s&&void 0!==s&&s.silent||console.log("\ud83d\udce4 \uc5b4\ub9b0\uc774\uc9d1 Edge Function \ud638\ucd9c \uc2dc\uc791");try{const{data:n,error:r}=await a.functions.invoke("childcare-detail",{body:(0,Ae.A)({stcode:e},t?{arcode:t}:{})});if(null!==s&&void 0!==s&&s.silent||console.log("\ud83d\udcca \uc5b4\ub9b0\uc774\uc9d1 invoke \uc751\ub2f5:",{data:n,error:r}),r)throw null!==s&&void 0!==s&&s.silent||console.error("\u274c \uc5b4\ub9b0\uc774\uc9d1 invoke \uc624\ub958:",r),new Error("Edge Function \uc624\ub958: ".concat(r.message));if(!n)throw new Error("Edge Function \uc751\ub2f5\uc774 \ube44\uc5b4\uc788\uc2b5\ub2c8\ub2e4");if(!0!==n.success)throw null!==s&&void 0!==s&&s.silent||console.error("\u274c \uc5b4\ub9b0\uc774\uc9d1 Edge Function \uc2e4\ud328 \uc751\ub2f5:",n),new Error(n.error||"Edge Function \uc2e4\ud589 \uc2e4\ud328");if(!n.data)throw new Error("Edge Function \uc751\ub2f5\uc5d0 \ub370\uc774\ud130\uac00 \uc5c6\uc2b5\ub2c8\ub2e4");return null!==s&&void 0!==s&&s.silent||console.log("\u2705 \uc5b4\ub9b0\uc774\uc9d1 Edge Function \uc751\ub2f5 \uc131\uacf5 (invoke)"),n.data}catch(r){null!==s&&void 0!==s&&s.silent||console.warn("\u26a0\ufe0f \uc5b4\ub9b0\uc774\uc9d1 invoke \uc2e4\ud328, \uc9c1\uc811 \ud638\ucd9c \uc7ac\uc2dc\ub3c4:",r);const n="https://fxkftrczarwuytnufprv.supabase.co",a="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4a2Z0cmN6YXJ3dXl0bnVmcHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODM5NzgsImV4cCI6MjA3MTY1OTk3OH0.L0zzO_KooHRwJdf6z92Cla05pSH8UF7PRGVDK8lS3Ns";if(!n||!a)throw new Error("Supabase \ud658\uacbd \ubcc0\uc218\uac00 \uc124\uc815\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4");const i="".concat(n,"/functions/v1/childcare-detail");null!==s&&void 0!==s&&s.silent||console.log("\ud83d\udce1 \uc5b4\ub9b0\uc774\uc9d1 \uc9c1\uc811 \ud638\ucd9c URL:",i);const o=(0,Ae.A)({stcode:e},t?{arcode:t}:{});null!==s&&void 0!==s&&s.silent||(console.log("\ud83d\udce4 \uc5b4\ub9b0\uc774\uc9d1 \uc9c1\uc811 \ud638\ucd9c \uc694\uccad \ub370\uc774\ud130:",JSON.stringify(o,null,2)),console.log("\ud83d\udd0d stcode \uac12 \uac80\uc99d:",{stcode:e,type:typeof e,length:null===e||void 0===e?void 0:e.length,isEmpty:!e||""===e.trim(),arcode:t,arcodeType:typeof t}));const l=await fetch(i,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a),apikey:a},body:JSON.stringify(o)});if(null!==s&&void 0!==s&&s.silent||console.log("\ud83d\udcca \uc5b4\ub9b0\uc774\uc9d1 \uc9c1\uc811 \ud638\ucd9c \uc751\ub2f5 \uc0c1\ud0dc:",l.status,l.statusText),!l.ok){const e=await l.text();throw null!==s&&void 0!==s&&s.silent||console.error("\u274c \uc5b4\ub9b0\uc774\uc9d1 \uc9c1\uc811 \ud638\ucd9c \uc2e4\ud328:",e),new Error("\uc9c1\uc811 \ud638\ucd9c \uc2e4\ud328: ".concat(l.status," ").concat(l.statusText," - ").concat(e))}const c=await l.json();if(!c.success)throw new Error(c.error||"\uc5b4\ub9b0\uc774\uc9d1 API \ud638\ucd9c \uc2e4\ud328");return null!==s&&void 0!==s&&s.silent||console.log("\u2705 \uc5b4\ub9b0\uc774\uc9d1 Edge Function \uc751\ub2f5 \uc131\uacf5 (\uc9c1\uc811 \ud638\ucd9c)"),c.data}}catch(a){throw null!==s&&void 0!==s&&s.silent||console.error("\u274c \uc5b4\ub9b0\uc774\uc9d1 Edge Function \ud638\ucd9c \uc2e4\ud328:",a),a}})(e,t,s);if((()=>{try{var e;const t="undefined"!==typeof window?window.location.hostname:"";if("localhost"===t||"127.0.0.1"===t||"::1"===t)return!0;const n=new URLSearchParams(window.location.search);if("1"===n.get("debug")||"true"===n.get("debug"))return!0;if("undefined"!==typeof window&&"true"===(null===(e=window.localStorage)||void 0===e?void 0:e.getItem("DEBUG_CHILDCARE")))return!0}catch(t){}return"undefined"!==typeof process&&{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_CHILDCARE_API_KEY:"0e5ed5cfc4c24c2fa8e2cd14558a1688",REACT_APP_CHILDCARE_DETAIL_API_KEY:"f0b9445663684ec5a0fdbce85aa799ff",REACT_APP_CHILDCARE_SEARCH_API_KEY:"123efade8fc94516a2bbb109bb4d3fc5",REACT_APP_KAKAO_MAP_KEY:"270c11461f58d9b67430ed591295dd49",REACT_APP_KAKAO_REST_KEY:"5f0dbbbe9e62053d846a67003eadab91",REACT_APP_KINDERGARTEN_API_KEY:"c5aef787ac5a4473a74264b4b5bfce74",REACT_APP_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZ4a2Z0cmN6YXJ3dXl0bnVmcHJ2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYwODM5NzgsImV4cCI6MjA3MTY1OTk3OH0.L0zzO_KooHRwJdf6z92Cla05pSH8UF7PRGVDK8lS3Ns",REACT_APP_SUPABASE_URL:"https://fxkftrczarwuytnufprv.supabase.co"}&&!1})())try{console.log("\ud83e\udde9 \uc5b4\ub9b0\uc774\uc9d1 API \uc6d0\ubcf8 \uc751\ub2f5(rawData):",JSON.parse(JSON.stringify(c)))}catch(r){console.log("\ud83e\udde9 \uc5b4\ub9b0\uc774\uc9d1 API \uc6d0\ubcf8 \uc751\ub2f5(rawData):",c)}const d={};try{Object.keys(c||{}).forEach(e=>{d[e.toLowerCase()]=c[e]})}catch(a){}const u=function(e){const t=e.toLowerCase();if(d&&Object.prototype.hasOwnProperty.call(d,t))return d[t];for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];for(const a of s){const e=a.toLowerCase();if(d&&Object.prototype.hasOwnProperty.call(d,e))return d[e]}},h=e=>{if(null===e||void 0===e)return 0;const t=String(e).trim().replace(/,/g,"");if(""===t||"null"===t.toLowerCase())return 0;const n=parseFloat(t);return isFinite(n)?n:0},m=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(null===e||void 0===e)return t;const n=String(e).trim();return""===n?t:n},f=e=>{if(!e)return"";let t=e.trim();return t=t.replace(/^http;\/\//i,"http://").replace(/^https;\/\//i,"https://"),t=t.replace(/^http;\/\//i,"http://").replace(/^https;\/\//i,"https://"),/^https?:\/\//i.test(t)||(t="https://"+t.replace(/^\/*/,"")),t},g=[h(u("class_cnt_00")),h(u("class_cnt_01")),h(u("class_cnt_02")),h(u("class_cnt_03")),h(u("class_cnt_04")),h(u("class_cnt_05")),h(u("class_cnt_m2")),h(u("class_cnt_m5")),h(u("class_cnt_sp"))].reduce((e,t)=>e+t,0),p=[h(u("child_cnt_00")),h(u("child_cnt_01")),h(u("child_cnt_02")),h(u("child_cnt_03")),h(u("child_cnt_04")),h(u("child_cnt_05")),h(u("child_cnt_m2")),h(u("child_cnt_m5")),h(u("child_cnt_sp"))].reduce((e,t)=>e+t,0),x=[h(u("ew_cnt_00")),h(u("ew_cnt_01")),h(u("ew_cnt_02")),h(u("ew_cnt_03")),h(u("ew_cnt_04")),h(u("ew_cnt_05")),h(u("ew_cnt_m6"))].reduce((e,t)=>e+t,0),v={director:h(u("em_cnt_a1")),teacher:h(u("em_cnt_a2")),specialTeacher:h(u("em_cnt_a3")),therapist:h(u("em_cnt_a4")),nutritionist:h(u("em_cnt_a5")),nurse:h(u("em_cnt_a6")),nurseAssistant:h(u("em_cnt_a10")),cook:h(u("em_cnt_a7")),clerk:h(u("em_cnt_a8"))},y=Object.values(v).reduce((e,t)=>e+t,0),b={code:m(u("stcode"),e),name:m(u("crname"),"\uc5b4\ub9b0\uc774\uc9d1 (".concat(e,")")),type:m(u("crtypename"),"\ubbfc\uac04"),status:m(u("crstatusname"),"\uc815\uc0c1"),address:m(u("craddr"),"\uc815\ubcf4 \uc5c6\uc74c"),phone:m(u("crtelno"),"\uc815\ubcf4 \uc5c6\uc74c"),homepage:f(m(u("crhome"),"")),capacity:h(u("crcapat")),enrolled:h(u("crchcnt")),teacherCount:h(u("chcrtescnt")),classCount:h(u("class_cnt_tot"))||g,cctvCount:h(u("cctvinstlcnt")),establishedDate:m(u("crcnfmdt"),""),services:m(u("crspec"),"\uc77c\ubc18\ubcf4\uc721"),director:m(u("crrepname"),"\uc815\ubcf4 \uc5c6\uc74c"),fax:m(u("crfaxno"),""),region:{sidoName:m(u("sidoname"),""),sggName:m(u("sigunguname","sigunname"),""),zipcode:m(u("zipcode"),"")},dataStandardDate:m(u("datastdrdt"),""),pauseBeginDate:m(u("crpausebegindt"),""),pauseEndDate:m(u("crpauseenddt"),""),abolishDate:m(u("crabldt"),""),facility:{roomCount:h(u("nrtrroomcnt")),roomSize:h(u("nrtrroomsize")),playgroundCount:h(u("plgrdco")),cctvCount:h(u("cctvinstlcnt"))},staff:(0,Ae.A)((0,Ae.A)({},v),{},{total:h(u("em_cnt_tot"))||y||h(u("chcrtescnt"))}),experience:{under1Year:h(u("em_cnt_0y")),year1To2:h(u("em_cnt_1y")),year2To4:h(u("em_cnt_2y")),year4To6:h(u("em_cnt_4y")),over6Years:h(u("em_cnt_6y"))},classes:{age0:h(u("class_cnt_00")),age1:h(u("class_cnt_01")),age2:h(u("class_cnt_02")),age3:h(u("class_cnt_03")),age4:h(u("class_cnt_04")),age5:h(u("class_cnt_05")),mixed0To2:h(u("class_cnt_m2")),mixed3To5:h(u("class_cnt_m5")),special:h(u("class_cnt_sp")),total:h(u("class_cnt_tot"))||g},children:{age0:h(u("child_cnt_00")),age1:h(u("child_cnt_01")),age2:h(u("child_cnt_02")),age3:h(u("child_cnt_03")),age4:h(u("child_cnt_04")),age5:h(u("child_cnt_05")),mixed0To2:h(u("child_cnt_m2")),mixed3To5:h(u("child_cnt_m5")),special:h(u("child_cnt_sp")),total:h(u("child_cnt_tot"))||p},waitingList:{age0:h(u("ew_cnt_00")),age1:h(u("ew_cnt_01")),age2:h(u("ew_cnt_02")),age3:h(u("ew_cnt_03")),age4:h(u("ew_cnt_04")),age5:h(u("ew_cnt_05")),over6:h(u("ew_cnt_m6")),total:h(u("ew_cnt_tot"))||x},transportation:{available:"\uc6b4\uc601"===m(u("crcargbname")),status:m(u("crcargbname"),"\uc815\ubcf4 \uc5c6\uc74c")},location:{lat:h(u("la")),lng:h(u("lo"))}};null!==s&&void 0!==s&&s.silent||console.log("\u2705 \uc5b4\ub9b0\uc774\uc9d1 \uc0c1\uc138\uc815\ubcf4 \uc870\ud68c \uc644\ub8cc:",b.name);try{o.saveDetailCache(e,b)}catch(i){}return b}catch(o){return null!==s&&void 0!==s&&s.silent||console.error("\u274c \uc5b4\ub9b0\uc774\uc9d1 \uc0c1\uc138\uc815\ubcf4 \uc870\ud68c \uc2e4\ud328:",o),null!==s&&void 0!==s&&s.silent?null:id(e)}})();sd.set(e,r);try{return await r}finally{sd.delete(e)}},id=e=>({code:e,name:"\uc0d8\ud50c \uc5b4\ub9b0\uc774\uc9d1 (".concat(e,")"),type:"\ubbfc\uac04",status:"\uc815\uc0c1",address:"\uc815\ubcf4\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4",phone:"\uc815\ubcf4 \uc5c6\uc74c",homepage:"",capacity:50,enrolled:45,teacherCount:8,classCount:6,cctvCount:12,establishedDate:"20100301",services:"\uc77c\ubc18\ubcf4\uc721, \uc5f0\uc7a5\ubcf4\uc721",director:"\uc815\ubcf4 \uc5c6\uc74c",facility:{roomCount:6,roomSize:180,playgroundCount:1,cctvCount:12},staff:{director:1,teacher:6,specialTeacher:0,therapist:0,nutritionist:1,nurse:0,nurseAssistant:0,cook:1,clerk:0,total:9},experience:{under1Year:2,year1To2:2,year2To4:3,year4To6:1,over6Years:1},classes:{age0:1,age1:1,age2:1,age3:1,age4:1,age5:1,mixed0To2:0,mixed3To5:0,special:0,total:6},children:{age0:8,age1:8,age2:8,age3:8,age4:7,age5:6,mixed0To2:0,mixed3To5:0,special:0,total:45},waitingList:{age0:3,age1:5,age2:4,age3:2,age4:1,age5:0,over6:0,total:15},transportation:{available:!0,status:"\uc6b4\uc601"},location:{lat:37.5665,lng:126.978}}),od=()=>{var e;const{stcode:t}=se(),s=ne(),[a]=Ce(),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)(!0),[d,u]=(0,r.useState)(null),[h,m]=(0,r.useState)(null),[f,g]=(0,r.useState)([]),[p,x]=(0,r.useState)(null),[v,y]=(0,r.useState)("detail"),[b,w]=(0,r.useState)([]),[j,_]=(0,r.useState)(!1),[N,k]=(0,r.useState)(null),[C,S]=(0,r.useState)(1),[E,P]=(0,r.useState)(!1),[A,T]=(0,r.useState)(new Set),[I,M]=(0,r.useState)(new Set),[L,R]=(0,r.useState)(null),[O,D]=(0,r.useState)(!1),[z,U]=(0,r.useState)(null),[F,q]=(0,r.useState)(""),[B,V]=(0,r.useState)(!1),[W,H]=(0,r.useState)(!1),[Y,K]=(0,r.useState)(""),[J,G]=(0,r.useState)("spam"),[X,$]=(0,r.useState)(!1),[Z,Q]=(0,r.useState)(!1),[ee,te]=(0,r.useState)(null),[re,ae]=(0,r.useState)(null),[ie,oe]=(0,r.useState)(null),[le,ce]=(0,r.useState)(!1),[de,ue]=(0,r.useState)(null),[he,me]=(0,r.useState)(!1),[fe,ge]=(0,r.useState)(!1),[pe,xe]=(0,r.useState)(null),[ve,ye]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{try{const{data:{user:e}}=await Se.supabase.auth.getUser();if(e){xe(e.id);const{data:n}=await Se.supabase.from("profiles").select("user_type").eq("auth_user_id",e.id).maybeSingle();if(n&&ye(n.user_type),t){const n=await Ml(e.id,"childcare",String(t));ce(n)}}}catch(e){}})()},[]);const[be,we]=(0,r.useState)(0),[je,_e]=(0,r.useState)(!1),[Ne,ke]=(0,r.useState)(!1),[Pe,Te]=(0,r.useState)(!1),[Ie,Me]=(0,r.useState)(!1),[Le,Re]=(0,r.useState)(!1),[Oe,De]=(0,r.useState)(!1),[ze,Ue]=(0,r.useState)([]),[Fe,qe]=(0,r.useState)(0),[Be,Ve]=(0,r.useState)(null),[We,He]=(0,r.useState)(!1),[Ye,Ke]=(0,r.useState)(!1),[Je,Ge]=(0,r.useState)(""),[Xe,$e]=(0,r.useState)("wrong_purpose"),[Ze,Qe]=(0,r.useState)(!1),[et,tt]=(0,r.useState)(!1),[nt,st]=(0,r.useState)(!1),[rt,at]=(0,r.useState)(0),[it,ot]=(0,r.useState)({yesterday:[],today:[],tomorrow:[]}),lt=(0,r.useRef)(null),ct=(0,r.useRef)(null),dt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];e&&0!==e.length&&(Ue(e),qe(Math.min(Math.max(t,0),e.length-1)),De(!0),st(r),tt(!1),Ve(void 0!==n&&void 0!==s?{reviewId:n,reviewIndex:s}:null),He(!1))},ut=()=>{0!==ze.length&&qe(e=>(e-1+ze.length)%ze.length)},ht=()=>{0!==ze.length&&qe(e=>(e+1)%ze.length)},[mt,ft]=(0,r.useState)("\uc804\uccb4"),[gt,pt]=(0,r.useState)(!1),[xt,vt]=(0,r.useState)(null),[yt,bt]=(0,r.useState)(0),[wt,jt]=(0,r.useState)(!1),[_t,Nt]=(0,r.useState)(!1),[kt,Ct]=(0,r.useState)(!1),St=!!i&&((i.staff.director||0)>0||(i.staff.teacher||0)>0||(i.staff.specialTeacher||0)>0||(i.staff.therapist||0)>0||(i.staff.nutritionist||0)>0||(i.staff.nurse||0)>0||(i.staff.nurseAssistant||0)>0||(i.staff.cook||0)>0||(i.staff.clerk||0)>0);(0,r.useEffect)(()=>(document.body.style.overflow=Le||fe?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[Le,fe]),(0,r.useEffect)(()=>{document.body.style.overflow=gt?"hidden":"unset"},[gt]);const Et=()=>{try{const e=a.get("arcode"),n="".concat(window.location.origin,"/childcare/").concat(t);return e?"".concat(n,"?arcode=").concat(encodeURIComponent(e)):n}catch(e){return"".concat(window.location.origin,"/childcare/").concat(t)}},Pt=async()=>{try{await navigator.clipboard.writeText(Et()),alert("\uacf5\uc720 \ub9c1\ud06c\uac00 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){}pt(!1)},At=async()=>{try{const e="\ub9d8\ud53d \xb7 ".concat((null===i||void 0===i?void 0:i.name)||"\uc5b4\ub9b0\uc774\uc9d1"," \uc815\ubcf4 \uacf5\uc720"),t="".concat((null===i||void 0===i?void 0:i.name)||"\uc5b4\ub9b0\uc774\uc9d1"," \uc815\ubcf4\ub97c \uacf5\uc720\ud569\ub2c8\ub2e4."),n=navigator;if(n.share)return await n.share({title:e,text:t,url:Et()}),void pt(!1)}catch(e){}await Pt()},Tt=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t)try{_(!0);const r=await async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"latest",r=Se.supabase.from("childcare_reviews").select("\n      *,\n      images:childcare_review_images (\n        id, review_id, image_url, image_order, created_at\n      )\n    ").eq("childcare_code",e).eq("is_deleted",!1);switch(s){case"latest":r=r.order("created_at",{ascending:!1});break;case"rating":r=r.order("rating",{ascending:!1}).order("created_at",{ascending:!1});break;case"helpful":r=r.order("helpful_count",{ascending:!1}).order("created_at",{ascending:!1})}const a=(t-1)*n,i=a+n-1;r=r.range(a,i);const{data:o,error:l}=await r;if(l)return{reviews:[],hasMore:!1};const{count:c}=await Se.supabase.from("childcare_reviews").select("*",{count:"exact",head:!0}).eq("childcare_code",e).eq("is_deleted",!1);return{reviews:await Promise.all((o||[]).map(async e=>{try{const{data:t}=await Se.supabase.from("profiles").select("full_name, nickname, profile_image_url, children_info").eq("auth_user_id",e.user_id).maybeSingle();return(0,Ae.A)((0,Ae.A)({},e),{},{user_profile:t||{full_name:"\uc775\uba85",nickname:"\uc775\uba85",profile_image_url:null}})}catch(t){return(0,Ae.A)((0,Ae.A)({},e),{},{user_profile:{full_name:"\uc775\uba85",nickname:"\uc775\uba85",profile_image_url:null}})}})),hasMore:!!c&&t*n<c}}(t,e,10,"latest"),a=((null===r||void 0===r?void 0:r.reviews)||[]).map(e=>({id:e.id,user_profile:e.user_profile,user_id:e.user_id,created_at:e.created_at,rating:e.rating,content:e.content,images:(e.images||[]).map(e=>e.image_url),helpful:e.helpful_count}));w(e=>n?[...e,...a]:a),P((null===r||void 0===r?void 0:r.hasMore)||!1),S(e);try{const{data:{user:e}}=await Se.supabase.auth.getUser();if(e){const{data:t}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",e.id).maybeSingle();if(null!==t&&void 0!==t&&t.id){const s=a.map(e=>e.id);if(s.length>0){const{data:r}=await Se.supabase.from("childcare_review_helpful").select("review_id").eq("user_id",t.id).in("review_id",s),i=new Set((r||[]).map(e=>e.review_id));T(e=>{if(n){const t=new Set(e);return i.forEach(e=>t.add(e)),t}return i});const o=a.filter(t=>t.user_id===e.id).map(e=>e.id);if(o.length>0){const{data:e}=await Se.supabase.from("review_delete_requests").select("review_id").eq("review_type","childcare").eq("requester_id",t.id).eq("status","pending").in("review_id",o),s=new Set((e||[]).map(e=>e.review_id));M(e=>{if(n){const t=new Set(e);return s.forEach(e=>t.add(e)),t}return s})}else n||M(new Set)}else n||(T(new Set),M(new Set))}}}catch(s){}}catch(yd){w([]),P(!1)}finally{_(!1)}},It=(null===N||void 0===N?void 0:N.rating_distribution)||{5:0,4:0,3:0,2:0,1:0},Mt=null!==N&&void 0!==N&&N.average_rating?N.average_rating.toFixed(1):0,Lt=b.filter(e=>!e.is_hidden).filter(e=>{var t;return((null===(t=e.images)||void 0===t?void 0:t.length)||0)>0}).sort((e,t)=>new Date(t.created_at||t.date).getTime()-new Date(e.created_at||e.date).getTime()),Rt=(Lt.slice(0,4),Lt.flatMap(e=>e.images||[])),Ot=(()=>{const e=[];let t=0;return Lt.forEach(n=>{(n.images||[]).forEach(s=>{e.push({imageUrl:s,rating:n.rating,globalIndex:t}),t++})}),e})(),Dt=Ot.length,zt=Ot.slice(0,4),Ut=(0,r.useRef)(!1),Ft=a.get("arcode")||"";(0,r.useEffect)(()=>(t&&!Ut.current&&(Ut.current=!0,qt()),()=>{Ut.current=!1}),[t]),(0,r.useEffect)(()=>{"reviews"===v&&t&&(Tt(1,!1),(async()=>{if(t)try{const e=await Fl(t);k(e)}catch(e){}})(),(async()=>{try{const e=await async function(e){const{data:{user:t}}=await Se.supabase.auth.getUser();if(!t)return null;const{data:n,error:s}=await Se.supabase.from("childcare_reviews").select("\n      *,\n      images:childcare_review_images (\n        id, review_id, image_url, image_order, created_at\n      )\n    ").eq("childcare_code",e).eq("user_id",t.id).eq("is_deleted",!1).maybeSingle();return s?null:n}(t);ue(e)}catch(e){}})())},[v,t]),(0,r.useEffect)(()=>{(async()=>{try{const{data:{user:e}}=await Se.supabase.auth.getUser();if(e){ae(e.id);const{data:t}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",e.id).maybeSingle();null!==t&&void 0!==t&&t.id?oe(t.id):oe(null)}else ae(null),oe(null)}catch(e){ae(null),oe(null)}})()},[t]);const qt=async()=>{try{c(!0),u(null),m(null),g([]),x(null);const s=await ad(t,Ft);if(s){try{const{data:n,error:r}=await Se.supabase.from("childcare_custom_info").select("*").eq("facility_code",t).eq("is_active",!0).maybeSingle();var e;if(!r&&n)s.customInfo={building_images:n.building_images||[],meal_images:n.meal_images||[],detailed_description:n.detailed_description||void 0,facilities:n.facilities||[],programs:n.programs||[]},console.log("\u2705 \ucee4\uc2a4\ud140 \uc815\ubcf4 \ub85c\ub4dc:",(null===(e=n.building_images)||void 0===e?void 0:e.length)||0,"\uac1c \uac74\ubb3c \uc0ac\uc9c4")}catch(n){console.log("\ucee4\uc2a4\ud140 \uc815\ubcf4 \uc5c6\uc74c:",n)}o(s),s.name.includes("\uc0d8\ud50c \uc5b4\ub9b0\uc774\uc9d1 (")&&"\uc815\ubcf4\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"===s.address&&(console.warn("\u26a0\ufe0f \uc2e4\uc81c API \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc5b4 \uc784\uc2dc \ub370\uc774\ud130\ub97c \ud45c\uc2dc\ud569\ub2c8\ub2e4."),_e(!0))}else u("\uc5b4\ub9b0\uc774\uc9d1 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")}catch(n){if(console.error("\uc5b4\ub9b0\uc774\uc9d1 \uc0c1\uc138 \uc815\ubcf4 \ub85c\ub529 \uc624\ub958:",n),n.response&&404===n.response.status)try{const e=await n.response.json();e.xmlResponse&&(m(e.xmlResponse),g(e.jsonData||[]),x(e.debugInfo||null),console.log("\ud83d\udd0d XML \uc751\ub2f5 \ub370\uc774\ud130 \uc800\uc7a5\ub428:",e.xmlResponse.length,"\ubb38\uc790"))}catch(s){console.error("\uc5d0\ub7ec \uc751\ub2f5 \ud30c\uc2f1 \uc2e4\ud328:",s)}u("\uc5b4\ub9b0\uc774\uc9d1 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{c(!1),Ut.current=!1}};(0,r.useEffect)(()=>{"meal"===v&&t&&Bt()},[v,t]);const Bt=async()=>{if(t)try{const e=new Date,n=new Date(e);n.setDate(n.getDate()-1);const s=new Date(e);s.setDate(s.getDate()+1);const r=e=>e.toISOString().split("T")[0],{data:a}=await Se.supabase.from("childcare_meals").select("meal_date, meal_images").eq("childcare_code",t).in("meal_date",[r(n),r(e),r(s)]).eq("is_active",!0),i={yesterday:[],today:[],tomorrow:[]};null===a||void 0===a||a.forEach(t=>{t.meal_date===r(n)?i.yesterday=t.meal_images||[]:t.meal_date===r(e)?i.today=t.meal_images||[]:t.meal_date===r(s)&&(i.tomorrow=t.meal_images||[])}),ot(i),console.log("\u2705 \uae09\uc2dd \uc0ac\uc9c4 \ub85c\ub4dc:",i)}catch(d){console.error("\uae09\uc2dd \uc0ac\uc9c4 \ub85c\ub4dc \uc624\ub958:",d)}};return l?(0,Ee.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[#fb8678] mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uc5b4\ub9b0\uc774\uc9d1 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\ub294 \uc911..."})]})}):d||!i?(0,Ee.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,Ee.jsxs)("div",{className:"px-4 py-6",children:[(0,Ee.jsxs)("div",{className:"text-center mb-6",children:[(0,Ee.jsx)("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ee.jsx)(kl,{className:"w-8 h-8 text-red-500"})}),(0,Ee.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"\uc624\ub958 \ubc1c\uc0dd"}),(0,Ee.jsx)("p",{className:"text-gray-600 mb-4",children:d}),(0,Ee.jsx)("button",{onClick:()=>s("/kindergarten-map?type=childcare&selected=".concat(t)),className:"px-4 py-2 bg-[#fb8678] text-white rounded-lg hover:bg-[#fb8678]/90 transition-colors",children:"\ub3cc\uc544\uac00\uae30"})]}),h&&(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:[(0,Ee.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\ud83d\udd0d API \uc751\ub2f5 \ub370\uc774\ud130 (1879\uc904)"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"\uac1c\ubc1c\ud0a4 \uc0ac\uc6a9\uc73c\ub85c \uc778\ud574 \ub354\ubbf8 \ub370\uc774\ud130\uac00 \ubc18\ud658\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc804\uccb4 XML \uc751\ub2f5\uc744 \ud655\uc778\ud574\ubcf4\uc138\uc694."})]}),(0,Ee.jsxs)("div",{className:"p-4",children:[p&&(0,Ee.jsxs)("div",{className:"mb-4 p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,Ee.jsx)("h4",{className:"text-sm font-semibold text-yellow-800 mb-2",children:"\ud83d\udcca \ub514\ubc84\uadf8 \uc815\ubcf4"}),(0,Ee.jsxs)("div",{className:"text-xs text-yellow-700 space-y-1",children:[(0,Ee.jsxs)("div",{children:["API URL: ",p.apiUrl]}),(0,Ee.jsxs)("div",{children:["XML \uae38\uc774: ",p.xmlLength," \ubb38\uc790"]}),(0,Ee.jsxs)("div",{children:["\uac1c\ubc1c\ud0a4 \uc0ac\uc6a9: ",p.isDevelopmentKey?"\uc608":"\uc544\ub2c8\uc624"]}),(0,Ee.jsxs)("div",{children:["\uba54\uc2dc\uc9c0: ",p.message]})]})]}),f.length>0&&(0,Ee.jsxs)("div",{className:"mb-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,Ee.jsxs)("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:["\ud83d\udccb \ud30c\uc2f1\ub41c JSON \ub370\uc774\ud130 (",f.length,"\uac1c \ud56d\ubaa9)"]}),(0,Ee.jsxs)("div",{className:"text-xs text-blue-700 max-h-32 overflow-y-auto",children:[(0,Ee.jsx)("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(f.slice(0,3),null,2)}),f.length>3&&(0,Ee.jsxs)("div",{className:"text-blue-600 mt-2",children:["... \uadf8\ub9ac\uace0 ",f.length-3,"\uac1c \ub354"]})]})]}),(0,Ee.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-100 px-3 py-2 border-b border-gray-200",children:(0,Ee.jsx)("h4",{className:"text-sm font-semibold text-gray-800",children:"\ud83d\udcc4 \uc804\uccb4 XML \uc751\ub2f5"})}),(0,Ee.jsx)("div",{className:"p-3 bg-gray-900 text-green-400 text-xs font-mono max-h-96 overflow-y-auto",children:(0,Ee.jsx)("pre",{className:"whitespace-pre-wrap break-all",children:h})})]})]})]})]})}):(0,Ee.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Ee.jsxs)("div",{className:"bg-white shadow-sm border-b border-gray-200",children:[(0,Ee.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:()=>s("/kindergarten-map?type=childcare&selected=".concat(t)),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)(ll,{className:"w-5 h-5 text-gray-700"})}),(0,Ee.jsx)("h1",{className:"text-lg font-semibold text-gray-900 truncate flex-1 mx-3",children:i.name}),(0,Ee.jsxs)("div",{className:"flex items-center",children:[(0,Ee.jsx)("button",{onClick:()=>ge(!0),className:"mr-2 p-1 hover:bg-gray-100 rounded-full transition-colors",title:"\uc815\ubcf4 \ucd9c\ucc98 \ud655\uc778",children:(0,Ee.jsx)(Wc,{className:"w-4 h-4 text-gray-500 hover:text-[#fb8678] transition-colors"})}),(0,Ee.jsx)("span",{className:"px-2 py-1 bg-[#fb8678]/10 text-[#fb8678] text-xs rounded-full font-medium",children:i.type})]})]}),(0,Ee.jsx)("div",{className:"flex",children:[{id:"detail",label:"\uc0c1\uc138",icon:$o},{id:"meal",label:"\uae09\uc2dd",icon:Hc},{id:"reviews",label:"\uce6d\ucc2c",icon:ml}].map(e=>{let{id:t,label:n,icon:s}=e;return(0,Ee.jsx)("button",{onClick:()=>y(t),className:"flex-1 flex items-center justify-center py-3 px-2 transition-colors ".concat(v===t?"text-[#fb8678] border-b-2 border-[#fb8678]":"text-gray-500 hover:text-gray-700"),children:(0,Ee.jsx)(s,{className:"w-5 h-5"})},t)})})]}),je&&(0,Ee.jsx)("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mx-4 mt-4",children:(0,Ee.jsxs)("div",{className:"flex",children:[(0,Ee.jsx)("div",{className:"flex-shrink-0",children:(0,Ee.jsx)(Vc,{className:"h-5 w-5 text-yellow-400"})}),(0,Ee.jsx)("div",{className:"ml-3",children:(0,Ee.jsxs)("p",{className:"text-sm text-yellow-700",children:[(0,Ee.jsx)("strong",{children:"\uc8fc\uc758:"})," \ud604\uc7ac \uc5b4\ub9b0\uc774\uc9d1 \uc0c1\uc138 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc5b4 \uc784\uc2dc \ub370\uc774\ud130\ub97c \ud45c\uc2dc\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694."]})})]})}),(0,Ee.jsxs)("div",{children:["detail"===v&&(0,Ee.jsx)("div",{className:"space-y-4",children:(0,Ee.jsxs)("div",{className:"bg-white pb-16 shadow-sm",children:[(0,Ee.jsx)("div",{className:"mb-4",children:null!==i&&void 0!==i&&null!==(e=i.customInfo)&&void 0!==e&&e.building_images&&i.customInfo.building_images.length>0?(0,Ee.jsxs)("div",{className:"relative bg-gray-100 h-40 cursor-pointer",onClick:()=>{Ue(i.customInfo.building_images),qe(rt||0),De(!0)},children:[(0,Ee.jsx)("img",{src:i.customInfo.building_images[rt||0],alt:"".concat(i.name," \uac74\ubb3c"),className:"w-full h-full object-cover"}),i.customInfo.building_images.length>1&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:[(rt||0)+1," / ",i.customInfo.building_images.length]}),(rt||0)>0&&(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),at((rt||0)-1)},className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80",children:(0,Ee.jsx)(ll,{className:"w-4 h-4"})}),(rt||0)<i.customInfo.building_images.length-1&&(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),at((rt||0)+1)},className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black bg-opacity-60 text-white p-2 rounded-full hover:bg-opacity-80",children:(0,Ee.jsx)(cl,{className:"w-4 h-4"})})]}),(0,Ee.jsx)("div",{className:"absolute top-2 left-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:"\ud074\ub9ad\ud558\uc5ec \ud06c\uac8c\ubcf4\uae30"})]}):(0,Ee.jsx)("div",{className:"bg-gray-100 h-40 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)(Sl,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-500",children:"\ud604\uc7ac \uc0ac\uc9c4\uc5c6\uc74c"})]})})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:"\uc0c1\uc138 \uc124\uba85"})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsx)("div",{className:"bg-gray-50 rounded-lg p-3",children:(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\ub300\ud45c\uc790\uba85"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium",children:i.director||"\uc815\ubcf4 \uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uc6b4\uc601\ud604\ud669"}),(0,Ee.jsxs)("div",{className:"flex items-center",children:[(e=>{switch(e){case"\uc815\uc0c1":return(0,Ee.jsx)(Bc,{className:"w-3 h-3 text-green-500",strokeWidth:2.5});case"\ud734\uc9c0":case"\ud3d0\uc9c0":return(0,Ee.jsx)(kl,{className:"w-3 h-3"});default:return(0,Ee.jsx)(Vc,{className:"w-3 h-3"})}})(i.status),(0,Ee.jsx)("span",{className:"ml-1 text-xs font-semibold ".concat((e=>{switch(e){case"\uc815\uc0c1":return"text-green-600 bg-green-50";case"\ud734\uc9c0":case"\ud3d0\uc9c0":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}})(i.status)," px-1.5 py-0.5 rounded-full"),children:i.status||"\ubbf8\uc0c1"})]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between col-span-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uc778\uac00\uc77c"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium ml-auto text-right",children:(Vt=i.establishedDate,Vt&&"\uc815\ubcf4 \uc5c6\uc74c"!==Vt?8===Vt.length&&/^\d{8}$/.test(Vt)?"".concat(Vt.slice(0,4),"-").concat(Vt.slice(4,6),"-").concat(Vt.slice(6,8)):Vt:"\uc815\ubcf4 \uc5c6\uc74c")})]}),(0,Ee.jsxs)("div",{className:"grid grid-cols-[auto,1fr] items-start col-span-2 gap-x-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\uc81c\uacf5\uc11c\ube44\uc2a4"}),(0,Ee.jsx)("span",{className:"text-gray-900 font-medium text-right whitespace-normal break-words pr-1",children:i.services||"\uc77c\ubc18\ubcf4\uc721"})]}),(0,Ee.jsxs)("div",{className:"grid grid-cols-[auto,1fr] items-center col-span-2 gap-x-2",children:[(0,Ee.jsx)("span",{className:"text-gray-500 font-semibold",children:"\ud648\ud398\uc774\uc9c0"}),i.homepage?(0,Ee.jsx)("a",{href:i.homepage,target:"_blank",rel:"noreferrer",className:"justify-self-end text-[#fb8678] hover:underline font-semibold",children:"\ubc14\ub85c\uac00\uae30"}):(0,Ee.jsx)("span",{className:"text-gray-900 font-medium justify-self-end",children:"\uc815\ubcf4 \uc5c6\uc74c"})]})]})})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsxs)("div",{className:"grid grid-cols-5 gap-2",children:[(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-[10px] text-gray-500 font-semibold",children:"\uc815\uc6d0"})}),(0,Ee.jsxs)("div",{className:"flex flex-col items-center text-center p-2",children:[(0,Ee.jsx)(Zo,{className:"w-5 h-5 mb-1 text-[#fb8678]"}),(0,Ee.jsxs)("div",{className:"text-xs font-semibold text-gray-900",children:[i.capacity,"\uba85"]})]})]}),(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-[10px] text-gray-500 font-semibold",children:"\ud604\uc6d0"})}),(0,Ee.jsxs)("div",{className:"flex flex-col items-center text-center p-2",children:[(0,Ee.jsx)(Zo,{className:"w-5 h-5 mb-1 text-[#fb8678]"}),(0,Ee.jsxs)("div",{className:"text-xs font-semibold text-gray-900",children:[i.enrolled,"\uba85"]})]})]}),(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-[10px] text-gray-500 font-semibold",children:"\uad50\uc9c1\uc6d0"})}),(0,Ee.jsxs)("div",{className:"flex flex-col items-center text-center p-2",children:[(0,Ee.jsx)(Yc,{className:"w-5 h-5 mb-1 text-[#fb8678]"}),(0,Ee.jsxs)("div",{className:"text-xs font-semibold text-gray-900",children:[i.teacherCount,"\uba85"]})]})]}),(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-[10px] text-gray-500 font-semibold",children:"\ud559\uae09"})}),(0,Ee.jsxs)("div",{className:"flex flex-col items-center text-center p-2",children:[(0,Ee.jsx)(cc,{className:"w-5 h-5 mb-1 text-[#fb8678]"}),(0,Ee.jsxs)("div",{className:"text-xs font-semibold text-gray-900",children:[i.classCount,"\uac1c"]})]})]}),(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-2 py-1 text-center",children:(0,Ee.jsx)("div",{className:"text-[10px] text-gray-500 font-semibold",children:"CCTV"})}),(0,Ee.jsxs)("div",{className:"flex flex-col items-center text-center p-2",children:[(0,Ee.jsx)(Sl,{className:"w-5 h-5 mb-1 text-[#fb8678]"}),(0,Ee.jsxs)("div",{className:"text-xs font-semibold text-gray-900",children:[i.cctvCount,"\ub300"]})]})]})]})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-3 py-2 text-center",children:(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uc2dc\uc124 \uc815\ubcf4"})}),(0,Ee.jsxs)("div",{className:"p-4 space-y-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\ubcf4\uc721\uc2e4 \uc218"}),(0,Ee.jsxs)("span",{className:"text-xs font-semibold text-gray-900",children:[i.facility.roomCount,"\uac1c"]})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\ubcf4\uc721\uc2e4 \uba74\uc801"}),(0,Ee.jsxs)("span",{className:"text-xs font-semibold text-gray-900",children:[i.facility.roomSize,"\u33a1"]})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\ub180\uc774\ud130"}),(0,Ee.jsxs)("span",{className:"text-xs font-semibold text-gray-900",children:[i.facility.playgroundCount,"\uac1c"]})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"CCTV \uc124\uce58"}),(0,Ee.jsxs)("span",{className:"text-xs font-semibold text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full",children:[i.facility.cctvCount,"\ub300 \uc124\uce58"]})]})]})]})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"bg-gray-50 px-3 py-2 flex items-center justify-between",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uad50\uc9c1\uc6d0 \ud604\ud669"}),(0,Ee.jsx)("button",{onClick:()=>ke(!Ne),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:Ne?(0,Ee.jsx)(Kc,{className:"w-4 h-4 text-[#fb8678]"}):(0,Ee.jsx)(Jc,{className:"w-4 h-4 text-[#fb8678]"})})]}),(0,Ee.jsxs)("div",{className:"p-4",children:[i.staff.total>0&&St?(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc6d0\uc7a5"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.staff.director,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ubcf4\uc721\uad50\uc0ac"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.staff.teacher,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ud2b9\uc218\uad50\uc0ac"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.staff.specialTeacher,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uce58\ub8cc\uad50\uc0ac"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.staff.therapist,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc601\uc591\uc0ac"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.staff.nutritionist,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uac04\ud638\uc0ac"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.staff.nurse,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uac04\ud638\uc870\ubb34\uc0ac"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.staff.nurseAssistant,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc870\ub9ac\uc6d0"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.staff.cook,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc0ac\ubb34\uc9c1\uc6d0"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.staff.clerk,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600 font-semibold",children:"\ucd1d\uacc4"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-bold",children:[i.staff.total,"\uba85"]})]})]}):(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500",children:"\uc138\ubd80 \uc9c1\uad70\ubcc4 \uc778\uc6d0 \uc815\ubcf4\uac00 \uc81c\uacf5\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."}),i.staff.total>0&&(0,Ee.jsxs)("div",{className:"flex justify-between text-xs",children:[(0,Ee.jsx)("span",{className:"text-gray-600 font-semibold",children:"\ucd1d\uacc4"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-bold",children:[i.staff.total,"\uba85"]})]})]}),(0,Ee.jsxs)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(Ne?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:[(0,Ee.jsx)("div",{className:"border-t border-gray-200 my-3"}),(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"1\ub144\ubbf8\ub9cc"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.experience.under1Year,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"1\ub144\uc774\uc0c12\ub144\ubbf8\ub9cc"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.experience.year1To2,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"2\ub144\uc774\uc0c14\ub144\ubbf8\ub9cc"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.experience.year2To4,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"4\ub144\uc774\uc0c16\ub144\ubbf8\ub9cc"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.experience.year4To6,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"6\ub144\uc774\uc0c1"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.experience.over6Years,"\uba85"]})]})]})]})]})]})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"bg-gray-50 px-3 py-2 flex items-center justify-between",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\ubc18\ubcc4 \ud604\ud669"}),(0,Ee.jsx)("button",{onClick:()=>Te(!Pe),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:Pe?(0,Ee.jsx)(Kc,{className:"w-4 h-4 text-[#fb8678]"}):(0,Ee.jsx)(Jc,{className:"w-4 h-4 text-[#fb8678]"})})]}),(0,Ee.jsxs)("div",{className:"p-4",children:[i.classCount>0?(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub9cc0\uc138\ubc18"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.classes.age0,"\uac1c (",i.children.age0,"\uba85)"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub9cc1\uc138\ubc18"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.classes.age1,"\uac1c (",i.children.age1,"\uba85)"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub9cc2\uc138\ubc18"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.classes.age2,"\uac1c (",i.children.age2,"\uba85)"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub9cc3\uc138\ubc18"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.classes.age3,"\uac1c (",i.children.age3,"\uba85)"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub9cc4\uc138\ubc18"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.classes.age4,"\uac1c (",i.children.age4,"\uba85)"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub9cc5\uc138\ubc18"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.classes.age5,"\uac1c (",i.children.age5,"\uba85)"]})]})]}):(0,Ee.jsx)("div",{className:"text-xs text-gray-500",children:"\ubc18\ubcc4 \ud604\ud669 \uc815\ubcf4\uac00 \uc81c\uacf5\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsxs)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(Pe?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:[(0,Ee.jsx)("div",{className:"border-t border-gray-200 my-3"}),(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc601\uc544\ud63c\ud569\ubc18(0~2\uc138)"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.classes.mixed0To2,"\uac1c (",i.children.mixed0To2,"\uba85)"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc720\uc544\ud63c\ud569\ubc18(3~5\uc138)"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.classes.mixed3To5,"\uac1c (",i.children.mixed3To5,"\uba85)"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ud2b9\uc218\ubc18"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.classes.special,"\uac1c (",i.children.special,"\uba85)"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600 font-semibold",children:"\ucd1d\uacc4"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-bold",children:[i.classes.total,"\uac1c (",i.children.total,"\uba85)"]})]})]})]})]})]})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"bg-gray-50 px-3 py-2 flex items-center justify-between",children:[(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uc785\uc18c \ub300\uae30\uc544\ub3d9 \ud604\ud669"}),(0,Ee.jsx)("button",{onClick:()=>Me(!Ie),className:"p-1 hover:bg-gray-200 rounded transition-colors",children:Ie?(0,Ee.jsx)(Kc,{className:"w-4 h-4 text-[#fb8678]"}):(0,Ee.jsx)(Jc,{className:"w-4 h-4 text-[#fb8678]"})})]}),(0,Ee.jsxs)("div",{className:"p-4",children:[(0,Ee.jsxs)("div",{className:"text-center mb-3",children:[(()=>{const e=i.waitingList.total||0,t=e<=5?"bg-green-100 text-green-700":e<=10?"bg-orange-100 text-orange-700":"bg-red-100 text-red-700",n=e<=5?"text-green-700":e<=10?"text-orange-700":"text-red-500",s=e<=5?"\uc5ec\uc720":e<=10?"\ubcf4\ud1b5":"\ud63c\uc7a1";return(0,Ee.jsxs)("div",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-sm font-semibold ".concat(t),children:[(0,Ee.jsxs)("span",{className:"mr-1 text-base leading-none font-bold ".concat(n),children:[e,"\uba85"]}),(0,Ee.jsx)("span",{className:"text-[11px] font-semibold ".concat(n),children:s})]})})(),(0,Ee.jsx)("div",{className:"text-[11px] text-gray-500 mt-1",children:"\ucd1d \ub300\uae30\uc544\ub3d9\uc218"})]}),(0,Ee.jsxs)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(Ie?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:[(0,Ee.jsx)("div",{className:"border-t border-gray-200 mb-3"}),i.waitingList.total>0?(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub9cc0\uc138"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.waitingList.age0,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub9cc1\uc138"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.waitingList.age1,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub9cc2\uc138"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.waitingList.age2,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub9cc3\uc138"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.waitingList.age3,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub9cc4\uc138"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.waitingList.age4,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\ub9cc5\uc138"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.waitingList.age5,"\uba85"]})]}),(0,Ee.jsxs)("div",{className:"flex justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"6\uc138 \uc774\uc0c1"}),(0,Ee.jsxs)("span",{className:"text-gray-900 font-semibold",children:[i.waitingList.over6,"\uba85"]})]})]}):(0,Ee.jsx)("div",{className:"text-xs text-gray-500",children:"\uc785\uc18c \ub300\uae30\uc544\ub3d9 \uc815\ubcf4\uac00 \uc81c\uacf5\ub418\uc9c0 \uc54a\uc558\uc2b5\ub2c8\ub2e4."})]})]})]})}),(0,Ee.jsx)("div",{className:"mb-3 px-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-3 py-2 text-center",children:(0,Ee.jsxs)("div",{className:"text-xs text-gray-500 font-semibold flex items-center justify-center",children:[(0,Ee.jsx)("img",{src:"/icons/schoolbusicon.svg",alt:"\ud1b5\ud559 \ucc28\ub7c9",className:"w-4 h-4 mr-1"}),"\ud1b5\ud559\ucc28\ub7c9 \ud604\ud669"]})}),(0,Ee.jsx)("div",{className:"p-4",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"flex items-center justify-center space-x-2",children:i.transportation.available?(0,Ee.jsxs)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-base leading-none font-bold bg-green-100 text-green-700",children:[(0,Ee.jsx)(Nl,{className:"w-4 h-4 mr-1 text-green-600"}),i.transportation.status]}):(0,Ee.jsx)("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-base leading-none font-bold bg-red-100 text-red-500",children:i.transportation.status})}),(0,Ee.jsx)("div",{className:"text-[11px] text-gray-500 mt-1",children:i.transportation.available?"\ud1b5\ud559\ucc28\ub7c9\uc744 \uc6b4\uc601\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4":"\ud1b5\ud559\ucc28\ub7c9\uc744 \uc6b4\uc601\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4"})]})})]})})]})}),"meal"===v&&(0,Ee.jsx)("div",{className:"min-h-screen bg-white",children:(0,Ee.jsx)("div",{className:"pt-4 px-4 pb-20",children:(0,Ee.jsxs)("div",{className:"mb-4 bg-white rounded-xl",children:[(0,Ee.jsxs)("h3",{className:"text-base font-semibold text-gray-900 mb-2 flex items-center justify-between",children:[(0,Ee.jsxs)("div",{className:"flex items-center",children:[(0,Ee.jsx)("img",{src:"/icons/foodicon.svg",alt:"\uae09\uc2dd",className:"w-8 h-8 mr-2"}),"\uae09\uc2dd \uc6b4\uc601"]}),(0,Ee.jsx)("button",{onClick:()=>s("/childcare/".concat(t,"/meal-calendar").concat(Ft?"?arcode=".concat(encodeURIComponent(Ft)):"")),className:"p-2 hover:bg-gray-100 rounded-full transition-colors","aria-label":"\uae09\uc2dd \uce98\ub9b0\ub354\ub85c \uc774\ub3d9",children:(0,Ee.jsx)(cl,{className:"w-5 h-5 text-gray-500"})})]}),(0,Ee.jsx)("div",{className:"mb-4",children:(0,Ee.jsxs)("div",{className:"relative flex items-center justify-center",children:[(0,Ee.jsx)("button",{onClick:()=>{we(e=>(e-1+3)%3)},className:"absolute left-0 z-10 p-1 bg-white rounded-full shadow-md hover:bg-gray-50 transition-colors",children:(0,Ee.jsx)(ll,{className:"w-4 h-4 text-gray-600"})}),(0,Ee.jsxs)("div",{className:"flex justify-center space-x-2 mx-8",children:[(0,Ee.jsx)("div",{className:"flex-shrink-0 w-24 h-24 bg-gray-100 rounded-2xl overflow-hidden shadow-sm transition-transform duration-300 ".concat(0===be?"scale-105":"scale-100"," ").concat(it.yesterday.length>0?"cursor-pointer":""),onClick:()=>{it.yesterday.length>0&&dt(it.yesterday,0,void 0,void 0,!0)},children:it.yesterday.length>0?(0,Ee.jsx)("img",{src:it.yesterday[0],alt:"\uc5b4\uc81c \uae09\uc2dd",className:"w-full h-full object-cover"}):(0,Ee.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,Ee.jsx)(Hc,{className:"w-8 h-8 text-gray-400"})})}),(0,Ee.jsx)("div",{className:"flex-shrink-0 w-24 h-24 bg-gray-100 rounded-2xl overflow-hidden shadow-sm transition-transform duration-300 ".concat(1===be?"scale-105":"scale-100"," ").concat(it.today.length>0?"cursor-pointer":""),onClick:()=>{it.today.length>0&&dt(it.today,0,void 0,void 0,!0)},children:it.today.length>0?(0,Ee.jsx)("img",{src:it.today[0],alt:"\uc624\ub298 \uae09\uc2dd",className:"w-full h-full object-cover"}):(0,Ee.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,Ee.jsx)(Hc,{className:"w-8 h-8 text-gray-400"})})}),(0,Ee.jsx)("div",{className:"flex-shrink-0 w-24 h-24 bg-gray-100 rounded-2xl overflow-hidden shadow-sm transition-transform duration-300 ".concat(2===be?"scale-105":"scale-100"," ").concat(it.tomorrow.length>0?"cursor-pointer":""),onClick:()=>{it.tomorrow.length>0&&dt(it.tomorrow,0,void 0,void 0,!0)},children:it.tomorrow.length>0?(0,Ee.jsx)("img",{src:it.tomorrow[0],alt:"\ub0b4\uc77c \uae09\uc2dd",className:"w-full h-full object-cover"}):(0,Ee.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,Ee.jsx)(Hc,{className:"w-8 h-8 text-gray-400"})})})]}),(0,Ee.jsx)("button",{onClick:()=>{we(e=>(e+1)%3)},className:"absolute right-0 z-10 p-1 bg-white rounded-full shadow-md hover:bg-gray-50 transition-colors",children:(0,Ee.jsx)(cl,{className:"w-4 h-4 text-gray-600"})})]})}),(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-3 py-2 text-center",children:(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uae09\uc2dd \uc815\ubcf4"})}),(0,Ee.jsxs)("div",{className:"p-4 space-y-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uae09\uc2dd \uc81c\uacf5"}),(0,Ee.jsx)("span",{className:"text-xs font-semibold text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full",children:"\uc81c\uacf5"})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uac04\uc2dd \uc81c\uacf5"}),(0,Ee.jsx)("span",{className:"text-xs font-semibold text-green-600 bg-green-50 px-1.5 py-0.5 rounded-full",children:"\uc81c\uacf5"})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uc601\uc591\uc0ac"}),(0,Ee.jsx)("span",{className:"text-xs font-semibold text-gray-900",children:i.staff.nutritionist>0?"\uc788\uc74c":"\uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-xs text-gray-600",children:"\uc870\ub9ac\uc6d0"}),(0,Ee.jsxs)("span",{className:"text-xs font-semibold text-gray-900",children:[i.staff.cook,"\uba85"]})]})]}),(0,Ee.jsxs)("div",{className:"overflow-hidden transition-all duration-300 ease-in-out ".concat(kt?"max-h-[700px] opacity-100":"max-h-0 opacity-0"),children:[(0,Ee.jsx)("div",{className:"border-t border-gray-200"}),(0,Ee.jsxs)("div",{className:"p-4",children:[(0,Ee.jsx)("div",{className:"text-sm text-gray-700 font-semibold mb-2",children:"\uae09\uc2dd \uce98\ub9b0\ub354"}),(0,Ee.jsx)("div",{className:"rounded-lg border border-gray-200 p-3 text-xs text-gray-500",children:"\uce98\ub9b0\ub354 \ub370\uc774\ud130 \uc5f0\ub3d9 \uc608\uc815\uc785\ub2c8\ub2e4. (\uc720\uce58\uc6d0\uacfc \ub3d9\uc77c\ud55c \ucef4\ud3ec\ub10c\ud2b8/API \uc5f0\uacb0 \uac00\ub2a5)"})]})]})]})]})})}),"reviews"===v&&(0,Ee.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Ee.jsxs)("div",{className:"px-4 py-4 border-b border-gray-100",children:[(0,Ee.jsx)("div",{className:"mb-3",children:(0,Ee.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["\uce6d\ucc2c (",(null===N||void 0===N?void 0:N.total_reviews)||0,")"]})}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:Mt}),(0,Ee.jsx)("div",{className:"flex items-center justify-center space-x-1",children:[1,2,3,4,5].map(e=>(0,Ee.jsx)(ml,{className:"w-4 h-4 ".concat(e<=Math.floor(parseFloat(Mt.toString()))?"text-[#fb8678] fill-current":"text-gray-300")},e))}),(0,Ee.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["\ucd1d ",(null===N||void 0===N?void 0:N.total_reviews)||0,"\uac1c"]})]}),(0,Ee.jsx)("div",{className:"flex-1 space-y-1",children:[5,4,3,2,1].map(e=>(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsxs)("span",{className:"text-xs text-gray-600 w-6 font-semibold",children:[e,"\uc810"]}),(0,Ee.jsx)(ml,{className:"w-3 h-3 text-[#fb8678] fill-current"}),(0,Ee.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-1.5",children:(0,Ee.jsx)("div",{className:"bg-yellow-400 h-1.5 rounded-full transition-all duration-300",style:{width:"".concat(((null===N||void 0===N?void 0:N.total_reviews)||0)>0?It[e]/((null===N||void 0===N?void 0:N.total_reviews)||0)*100:0,"%")}})}),(0,Ee.jsxs)("span",{className:"text-[10px] text-gray-600 w-6 text-right",children:["(",It[e],")"]})]},e))})]})]}),(0,Ee.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ee.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"\uce6d\ucc2c \uc0ac\uc9c4"}),Dt>4&&(0,Ee.jsx)("button",{onClick:()=>Re(!0),className:"p-1 hover:bg-gray-100 rounded transition-colors",children:(0,Ee.jsx)(cl,{className:"w-4 h-4 text-gray-600"})})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3 overflow-x-auto",children:[zt.map((e,t)=>(0,Ee.jsxs)("div",{className:"flex-shrink-0 w-20 h-20 aspect-square bg-gray-100 rounded-lg relative overflow-hidden cursor-zoom-in",onClick:()=>{const t=b.find(t=>!t.is_hidden&&t.images&&t.images.some(t=>("string"===typeof t?t:t.image_url)===e.imageUrl)),n=t?b.findIndex(e=>e.id===t.id):-1;dt(Rt,e.globalIndex,null===t||void 0===t?void 0:t.id,n>=0?n:void 0)},children:[(0,Ee.jsx)("img",{src:e.imageUrl,alt:"\uce6d\ucc2c \uc774\ubbf8\uc9c0 ".concat(t+1),className:"w-full h-full object-cover"}),(0,Ee.jsxs)("div",{className:"absolute top-1 right-1 bg-black/60 text-white text-xs px-1 py-0.5 rounded",children:[e.rating,"\uc810"]}),3===t&&Dt>4&&(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:(0,Ee.jsxs)("span",{className:"text-white text-sm font-semibold",children:["+",Dt-4]})})]},t)),0===zt.length&&(0,Ee.jsx)("div",{className:"flex items-center justify-center w-full h-20 text-gray-500 text-sm",children:"\ub4f1\ub85d\ub41c \uc0ac\uc9c4\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"})]})]}),(0,Ee.jsx)("div",{className:"px-4 py-3",children:(0,Ee.jsx)("div",{className:"flex items-center space-x-4",children:(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("button",{onClick:()=>ft("\uc804\uccb4"),className:"px-3 py-1 text-sm rounded-full transition-colors ".concat("\uc804\uccb4"===mt?"bg-[#fb8678] text-white":"text-gray-600 hover:bg-gray-100"),children:"\uc804\uccb4"}),(0,Ee.jsx)("button",{onClick:()=>ft("\ucd5c\uc2e0\uc21c"),className:"px-3 py-1 text-sm rounded-full transition-colors ".concat("\ucd5c\uc2e0\uc21c"===mt?"bg-[#fb8678] text-white":"text-gray-600 hover:bg-gray-100"),children:"\ucd5c\uc2e0\uc21c"})]})})}),(0,Ee.jsx)("div",{className:"divide-y divide-gray-100",children:j?(0,Ee.jsxs)("div",{className:"px-4 py-8 text-center",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-[#fb8678] mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uce6d\ucc2c\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."})]}):0===b.length?(0,Ee.jsxs)("div",{className:"px-4 py-8 text-center",children:[(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uc544\uc9c1 \uce6d\ucc2c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{className:"text-gray-500 text-sm",children:"\uccab \ubc88\uc9f8 \uce6d\ucc2c\uc744 \ub0a8\uaca8\ubcf4\uc138\uc694!"})]}):b.map(e=>{var t,s,r,a,o,l,c,u,h,m,f;return(0,Ee.jsxs)("div",{className:"px-4 py-4",children:[(0,Ee.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ee.jsxs)("div",{className:"relative",children:[null!==(t=e.user_profile)&&void 0!==t&&t.profile_image_url?(0,Ee.jsx)("img",{src:e.user_profile.profile_image_url,alt:(null===(s=e.user_profile)||void 0===s?void 0:s.nickname)||"\ud504\ub85c\ud544",className:"w-10 h-10 rounded-2xl object-cover"}):(0,Ee.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-2xl flex items-center justify-center",children:(0,Ee.jsx)("span",{className:"text-sm font-medium text-gray-600",children:(null===(r=e.user_profile)||void 0===r||null===(a=r.nickname)||void 0===a?void 0:a.charAt(0))||(null===(o=e.user_profile)||void 0===o||null===(l=o.full_name)||void 0===l?void 0:l.charAt(0))||"?"})}),Array.isArray(null===(c=e.user_profile)||void 0===c?void 0:c.children_info)&&e.user_profile.children_info.length>0&&(0,Ee.jsxs)("div",{className:"absolute -bottom-1 -right-1 flex items-center flex-row-reverse",children:[e.user_profile.children_info.length>2&&(0,Ee.jsx)("div",{className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[7px] font-bold",children:["+",e.user_profile.children_info.length-2]})}),e.user_profile.children_info.length>=2&&(0,Ee.jsx)("div",{className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden relative z-20 ".concat(e.user_profile.children_info.length>2?"-mr-[5px]":""),children:null!==(u=e.user_profile.children_info[1])&&void 0!==u&&u.profile_image_url?(0,Ee.jsx)("img",{src:e.user_profile.children_info[1].profile_image_url,alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover"}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[10px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden relative z-10 ".concat(e.user_profile.children_info.length>=2?"-mr-[5px]":""),children:null!==(h=e.user_profile.children_info[0])&&void 0!==h&&h.profile_image_url?(0,Ee.jsx)("img",{src:e.user_profile.children_info[0].profile_image_url,alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover"}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[10px]",children:"\ud83d\udc64"})})]})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("div",{className:"font-semibold text-gray-900 text-sm",children:(null===(m=e.user_profile)||void 0===m?void 0:m.nickname)||(null===(f=e.user_profile)||void 0===f?void 0:f.full_name)||"\uc775\uba85"}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(t=>(0,Ee.jsx)(ml,{className:"w-3 h-3 ".concat(t<=e.rating?"text-[#fb8678] fill-current":"text-gray-300")},t))}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500",children:(()=>{const t=new Date(e.created_at||e.date),n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(n,".").concat(s,".").concat(r)})()})]})]})]}),(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("button",{onClick:()=>R(t=>t===e.id?null:e.id),className:"p-2 rounded-full hover:bg-black/5","aria-label":"\uce6d\ucc2c \uc635\uc158",children:(0,Ee.jsx)("svg",{className:"w-5 h-5 text-[#fb8678]",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),L===e.id&&(0,Ee.jsx)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:re&&e.user_id===re?(0,Ee.jsx)("button",{onClick:()=>{U(e.id),q(""),D(!0)},disabled:I.has(e.id),className:"w-full px-4 py-2 text-center text-sm ".concat(I.has(e.id)?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50"),children:I.has(e.id)?"\uc0ad\uc81c\uc694\uccad \ub300\uae30\uc911":"\uc0ad\uc81c\uc694\uccad"}):(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("button",{onClick:()=>{te(e.user_id),H(!0)},className:"w-full px-4 py-2 text-center text-sm text-gray-700 hover:bg-gray-50",children:"\ucc28\ub2e8\ud558\uae30"}),(0,Ee.jsx)("div",{className:"border-t border-gray-200 mx-2"}),(0,Ee.jsx)("button",{onClick:()=>{K(""),G("spam"),V(!0),R(null),U(null),te(null),window.__pendingReportReviewId=e.id,window.__pendingReportAuthorAuthId=e.user_id},className:"w-full px-4 py-2 text-center text-sm text-red-600 hover:bg-red-50",children:"\uc2e0\uace0\ud558\uae30"})]})})]})]}),(0,Ee.jsx)("div",{className:"text-gray-800 text-sm leading-relaxed mb-3",children:e.is_hidden?"\uad00\ub9ac\uc790\uc5d0 \uc758\ud574 \uc228\uae40\ucc98\ub9ac\ub41c \uce6d\ucc2c\uc785\ub2c8\ub2e4.":e.content}),e.images&&e.images.length>0&&(0,Ee.jsx)("div",{className:"flex space-x-3 overflow-x-auto mb-3",children:e.images.map((t,n)=>(0,Ee.jsx)("div",{className:"w-20 h-20 aspect-square bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0 ".concat(e.is_hidden?"":"cursor-zoom-in"),onClick:e.is_hidden?void 0:()=>{const t=b.findIndex(t=>t.id===e.id);dt(e.images.map(e=>"string"===typeof e?e:e.image_url),n,e.id,t)},children:e.is_hidden?(0,Ee.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,Ee.jsx)("span",{className:"text-gray-400 text-xs",children:"\uc228\uae40"})}):(0,Ee.jsx)("img",{src:t,alt:"\uce6d\ucc2c \uc774\ubbf8\uc9c0 ".concat(n+1),className:"w-full h-full object-cover"})},n))}),(0,Ee.jsx)("div",{className:"flex items-center",children:(0,Ee.jsxs)("button",{onClick:async()=>{try{const t=await async function(e,t){try{const{data:{user:r}}=await Se.supabase.auth.getUser();if(!r)throw new Error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const{data:a,error:i}=await Se.supabase.from("childcare_reviews").select("user_id, helpful_count, childcare_name").eq("id",e).single();if(i)throw i;const{data:o,error:l}=await Se.supabase.from("profiles").select("id, full_name, nickname, profile_image_url").eq("auth_user_id",r.id).single();if(l||!o)throw new Error("\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const c=o.id,{data:d}=await Se.supabase.from("childcare_review_helpful").select("id").eq("review_id",e).eq("user_id",c).maybeSingle();let u=!1;const h=!!d;if(d){const{error:t}=await Se.supabase.from("childcare_review_helpful").delete().eq("review_id",e).eq("user_id",c);if(t)throw t;u=!1}else{const{error:t}=await Se.supabase.from("childcare_review_helpful").insert({review_id:e,user_id:c});if(t)throw t;u=!0}const{count:m}=await Se.supabase.from("childcare_review_helpful").select("*",{count:"exact",head:!0}).eq("review_id",e);if(u&&!h)try{const{createReviewLikeNotification:s}=await Promise.resolve().then(n.bind(n,498)),{data:r}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",a.user_id).single();r&&c!==r.id&&await s(e,t||a.childcare_name||"\uc5b4\ub9b0\uc774\uc9d1",c,o.nickname||o.full_name,o.profile_image_url||"",r.id)}catch(s){console.error("\uc5b4\ub9b0\uc774\uc9d1 \ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc \uc0dd\uc131 \uc624\ub958:",s)}else if(!u&&h)try{const{deleteReviewLikeNotification:t}=await Promise.resolve().then(n.bind(n,498)),{data:s}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",a.user_id).single();s&&c!==s.id&&await t(e,c,s.id)}catch(s){console.error("\uc5b4\ub9b0\uc774\uc9d1 \ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc \uc0ad\uc81c \uc624\ub958:",s)}return{isHelpful:u,helpfulCount:m||0}}catch(d){throw console.error("\uc5b4\ub9b0\uc774\uc9d1 \ub3c4\uc6c0\ub428 \ud1a0\uae00 \uc2e4\ud328:",d),d}}(e.id,(null===i||void 0===i?void 0:i.name)||"\uc5b4\ub9b0\uc774\uc9d1");w(n=>n.map(n=>n.id===e.id?(0,Ae.A)((0,Ae.A)({},n),{},{helpful:t.helpfulCount}):n)),T(n=>{const s=new Set(n);return t.isHelpful?s.add(e.id):s.delete(e.id),s})}catch(t){}},className:"flex items-center space-x-1 transition-colors ".concat(A.has(e.id)?"text-red-500 hover:text-red-600":"text-gray-500 hover:text-gray-700"),children:[(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:A.has(e.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,Ee.jsxs)("span",{className:"text-xs",children:["\ub3c4\uc6c0\ub428 ",e.helpful]})]})})]},e.id)})}),E&&(0,Ee.jsx)("div",{className:"px-4 py-4 text-center",children:(0,Ee.jsx)("button",{onClick:()=>{j||Tt(C+1,!0)},disabled:j,className:"w-full py-3 text-sm text-gray-600 border border-gray-200 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:j?(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-600 mr-2"}),"\ub85c\ub529 \uc911..."]}):"\uce6d\ucc2c \ub354\ubcf4\uae30"})})]})]}),"reviews"===v&&(0,Ee.jsxs)(Ee.Fragment,{children:[O&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full max-h-[90vh] flex flex-col",children:[(0,Ee.jsxs)("div",{className:"mb-6",children:[(0,Ee.jsx)("h3",{className:"text-lg font-bold text-gray-900 mb-2 text-center",children:"\uce6d\ucc2c \uc0ad\uc81c\uc694\uccad"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 text-center mb-4",children:"\uc0ad\uc81c\uc694\uccad\uc744 \ud558\uc2dc\uba74 \uad00\ub9ac\uc790 \uac80\ud1a0 \ud6c4 \uc0ad\uc81c\ub429\ub2c8\ub2e4."}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uc0ad\uc81c\uc694\uccad \uc0ac\uc720 ",(0,Ee.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ee.jsx)("textarea",{value:F,onChange:e=>q(e.target.value),placeholder:"\uc0ad\uc81c\uc694\uccad \uc0ac\uc720\ub97c \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694...",rows:6,maxLength:500,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent resize-none text-sm"}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[(0,Ee.jsx)("span",{children:"\ucd5c\uc18c 10\uc790 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694"}),(0,Ee.jsxs)("span",{className:F.trim().length<10?"text-red-500":"",children:[F.length,"/500"]})]})]})]}),(0,Ee.jsxs)("div",{className:"grid grid-cols-2 gap-3 mt-auto",children:[(0,Ee.jsx)("button",{onClick:()=>{D(!1),U(null),q("")},className:"py-2 rounded-xl border hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{try{if(!z)return;const e=F.trim();if(e.length<10)return void alert("\uc0ad\uc81c\uc694\uccad \uc0ac\uc720\ub97c \ucd5c\uc18c 10\uc790 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694.");if(e.length>500)return void alert("\uc0ad\uc81c\uc694\uccad \uc0ac\uc720\ub294 \ucd5c\ub300 500\uc790\uae4c\uc9c0 \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.");await async function(e,t){try{const{data:{user:n},error:s}=await Se.supabase.auth.getUser();if(s||!n)throw new Error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const{data:r,error:a}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",n.id).single();if(a||!r)throw new Error("\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const{data:i,error:o}=await Se.supabase.from("childcare_reviews").select("id, user_id").eq("id",e).eq("user_id",n.id).single();if(o||!i)throw new Error("\ub9ac\ubdf0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uac70\ub098 \uc0ad\uc81c \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const{data:l}=await Se.supabase.from("review_delete_requests").select("id").eq("review_id",e).eq("review_type","childcare").eq("requester_id",r.id).eq("status","pending").maybeSingle();if(l)throw new Error("\uc774\ubbf8 \uc0ad\uc81c\uc694\uccad\uc774 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");const{error:c}=await Se.supabase.from("review_delete_requests").insert({review_id:e,review_type:"childcare",requester_id:r.id,status:"pending",request_reason:(null===t||void 0===t?void 0:t.trim())||null});if(c)throw console.error("\uc0ad\uc81c\uc694\uccad \uc0dd\uc131 \uc624\ub958:",c),c}catch(d){throw console.error("\uc0ad\uc81c\uc694\uccad \uc0dd\uc131 \uc2e4\ud328:",d),d}}(z,e),D(!1),q(""),M(e=>new Set(e).add(z)),U(null),R(null),alert("\uc0ad\uc81c\uc694\uccad\uc774 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790 \uc2b9\uc778 \ud6c4 \uc0ad\uc81c\ub429\ub2c8\ub2e4.")}catch(e){console.error("\uc0ad\uc81c\uc694\uccad \uc2e4\ud328:",e),alert((null===e||void 0===e?void 0:e.message)||"\uc0ad\uc81c\uc694\uccad \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},disabled:F.trim().length<10||F.trim().length>500,className:"py-2 rounded-xl bg-red-500 text-white hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"\uc0ad\uc81c\uc694\uccad"})]})]})}),B&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-4 max-w-lg w-full min-h-[500px] max-h-[95vh] flex flex-col",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ee.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"\uce6d\ucc2c \uc2e0\uace0"}),(0,Ee.jsx)("button",{onClick:()=>V(!1),className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-6 h-6 text-gray-500"})})]}),(0,Ee.jsxs)("div",{className:"flex-1 overflow-y-auto mb-6",children:[(0,Ee.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"\uc120\ud0dd\ud55c \uce6d\ucc2c\uc744 \uc2e0\uace0\ud569\ub2c8\ub2e4."}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc720\ud615"}),(0,Ee.jsxs)("select",{value:J,onChange:e=>G(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent",children:[(0,Ee.jsx)("option",{value:"spam",children:"\uc2a4\ud338/\uad11\uace0\uc131 \uac8c\uc2dc\uae00"}),(0,Ee.jsx)("option",{value:"inappropriate",children:"\ubd80\uc801\uc808\ud55c \ub0b4\uc6a9"}),(0,Ee.jsx)("option",{value:"harassment",children:"\uad34\ub86d\ud798/\ud3ed\ub825"}),(0,Ee.jsx)("option",{value:"other",children:"\uae30\ud0c0"})]})]}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc0ac\uc720"}),(0,Ee.jsx)("textarea",{value:Y,onChange:e=>K(e.target.value),placeholder:"\uc2e0\uace0 \uc0ac\uc720\ub97c \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694...",rows:6,maxLength:500,className:"w-full px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent resize-none text-sm"}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 font-semibold mt-1",children:[(0,Ee.jsx)("span",{children:"\ucd5c\ub300 \ud14d\uc2a4\ud2b8 \uae38\uc774"}),(0,Ee.jsxs)("span",{children:[Y.length,"/500"]})]})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3 flex-shrink-0",children:[(0,Ee.jsx)("button",{onClick:()=>V(!1),className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{try{if(!ie)return void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const e=window.__pendingReportReviewId,n=window.__pendingReportAuthorAuthId;if(!e||!n)return void V(!1);$(!0);const{error:s}=await Se.supabase.from("reports").insert({reporter_id:ie,report_reason:Y.trim(),report_type:J,status:"pending",target_type:"childcare_review",target_id:e,facility_type:"childcare",facility_code:t||null,facility_name:(null===i||void 0===i?void 0:i.name)||null});if(s){if("23505"===s.code)return alert("\uc774\ubbf8 \uc2e0\uace0\ud55c \uce6d\ucc2c\uae00\uc785\ub2c8\ub2e4."),V(!1),K(""),G("spam"),R(null),delete window.__pendingReportReviewId,void delete window.__pendingReportAuthorAuthId;throw s}V(!1),K(""),G("spam"),R(null),delete window.__pendingReportReviewId,delete window.__pendingReportAuthorAuthId,alert("\uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){"23505"!==(null===e||void 0===e?void 0:e.code)?(console.error("\ub9ac\ubdf0 \uc2e0\uace0 \uc624\ub958:",e),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")):(alert("\uc774\ubbf8 \uc2e0\uace0\ud55c \uce6d\ucc2c\uae00\uc785\ub2c8\ub2e4."),V(!1),K(""),G("spam"),R(null),delete window.__pendingReportReviewId,delete window.__pendingReportAuthorAuthId)}finally{$(!1)}},disabled:X||!Y.trim(),className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:X?"\uc2e0\uace0 \uc911...":"\uc2e0\uace0\ud558\uae30"})]})]})}),W&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[(0,Ee.jsxs)("div",{className:"text-center mb-6",children:[(0,Ee.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ee.jsx)(vl,{className:"w-6 h-6 text-red-600"})}),(0,Ee.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:"\uc0ac\uc6a9\uc790\ub97c \ucc28\ub2e8\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),(0,Ee.jsxs)("div",{className:"text-sm text-gray-600 text-left space-y-2",children:[(0,Ee.jsx)("p",{children:"\u2022 \ucc28\ub2e8\ud558\uba74 \ud574\ub2f9 \uc0ac\uc6a9\uc790\uc758 \uce6d\ucc2c\uc640 \ud65c\ub3d9\uc774 \ub354 \uc774\uc0c1 \ubcf4\uc774\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{children:"\u2022 \uc0c1\ub300\ubc29\uc740 \ud68c\uc6d0\ub2d8\uc758 \uae00\uc744 \uacc4\uc18d \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{children:"\u2022 \uc815\ub9d0 \ucc28\ub2e8\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("button",{onClick:()=>{H(!1),te(null)},className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{try{if(!ee)return;Q(!0);const{data:{user:e}}=await Se.supabase.auth.getUser();if(!e)return void alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const{error:t}=await Se.supabase.from("blocked_users").insert({blocker_id:e.id,blocked_user_id:ee,created_at:(new Date).toISOString()});if(t)throw t;H(!1),te(null),R(null),alert("\ucc28\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){console.error("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958:",e),alert("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{Q(!1)}},disabled:Z,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:Z?"\ucc28\ub2e8 \uc911...":"\ucc28\ub2e8\ud558\uae30"})]})]})}),_t&&(0,Ee.jsx)("div",{className:"fixed inset-0 z-30",onClick:()=>Nt(!1)}),_t&&(0,Ee.jsx)("div",{className:"fixed bottom-40 right-4 bg-white rounded-2xl shadow-lg border border-gray-200 z-50 min-w-[160px]",children:(0,Ee.jsx)("button",{onClick:()=>{if(de)return alert("\uc774\ubbf8 \uce6d\ucc2c\uc744 \uc791\uc131\ud55c \uc5b4\ub9b0\uc774\uc9d1\uc785\ub2c8\ub2e4."),void Nt(!1);s("/childcare/".concat(t,"/review")),Nt(!1)},disabled:!!de,className:"w-full px-4 py-2 text-[#fb8678] rounded-xl shadow-lg border border-[#fb8678]/20 hover:bg-[#fb8678]/10 transition-all duration-300 whitespace-nowrap font-semibold ".concat(de?"text-gray-400 border-gray-200 cursor-not-allowed !bg-white":""),children:de?"\uc774\ubbf8 \uce6d\ucc2c \uc791\uc131\ud568":"\uce6d\ucc2c \ub0a8\uae30\uae30"})}),"teacher"!==ve&&(0,Ee.jsx)("button",{onClick:()=>Nt(!_t),className:"fixed bottom-24 right-4 w-14 h-14 text-white rounded-full shadow-lg transition-all duration-200 flex items-center justify-center z-40 ".concat(_t?"bg-gray-500 hover:bg-gray-600":"bg-[#fb8678] hover:bg-[#fb8678]/90"),children:(0,Ee.jsx)("svg",{className:"w-6 h-6 transition-transform duration-200 ".concat(_t?"rotate-45":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),(0,Ee.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 h-20 flex items-center p-3",children:(0,Ee.jsxs)("div",{className:"flex space-x-3 w-full",children:[(0,Ee.jsx)("button",{onClick:()=>pt(!0),className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)($l,{className:"w-5 h-5"})}),(0,Ee.jsx)("button",{onClick:async()=>{const e=((null===i||void 0===i?void 0:i.phone)||"").replace(/[^0-9+]/g,"");if(e){try{await navigator.clipboard.writeText(e)}catch(t){}window.location.href="tel:".concat(e)}else alert("\uc804\ud654\ubc88\ud638 \uc815\ubcf4\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")},className:"flex-1 py-3 px-4 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"\ubb38\uc758\ud558\uae30"}),(0,Ee.jsxs)("button",{onClick:async()=>{if(je)return void alert("API \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud574 \uc784\uc2dc \uc815\ubcf4\ub97c \ud45c\uc2dc \uc911\uc785\ub2c8\ub2e4. \uc2e4\uc81c \ub370\uc774\ud130\uc5d0\uc11c\ub9cc \ucc1c\ud558\uae30\uac00 \uac00\ub2a5\ud569\ub2c8\ub2e4.");const e=!le;ce(e);try{pe&&t&&(e?(await Tl(pe,"childcare",String(t),null===i||void 0===i?void 0:i.name,{arcode:Ft}),me(!0),setTimeout(()=>me(!1),700)):await Il(pe,"childcare",String(t)))}catch(yd){ce(!e)}},className:"flex-1 py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2 ".concat(le?"bg-red-50 text-red-600 hover:bg-red-100":"bg-[#fb8678] text-white hover:bg-[#fb8678]/90"),children:[(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)(ml,{className:"w-5 h-5 ".concat(le?"fill-current animate-heart-bounce":"")}),he&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("div",{className:"heart-particle left-[-14px] text-red-400",children:"\u2764"}),(0,Ee.jsx)("div",{className:"heart-particle left-0 text-pink-400",style:{animationDelay:"60ms"},children:"\u2764"}),(0,Ee.jsx)("div",{className:"heart-particle left-[14px] text-rose-400",style:{animationDelay:"120ms"},children:"\u2764"})]})]}),(0,Ee.jsx)("span",{children:le?"\ucc1c\uc644\ub8cc":"\ucc1c\ud558\uae30"})]})]})}),(0,Ee.jsx)("div",{className:"h-20"}),gt&&(0,Ee.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>pt(!1)}),(0,Ee.jsx)("div",{className:"absolute left-0 right-0 bottom-0 bg-white rounded-t-2xl shadow-xl border-t border-gray-200 p-4 will-change-transform ".concat(wt?"transition-none":"transition-transform duration-200"),style:{transform:"translate3d(0, ".concat(yt,"px, 0)")},onTouchMove:e=>{if(!wt||null===xt)return;const t=e.changedTouches[0].clientY-xt;t>0&&bt(t)},onTouchEnd:()=>{if(yt>60)return pt(!1),jt(!1),void requestAnimationFrame(()=>{bt(0),vt(null)});jt(!1),requestAnimationFrame(()=>{bt(0),vt(null)})},children:(0,Ee.jsxs)("div",{className:"animate-[sheetSlideUp_0.28s_cubic-bezier(0.22,0.61,0.36,1)]",children:[(0,Ee.jsx)("div",{className:"w-full flex justify-center py-2 mb-1",onTouchStart:e=>{const t=e.changedTouches[0];jt(!0),vt(t.clientY),bt(0)},children:(0,Ee.jsx)("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),(0,Ee.jsxs)("div",{className:"mb-2",children:[(0,Ee.jsx)("div",{className:"text-base font-semibold text-black pl-1 pb-1",children:"\ub9c1\ud06c \uacf5\uc720"}),(0,Ee.jsx)("div",{className:"mt-1 text-xs text-gray-600 break-all bg-gray-50 rounded-lg px-3 py-2 border border-gray-100",children:Et()})]}),(0,Ee.jsxs)("div",{className:"flex gap-3 py-2 overflow-x-auto scrollbar-hide",children:[(0,Ee.jsxs)("button",{onClick:async()=>{const e=window.Kakao;try{var t;if(null!==e&&void 0!==e&&null!==(t=e.isInitialized)&&void 0!==t&&t.call(e)&&null!==e&&void 0!==e&&e.Share)return await e.Share.sendDefault({objectType:"feed",content:{title:"\ub9d8\ud53d \xb7 \uc5b4\ub9b0\uc774\uc9d1",description:(null===i||void 0===i?void 0:i.name)||"\uc5b4\ub9b0\uc774\uc9d1 \uc815\ubcf4 \uacf5\uc720",imageUrl:"".concat(window.location.origin,"/headericon.png"),link:{mobileWebUrl:Et(),webUrl:Et()}}}),void pt(!1)}catch(n){}await At(),pt(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-yellow-300 flex items-center justify-center text-black font-bold",children:"\uce74"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\uce74\uce74\uc624\ud1a1"})]}),(0,Ee.jsxs)("button",{onClick:()=>{const e="\ub9d8\ud53d \xb7 ".concat((null===i||void 0===i?void 0:i.name)||"\uc5b4\ub9b0\uc774\uc9d1"," \uc815\ubcf4 \uacf5\uc720"),t="".concat((null===i||void 0===i?void 0:i.name)||"\uc5b4\ub9b0\uc774\uc9d1"," \uc815\ubcf4\ub97c \uacf5\uc720\ud569\ub2c8\ub2e4.\n\n").concat(Et());window.location.href="mailto:?subject=".concat(encodeURIComponent(e),"&body=").concat(encodeURIComponent(t)),pt(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-red-500 text-white flex items-center justify-center font-bold",children:"G"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"Gmail"})]}),(0,Ee.jsxs)("button",{onClick:()=>{const e="".concat((null===i||void 0===i?void 0:i.name)||"\uc5b4\ub9b0\uc774\uc9d1"," \uc815\ubcf4\ub97c \uacf5\uc720\ud569\ub2c8\ub2e4."),t=Et(),n="https://band.us/plugin/share?body=".concat(encodeURIComponent(e),"%0A").concat(encodeURIComponent(t),"&route=").concat(encodeURIComponent(t));window.open(n,"_blank"),pt(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-green-500 text-white flex items-center justify-center font-bold",children:"B"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"BAND"})]}),(0,Ee.jsxs)("button",{onClick:()=>{const e="".concat((null===i||void 0===i?void 0:i.name)||"\uc5b4\ub9b0\uc774\uc9d1"," \uc815\ubcf4\ub97c \uacf5\uc720\ud569\ub2c8\ub2e4.\n\n").concat(Et());window.location.href="sms:?&body=".concat(encodeURIComponent(e)),pt(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-blue-500 text-white flex items-center justify-center text-[11px] font-bold",children:"SMS"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\ubb38\uc790"})]}),(0,Ee.jsxs)("button",{onClick:Pt,className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-gray-800 text-white flex items-center justify-center font-bold",children:"\ud83d\udd17"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\ub9c1\ud06c\ubcf5\uc0ac"})]}),(0,Ee.jsxs)("button",{onClick:async()=>{await At(),pt(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-gray-200 text-gray-800 flex items-center justify-center text-lg font-bold",children:"\u22ef"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\ub354\ubcf4\uae30"})]})]})]})})]}),Le&&(0,Ee.jsxs)("div",{className:"fixed inset-0 bg-white z-50 flex flex-col overflow-hidden",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 bg-white flex-shrink-0",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ee.jsx)("button",{onClick:()=>Re(!1),className:"p-2 hover:bg-gray-100 rounded-full",children:(0,Ee.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),(0,Ee.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"\uce6d\ucc2c \uc0ac\uc9c4"})]}),(0,Ee.jsxs)("div",{className:"text-sm text-gray-500",children:[Lt.reduce((e,t)=>{var n;return e+((null===(n=t.images)||void 0===n?void 0:n.length)||0)},0),"\uc7a5"]})]}),(0,Ee.jsxs)("div",{className:"flex-1 p-4 overflow-y-auto",children:[(0,Ee.jsx)("div",{className:"grid grid-cols-3 gap-3",children:Lt.map((e,t)=>(e.images||[]).map((n,s)=>{var r,a;return(0,Ee.jsxs)("div",{className:"aspect-square bg-gray-100 rounded-lg relative overflow-hidden group cursor-zoom-in",onClick:()=>{const n=Lt.slice(0,Lt.indexOf(e)).reduce((e,t)=>{var n;return e+((null===(n=t.images)||void 0===n?void 0:n.length)||0)},0);dt(Rt,n+s,e.id,t)},children:[(0,Ee.jsx)("img",{src:n,alt:"\uce6d\ucc2c \uc774\ubbf8\uc9c0 ".concat(s+1),className:"w-full h-full object-cover"}),(0,Ee.jsxs)("div",{className:"absolute top-2 right-2 bg-black bg-opacity-50 text-white text-xs px-1 py-0.5 rounded",children:[e.rating,"\uc810"]}),(0,Ee.jsxs)("div",{className:"absolute bottom-2 left-2 right-2 bg-black bg-opacity-50 text-white text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity",children:[(0,Ee.jsx)("div",{className:"font-medium",children:(null===(r=e.user_profile)||void 0===r?void 0:r.nickname)||(null===(a=e.user_profile)||void 0===a?void 0:a.full_name)||"\uc775\uba85"}),(0,Ee.jsx)("div",{className:"text-[10px] opacity-75",children:(()=>{const t=new Date(e.created_at),n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(n,".").concat(s,".").concat(r)})()})]})]},"".concat(t,"-").concat(s))}))}),0===Lt.reduce((e,t)=>{var n;return e+((null===(n=t.images)||void 0===n?void 0:n.length)||0)},0)&&(0,Ee.jsxs)("div",{className:"flex flex-col items-center justify-center h-64 text-gray-500",children:[(0,Ee.jsx)(Sl,{className:"w-16 h-16 mb-4 text-gray-300"}),(0,Ee.jsx)("p",{className:"text-lg font-medium",children:"\ub4f1\ub85d\ub41c \uc0ac\uc9c4\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,Ee.jsx)("p",{className:"text-sm",children:"\uccab \ubc88\uc9f8 \uce6d\ucc2c \uc0ac\uc9c4\uc744 \uc62c\ub824\ubcf4\uc138\uc694!"})]})]})]}),Oe&&(0,Ee.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center touch-pan-y",onTouchStart:e=>{const t=e.touches[0];lt.current=t.clientX,ct.current=t.clientY},onTouchEnd:e=>{if(null===lt.current)return;const t=e.changedTouches[0].clientX-lt.current;Math.abs(t)>50&&(t>0?ut():ht()),lt.current=null,ct.current=null},onClick:e=>{e.target.closest(".image-viewer-menu-container")||He(!1)},children:[(0,Ee.jsx)("button",{onClick:()=>{De(!1),He(!1),Ve(null),st(!1),tt(!1)},className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white/10 text-white z-10","aria-label":"\ub2eb\uae30",children:(0,Ee.jsx)(gl,{className:"w-6 h-6"})}),Be?(()=>{const e=b.find(e=>e.id===Be.reviewId);return e&&re&&e.user_id===re?null:(0,Ee.jsxs)("div",{className:"absolute top-4 right-16 image-viewer-menu-container z-10",children:[(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),He(!We)},className:"p-2 rounded-full hover:bg-white/10 text-white","aria-label":"\uc635\uc158 \uba54\ub274",children:(0,Ee.jsx)(Gc,{className:"w-6 h-6"})}),We&&(0,Ee.jsx)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),tt(!1),$e("wrong_purpose"),Ge(""),Ke(!0),He(!1)},className:"w-full px-4 py-2 text-center text-sm text-red-600 hover:bg-red-50",children:"\uc2e0\uace0\ud558\uae30"})})]})})():(0,Ee.jsxs)("div",{className:"absolute top-4 right-16 image-viewer-menu-container z-10",children:[(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),He(!We)},className:"p-2 rounded-full hover:bg-white/10 text-white","aria-label":"\uc635\uc158 \uba54\ub274",children:(0,Ee.jsx)(Gc,{className:"w-6 h-6"})}),We&&(0,Ee.jsx)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),nt?(st(!0),tt(!1),$e("wrong_purpose")):(tt(!0),st(!1),$e("wrong_purpose")),Ge(""),Ke(!0),He(!1)},className:"w-full px-4 py-2 text-center text-sm text-red-600 hover:bg-red-50",children:"\uc2e0\uace0\ud558\uae30"})})]}),ze.length>1&&(0,Ee.jsx)("button",{onClick:ut,className:"absolute left-2 sm:left-4 p-3 rounded-full hover:bg-white/10 text-white","aria-label":"\uc774\uc804 \uc774\ubbf8\uc9c0",children:(0,Ee.jsx)(ll,{className:"w-7 h-7"})}),(0,Ee.jsxs)("div",{className:"max-w-full max-h-full",children:[(0,Ee.jsx)("img",{src:ze[Fe],alt:"\ub9ac\ubdf0 \uc804\uccb4 \uc774\ubbf8\uc9c0",className:"max-w-full max-h-[85vh] object-contain"}),ze.length>1&&(0,Ee.jsxs)("div",{className:"mt-3 text-center text-xs text-white/70",children:[Fe+1," / ",ze.length]})]}),ze.length>1&&(0,Ee.jsx)("button",{onClick:ht,className:"absolute right-2 sm:right-4 p-3 rounded-full hover:bg-white/10 text-white","aria-label":"\ub2e4\uc74c \uc774\ubbf8\uc9c0",children:(0,Ee.jsx)(cl,{className:"w-7 h-7"})})]}),Ye&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-4 max-w-lg w-full min-h-[500px] max-h-[95vh] flex flex-col",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ee.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:nt?"\uae09\uc2dd\uc0ac\uc9c4 \uc2e0\uace0":et?"\uac74\ubb3c\uc0ac\uc9c4 \uc2e0\uace0":"\uc0ac\uc9c4 \uc2e0\uace0"}),(0,Ee.jsx)("button",{onClick:()=>{Ke(!1),Ge(""),$e("wrong_purpose"),tt(!1),st(!1)},className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-6 h-6 text-gray-500"})})]}),(0,Ee.jsxs)("div",{className:"flex-1 overflow-y-auto mb-6",children:[(0,Ee.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:nt?"\uc774 \uae09\uc2dd\uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774\ub098 \uc0ac\uc9c4\uc774 \ub2e4\ub974\uac70\ub098 \ubd80\uc801\uc808\ud55c \uacbd\uc6b0 \uc2e0\uace0\ud574\uc8fc\uc138\uc694. \uad00\ub9ac\uc790\uac00 \ud655\uc778 \ud6c4 \uc870\uce58\ud558\uaca0\uc2b5\ub2c8\ub2e4.":et?"\uc774 \uac74\ubb3c\uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774\ub098 \uc0ac\uc9c4\uc774 \ub2e4\ub974\uac70\ub098 \ubd80\uc801\uc808\ud55c \uacbd\uc6b0 \uc2e0\uace0\ud574\uc8fc\uc138\uc694. \uad00\ub9ac\uc790\uac00 \ud655\uc778 \ud6c4 \uc870\uce58\ud558\uaca0\uc2b5\ub2c8\ub2e4.":"\uc120\ud0dd\ud55c \uc0ac\uc9c4\uc744 \uc2e0\uace0\ud569\ub2c8\ub2e4."}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc720\ud615"}),(0,Ee.jsx)("select",{value:Xe,onChange:e=>$e(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent",children:(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("option",{value:"wrong_purpose",children:"\uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774 \ub2e4\ub984"}),(0,Ee.jsx)("option",{value:"wrong_image",children:"\uc0ac\uc9c4\uc774 \ub2e4\ub984"}),(0,Ee.jsx)("option",{value:"inappropriate",children:"\ubd80\uc801\uc808\ud55c \ub0b4\uc6a9"}),(0,Ee.jsx)("option",{value:"other",children:"\uae30\ud0c0"})]})})]}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc0ac\uc720"}),(0,Ee.jsx)("textarea",{value:Je,onChange:e=>Ge(e.target.value),placeholder:nt?"\uae09\uc2dd\uc0ac\uc9c4\uc774 \uc65c \ubd80\uc801\uc808\ud55c\uc9c0 \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694. \uc608: \uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774 \ub2e4\ub974\uac70\ub098, \uc798\ubabb\ub41c \uc0ac\uc9c4\uc774 \uc62c\ub77c\uc654\uc2b5\ub2c8\ub2e4...":et?"\uac74\ubb3c\uc0ac\uc9c4\uc774 \uc65c \ubd80\uc801\uc808\ud55c\uc9c0 \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694. \uc608: \uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774 \ub2e4\ub974\uac70\ub098, \uc798\ubabb\ub41c \uc0ac\uc9c4\uc774 \uc62c\ub77c\uc654\uc2b5\ub2c8\ub2e4...":"\uc0ac\uc9c4\uc774 \uc65c \ubd80\uc801\uc808\ud55c\uc9c0 \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694. \uc608: \uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774 \ub2e4\ub974\uac70\ub098, \uc798\ubabb\ub41c \uc0ac\uc9c4\uc774 \uc62c\ub77c\uc654\uc2b5\ub2c8\ub2e4...",rows:6,maxLength:500,className:"w-full px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent resize-none text-sm"}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 font-semibold mt-1",children:[(0,Ee.jsx)("span",{children:"\ucd5c\ub300 \ud14d\uc2a4\ud2b8 \uae38\uc774"}),(0,Ee.jsxs)("span",{children:[Je.length,"/500"]})]})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3 flex-shrink-0",children:[(0,Ee.jsx)("button",{onClick:()=>{Ke(!1),Ge(""),$e("wrong_purpose"),tt(!1)},className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(ie)if(nt)try{Qe(!0);const e=ze[Fe]||null,n={reported_image_url:e,facility_address:(null===i||void 0===i?void 0:i.address)||null,report_source:"meal_tab"},{error:s}=await Se.supabase.from("reports").insert({reporter_id:ie,report_reason:Je.trim(),report_type:Xe,status:"pending",target_type:"meal_image",target_id:null,facility_type:"childcare",facility_code:t||null,facility_name:(null===i||void 0===i?void 0:i.name)||null,admin_notes:JSON.stringify(n)});if(s)throw s;Ke(!1),Ge(""),$e("wrong_purpose"),st(!1),alert("\uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(d){console.error("\uae09\uc2dd \uc0ac\uc9c4 \uc2e0\uace0 \uc624\ub958:",d),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{Qe(!1)}else if(et)try{Qe(!0);const e=ze[Fe]||null,n={reported_image_url:e,facility_address:(null===i||void 0===i?void 0:i.address)||null},{error:s}=await Se.supabase.from("reports").insert({reporter_id:ie,report_reason:Je.trim(),report_type:Xe,status:"pending",target_type:"building_image",target_id:null,facility_type:"childcare",facility_code:t||null,facility_name:(null===i||void 0===i?void 0:i.name)||null,admin_notes:JSON.stringify(n)});if(s)throw s;Ke(!1),Ge(""),$e("wrong_purpose"),tt(!1),alert("\uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(d){console.error("\uac74\ubb3c\uc0ac\uc9c4 \uc2e0\uace0 \uc624\ub958:",d),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{Qe(!1)}else if(Be)try{Qe(!0);const e=ze[Fe]||null,n={reported_image_url:e,facility_address:(null===i||void 0===i?void 0:i.address)||null},{error:s}=await Se.supabase.from("reports").insert({reporter_id:ie,report_reason:Je.trim(),report_type:Xe,status:"pending",target_type:"childcare_review_image",target_id:Be.reviewId,facility_type:"childcare",facility_code:t||null,facility_name:(null===i||void 0===i?void 0:i.name)||null,admin_notes:JSON.stringify(n)});if(s)throw s;Ke(!1),Ge(""),$e("wrong_purpose"),He(!1),alert("\uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(d){console.error("\uc774\ubbf8\uc9c0 \uc2e0\uace0 \uc624\ub958:",d),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{Qe(!1)}else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")},disabled:Ze||!Je.trim(),className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:Ze?"\uc2e0\uace0 \uc911...":"\uc2e0\uace0\ud558\uae30"})]})]})}),fe&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsx)("div",{className:"bg-white rounded-2xl max-w-sm w-full mx-4 animate-[modalSlideUp_0.3s_cubic-bezier(0.22,0.61,0.36,1)]",children:(0,Ee.jsxs)("div",{className:"p-6",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ee.jsxs)("div",{className:"flex items-center",children:[(0,Ee.jsx)("div",{className:"w-10 h-10 bg-[#fb8678]/10 rounded-full flex items-center justify-center mr-3",children:(0,Ee.jsx)(Wc,{className:"w-5 h-5 text-[#fb8678]"})}),(0,Ee.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\uc815\ubcf4 \ucd9c\ucc98"})]}),(0,Ee.jsx)("button",{onClick:()=>ge(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,Ee.jsx)(gl,{className:"w-5 h-5 text-gray-500"})})]}),(0,Ee.jsxs)("div",{className:"space-y-4",children:[(0,Ee.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4",children:[(0,Ee.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Ee.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mr-2",children:(0,Ee.jsx)("span",{className:"text-white text-xs font-bold",children:"i"})}),(0,Ee.jsx)("span",{className:"text-sm font-semibold text-blue-800",children:"\uc5b4\ub9b0\uc774\uc9d1 \uc815\ubcf4\uacf5\uac1c\ud3ec\ud138"})]}),(0,Ee.jsxs)("p",{className:"text-xs text-blue-700 leading-relaxed mb-3",children:["\uc774 \uc5b4\ub9b0\uc774\uc9d1 \uc815\ubcf4\ub294 ",(0,Ee.jsx)("strong",{children:"\uc5b4\ub9b0\uc774\uc9d1 \uc815\ubcf4\uacf5\uac1c\ud3ec\ud138"}),"\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uacf5\uc2dd API\ub97c \ud1b5\ud574 \uc218\uc9d1\ub41c \ub370\uc774\ud130\uc785\ub2c8\ub2e4."]}),(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-xs font-medium text-blue-900",children:"\uc815\ud655\ud55c \uc815\ubcf4"}),(0,Ee.jsx)("p",{className:"text-[10px] text-blue-600",children:"\ubcf4\uac74\ubcf5\uc9c0\ubd80\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uacf5\uc2dd \ub370\uc774\ud130"})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-xs font-medium text-blue-900",children:"\uc2e4\uc2dc\uac04 \uc5c5\ub370\uc774\ud2b8"}),(0,Ee.jsx)("p",{className:"text-[10px] text-blue-600",children:"\uc815\uae30\uc801\uc73c\ub85c \ucd5c\uc2e0 \uc815\ubcf4\ub85c \uac31\uc2e0"})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-xs font-medium text-blue-900",children:"\uc2e0\ub8b0\ud560 \uc218 \uc788\ub294 \ucd9c\ucc98"}),(0,Ee.jsx)("p",{className:"text-[10px] text-blue-600",children:"\uc815\ubd80\uae30\uad00\uc5d0\uc11c \uac80\uc99d\ub41c \uc815\ubcf4"})]})]})]}),(0,Ee.jsx)("div",{className:"bg-gray-50 rounded-xl p-4",children:(0,Ee.jsxs)("p",{className:"text-xs text-gray-600 text-center",children:["\ub354 \uc790\uc138\ud55c \uc815\ubcf4\ub294 ",(0,Ee.jsx)("strong",{children:"\uc5b4\ub9b0\uc774\uc9d1 \uc815\ubcf4\uacf5\uac1c\ud3ec\ud138"})," \uacf5\uc2dd \uc0ac\uc774\ud2b8\uc5d0\uc11c \ud655\uc778\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]})})]}),(0,Ee.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,Ee.jsx)("button",{onClick:()=>ge(!1),className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:"\ud655\uc778"}),(0,Ee.jsx)("button",{onClick:()=>{window.open("https://info.childcare.go.kr/info_html5/main.jsp","_blank"),ge(!1)},className:"flex-1 px-4 py-3 bg-[#fb8678] text-white rounded-xl font-medium hover:bg-[#e67567] transition-colors",children:"\uc0ac\uc774\ud2b8 \ubc29\ubb38"})]})]})})})]});var Vt};const ld=new class{constructor(){this.supabase=Se.supabase,this.bucketName="playground-detail-cache",this.cacheExpiryDays=7}detailPath(e){return"details/".concat(e,"/latest.json")}snapshotPath(e,t){return"details/".concat(e,"/").concat(t,".json")}async getCachedDetail(e){try{const t=this.detailPath(e);console.log("\ud83d\udd0d \ub180\uc774\uc2dc\uc124 \uce90\uc2dc \uc870\ud68c \uc2dc\uc791: ".concat(this.bucketName,"/").concat(t));const{data:n,error:s}=await this.supabase.storage.from(this.bucketName).list("details/".concat(e));if(console.log("\ud83d\udcc1 \ud3f4\ub354 \ub0b4 \ud30c\uc77c \ubaa9\ub85d:",null===n||void 0===n?void 0:n.map(e=>e.name)),s||!n||0===n.length)return console.log("\ud83d\udcc1 Storage\uc5d0 \ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc5c6\uc74c: ".concat(e)),null;const r=n.find(e=>"latest.json"===e.name);if(!r)return console.log("\ud83d\udcc1 latest.json \ud30c\uc77c \uc5c6\uc74c: ".concat(e)),console.log("\ud83d\udcc1 \uc0ac\uc6a9 \uac00\ub2a5\ud55c \ud30c\uc77c:",n.map(e=>e.name)),null;const a=new Date(r.updated_at).getTime(),i=(Date.now()-a)/864e5;if(i>this.cacheExpiryDays)return console.log("\u23f0 \ud30c\uc77c \uba54\ud0c0\ub370\uc774\ud130 \uae30\uc900 \uce90\uc2dc \ub9cc\ub8cc: ".concat(e," (").concat(i.toFixed(1),"\uc77c \uacbd\uacfc)")),null;console.log("\ud83d\udcc4 latest.json \ud30c\uc77c \ub2e4\uc6b4\ub85c\ub4dc \uc2dc\uc791: ".concat(t," (").concat(i.toFixed(1),"\uc77c \uc804)"));const{data:o,error:l}=await this.supabase.storage.from(this.bucketName).download(t);if(l||!o)return console.log("\ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc77d\uae30 \uc2e4\ud328: ".concat(e)),null;const c=await o.text(),d=JSON.parse(c);return console.log("\u2705 \ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc0ac\uc6a9: ".concat(e," (").concat(i.toFixed(1),"\uc77c \uc804)")),d.data}catch(t){return console.error("\ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc870\ud68c \uc624\ub958:",t),null}}async saveDetailCache(e,t){try{const n=new Date,s=n.toISOString().split("T")[0],r={meta:{playgroundId:e,lastSyncedAt:n.toISOString(),apiVersion:"1.0"},data:t},a=this.detailPath(e),i=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),{error:o}=await this.supabase.storage.from(this.bucketName).upload(a,i,{cacheControl:"3600",upsert:!0});if(o)throw o;const l=this.snapshotPath(e,s),{error:c}=await this.supabase.storage.from(this.bucketName).upload(l,i,{cacheControl:"3600",upsert:!0});c&&console.warn("\uc2a4\ub0c5\uc0f7 \uc800\uc7a5 \uc2e4\ud328:",c),console.log("\ud83d\udcbe \ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc800\uc7a5 \uc644\ub8cc: ".concat(e))}catch(n){throw console.error("\ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc800\uc7a5 \uc624\ub958:",n),n}}async getCacheMetadata(e){try{const t="details/".concat(e),{data:n,error:s}=await this.supabase.storage.from(this.bucketName).list(t,{limit:1,sortBy:{column:"updated_at",order:"desc"}});if(s||!n||0===n.length)return null;const r=n[0],a=new Date(r.updated_at),i=(Date.now()-a.getTime())/864e5;return{playgroundId:e,lastUpdated:r.updated_at,filePath:"".concat(t,"/").concat(r.name),isExpired:i>this.cacheExpiryDays}}catch(t){return console.error("\ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uba54\ud0c0\ub370\uc774\ud130 \uc870\ud68c \uc624\ub958:",t),null}}async deleteDetailCache(e){try{const t="details/".concat(e),{data:n}=await this.supabase.storage.from(this.bucketName).list(t);if(!n||0===n.length)return void console.log("\uc0ad\uc81c\ud560 \ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc5c6\uc74c: ".concat(e));const s=n.map(e=>"".concat(t,"/").concat(e.name)),{error:r}=await this.supabase.storage.from(this.bucketName).remove(s);if(r)throw r;console.log("\ud83d\uddd1\ufe0f \ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc0ad\uc81c \uc644\ub8cc: ".concat(e," (").concat(s.length,"\uac1c \ud30c\uc77c)"))}catch(t){throw console.error("\ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc0ad\uc81c \uc624\ub958:",t),t}}async cleanupOldDetailCache(){try{const{data:e}=await this.supabase.storage.from(this.bucketName).list("details",{limit:1e3});if(!e)return;const t=Date.now()-24*this.cacheExpiryDays*60*60*1e3,n=[];for(const s of e){new Date(s.updated_at).getTime()<t&&"latest.json"!==s.name&&n.push("details/".concat(s.name))}n.length>0&&(await this.supabase.storage.from(this.bucketName).remove(n),console.log("\ud83e\uddf9 \uc624\ub798\ub41c \ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc815\ub9ac \uc644\ub8cc: ".concat(n.length,"\uac1c \ud30c\uc77c \uc0ad\uc81c")))}catch(e){console.error("\ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc815\ub9ac \uc624\ub958:",e)}}async getDetailCacheStats(){try{const{data:e}=await this.supabase.storage.from(this.bucketName).list("details",{limit:1e3});if(!e)return{totalDetails:0,validCaches:0,expiredCaches:0,totalFiles:0};const t=e.filter(e=>"latest.json"===e.name),n=Date.now()-24*this.cacheExpiryDays*60*60*1e3;let s=0,r=0;for(const a of t){new Date(a.updated_at).getTime()>n?s++:r++}return{totalDetails:t.length,validCaches:s,expiredCaches:r,totalFiles:e.length}}catch(e){return console.error("\ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \ud1b5\uacc4 \uc870\ud68c \uc624\ub958:",e),{totalDetails:0,validCaches:0,expiredCaches:0,totalFiles:0}}}},cd="mompick:lastPlaygroundSelection",dd=()=>{var e,t,s,a,i,o,l,c,d,u,h;const{playgroundId:m}=se(),[f]=Ce(),g=ne(),[p,x]=(0,r.useState)(null),[v,y]=(0,r.useState)(!0),[b,w]=(0,r.useState)(null),[j,_]=(0,r.useState)("basic"),[N,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(!1),[E,P]=(0,r.useState)(null),[A,T]=(0,r.useState)(!1),[I,M]=(0,r.useState)("\uc804\uccb4"),[L,R]=(0,r.useState)(!1),[O,D]=(0,r.useState)([]),[z,U]=(0,r.useState)(null),[F,q]=(0,r.useState)(new Set),[B,V]=(0,r.useState)(!1),[W,H]=(0,r.useState)(!1),[Y,K]=(0,r.useState)(null),[J,G]=(0,r.useState)(0),[X,$]=(0,r.useState)(!1),[Z,Q]=(0,r.useState)(!1),[ee,te]=(0,r.useState)([]),[re,ae]=(0,r.useState)(0),[ie,oe]=(0,r.useState)(null),[le,ce]=(0,r.useState)(!1),[de,ue]=(0,r.useState)(!1),[he,me]=(0,r.useState)(""),[fe,ge]=(0,r.useState)("wrong_purpose"),[pe,xe]=(0,r.useState)(!1),[ve,ye]=(0,r.useState)(!1),be=(0,r.useRef)(null),we=(0,r.useRef)(null),je=(0,r.useRef)(0),[_e,Ne]=(0,r.useState)(null),[ke,Pe]=(0,r.useState)(null),[Te,Ie]=(0,r.useState)(null),[Me,Le]=(0,r.useState)(!1),[Re,Oe]=(0,r.useState)(null),[De,ze]=(0,r.useState)(""),[Ue,Fe]=(0,r.useState)(!1),[qe,Be]=(0,r.useState)(!1),[Ve,We]=(0,r.useState)(""),[He,Ye]=(0,r.useState)("spam"),[Ke,Je]=(0,r.useState)(!1),[Ge,Xe]=(0,r.useState)(!1),[$e,Ze]=(0,r.useState)(null),[Qe,et]=(0,r.useState)(null),[tt,nt]=(0,r.useState)([]),[st,rt]=(0,r.useState)(0),[at,it]=(0,r.useState)(new Set),ot=(0,r.useMemo)(()=>{const e=[];for(const t of O){if(t.is_hidden)continue;const n=(null===t||void 0===t?void 0:t.images)||[];for(const s of n)e.push({id:s.id,image_url:s.image_url,rating:Number((null===t||void 0===t?void 0:t.rating)||0)})}return e},[O]);(0,r.useEffect)(()=>(document.body.style.overflow=N?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[N]),(0,r.useEffect)(()=>{document.body.style.overflow=W?"hidden":"unset"},[W]);const lt=(0,r.useMemo)(()=>{if(!m)return"";try{return decodeURIComponent(m)}catch(e){return m}},[m]),ct=(0,r.useMemo)(()=>{try{return window.sessionStorage.getItem(cd)}catch(e){return console.warn("[PlaygroundDetail] \uc138\uc158 \ub370\uc774\ud130\ub97c \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.",e),null}},[lt]);(0,r.useEffect)(()=>{(async()=>{try{var e;const{data:{user:t}}=await Se.supabase.auth.getUser(),n=null!==(e=null===t||void 0===t?void 0:t.id)&&void 0!==e?e:null;if(P(n),Pe(n),n&&lt){const e=await Ml(n,"playground",lt);S(e)}else S(!1);if(n){const{data:e,error:t}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",n).single();!t&&e&&Ie(e.id)}}catch(t){P(null),Pe(null),Ie(null),S(!1)}})()},[lt]);const dt=(0,r.useMemo)(()=>{if(!ct)return null;try{var e,t;const n=JSON.parse(ct);if(!n||"object"!==typeof n)return null;const s=String(null!==(e=null!==(t=n.id)&&void 0!==t?t:n.code)&&void 0!==e?e:"");return s&&s===lt?n:null}catch(n){return console.warn("[PlaygroundDetail] \uc138\uc158 \ub370\uc774\ud130 \ud30c\uc2f1 \uc2e4\ud328:",n),null}},[lt,ct]),ut=(0,r.useMemo)(()=>f.toString(),[f]);(0,r.useEffect)(()=>{if(!lt)return x(null),y(!1),void w("\ub180\uc774\uc2dc\uc124 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc5b4\uc694.");let e=!0;y(!0),w(null),dt&&!p&&x({map:dt,raw:null});return(async()=>{try{var t,n,s,r;const o=await ld.getCachedDetail(lt);if(o&&(console.log("\u2705 \ub180\uc774\uc2dc\uc124 \uc0c1\uc138 \uc815\ubcf4 \uce90\uc2dc \uc0ac\uc6a9:",lt),e))return x(o),void y(!1);const l=(f.get("regionCode")||"").trim(),c=(f.get("sggCode")||"").trim(),d=(f.get("sidoCode")||"").trim(),u=[];if(l){var a;const e=await Ic(l);null!==e&&void 0!==e&&null!==(a=e.items)&&void 0!==a&&a.length&&u.push(e.items)}if(!u.length&&c){const e=await Mc({sggCode:c,suppressLog:!0});e.items.length&&u.push(e.items)}if(!u.length&&d){const e=await async function(e){const t=String(null!==e&&void 0!==e?e:"").trim().padStart(2,"0");if(!t||"00"===t)return[];try{const e=(await Rc("regions",1e3)).filter(e=>/^\d{10}$/.test(e)&&e.startsWith(t));if(0===e.length)return console.warn("[PlaygroundCache] \uc2dc\ub3c4 \ucf54\ub4dc\uc5d0 \ud574\ub2f9\ud558\ub294 \uc9c0\uc5ed\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.",{sidoCode:t}),[];console.log("[PlaygroundCache] \uc2dc\ub3c4 \ub2e8\uc704 \uce90\uc2dc \ub85c\ub4dc \uc2dc\uc791",{sidoCode:t,regionCount:e.length});const n=[];let s=0;for(;s<e.length;){const t=e.slice(s,s+4),r=await Promise.all(t.map(async e=>{const t="regions/".concat(e,"/latest.json");try{var n;const s=await Uc(t),r=Tc(null!==(n=null===s||void 0===s?void 0:s.items)&&void 0!==n?n:null===s||void 0===s?void 0:s.data);return console.log("[PlaygroundCache] \uc2dc\ub3c4 \uce90\uc2dc \ub85c\ub4dc",{code:e,count:r.length}),r}catch(b){return console.warn("[PlaygroundCache] \uc2dc\ub3c4 \uce90\uc2dc \ub85c\ub4dc \uc2e4\ud328",{path:t,error:b}),[]}}));for(const e of r)Array.isArray(e)&&n.push(...e);s+=4}return console.log("[PlaygroundCache] \uc2dc\ub3c4 \ub2e8\uc704 \uce90\uc2dc \ub85c\ub4dc \uc644\ub8cc",{sidoCode:t,total:n.length}),n}catch(b){return console.error("[PlaygroundCache] \uc2dc\ub3c4 \ub2e8\uc704 \uce90\uc2dc \ub85c\ub529 \uc624\ub958:",{sidoCode:t,error:b}),[]}}(d);e.length&&u.push(e)}if(!u.length){const e=await Fc();e.length&&u.push(e)}let h=null;const m=null===dt||void 0===dt||null===(t=dt.name)||void 0===t?void 0:t.trim();for(const e of u){const t=e.find(e=>{var t;return String(null!==(t=e.pfctSn)&&void 0!==t?t:"").trim()===lt})||e.find(e=>{var t;return String(null!==(t=e.pfctNm)&&void 0!==t?t:"").trim()===lt})||(m?e.find(e=>{var t;return String(null!==(t=e.pfctNm)&&void 0!==t?t:"").trim()===m}):void 0);if(t){h=t;break}}if(!h)throw new Error("\uc120\ud0dd\ud55c \ub180\uc774\uc2dc\uc124 \uc815\ubcf4\ub97c \ucc3e\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.");const g=await Lc(h),p=(0,Ae.A)((0,Ae.A)({},g),{},{rating:null!==(n=null===dt||void 0===dt?void 0:dt.rating)&&void 0!==n?n:g.rating,distance:null!==(s=null===dt||void 0===dt?void 0:dt.distance)&&void 0!==s?s:g.distance,image:null!==(r=null===dt||void 0===dt?void 0:dt.image)&&void 0!==r?r:g.image}),v={map:p,raw:h};if(e){x(v);try{window.sessionStorage.setItem(cd,JSON.stringify(p))}catch(i){console.warn("[PlaygroundDetail] \uc138\uc158 \uc800\uc7a5 \uc2e4\ud328:",i)}ld.saveDetailCache(lt,v).catch(e=>{console.warn("[PlaygroundDetail] \uce90\uc2dc \uc800\uc7a5 \uc2e4\ud328:",e)})}}catch(o){console.error("[PlaygroundDetail] \ub85c\ub529 \uc624\ub958:",o),e&&(w("\ub180\uc774\uc2dc\uc124 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc5b4\uc694."),dt||x(null))}finally{e&&y(!1)}})(),()=>{e=!1}},[lt,ut,ct]),(0,r.useEffect)(()=>{p&&console.log("[PlaygroundDetail] \ud604\uc7ac \ub85c\ub4dc\ub41c \ub370\uc774\ud130",{map:p.map,raw:p.raw})},[p]),(0,r.useEffect)(()=>{(async()=>{if(lt)try{const{data:e,error:t}=await Se.supabase.from("playground_custom_info").select("building_images").eq("playground_id",lt).eq("is_active",!0).maybeSingle();if(t)return console.warn("[PlaygroundDetail] \uac74\ubb3c \uc0ac\uc9c4 \uc870\ud68c \uc2e4\ud328:",t),void nt([]);e&&Array.isArray(e.building_images)&&e.building_images.length>0?(nt(e.building_images),rt(0)):nt([])}catch(b){console.error("[PlaygroundDetail] \uac74\ubb3c \uc0ac\uc9c4 \ub85c\ub4dc \uc624\ub958:",b),nt([])}})()},[lt]);const ht=()=>{x(dt?{map:dt,raw:null}:null),y(!0),w(null),_("basic")},mt=(null===p||void 0===p||null===(e=p.map)||void 0===e?void 0:e.name)||"\ub180\uc774\uc2dc\uc124 \uc0c1\uc138\ubcf4\uae30",ft=((0,r.useMemo)(()=>{var e,t;if(!p)return[];const n=[p.map.establishment||null,p.map.officeedu||null,(null===(e=p.raw)||void 0===e?void 0:e.instlPlaceCdNm)||(null===(t=p.raw)||void 0===t?void 0:t.instlPlaceCd)||null],s=new Set;return n.filter(e=>"string"===typeof e&&e.trim().length>0).filter(e=>{const t=e.trim();return!s.has(t)&&(s.add(t),!0)})},[p]),(0,r.useMemo)(()=>{if("undefined"===typeof window)return"";try{return window.location.href}catch(e){return""}},[lt,ut])),gt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0;e&&0!==e.length&&(te(e),ae(Math.min(Math.max(t,0),e.length-1)),Q(!0),oe(void 0!==n&&void 0!==s?{reviewId:n,reviewIndex:s}:null),ce(!1))},pt=()=>{0!==ee.length&&ae(e=>(e-1+ee.length)%ee.length)},xt=()=>{0!==ee.length&&ae(e=>(e+1)%ee.length)},vt=async()=>{if(ft)try{await navigator.clipboard.writeText(ft),alert("\ub9c1\ud06c\uac00 \ud074\ub9bd\ubcf4\ub4dc\uc5d0 \ubcf5\uc0ac\ub418\uc5c8\uc2b5\ub2c8\ub2e4!")}catch(b){console.error("\ub9c1\ud06c \ubcf5\uc0ac \uc2e4\ud328:",b)}finally{H(!1)}},yt=async()=>{if(ft){try{if(navigator.share)return await navigator.share({title:mt,text:"".concat(mt," \uc0c1\uc138 \uc815\ubcf4\ub97c \ud655\uc778\ud574\ubcf4\uc138\uc694!"),url:ft}),void H(!1)}catch(b){console.error("\uacf5\uc720 \uc2e4\ud328:",b)}await vt()}else H(!1)},bt=[{id:"basic",icon:$o,label:"\uc0c1\uc138"},{id:"praise",icon:ml,label:"\uce6d\ucc2c"}],wt=null!==(t=null===z||void 0===z?void 0:z.total_reviews)&&void 0!==t?t:0,jt=null!==(s=null===z||void 0===z?void 0:z.average_rating)&&void 0!==s?s:0,_t=0===wt?"0":(Math.round(10*jt)/10).toFixed(1),Nt=null!==(a=null===z||void 0===z?void 0:z.rating_distribution)&&void 0!==a?a:{5:0,4:0,3:0,2:0,1:0};if((0,r.useEffect)(()=>{let e=!1;return(async()=>{if(lt&&"praise"===j){R(!0);try{const[t,n]=await Promise.all([Wl(lt),Vl(lt,1,20)]);e||(U(t),D(n));try{if(E){const{data:{user:t}}=await Se.supabase.auth.getUser();if(t){const{data:s,error:r}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",t.id).single();if(!r&&s){const r=n.map(e=>e.id);if(r.length>0){const{data:a,error:i}=await Se.supabase.from("playground_review_helpful").select("review_id").eq("user_id",s.id).in("review_id",r);if(!i&&a&&!e){const e=new Set(a.map(e=>e.review_id));q(e)}const o=n.filter(e=>e.user_id===t.id).map(e=>e.id);if(o.length>0){const{data:t,error:n}=await Se.supabase.from("review_delete_requests").select("review_id").eq("review_type","playground").eq("requester_id",s.id).eq("status","pending").in("review_id",o);if(!n&&t&&!e){const e=new Set(t.map(e=>e.review_id));it(e)}}}}}}}catch(yd){console.error("\ub3c4\uc6c0\ub428 \ub9ac\ubdf0 \ub85c\ub4dc \uc624\ub958:",yd)}}catch(yd){e||(U({average_rating:0,total_reviews:0,rating_distribution:{1:0,2:0,3:0,4:0,5:0}}),D([]))}finally{e||R(!1)}}})(),()=>{e=!0}},[lt,E,j]),(0,r.useEffect)(()=>{const e=e=>{_e&&!e.target.closest(".review-menu-container")&&Ne(null)};return _e&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[_e]),v)return(0,Ee.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\ub180\uc774\uc2dc\uc124 \ubd88\ub7ec\uc624\ub294 \uc911\uc785\ub2c8\ub2e4"})]})});if(b&&!p)return(0,Ee.jsx)("div",{className:"flex min-h-screen items-center justify-center bg-gray-50 px-6",children:(0,Ee.jsxs)("div",{className:"w-full max-w-sm rounded-2xl bg-white p-8 text-center shadow-sm",children:[(0,Ee.jsx)("div",{className:"mx-auto flex h-14 w-14 items-center justify-center rounded-full bg-red-50",children:(0,Ee.jsx)(Vc,{className:"h-7 w-7 text-red-500"})}),(0,Ee.jsx)("h2",{className:"mt-4 text-lg font-semibold text-gray-900",children:"\ub180\uc774\uc2dc\uc124 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc5b4\uc694"}),(0,Ee.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:b}),(0,Ee.jsx)("button",{type:"button",onClick:ht,className:"mt-5 inline-flex w-full items-center justify-center rounded-full bg-[#fb8678] px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-[#e36d63]",children:"\ub2e4\uc2dc \uc2dc\ub3c4\ud558\uae30"})]})});if(!p)return null;const kt=async e=>{if(!E)return void alert("\ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9\ud574\uc8fc\uc138\uc694.");const t=F.has(e),s=new Set(F);t?s.delete(e):s.add(e),q(s),D(n=>n.map(n=>n.id===e?(0,Ae.A)((0,Ae.A)({},n),{},{helpful_count:(n.helpful_count||0)+(t?-1:1)}):n));try{var r;const t=await async function(e,t){try{const{data:{user:r},error:a}=await Se.supabase.auth.getUser();if(a||!r)throw new Error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const{data:i,error:o}=await Se.supabase.from("playground_reviews").select("user_id, helpful_count").eq("id",e).single();if(o)throw o;const{data:l,error:c}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",r.id).single();if(c||!l)throw new Error("\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const d=l.id,{data:u,error:h}=await Se.supabase.from("playground_review_helpful").select("id").eq("review_id",e).eq("user_id",d).maybeSingle();let m=!1;const f=!!u;if(h&&"PGRST116"!==h.code)throw h;if(u){const{error:t}=await Se.supabase.from("playground_review_helpful").delete().eq("review_id",e).eq("user_id",d);if(t)throw t;m=!1}else{const{error:t}=await Se.supabase.from("playground_review_helpful").insert({review_id:e,user_id:d});if(t)throw t;m=!0}const{count:g,error:p}=await Se.supabase.from("playground_review_helpful").select("*",{count:"exact",head:!0}).eq("review_id",e);if(p)return console.error("\ub3c4\uc6c0\ub428 \uce74\uc6b4\ud2b8 \uc870\ud68c \uc624\ub958:",p),{isHelpful:m,helpfulCount:g||0};if(await Se.supabase.from("playground_reviews").update({helpful_count:g||0}).eq("id",e),m&&!f)try{const{createReviewLikeNotification:s}=await Promise.resolve().then(n.bind(n,498)),{data:a,error:o}=await Se.supabase.from("profiles").select("full_name, nickname, profile_image_url").eq("auth_user_id",r.id).single();if(!o&&a){const{data:n,error:r}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",i.user_id).single();!r&&n&&d!==n.id&&await s(e,t,d,a.nickname||a.full_name,a.profile_image_url||"",n.id)}}catch(s){console.error("\ub180\uc774\uc2dc\uc124 \ub9ac\ubdf0 \uc88b\uc544\uc694 \uc54c\ub9bc \uc0dd\uc131 \uc624\ub958:",s)}return{isHelpful:m,helpfulCount:g||0}}catch(b){throw console.error("\ub180\uc774\uc2dc\uc124 \ub9ac\ubdf0 \ub3c4\uc6c0\ub428 \ud1a0\uae00 \uc624\ub958:",b),b}}(e,(null===p||void 0===p||null===(r=p.map)||void 0===r?void 0:r.name)||"\ub180\uc774\uc2dc\uc124");D(n=>n.map(n=>n.id===e?(0,Ae.A)((0,Ae.A)({},n),{},{helpful_count:t.helpfulCount}):n)),t.isHelpful?q(t=>new Set(t).add(e)):q(t=>{const n=new Set(t);return n.delete(e),n})}catch(b){console.error("\ub3c4\uc6c0\ub428 \ud1a0\uae00 \uc2e4\ud328:",b),q(F),D(n=>n.map(n=>n.id===e?(0,Ae.A)((0,Ae.A)({},n),{},{helpful_count:(n.helpful_count||0)+(t?1:-1)}):n)),alert("\ub3c4\uc6c0\ub428 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}};return(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Ee.jsxs)("div",{className:"border-b border-gray-200 bg-white shadow-sm",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,Ee.jsx)("button",{type:"button",onClick:()=>{const e=new URLSearchParams;e.set("type","playground");const t=f.get("regionCode"),n=f.get("sggCode"),s=f.get("sidoCode");t&&e.set("regionCode",t),n&&e.set("sggCode",n),s&&e.set("sidoCode",s),lt&&e.set("selected",lt),g("/kindergarten-map?".concat(e.toString()))},className:"rounded-lg p-2 transition-colors hover:bg-gray-100","aria-label":"\uc9c0\ub3c4 \ud398\uc774\uc9c0\ub85c \ub3cc\uc544\uac00\uae30",children:(0,Ee.jsx)(ll,{className:"h-5 w-5 text-gray-700"})}),(0,Ee.jsx)("h1",{className:"mx-3 flex-1 break-words text-lg font-semibold text-gray-900 leading-tight",style:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:mt}),(0,Ee.jsxs)("div",{className:"flex items-center gap-2",children:[(0,Ee.jsx)("button",{type:"button",onClick:()=>k(!0),className:"rounded-full p-1 text-gray-500 transition hover:bg-gray-100 hover:text-[#fb8678]",title:"\uc815\ubcf4 \ucd9c\ucc98","aria-label":"\uc815\ubcf4 \ucd9c\ucc98 \uc548\ub0b4",children:(0,Ee.jsx)(Wc,{className:"h-4 w-4"})}),p.map.establishment&&(0,Ee.jsx)("span",{className:"rounded-full bg-[#fb8678]/10 px-2 py-1 text-xs font-medium text-[#fb8678]",children:p.map.establishment})]})]}),(0,Ee.jsx)("div",{className:"flex",children:bt.map(e=>{let{id:t,label:n,icon:s}=e;return(0,Ee.jsx)("button",{type:"button",onClick:()=>_(t),className:"flex flex-1 items-center justify-center py-3 transition-colors ".concat(j===t?"border-b-2 border-[#fb8678] text-[#fb8678]":"text-gray-500 hover:text-gray-700"),"aria-label":n,children:(0,Ee.jsx)(s,{className:"h-5 w-5"})},t)})})]}),N&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsx)("div",{className:"bg-white rounded-2xl max-w-sm w-full mx-4 animate-[modalSlideUp_0.3s_cubic-bezier(0.22,0.61,0.36,1)]",children:(0,Ee.jsxs)("div",{className:"p-6",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ee.jsxs)("div",{className:"flex items-center",children:[(0,Ee.jsx)("div",{className:"w-10 h-10 bg-[#fb8678]/10 rounded-full flex items-center justify-center mr-3",children:(0,Ee.jsx)(Wc,{className:"w-5 h-5 text-[#fb8678]"})}),(0,Ee.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\uc815\ubcf4 \ucd9c\ucc98"})]}),(0,Ee.jsx)("button",{onClick:()=>k(!1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors","aria-label":"\uc815\ubcf4 \ucd9c\ucc98 \ub2eb\uae30",children:(0,Ee.jsx)(gl,{className:"w-5 h-5 text-gray-500"})})]}),(0,Ee.jsxs)("div",{className:"space-y-4",children:[(0,Ee.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-xl p-4 space-y-3",children:[(0,Ee.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Ee.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mr-2",children:(0,Ee.jsx)("span",{className:"text-white text-xs font-bold",children:"i"})}),(0,Ee.jsx)("span",{className:"text-sm font-semibold text-blue-800",children:"\uc804\uad6d\uc5b4\ub9b0\uc774\ub180\uc774\uc2dc\uc124\uc815\ubcf4\uc11c\ube44\uc2a4"})]}),(0,Ee.jsxs)("p",{className:"text-xs text-blue-700 leading-relaxed mb-3",children:["\uc774 \ub180\uc774\uc2dc\uc124 \uc815\ubcf4\ub294 ",(0,Ee.jsx)("strong",{children:"\uc804\uad6d\uc5b4\ub9b0\uc774\ub180\uc774\uc2dc\uc124\uc815\ubcf4\uc11c\ube44\uc2a4"}),"\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \ub370\uc774\ud130\ub97c \uae30\ubc18\uc73c\ub85c \uc218\uc9d1\xb7\uac00\uacf5\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc815\uae30 \ub3d9\uae30\ud654\uc640 \uce90\uc2dc\ub97c \ud1b5\ud574 \ucd5c\uc2e0 \uc815\ubcf4\ub97c \uc81c\uacf5\ud558\uace0 \uc788\uc2b5\ub2c8\ub2e4."]}),(0,Ee.jsxs)("div",{className:"space-y-2",children:[(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-xs font-medium text-blue-900",children:"\uc815\ud655\ud55c \uc815\ubcf4"}),(0,Ee.jsx)("p",{className:"text-[10px] text-blue-600",children:"\ud589\uc815\uc548\uc804\ubd80\uc5d0\uc11c \uc81c\uacf5\ud558\ub294 \uacf5\uc2dd \ub370\uc774\ud130"})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-xs font-medium text-blue-900",children:"\uc815\uae30 \uac31\uc2e0"}),(0,Ee.jsx)("p",{className:"text-[10px] text-blue-600",children:"\uc2a4\ud1a0\ub9ac\uc9c0 \uce90\uc2dc\uc640 \ub3d9\uae30\ud654\ub97c \ud1b5\ud574 \ucd5c\uc2e0 \uc0c1\ud0dc \uc720\uc9c0"})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("p",{className:"text-xs font-medium text-blue-900",children:"\uc2e0\ub8b0\ud560 \uc218 \uc788\ub294 \ucd9c\ucc98"}),(0,Ee.jsx)("p",{className:"text-[10px] text-blue-600",children:"\uc815\ubd80\uac00 \uad00\ub9ac\ud558\ub294 \uc5b4\ub9b0\uc774 \ub180\uc774\uc2dc\uc124 \uc548\uc804\uad00\ub9ac \uc2dc\uc2a4\ud15c"})]})]})]}),(0,Ee.jsxs)("div",{className:"rounded-lg border border-blue-100 bg-white/80 p-4",children:[(0,Ee.jsx)("h4",{className:"text-sm font-semibold text-blue-800",children:"\uc548\uc804 \uad00\ub9ac \uc548\ub0b4"}),(0,Ee.jsx)("p",{className:"mt-2 text-xs leading-relaxed text-blue-700",children:"\uacf5\uc6a9 \ub180\uc774\uc2dc\uc124\uc740 \uc9c0\uc790\uccb4\uc640 \uad00\ub9ac \uc8fc\uccb4\uac00 \uc815\uae30\uc801\uc73c\ub85c \uc548\uc804 \uc810\uac80\uc744 \uc218\ud589\ud569\ub2c8\ub2e4. \uc2dc\uc124 \uc774\uc6a9 \uc2dc \uc548\uc804 \uc218\uce59\uc744 \ud655\uc778\ud558\uace0, \uc704\ud5d8 \uc694\uc18c\uac00 \ubc1c\uacac\ub418\uba74 \uc989\uc2dc \uad00\ud560 \uc9c0\uc790\uccb4\uc5d0 \uc2e0\uace0\ud574 \uc8fc\uc138\uc694."}),(0,Ee.jsx)("p",{className:"mt-2 text-[10px] text-blue-500",children:"\uc790\ub8cc \ucd9c\ucc98: \uc804\uad6d\uc5b4\ub9b0\uc774\ub180\uc774\uc2dc\uc124\uc815\ubcf4\uc11c\ube44\uc2a4"})]}),(0,Ee.jsx)("div",{className:"bg-gray-50 rounded-xl p-4",children:(0,Ee.jsxs)("p",{className:"text-xs text-gray-600 text-center",children:["\ub354 \uc790\uc138\ud55c \uc815\ubcf4\ub294 ",(0,Ee.jsx)("strong",{children:"\uc804\uad6d\uc5b4\ub9b0\uc774\ub180\uc774\uc2dc\uc124\uc815\ubcf4\uc11c\ube44\uc2a4"})," \uacf5\uc2dd \uc0ac\uc774\ud2b8\uc5d0\uc11c \ud655\uc778\ud558\uc2e4 \uc218 \uc788\uc2b5\ub2c8\ub2e4."]})})]}),(0,Ee.jsxs)("div",{className:"mt-6 flex gap-3",children:[(0,Ee.jsx)("button",{onClick:()=>k(!1),className:"flex-1 px-4 py-3 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors",children:"\ud655\uc778"}),(0,Ee.jsx)("button",{onClick:()=>{window.open("https://www.cpf.go.kr/cpf/","_blank","noopener,noreferrer"),k(!1)},className:"flex-1 px-4 py-3 bg-[#fb8678] text-white rounded-xl font-medium hover:bg-[#e67567] transition-colors",children:"\uc0ac\uc774\ud2b8 \ubc29\ubb38"})]})]})})}),b&&p&&(0,Ee.jsxs)("div",{className:"mx-4 mt-4 rounded-2xl border border-red-200 bg-red-50/80 px-4 py-3 text-sm text-red-600 shadow-sm",children:[(0,Ee.jsx)("strong",{className:"font-semibold",children:"\uc54c\ub9bc:"})," ",b]}),(0,Ee.jsxs)("div",{className:"pb-16 bg-white",children:["basic"===j&&(0,Ee.jsx)("div",{className:"space-y-4",children:(0,Ee.jsxs)("section",{className:"overflow-hidden bg-white",children:[(0,Ee.jsx)("div",{className:"relative h-40 overflow-hidden bg-gray-100",children:(0,Ee.jsx)("div",{className:"relative h-full w-full cursor-pointer",onClick:()=>{tt.length>0&&gt(tt,st)},children:tt.length>0?(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("img",{src:tt[st],alt:"".concat(p.map.name," \uc774\ubbf8\uc9c0 ").concat(st+1),className:"h-full w-full object-cover"}),tt.length>1&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsxs)("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-60 text-white text-xs px-2 py-1 rounded",children:[st+1," / ",tt.length]}),(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),rt(e=>(e-1+tt.length)%tt.length)},className:"absolute left-2 top-1/2 -translate-y-1/2 p-2 bg-black/50 hover:bg-black/70 text-white rounded-full transition-colors","aria-label":"\uc774\uc804 \uc0ac\uc9c4",children:(0,Ee.jsx)(ll,{className:"w-4 h-4"})}),(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),rt(e=>(e+1)%tt.length)},className:"absolute right-2 top-1/2 -translate-y-1/2 p-2 bg-black/50 hover:bg-black/70 text-white rounded-full transition-colors","aria-label":"\ub2e4\uc74c \uc0ac\uc9c4",children:(0,Ee.jsx)(cl,{className:"w-4 h-4"})}),(0,Ee.jsx)("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-1",children:tt.map((e,t)=>(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),rt(t)},className:"w-1.5 h-1.5 rounded-full transition-all ".concat(t===st?"bg-white w-4":"bg-white/50"),"aria-label":"\uc0ac\uc9c4 ".concat(t+1)},t))})]})]}):p.map.image?(0,Ee.jsx)("img",{src:p.map.image,alt:"".concat(p.map.name," \uc774\ubbf8\uc9c0"),className:"h-full w-full object-cover"}):(0,Ee.jsxs)("div",{className:"absolute inset-0 flex flex-col items-center justify-center gap-2 text-gray-400",children:[(0,Ee.jsx)(Sl,{className:"h-8 w-8"}),(0,Ee.jsx)("span",{className:"text-xs",children:"\ub4f1\ub85d\ub41c \uc0ac\uc9c4\uc774 \uc5c6\uc5b4\uc694"})]})})}),(0,Ee.jsxs)("div",{className:"space-y-3 px-4 py-5",children:[(0,Ee.jsx)("h3",{className:"text-base font-semibold text-gray-900",children:"\uc0c1\uc138 \uc124\uba85"}),(0,Ee.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 overflow-hidden",children:[(0,Ee.jsx)("div",{className:"bg-gray-50 px-3 py-2 text-center",children:(0,Ee.jsx)("div",{className:"text-xs text-gray-500 font-semibold",children:"\uc2dc\uc124 \uae30\ubcf8 \uc815\ubcf4"})}),(0,Ee.jsxs)("div",{className:"p-4 space-y-2 text-xs text-gray-600",children:[(0,Ee.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc2dc\uc124 \uc704\uce58"}),(0,Ee.jsx)("span",{className:"max-w-[65%] text-right font-semibold text-gray-900",children:p.map.address||"\uc8fc\uc18c \uc815\ubcf4\uac00 \ub4f1\ub85d\ub418\uc5b4 \uc788\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."})]}),(null===(i=p.raw)||void 0===i?void 0:i.pfctSn)&&(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc2dc\uc124 \uace0\uc720\ubc88\ud638"}),(0,Ee.jsx)("span",{className:"font-semibold text-gray-900",children:p.raw.pfctSn})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc2dc\uc124 \uc720\ud615"}),(0,Ee.jsx)("span",{className:"inline-flex items-center rounded-full bg-gray-100 px-3 py-1 text-xs font-semibold text-gray-700",children:(null===(o=p.raw)||void 0===o?void 0:o.wowaStylRideCdNm)||(null===(l=p.raw)||void 0===l?void 0:l.wowaStylRideCd)||"\ubbf8\ud3ec\ud568"})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc124\uce58 \uc7a5\uc18c"}),(0,Ee.jsx)("span",{className:"inline-flex items-center rounded-full bg-blue-50 px-3 py-1 text-xs font-semibold text-blue-700",children:(null===(c=p.raw)||void 0===c?void 0:c.instlPlaceCdNm)||(null===(d=p.raw)||void 0===d?void 0:d.instlPlaceCd)||"\uc815\ubcf4 \uc5c6\uc74c"})]}),(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("span",{className:"text-gray-600",children:"\uc6b4\uc601 \uc0c1\ud0dc"}),(0,Ee.jsx)("span",{className:"inline-flex items-center rounded-full bg-[#fb8678]/10 px-3 py-1 text-xs font-semibold text-[#fb8678]",children:null!==(u=p.raw)&&void 0!==u&&u.operYnCdNm?"".concat(p.raw.operYnCdNm).concat(null!==(h=p.raw)&&void 0!==h&&h.prvtPblcYnCdNm?" \u2022 ".concat(p.raw.prvtPblcYnCdNm):""):"\uc815\ubcf4 \uc5c6\uc74c"})]})]})]})]})]})}),"praise"===j&&(0,Ee.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Ee.jsxs)("div",{className:"px-4 py-4 border-b border-gray-100",children:[(0,Ee.jsx)("div",{className:"mb-3",children:(0,Ee.jsxs)("h2",{className:"text-lg font-semibold text-gray-900",children:["\uce6d\ucc2c (",wt,")"]})}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:_t}),(0,Ee.jsx)("div",{className:"flex items-center justify-center space-x-1",children:[1,2,3,4,5].map(e=>(0,Ee.jsx)(ml,{className:"w-4 h-4 ".concat(e<=Math.floor(jt)?"text-[#fb8678] fill-current":"text-gray-300")},e))}),(0,Ee.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["\ucd1d ",wt,"\uac1c"]})]}),(0,Ee.jsx)("div",{className:"flex-1 space-y-1",children:[5,4,3,2,1].map(e=>(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsxs)("span",{className:"text-xs text-gray-600 w-6 font-semibold",children:[e,"\uc810"]}),(0,Ee.jsx)(ml,{className:"w-3 h-3 text-[#fb8678] fill-current"}),(0,Ee.jsx)("div",{className:"flex-1 bg-gray-200 rounded-full h-1.5",children:(0,Ee.jsx)("div",{className:"bg-yellow-400 h-1.5 rounded-full transition-all duration-300",style:{width:"".concat(wt>0?Nt[e]/wt*100:0,"%")}})}),(0,Ee.jsxs)("span",{className:"text-[10px] text-gray-600 w-6 text-right",children:["(",Nt[e],")"]})]},e))})]})]}),(0,Ee.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,Ee.jsx)("h3",{className:"text-sm font-semibold text-gray-900",children:"\uce6d\ucc2c \uc0ac\uc9c4"}),ot.length>=5&&(0,Ee.jsx)("button",{onClick:()=>{try{var e,t,n;const s=new URLSearchParams;null!==p&&void 0!==p&&null!==(e=p.map)&&void 0!==e&&e.name&&s.set("name",p.map.name),null!==p&&void 0!==p&&null!==(t=p.map)&&void 0!==t&&t.sidoCode&&s.set("sidoCode",String(p.map.sidoCode)),null!==p&&void 0!==p&&null!==(n=p.map)&&void 0!==n&&n.sggCode&&s.set("sggCode",String(p.map.sggCode)),g("/playground/".concat(encodeURIComponent(lt),"/review/photos?").concat(s.toString()))}catch(s){g("/playground/".concat(encodeURIComponent(lt),"/review/photos"))}},className:"p-1 hover:bg-gray-100 rounded transition-colors","aria-label":"\uce6d\ucc2c \uc0ac\uc9c4 \uc804\uccb4\ubcf4\uae30",children:(0,Ee.jsx)(cl,{className:"w-4 h-4 text-gray-600"})})]}),(0,Ee.jsx)("div",{className:"flex space-x-3 overflow-x-auto",children:0===ot.length?(0,Ee.jsx)("div",{className:"flex items-center justify-center w-full h-20 text-gray-500 text-sm",children:"\ub4f1\ub85d\ub41c \uc0ac\uc9c4\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"}):ot.slice(0,4).map((e,t)=>{const n=ot.map(e=>e.image_url),s=O.find(t=>!t.is_hidden&&t.images&&t.images.some(t=>t.image_url===e.image_url)),r=s?O.findIndex(e=>e.id===s.id):-1;return(0,Ee.jsxs)("div",{className:"flex-shrink-0 w-20 h-20 aspect-square bg-gray-100 rounded-lg relative overflow-hidden cursor-zoom-in",onClick:()=>gt(n,t,null===s||void 0===s?void 0:s.id,r>=0?r:void 0),children:[(0,Ee.jsx)("img",{src:e.image_url,alt:"\uce6d\ucc2c \uc0ac\uc9c4 ".concat(t+1),className:"w-full h-full object-cover"}),(0,Ee.jsx)("div",{className:"absolute top-1 right-1 bg-black/60 text-white text-xs px-1 py-0.5 rounded",children:"".concat(Math.max(0,Math.min(5,Math.round(e.rating))),"\uc810")}),3===t&&ot.length>4&&(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/40 flex items-center justify-center",children:(0,Ee.jsxs)("span",{className:"text-white text-sm font-semibold",children:["+",ot.length-4]})})]},e.id)})})]}),(0,Ee.jsx)("div",{className:"px-4 py-3",children:(0,Ee.jsx)("div",{className:"flex items-center space-x-4",children:(0,Ee.jsxs)("div",{className:"flex space-x-2",children:[(0,Ee.jsx)("button",{onClick:()=>M("\uc804\uccb4"),className:"px-3 py-1 text-sm rounded-full transition-colors ".concat("\uc804\uccb4"===I?"bg-[#fb8678] text-white":"text-gray-600 hover:bg-gray-100"),children:"\uc804\uccb4"}),(0,Ee.jsx)("button",{onClick:()=>M("\ucd5c\uc2e0\uc21c"),className:"px-3 py-1 text-sm rounded-full transition-colors ".concat("\ucd5c\uc2e0\uc21c"===I?"bg-[#fb8678] text-white":"text-gray-600 hover:bg-gray-100"),children:"\ucd5c\uc2e0\uc21c"})]})})}),(0,Ee.jsx)("div",{className:"divide-y divide-gray-100",children:L?(0,Ee.jsx)("div",{className:"px-4 py-8 text-center text-gray-600",children:"\uce6d\ucc2c\uc744 \ubd88\ub7ec\uc624\ub294 \uc911..."}):0===O.length?(0,Ee.jsxs)("div",{className:"px-4 py-8 text-center",children:[(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uc544\uc9c1 \uce6d\ucc2c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{className:"text-gray-500 text-sm",children:"\uccab \ubc88\uc9f8 \uce6d\ucc2c\uc744 \ub0a8\uaca8\ubcf4\uc138\uc694!"})]}):O.map(e=>{var t,n,s;const r=(null===(t=e.user_profile)||void 0===t?void 0:t.nickname)||(null===(n=e.user_profile)||void 0===n?void 0:n.full_name)||"\uc775\uba85",a=r.trim().charAt(0)||"\ud83d\udc64",i=null===(s=e.user_profile)||void 0===s?void 0:s.profile_image_url,o=(t=>{const n=null===(t=e.user_profile)||void 0===t?void 0:t.children_info;if(!n)return[];try{return(Array.isArray(n)?n:[]).map(e=>null===e||void 0===e?void 0:e.profile_image_url).filter(e=>"string"===typeof e&&e.length>0)}catch(s){return[]}})();return(0,Ee.jsxs)("div",{className:"px-4 py-4",children:[(0,Ee.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,Ee.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)("div",{className:"w-10 h-10 bg-gray-100 rounded-2xl overflow-hidden flex items-center justify-center",children:i?(0,Ee.jsx)("img",{src:i,alt:"\ud504\ub85c\ud544",className:"w-full h-full object-cover"}):(0,Ee.jsx)("span",{className:"text-sm font-medium text-gray-600",children:a})}),(0,Ee.jsxs)("div",{className:"absolute -bottom-1 -right-1 flex items-center flex-row-reverse",children:[o.length>2&&(0,Ee.jsx)("div",{className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-400 flex items-center justify-center relative z-30",children:(0,Ee.jsxs)("span",{className:"text-white text-[7px] font-bold",children:["+",o.length-2]})}),o.length>=2&&(0,Ee.jsx)("div",{className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden relative z-20 ".concat(o.length>2?"-mr-[5px]":""),children:o[1]?(0,Ee.jsx)("img",{src:o[1],alt:"\uc790\ub140 \ud504\ub85c\ud544 2",className:"w-full h-full object-cover"}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[10px]",children:"\ud83d\udc64"})}),(0,Ee.jsx)("div",{className:"w-4 h-4 rounded-full border-[0.5px] border-white bg-gray-200 flex items-center justify-center overflow-hidden relative z-10 ".concat(o.length>=2?"-mr-[5px]":""),children:o[0]?(0,Ee.jsx)("img",{src:o[0],alt:"\uc790\ub140 \ud504\ub85c\ud544",className:"w-full h-full object-cover"}):(0,Ee.jsx)("span",{className:"text-gray-400 text-[10px]",children:"\ud83d\udc64"})})]})]}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsx)("div",{className:"font-semibold text-gray-900 text-sm",children:r}),(0,Ee.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,Ee.jsx)("div",{className:"flex items-center space-x-1",children:[1,2,3,4,5].map(t=>(0,Ee.jsx)(ml,{className:"w-3 h-3 ".concat(t<=(e.rating||0)?"text-[#fb8678] fill-current":"text-gray-300")},t))}),(0,Ee.jsx)("span",{className:"text-xs text-gray-500",children:(e=>{try{const t=new Date(e),n=t.getFullYear(),s=String(t.getMonth()+1).padStart(2,"0"),r=String(t.getDate()).padStart(2,"0");return"".concat(n,". ").concat(s,". ").concat(r,".")}catch(t){return e}})(e.created_at)})]})]})]}),(0,Ee.jsxs)("div",{className:"relative review-menu-container",children:[(0,Ee.jsx)("button",{onClick:()=>{return t=e.id,void Ne(e=>e===t?null:t);var t},className:"p-2 rounded-full hover:bg-[#fb8678]/10 transition-colors","aria-label":"\uce6d\ucc2c \uc635\uc158",children:(0,Ee.jsx)(Gc,{className:"w-5 h-5 text-[#fb8678]"})}),_e===e.id&&(0,Ee.jsx)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:ke&&e.user_id===ke?(0,Ee.jsx)("button",{onClick:()=>{var t;(t=e.id)&&(Oe(t),ze(""),Le(!0),Ne(null))},disabled:at.has(e.id),className:"w-full px-4 py-2 text-center text-sm ".concat(at.has(e.id)?"text-gray-400 cursor-not-allowed":"text-red-600 hover:bg-red-50"),children:at.has(e.id)?"\uc0ad\uc81c\uc694\uccad \ub300\uae30\uc911":"\uc0ad\uc81c\uc694\uccad"}):(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("button",{onClick:()=>(async e=>{e&&(Ze(e),Be(!0),Ne(null))})(e.user_id),className:"w-full px-4 py-2 text-center text-sm text-gray-700 hover:bg-gray-50",children:"\ucc28\ub2e8\ud558\uae30"}),(0,Ee.jsx)("div",{className:"border-t border-gray-200 mx-2"}),(0,Ee.jsx)("button",{onClick:()=>(async(e,t)=>{et({reviewId:e,authorAuthUserId:t}),Fe(!0),Ne(null)})(e.id,e.user_id),className:"w-full px-4 py-2 text-center text-sm text-red-600 hover:bg-red-50",children:"\uc2e0\uace0\ud558\uae30"})]})})]})]}),(0,Ee.jsx)("div",{className:"text-gray-800 text-sm leading-relaxed mb-3 whitespace-pre-line",children:e.is_hidden?"\uad00\ub9ac\uc790\uc5d0 \uc758\ud574 \uc228\uae40\ucc98\ub9ac\ub41c \uce6d\ucc2c\uc785\ub2c8\ub2e4.":e.content||""}),(e.images||[]).length>0&&(0,Ee.jsx)("div",{className:"flex space-x-3 overflow-x-auto mb-3",children:(e.images||[]).map((t,n)=>{const s=(e.images||[]).map(e=>e.image_url),r=O.findIndex(t=>t.id===e.id);return(0,Ee.jsx)("div",{className:"w-20 h-20 aspect-square bg-gray-100 rounded-lg flex items-center justify-center overflow-hidden flex-shrink-0 ".concat(e.is_hidden?"":"cursor-zoom-in"),onClick:e.is_hidden?void 0:()=>gt(s,n,e.id,r),children:e.is_hidden?(0,Ee.jsx)("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:(0,Ee.jsx)("span",{className:"text-gray-400 text-xs",children:"\uc228\uae40"})}):(0,Ee.jsx)("img",{src:t.image_url,alt:"\uce6d\ucc2c \uc774\ubbf8\uc9c0",className:"w-full h-full object-cover"})},t.id)})}),(0,Ee.jsx)("div",{className:"flex items-center",children:(0,Ee.jsxs)("button",{onClick:()=>kt(e.id),className:"flex items-center space-x-1 transition-colors ".concat(F.has(e.id)?"text-red-500 hover:text-red-600":"text-gray-500 hover:text-gray-700"),children:[(0,Ee.jsx)("svg",{className:"w-4 h-4",fill:F.has(e.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(0,Ee.jsxs)("span",{className:"text-xs",children:["\ub3c4\uc6c0\ub428 ",e.helpful_count||0]})]})})]},e.id)})})]})]}),"praise"===j&&(0,Ee.jsx)("button",{onClick:()=>V(!B),className:"fixed bottom-24 right-4 w-14 h-14 text-white rounded-full shadow-lg transition-all duration-200 flex items-center justify-center z-40 ".concat(B?"bg-gray-500 hover:bg-gray-600":"bg-[#fb8678] hover:bg-[#fb8678]/90"),"aria-label":"\uce6d\ucc2c \ub0a8\uae30\uae30",children:(0,Ee.jsx)("svg",{className:"w-6 h-6 transition-transform duration-200 ".concat(B?"rotate-45":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),"praise"===j&&B&&(0,Ee.jsx)("div",{className:"fixed bottom-40 right-4 bg-white rounded-2xl shadow-lg border border-gray-200 z-50 min-w-[160px]",children:(0,Ee.jsx)("button",{onClick:()=>{(()=>{if(E)try{var e,t,n;const s=new URLSearchParams;null!==p&&void 0!==p&&null!==(e=p.map)&&void 0!==e&&e.name&&s.set("name",p.map.name),null!==p&&void 0!==p&&null!==(t=p.map)&&void 0!==t&&t.sidoCode&&s.set("sidoCode",String(p.map.sidoCode)),null!==p&&void 0!==p&&null!==(n=p.map)&&void 0!==n&&n.sggCode&&s.set("sggCode",String(p.map.sggCode)),g("/playground/".concat(encodeURIComponent(lt),"/review/write?").concat(s.toString()))}catch(s){g("/playground/".concat(encodeURIComponent(lt),"/review/write"))}else alert("\ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9\ud574\uc8fc\uc138\uc694.")})(),V(!1)},className:"w-full px-4 py-2 text-[#fb8678] rounded-xl shadow-lg border border-[#fb8678]/20 hover:bg-[#fb8678]/10 transition-all duration-300 whitespace-nowrap font-semibold",children:"\uce6d\ucc2c \ub0a8\uae30\uae30"})}),(0,Ee.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 h-20 flex items-center p-3",children:(0,Ee.jsxs)("div",{className:"flex space-x-3 w-full",children:[(0,Ee.jsx)("button",{onClick:()=>{H(!0)},className:"p-3 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"\ub9c1\ud06c \uacf5\uc720",children:(0,Ee.jsx)($l,{className:"w-5 h-5"})}),(0,Ee.jsx)("button",{onClick:async()=>{var e;const t=((null===p||void 0===p||null===(e=p.map)||void 0===e?void 0:e.telno)||"").replace(/[^0-9+]/g,"");if(t){try{await navigator.clipboard.writeText(t)}catch(n){}window.location.href="tel:".concat(t)}else alert("\ub4f1\ub85d\ub41c \uc5f0\ub77d\ucc98\uac00 \uc5c6\uc2b5\ub2c8\ub2e4.")},className:"flex-1 py-3 px-4 bg-gray-100 text-gray-700 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"\ubb38\uc758\ud558\uae30"}),(0,Ee.jsxs)("button",{onClick:async()=>{if(!p||!lt)return;if(!E)return void alert("\ub85c\uadf8\uc778 \ud6c4 \uc774\uc6a9\ud574\uc8fc\uc138\uc694.");const e=!C;S(e);try{e?(await Tl(E,"playground",lt,p.map.name,{sidoCode:void 0!==p.map.sidoCode?p.map.sidoCode:void 0,sggCode:void 0!==p.map.sggCode?p.map.sggCode:void 0}),T(!0),setTimeout(()=>T(!1),700)):await Il(E,"playground",lt)}catch(b){console.error("\ucc1c\ud558\uae30 \ucc98\ub9ac \uc624\ub958:",b),S(!e),alert("\ucc1c\ud558\uae30 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: ".concat((null===b||void 0===b?void 0:b.message)||"\uc54c \uc218 \uc5c6\ub294 \uc624\ub958"))}},className:"flex-1 py-3 px-4 rounded-lg font-medium transition-colors flex items-center justify-center space-x-2 ".concat(C?"bg-red-50 text-red-600 hover:bg-red-100":"bg-[#fb8678] text-white hover:bg-[#fb8678]/90"),children:[(0,Ee.jsxs)("div",{className:"relative",children:[(0,Ee.jsx)(ml,{className:"w-5 h-5 ".concat(C?"fill-current animate-heart-bounce":"")}),A&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("div",{className:"heart-particle left-[-14px] text-red-400",children:"\u2764"}),(0,Ee.jsx)("div",{className:"heart-particle left-0 text-pink-400",style:{animationDelay:"60ms"},children:"\u2764"}),(0,Ee.jsx)("div",{className:"heart-particle left-[14px] text-rose-400",style:{animationDelay:"120ms"},children:"\u2764"})]})]}),(0,Ee.jsx)("span",{children:C?"\ucc1c\uc644\ub8cc":"\ucc1c\ud558\uae30"})]})]})}),W&&(0,Ee.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/50",onClick:()=>H(!1)}),(0,Ee.jsx)("div",{className:"absolute left-0 right-0 bottom-0 bg-white rounded-t-2xl shadow-xl border-t border-gray-200 p-4 will-change-transform ".concat(X?"transition-none":"transition-transform duration-200"),style:{transform:"translate3d(0, ".concat(J,"px, 0)")},onTouchMove:e=>{if(!X||null===Y)return;const t=e.changedTouches[0].clientY-Y;t>0&&G(t)},onTouchEnd:()=>{if(J>60)return H(!1),$(!1),void requestAnimationFrame(()=>{G(0),K(null)});$(!1),requestAnimationFrame(()=>{G(0),K(null)})},children:(0,Ee.jsxs)("div",{className:"animate-[sheetSlideUp_0.28s_cubic-bezier(0.22,0.61,0.36,1)]",children:[(0,Ee.jsx)("div",{className:"w-full flex justify-center py-2 mb-1",onTouchStart:e=>{const t=e.changedTouches[0];$(!0),K(t.clientY),G(0)},children:(0,Ee.jsx)("div",{className:"w-12 h-1.5 bg-gray-300 rounded-full"})}),(0,Ee.jsxs)("div",{className:"mb-2",children:[(0,Ee.jsx)("div",{className:"text-base font-semibold text-black pl-1 pb-1",children:"\ub9c1\ud06c \uacf5\uc720"}),(0,Ee.jsx)("div",{className:"mt-1 text-xs text-gray-600 break-all bg-gray-50 rounded-lg px-3 py-2 border border-gray-100",children:ft})]}),(0,Ee.jsxs)("div",{className:"flex gap-3 py-2 overflow-x-auto scrollbar-hide",children:[(0,Ee.jsxs)("button",{onClick:async()=>{var e,t;const n=null===(e=window)||void 0===e?void 0:e.Kakao;if(null!==n&&void 0!==n&&null!==(t=n.isInitialized)&&void 0!==t&&t.call(n)&&null!==n&&void 0!==n&&n.Share)try{return await n.Share.sendDefault({objectType:"feed",content:{title:"\ub9d8\ud53d \xb7 \ub180\uc774\uc2dc\uc124",description:mt,imageUrl:"".concat(window.location.origin,"/headericon.png"),link:{mobileWebUrl:ft,webUrl:ft}}}),void H(!1)}catch(b){console.warn("\uce74\uce74\uc624 \uacf5\uc720 \uc2e4\ud328, \uae30\ubcf8 \uacf5\uc720 \uc2dc\ub3c4:",b)}await yt()},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-yellow-300 flex items-center justify-center text-black font-bold",children:"\uce74"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\uce74\uce74\uc624\ud1a1"})]}),(0,Ee.jsxs)("button",{onClick:()=>{if(!ft)return;const e="\ub9d8\ud53d \xb7 ".concat(mt," \uc815\ubcf4 \uacf5\uc720"),t="".concat(mt," \uc815\ubcf4\ub97c \uacf5\uc720\ud569\ub2c8\ub2e4.\n\n").concat(ft);window.location.href="mailto:?subject=".concat(encodeURIComponent(e),"&body=").concat(encodeURIComponent(t)),H(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-red-500 text-white flex items-center justify-center font-bold",children:"G"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"Gmail"})]}),(0,Ee.jsxs)("button",{onClick:()=>{if(!ft)return;const e="".concat(mt," \uc815\ubcf4\ub97c \uacf5\uc720\ud569\ub2c8\ub2e4."),t="https://band.us/plugin/share?body=".concat(encodeURIComponent(e),"%0A").concat(encodeURIComponent(ft),"&route=").concat(encodeURIComponent(ft));window.open(t,"_blank"),H(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-green-500 text-white flex items-center justify-center font-bold",children:"B"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"BAND"})]}),(0,Ee.jsxs)("button",{onClick:()=>{if(!ft)return;const e="".concat(mt," \uc815\ubcf4\ub97c \uacf5\uc720\ud569\ub2c8\ub2e4.\n\n").concat(ft);window.location.href="sms:?&body=".concat(encodeURIComponent(e)),H(!1)},className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-blue-500 text-white flex items-center justify-center text-[11px] font-bold",children:"SMS"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\ubb38\uc790"})]}),(0,Ee.jsxs)("button",{onClick:vt,className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-gray-800 text-white flex items-center justify-center font-bold",children:"\ud83d\udd17"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\ub9c1\ud06c\ubcf5\uc0ac"})]}),(0,Ee.jsxs)("button",{onClick:yt,className:"w-1/4 flex-shrink-0 flex flex-col items-center justify-center p-3 rounded-xl border border-gray-100 hover:bg-gray-50",children:[(0,Ee.jsx)("span",{className:"w-10 h-10 rounded-full bg-gray-200 text-gray-800 flex items-center justify-center text-lg font-bold",children:"\u22ef"}),(0,Ee.jsx)("span",{className:"mt-2 text-xs text-gray-700",children:"\ub354\ubcf4\uae30"})]})]})]})})]}),Z&&(0,Ee.jsxs)("div",{className:"fixed inset-0 z-50 bg-black/90 flex items-center justify-center touch-pan-y",onWheel:e=>{if(Math.abs(e.deltaX)<=Math.abs(e.deltaY))return;const t=Date.now();t-je.current<300||(je.current=t,e.deltaX>0?xt():e.deltaX<0&&pt())},onTouchStart:e=>{const t=e.touches[0];be.current=t.clientX,we.current=t.clientY},onTouchMove:e=>{null!==be.current&&we.current},onTouchEnd:e=>{if(null===be.current)return;const t=e.changedTouches[0].clientX-be.current;Math.abs(t)>50&&(t>0?pt():xt()),be.current=null,we.current=null},onClick:e=>{e.target.closest(".image-viewer-menu-container")||ce(!1)},children:[(0,Ee.jsx)("button",{onClick:()=>{Q(!1),ce(!1),oe(null)},className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white/10 text-white z-10","aria-label":"\ub2eb\uae30",children:(0,Ee.jsx)(gl,{className:"w-6 h-6"})}),ie?(()=>{const e=O.find(e=>e.id===ie.reviewId);return e&&ke&&e.user_id===ke?null:(0,Ee.jsxs)("div",{className:"absolute top-4 right-16 image-viewer-menu-container z-10",children:[(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),ce(!le)},className:"p-2 rounded-full hover:bg-white/10 text-white","aria-label":"\uc635\uc158 \uba54\ub274",children:(0,Ee.jsx)(Gc,{className:"w-6 h-6"})}),le&&(0,Ee.jsx)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),ye(!1),ge("wrong_purpose"),me(""),ue(!0),ce(!1)},className:"w-full px-4 py-2 text-center text-sm text-red-600 hover:bg-red-50",children:"\uc2e0\uace0\ud558\uae30"})})]})})():(0,Ee.jsxs)("div",{className:"absolute top-4 right-16 image-viewer-menu-container z-10",children:[(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),ce(!le)},className:"p-2 rounded-full hover:bg-white/10 text-white","aria-label":"\uc635\uc158 \uba54\ub274",children:(0,Ee.jsx)(Gc,{className:"w-6 h-6"})}),le&&(0,Ee.jsx)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),ye(!0),ge("wrong_purpose"),me(""),ue(!0),ce(!1)},className:"w-full px-4 py-2 text-center text-sm text-red-600 hover:bg-red-50",children:"\uc2e0\uace0\ud558\uae30"})})]}),ee.length>1&&(0,Ee.jsx)("button",{onClick:pt,className:"absolute left-2 sm:left-4 p-3 rounded-full hover:bg-white/10 text-white","aria-label":"\uc774\uc804 \uc774\ubbf8\uc9c0",children:(0,Ee.jsx)(ll,{className:"w-7 h-7"})}),(0,Ee.jsxs)("div",{className:"max-w-full max-h-full",children:[(0,Ee.jsx)("img",{src:ee[re],alt:"\uce6d\ucc2c \uc804\uccb4 \uc774\ubbf8\uc9c0",className:"max-w-full max-h-[85vh] object-contain"}),ee.length>1&&(0,Ee.jsxs)("div",{className:"mt-3 text-center text-xs text-white/70",children:[re+1," / ",ee.length]})]}),ee.length>1&&(0,Ee.jsx)("button",{onClick:xt,className:"absolute right-2 sm:right-4 p-3 rounded-full hover:bg-white/10 text-white","aria-label":"\ub2e4\uc74c \uc774\ubbf8\uc9c0",children:(0,Ee.jsx)(cl,{className:"w-7 h-7"})})]}),(0,Ee.jsx)("div",{className:"h-20 bg-white"})]}),Me&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md max-h-[90vh] flex flex-col",children:[(0,Ee.jsxs)("div",{className:"mb-6",children:[(0,Ee.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-2 text-center",children:"\uce6d\ucc2c \uc0ad\uc81c\uc694\uccad"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-600 text-center mb-4",children:"\uc0ad\uc81c\uc694\uccad\uc744 \ud558\uc2dc\uba74 \uad00\ub9ac\uc790 \uac80\ud1a0 \ud6c4 \uc0ad\uc81c\ub429\ub2c8\ub2e4."}),(0,Ee.jsxs)("div",{children:[(0,Ee.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uc0ad\uc81c\uc694\uccad \uc0ac\uc720 ",(0,Ee.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Ee.jsx)("textarea",{value:De,onChange:e=>ze(e.target.value),placeholder:"\uc0ad\uc81c\uc694\uccad \uc0ac\uc720\ub97c \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694...",rows:6,maxLength:500,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent resize-none text-sm"}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[(0,Ee.jsx)("span",{children:"\ucd5c\uc18c 10\uc790 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694"}),(0,Ee.jsxs)("span",{className:De.trim().length<10?"text-red-500":"",children:[De.length,"/500"]})]})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3 mt-auto",children:[(0,Ee.jsx)("button",{onClick:()=>{Le(!1),Oe(null),ze("")},className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(!Re)return;const e=De.trim();if(e.length<10)alert("\uc0ad\uc81c\uc694\uccad \uc0ac\uc720\ub97c \ucd5c\uc18c 10\uc790 \uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694.");else if(e.length>500)alert("\uc0ad\uc81c\uc694\uccad \uc0ac\uc720\ub294 \ucd5c\ub300 500\uc790\uae4c\uc9c0 \uc785\ub825 \uac00\ub2a5\ud569\ub2c8\ub2e4.");else try{await async function(e,t){try{const{data:{user:n},error:s}=await Se.supabase.auth.getUser();if(s||!n)throw new Error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const{data:r,error:a}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",n.id).single();if(a||!r)throw new Error("\ud504\ub85c\ud544 \uc815\ubcf4\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const{data:i,error:o}=await Se.supabase.from("playground_reviews").select("id, user_id").eq("id",e).eq("user_id",n.id).single();if(o||!i)throw new Error("\ub9ac\ubdf0\ub97c \ucc3e\uc744 \uc218 \uc5c6\uac70\ub098 \uc0ad\uc81c \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const{data:l}=await Se.supabase.from("review_delete_requests").select("id").eq("review_id",e).eq("review_type","playground").eq("requester_id",r.id).eq("status","pending").maybeSingle();if(l)throw new Error("\uc774\ubbf8 \uc0ad\uc81c\uc694\uccad\uc774 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.");const{error:c}=await Se.supabase.from("review_delete_requests").insert({review_id:e,review_type:"playground",requester_id:r.id,status:"pending",request_reason:(null===t||void 0===t?void 0:t.trim())||null});if(c)throw console.error("\uc0ad\uc81c\uc694\uccad \uc0dd\uc131 \uc624\ub958:",c),c}catch(b){throw console.error("\uc0ad\uc81c\uc694\uccad \uc0dd\uc131 \uc2e4\ud328:",b),b}}(Re,e),Le(!1),ze(""),it(e=>new Set(e).add(Re)),Oe(null),Ne(null),alert("\uc0ad\uc81c\uc694\uccad\uc774 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uad00\ub9ac\uc790 \uc2b9\uc778 \ud6c4 \uc0ad\uc81c\ub429\ub2c8\ub2e4.")}catch(b){console.error("\uc0ad\uc81c\uc694\uccad \uc2e4\ud328:",b),alert((null===b||void 0===b?void 0:b.message)||"\uc0ad\uc81c\uc694\uccad \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},disabled:De.trim().length<10||De.trim().length>500,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:"\uc0ad\uc81c\uc694\uccad"})]})]})}),Ue&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-4 max-w-lg w-full min-h-[500px] max-h-[95vh] flex flex-col",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ee.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"\uce6d\ucc2c \uc2e0\uace0"}),(0,Ee.jsx)("button",{onClick:()=>Fe(!1),className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-6 h-6 text-gray-500"})})]}),(0,Ee.jsxs)("div",{className:"flex-1 overflow-y-auto mb-6",children:[(0,Ee.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"\uc120\ud0dd\ud55c \uce6d\ucc2c\uc744 \uc2e0\uace0\ud569\ub2c8\ub2e4."}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc720\ud615"}),(0,Ee.jsxs)("select",{value:He,onChange:e=>Ye(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent",children:[(0,Ee.jsx)("option",{value:"spam",children:"\uc2a4\ud338/\uad11\uace0\uc131 \uac8c\uc2dc\uae00"}),(0,Ee.jsx)("option",{value:"inappropriate",children:"\ubd80\uc801\uc808\ud55c \ub0b4\uc6a9"}),(0,Ee.jsx)("option",{value:"harassment",children:"\uad34\ub86d\ud798/\ud3ed\ub825"}),(0,Ee.jsx)("option",{value:"other",children:"\uae30\ud0c0"})]})]}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc0ac\uc720"}),(0,Ee.jsx)("textarea",{value:Ve,onChange:e=>We(e.target.value),placeholder:"\uc2e0\uace0 \uc0ac\uc720\ub97c \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694...",rows:6,maxLength:500,className:"w-full px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent resize-none text-sm"}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 font-semibold mt-1",children:[(0,Ee.jsx)("span",{children:"\ucd5c\ub300 \ud14d\uc2a4\ud2b8 \uae38\uc774"}),(0,Ee.jsxs)("span",{children:[Ve.length,"/500"]})]})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3 flex-shrink-0",children:[(0,Ee.jsx)("button",{onClick:()=>Fe(!1),className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(Qe&&Te)try{var e,t;Je(!0);const{data:n}=await Se.supabase.from("reports").select("id").eq("reporter_id",Te).eq("facility_type","playground").eq("facility_code",lt||"").eq("target_type","playground_review").eq("target_id",Qe.reviewId).maybeSingle();if(n)return alert("\uc774\ubbf8 \uc2e0\uace0\ud55c \uce6d\ucc2c\uc785\ub2c8\ub2e4."),Fe(!1),et(null),void Ne(null);const s={facility_address:(null===p||void 0===p||null===(e=p.map)||void 0===e?void 0:e.address)||null},{error:r}=await Se.supabase.from("reports").insert({reporter_id:Te,report_reason:Ve.trim(),report_type:He,status:"pending",target_type:"playground_review",target_id:Qe.reviewId,facility_type:"playground",facility_code:lt||null,facility_name:(null===p||void 0===p||null===(t=p.map)||void 0===t?void 0:t.name)||null,admin_notes:JSON.stringify(s)});if(r){if("23505"===r.code)return alert("\uc774\ubbf8 \uc2e0\uace0\ud55c \uce6d\ucc2c\uc785\ub2c8\ub2e4."),Fe(!1),et(null),void Ne(null);throw r}Fe(!1),et(null),We(""),Ye("spam"),Ne(null),alert("\uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(b){"23505"===(null===b||void 0===b?void 0:b.code)?(alert("\uc774\ubbf8 \uc2e0\uace0\ud55c \uce6d\ucc2c\uae00\uc785\ub2c8\ub2e4."),Fe(!1),et(null),Ne(null),We(""),Ye("spam")):(console.error("\ub9ac\ubdf0 \uc2e0\uace0 \uc624\ub958:",b),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."))}finally{Je(!1)}else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")},disabled:Ke||!Ve.trim(),className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:Ke?"\uc2e0\uace0 \uc911...":"\uc2e0\uace0\ud558\uae30"})]})]})}),qe&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-6 w-full max-w-md",children:[(0,Ee.jsxs)("div",{className:"text-center mb-6",children:[(0,Ee.jsx)("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,Ee.jsx)(vl,{className:"w-6 h-6 text-red-600"})}),(0,Ee.jsx)("h2",{className:"text-lg font-bold text-gray-900 mb-2",children:"\uc0ac\uc6a9\uc790\ub97c \ucc28\ub2e8\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"}),(0,Ee.jsxs)("div",{className:"text-sm text-gray-600 text-left space-y-2",children:[(0,Ee.jsx)("p",{children:"\u2022 \ucc28\ub2e8\ud558\uba74 \ud574\ub2f9 \uc0ac\uc6a9\uc790\uc758 \uce6d\ucc2c\uc640 \ud65c\ub3d9\uc774 \ub354 \uc774\uc0c1 \ubcf4\uc774\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{children:"\u2022 \uc0c1\ub300\ubc29\uc740 \ud68c\uc6d0\ub2d8\uc758 \uae00\uc744 \uacc4\uc18d \ubcfc \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{children:"\u2022 \uc815\ub9d0 \ucc28\ub2e8\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("button",{onClick:()=>{Be(!1),Ze(null)},className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if($e)try{Xe(!0);const{data:{user:e}}=await Se.supabase.auth.getUser();if(!e)throw new Error("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");const{error:t}=await Se.supabase.from("blocked_users").insert({blocker_id:e.id,blocked_user_id:$e,created_at:(new Date).toISOString()});if(t)throw t;Be(!1),Ze(null),Ne(null),alert("\ucc28\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(b){console.error("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958:",b),alert("\ucc28\ub2e8 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{Xe(!1)}},disabled:Ge,className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:Ge?"\ucc28\ub2e8 \uc911...":"\ucc28\ub2e8\ud558\uae30"})]})]})}),de&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-4 max-w-lg w-full min-h-[500px] max-h-[95vh] flex flex-col",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ee.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:ve?"\uac74\ubb3c\uc0ac\uc9c4 \uc2e0\uace0":"\uc0ac\uc9c4 \uc2e0\uace0"}),(0,Ee.jsx)("button",{onClick:()=>{ue(!1),me(""),ge("spam"),ye(!1)},className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-6 h-6 text-gray-500"})})]}),(0,Ee.jsxs)("div",{className:"flex-1 overflow-y-auto mb-6",children:[(0,Ee.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:ve?"\uc774 \uac74\ubb3c\uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774\ub098 \uc0ac\uc9c4\uc774 \ub2e4\ub974\uac70\ub098 \ubd80\uc801\uc808\ud55c \uacbd\uc6b0 \uc2e0\uace0\ud574\uc8fc\uc138\uc694. \uad00\ub9ac\uc790\uac00 \ud655\uc778 \ud6c4 \uc870\uce58\ud558\uaca0\uc2b5\ub2c8\ub2e4.":"\uc120\ud0dd\ud55c \uc0ac\uc9c4\uc744 \uc2e0\uace0\ud569\ub2c8\ub2e4."}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc720\ud615"}),(0,Ee.jsx)("select",{value:fe,onChange:e=>ge(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent",children:(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("option",{value:"wrong_purpose",children:"\uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774 \ub2e4\ub984"}),(0,Ee.jsx)("option",{value:"wrong_image",children:"\uc0ac\uc9c4\uc774 \ub2e4\ub984"}),(0,Ee.jsx)("option",{value:"inappropriate",children:"\ubd80\uc801\uc808\ud55c \ub0b4\uc6a9"}),(0,Ee.jsx)("option",{value:"other",children:"\uae30\ud0c0"})]})})]}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc0ac\uc720"}),(0,Ee.jsx)("textarea",{value:he,onChange:e=>me(e.target.value),placeholder:ve?"\uac74\ubb3c\uc0ac\uc9c4\uc774 \uc65c \ubd80\uc801\uc808\ud55c\uc9c0 \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694. \uc608: \uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774 \ub2e4\ub974\uac70\ub098, \uc798\ubabb\ub41c \uc0ac\uc9c4\uc774 \uc62c\ub77c\uc654\uc2b5\ub2c8\ub2e4...":"\uc0ac\uc9c4\uc774 \uc65c \ubd80\uc801\uc808\ud55c\uc9c0 \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694. \uc608: \uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774 \ub2e4\ub974\uac70\ub098, \uc798\ubabb\ub41c \uc0ac\uc9c4\uc774 \uc62c\ub77c\uc654\uc2b5\ub2c8\ub2e4...",rows:6,maxLength:500,className:"w-full px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent resize-none text-sm"}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 font-semibold mt-1",children:[(0,Ee.jsx)("span",{children:"\ucd5c\ub300 \ud14d\uc2a4\ud2b8 \uae38\uc774"}),(0,Ee.jsxs)("span",{children:[he.length,"/500"]})]})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3 flex-shrink-0",children:[(0,Ee.jsx)("button",{onClick:()=>{ue(!1),me(""),ge("spam"),ye(!1)},className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(Te)if(ve)try{var e,t;xe(!0);const n=ee[re]||null,s={reported_image_url:n,facility_address:(null===p||void 0===p||null===(e=p.map)||void 0===e?void 0:e.address)||null},{error:r}=await Se.supabase.from("reports").insert({reporter_id:Te,report_reason:he.trim(),report_type:fe,status:"pending",target_type:"building_image",target_id:null,facility_type:"playground",facility_code:lt||null,facility_name:(null===p||void 0===p||null===(t=p.map)||void 0===t?void 0:t.name)||null,admin_notes:JSON.stringify(s)});if(r)throw r;ue(!1),me(""),ge("wrong_purpose"),ye(!1),alert("\uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(b){console.error("\uac74\ubb3c\uc0ac\uc9c4 \uc2e0\uace0 \uc624\ub958:",b),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{xe(!1)}else if(ie)try{var n,s;xe(!0);const e=ee[re]||null,t={reported_image_url:e,facility_address:(null===p||void 0===p||null===(n=p.map)||void 0===n?void 0:n.address)||null},{error:r}=await Se.supabase.from("reports").insert({reporter_id:Te,report_reason:he.trim(),report_type:fe,status:"pending",target_type:"playground_review_image",target_id:ie.reviewId,facility_type:"playground",facility_code:lt||null,facility_name:(null===p||void 0===p||null===(s=p.map)||void 0===s?void 0:s.name)||null,admin_notes:JSON.stringify(t)});if(r)throw r;ue(!1),me(""),ge("wrong_purpose"),ce(!1),alert("\uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(b){console.error("\uc774\ubbf8\uc9c0 \uc2e0\uace0 \uc624\ub958:",b),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{xe(!1)}else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.");else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")},disabled:pe||!he.trim(),className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:pe?"\uc2e0\uace0 \uc911...":"\uc2e0\uace0\ud558\uae30"})]})]})})]})},ud=()=>{const e=ne(),{kindercode:t,stcode:n}=se(),s=t||n||"",a=t?"kindergarten":"childcare",[i,o]=(0,r.useState)(new Date),[l,c]=(0,r.useState)({}),[d,u]=(0,r.useState)(!1),[h,m]=(0,r.useState)(null),[f,g]=(0,r.useState)(!1),[p,x]=(0,r.useState)(!1),[v,y]=(0,r.useState)([]),[b,w]=(0,r.useState)(0),[j,_]=(0,r.useState)(!1),[N,k]=(0,r.useState)(!1),[C,S]=(0,r.useState)(""),[E,P]=(0,r.useState)("wrong_purpose"),[A,T]=(0,r.useState)(!1),[I,M]=(0,r.useState)(null),L=(0,r.useRef)(null),R=(0,r.useRef)(null),O=new Date(i.getFullYear(),i.getMonth(),1),D=new Date(i.getFullYear(),i.getMonth()+1,0),z=O.getDay(),U=D.getDate();(0,r.useEffect)(()=>{(async()=>{try{const{data:{user:e}}=await Se.supabase.auth.getUser();if(e){const{data:t}=await Se.supabase.from("profiles").select("id").eq("auth_user_id",e.id).single();t&&M(t.id)}}catch(e){console.error("\uc0ac\uc6a9\uc790 \uc815\ubcf4 \ub85c\ub4dc \uc624\ub958:",e)}})()},[]),(0,r.useEffect)(()=>{F()},[i,s]),(0,r.useEffect)(()=>(document.body.style.overflow=p||N?"hidden":"unset",()=>{document.body.style.overflow="unset"}),[p,N]);const F=async()=>{if(s)try{u(!0);const e="kindergarten"===a?"kindergarten_meals":"childcare_meals",t="kindergarten"===a?"kindergarten_code":"childcare_code",n=new Date(i.getFullYear(),i.getMonth(),1).toISOString().split("T")[0],r=new Date(i.getFullYear(),i.getMonth()+1,0).toISOString().split("T")[0],{data:o,error:l}=await Se.supabase.from(e).select("*").eq(t,s).gte("meal_date",n).lte("meal_date",r).eq("is_active",!0);if(l)return void console.error("\uae09\uc2dd \ub370\uc774\ud130 \ub85c\ub4dc \uc624\ub958:",l);const d={};null===o||void 0===o||o.forEach(e=>{d[e.meal_date]={meal_date:e.meal_date,meal_images:e.meal_images||[],menu_description:e.menu_description||""}}),c(d),console.log("\u2705 ".concat(Object.keys(d).length,"\uac1c \ub0a0\uc9dc \uae09\uc2dd \ub370\uc774\ud130 \ub85c\ub4dc"))}catch(e){console.error("\uae09\uc2dd \ub370\uc774\ud130 \ub85c\ub4dc \uc2e4\ud328:",e)}finally{u(!1)}},q=e=>{const t=new Date;return t.getDate()===e&&t.getMonth()===i.getMonth()&&t.getFullYear()===i.getFullYear()},B=[];for(let r=0;r<z;r++)B.push(null);for(let r=1;r<=U;r++)B.push(r);const V=()=>{0!==v.length&&w(e=>(e-1+v.length)%v.length)},W=()=>{0!==v.length&&w(e=>(e+1)%v.length)};return(0,Ee.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Ee.jsx)("div",{className:"bg-white shadow-sm",children:(0,Ee.jsx)("div",{className:"px-4 py-3",children:(0,Ee.jsx)("div",{className:"flex items-center justify-between",children:(0,Ee.jsxs)("div",{className:"flex items-center",children:[(0,Ee.jsx)("button",{onClick:()=>e(-1),className:"p-2 hover:bg-gray-100 rounded-full transition-colors mr-2",children:(0,Ee.jsx)(Vo,{className:"w-5 h-5 text-gray-600"})}),(0,Ee.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"\uae09\uc2dd \uce98\ub9b0\ub354"})]})})})}),(0,Ee.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,Ee.jsx)("div",{className:"px-4 py-3",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:()=>{o(new Date(i.getFullYear(),i.getMonth()-1,1))},className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,Ee.jsx)(ll,{className:"w-5 h-5 text-gray-600"})}),(0,Ee.jsxs)("h2",{className:"text-xl font-bold text-gray-900",children:[i.getFullYear(),"\ub144 ",["1\uc6d4","2\uc6d4","3\uc6d4","4\uc6d4","5\uc6d4","6\uc6d4","7\uc6d4","8\uc6d4","9\uc6d4","10\uc6d4","11\uc6d4","12\uc6d4"][i.getMonth()]]}),(0,Ee.jsx)("button",{onClick:()=>{o(new Date(i.getFullYear(),i.getMonth()+1,1))},className:"p-2 hover:bg-gray-100 rounded-full transition-colors",children:(0,Ee.jsx)(cl,{className:"w-5 h-5 text-gray-600"})})]})})}),(0,Ee.jsxs)("div",{className:"bg-white",children:[(0,Ee.jsx)("div",{className:"grid grid-cols-7 border-b border-gray-200",children:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"].map((e,t)=>(0,Ee.jsx)("div",{className:"p-3 text-center text-sm font-medium ".concat(0===t?"text-red-500":6===t?"text-blue-500":"text-gray-700"),children:e},e))}),(0,Ee.jsx)("div",{className:"grid grid-cols-7 gap-0",children:B.map((e,t)=>(0,Ee.jsx)("div",{className:"min-h-[80px] p-1 ".concat(e?"hover:bg-gray-50":"bg-white"),children:e&&(0,Ee.jsx)("div",{className:"h-full flex flex-col",children:(0,Ee.jsx)("div",{className:"flex flex-col items-center justify-center",children:(0,Ee.jsxs)("div",{className:"w-12 overflow-hidden rounded-lg cursor-pointer hover:ring-2 hover:ring-purple-400 transition-all",onClick:()=>{const t="".concat(i.getFullYear(),"-").concat(String(i.getMonth()+1).padStart(2,"0"),"-").concat(String(e).padStart(2,"0")),n=l[t];n&&(m(n),g(!0))},children:[(0,Ee.jsx)("div",{className:"px-1 py-0.5 text-center text-[10px] font-medium ".concat(q(e)?"bg-[#fb8678] text-white":"bg-gray-200 text-gray-700"),children:e}),(()=>{const t="".concat(i.getFullYear(),"-").concat(String(i.getMonth()+1).padStart(2,"0"),"-").concat(String(e).padStart(2,"0")),n=l[t];return n&&n.meal_images.length>0?(0,Ee.jsxs)("div",{className:"w-12 h-12 relative",children:[(0,Ee.jsx)("img",{src:n.meal_images[0],alt:"".concat(e,"\uc77c \uae09\uc2dd"),className:"w-full h-full object-cover"}),n.meal_images.length>1&&(0,Ee.jsxs)("div",{className:"absolute bottom-0 right-0 bg-black bg-opacity-70 text-white text-[8px] px-1 rounded-tl",children:["+",n.meal_images.length-1]})]}):(0,Ee.jsx)("div",{className:"w-12 h-12 flex items-center justify-center ".concat(q(e)?"bg-orange-100":"bg-gray-100"),children:(0,Ee.jsx)(Sl,{className:"w-4 h-4 ".concat(q(e)?"text-orange-500":"text-gray-400")})})})()]})})})},t))})]}),(0,Ee.jsx)("div",{className:"p-4 bg-white",children:(0,Ee.jsx)("div",{className:"text-center text-sm text-gray-500",children:(0,Ee.jsx)("p",{children:"\u2022 \uae09\uc2dd \uc0ac\uc9c4\uc774 \uc788\ub294 \ub0a0\uc9dc\ub97c \ud074\ub9ad\ud558\uc5ec \uc790\uc138\ud788 \ubcf4\uae30"})})}),f&&h&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",onClick:()=>{g(!1),m(null)},children:(0,Ee.jsxs)("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between p-4",children:[(0,Ee.jsxs)("h3",{className:"text-lg font-bold",children:[new Date(h.meal_date).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})," \uae09\uc2dd"]}),(0,Ee.jsx)("button",{onClick:()=>{g(!1),m(null)},className:"p-2 hover:bg-gray-100 rounded-full",children:(0,Ee.jsx)(Vo,{className:"w-5 h-5"})})]}),h.meal_images.length>0&&(0,Ee.jsxs)("div",{className:"p-4",children:[(0,Ee.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"\uae09\uc2dd \uc0ac\uc9c4"}),(0,Ee.jsx)("div",{className:"flex flex-col items-center gap-3",children:h.meal_images.map((e,t)=>(0,Ee.jsx)("img",{src:e,alt:"\uae09\uc2dd \uc0ac\uc9c4 ".concat(t+1),className:"w-full max-w-md h-auto object-cover rounded-lg shadow-sm cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e&&0!==e.length&&(y(e),w(Math.min(Math.max(t,0),e.length-1)),x(!0),_(!1))}(h.meal_images,t)},t))})]}),h.menu_description&&(0,Ee.jsxs)("div",{className:"p-4",children:[(0,Ee.jsx)("h4",{className:"text-sm font-semibold mb-2",children:"\uba54\ub274 \uc815\ubcf4"}),(0,Ee.jsx)("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:h.menu_description})]})]})}),p&&v.length>0&&(0,Ee.jsxs)("div",{className:"fixed inset-0 bg-black z-[60] flex items-center justify-center",onTouchStart:e=>{const t=e.touches[0];L.current=t.clientX,R.current=t.clientY},onTouchEnd:e=>{if(null===L.current)return;const t=e.changedTouches[0].clientX-L.current;Math.abs(t)>50&&(t>0?V():W()),L.current=null,R.current=null},onClick:e=>{e.target.closest(".image-viewer-menu-container")||_(!1)},children:[(0,Ee.jsx)("button",{onClick:()=>{x(!1),_(!1)},className:"absolute top-4 right-4 p-2 rounded-full hover:bg-white/10 text-white z-10","aria-label":"\ub2eb\uae30",children:(0,Ee.jsx)(gl,{className:"w-6 h-6"})}),(0,Ee.jsxs)("div",{className:"absolute top-4 right-16 image-viewer-menu-container z-10",children:[(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),_(!j)},className:"p-2 rounded-full hover:bg-white/10 text-white","aria-label":"\uc635\uc158 \uba54\ub274",children:(0,Ee.jsx)(Gc,{className:"w-6 h-6"})}),j&&(0,Ee.jsx)("div",{className:"absolute right-0 top-10 bg-white rounded-xl shadow-lg border border-gray-200 py-2 z-20 min-w-[120px]",children:(0,Ee.jsx)("button",{onClick:e=>{e.stopPropagation(),P("wrong_purpose"),S(""),k(!0),_(!1)},className:"w-full px-4 py-2 text-center text-sm text-red-600 hover:bg-red-50",children:"\uc2e0\uace0\ud558\uae30"})})]}),v.length>1&&(0,Ee.jsx)("button",{onClick:V,className:"absolute left-2 sm:left-4 p-3 rounded-full hover:bg-white/10 text-white","aria-label":"\uc774\uc804 \uc774\ubbf8\uc9c0",children:(0,Ee.jsx)(ll,{className:"w-7 h-7"})}),(0,Ee.jsxs)("div",{className:"max-w-full max-h-full",children:[(0,Ee.jsx)("img",{src:v[b],alt:"\uae09\uc2dd \uc0ac\uc9c4",className:"max-w-full max-h-[85vh] object-contain"}),v.length>1&&(0,Ee.jsxs)("div",{className:"mt-3 text-center text-xs text-white/70",children:[b+1," / ",v.length]})]}),v.length>1&&(0,Ee.jsx)("button",{onClick:W,className:"absolute right-2 sm:right-4 p-3 rounded-full hover:bg-white/10 text-white","aria-label":"\ub2e4\uc74c \uc774\ubbf8\uc9c0",children:(0,Ee.jsx)(cl,{className:"w-7 h-7"})})]}),N&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[70] p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-4 max-w-lg w-full min-h-[500px] max-h-[95vh] flex flex-col",children:[(0,Ee.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,Ee.jsx)("h3",{className:"text-xl font-bold text-gray-900",children:"\uae09\uc2dd\uc0ac\uc9c4 \uc2e0\uace0"}),(0,Ee.jsx)("button",{onClick:()=>{k(!1),S(""),P("wrong_purpose")},className:"p-2 rounded-full hover:bg-gray-100 transition-colors",children:(0,Ee.jsx)(gl,{className:"w-6 h-6 text-gray-500"})})]}),(0,Ee.jsxs)("div",{className:"flex-1 overflow-y-auto mb-6",children:[(0,Ee.jsx)("p",{className:"text-gray-600 text-sm mb-4",children:"\uc774 \uae09\uc2dd\uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774\ub098 \uc0ac\uc9c4\uc774 \ub2e4\ub974\uac70\ub098 \ubd80\uc801\uc808\ud55c \uacbd\uc6b0 \uc2e0\uace0\ud574\uc8fc\uc138\uc694. \uad00\ub9ac\uc790\uac00 \ud655\uc778 \ud6c4 \uc870\uce58\ud558\uaca0\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc720\ud615"}),(0,Ee.jsxs)("select",{value:E,onChange:e=>P(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent",children:[(0,Ee.jsx)("option",{value:"wrong_purpose",children:"\uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774 \ub2e4\ub984"}),(0,Ee.jsx)("option",{value:"wrong_image",children:"\uc0ac\uc9c4\uc774 \ub2e4\ub984"}),(0,Ee.jsx)("option",{value:"inappropriate",children:"\ubd80\uc801\uc808\ud55c \ub0b4\uc6a9"}),(0,Ee.jsx)("option",{value:"other",children:"\uae30\ud0c0"})]})]}),(0,Ee.jsxs)("div",{className:"mb-4",children:[(0,Ee.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc2e0\uace0 \uc0ac\uc720"}),(0,Ee.jsx)("textarea",{value:C,onChange:e=>S(e.target.value),placeholder:"\uae09\uc2dd\uc0ac\uc9c4\uc774 \uc65c \ubd80\uc801\uc808\ud55c\uc9c0 \uad6c\uccb4\uc801\uc73c\ub85c \uc791\uc131\ud574\uc8fc\uc138\uc694. \uc608: \uc0ac\uc9c4\uc758 \ubaa9\uc801\uc774 \ub2e4\ub974\uac70\ub098, \uc798\ubabb\ub41c \uc0ac\uc9c4\uc774 \uc62c\ub77c\uc654\uc2b5\ub2c8\ub2e4...",rows:6,maxLength:500,className:"w-full px-2 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#fb8678] focus:border-transparent resize-none text-sm"}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs text-gray-400 font-semibold mt-1",children:[(0,Ee.jsx)("span",{children:"\ucd5c\ub300 \ud14d\uc2a4\ud2b8 \uae38\uc774"}),(0,Ee.jsxs)("span",{children:[C.length,"/500"]})]})]})]}),(0,Ee.jsxs)("div",{className:"flex space-x-3 flex-shrink-0",children:[(0,Ee.jsx)("button",{onClick:()=>{k(!1),S(""),P("wrong_purpose")},className:"flex-1 px-4 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition-colors font-medium",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(I)try{T(!0);const e={reported_image_url:v[b]||null,report_source:"meal_calendar"},{error:t}=await Se.supabase.from("reports").insert({reporter_id:I,report_reason:C.trim(),report_type:E,status:"pending",target_type:"meal_image",target_id:null,facility_type:a,facility_code:s||null,facility_name:null,admin_notes:JSON.stringify(e)});if(t)throw t;k(!1),S(""),P("wrong_purpose"),alert("\uc2e0\uace0\uac00 \uc811\uc218\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){console.error("\uae09\uc2dd \uc0ac\uc9c4 \uc2e0\uace0 \uc624\ub958:",e),alert("\uc2e0\uace0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{T(!1)}else alert("\ub85c\uadf8\uc778\uc774 \ud544\uc694\ud569\ub2c8\ub2e4.")},disabled:A||!C.trim(),className:"flex-1 px-4 py-3 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:A?"\uc2e0\uace0 \uc911...":"\uc2e0\uace0\ud558\uae30"})]})]})})]})},hd=()=>{const{kindercode:e}=se(),t=ne(),[n]=Ce(),s=n.get("sidoCode"),a=n.get("sggCode"),[i,o]=(0,r.useState)(0),[l,c]=(0,r.useState)(""),[d,u]=(0,r.useState)([]),[h,m]=(0,r.useState)([]),[f,g]=(0,r.useState)(!1),[p,x]=(0,r.useState)(null),[v,y]=(0,r.useState)(""),[b,w]=(0,r.useState)(!0),j=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{if(e)try{const t=await td(e);t&&y(t.name||"")}catch(p){console.error("\uc720\uce58\uc6d0 \uc815\ubcf4 \ub85c\ub4dc \uc2e4\ud328:",p)}})()},[e]);const _=()=>{const n="/kindergarten/".concat(e).concat(s&&a?"?sidoCode=".concat(s,"&sggCode=").concat(a):"");t(n)};return(0,Ee.jsxs)("div",{className:"min-h-screen bg-white",children:[b&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-xl",children:[(0,Ee.jsx)("div",{className:"text-center mb-4",children:(0,Ee.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"\uc544\uc774\ub97c \uc704\ud55c \ub530\ub73b\ud55c \uce6d\ucc2c \ubb38\ud654\ub97c \uc751\uc6d0\ud569\ub2c8\ub2e4"})}),(0,Ee.jsxs)("div",{className:"space-y-3 text-sm text-gray-700 leading-relaxed",children:[(0,Ee.jsx)("p",{children:"\uc791\uc131\ud558\uc2dc\ub294 \ub9ac\ubdf0\ub294 \uc2e4\uc81c \uae30\uad00(\uc720\uce58\uc6d0\xb7\uc5b4\ub9b0\uc774\uc9d1\xb7\ub180\uc774\uc2dc\uc124) \uad00\uacc4\uc790\uc5d0\uac8c \uc9c1\uc811\uc801\uc778 \uc601\ud5a5\uc744 \uc904 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{children:"\ud5c8\uc704 \uc0ac\uc2e4, \uacfc\ub3c4\ud55c \ube44\ub09c \ub4f1\uc740 \ud574\ub2f9 \uae30\uad00\uc758 \uc694\uccad\uc73c\ub85c \uc81c\uc7ac\ub098 \ubc95\uc801 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\uc73c\ub2c8"}),(0,Ee.jsx)("p",{className:"font-semibold text-gray-900",children:"\ubd80\ubaa8\ub2d8\uc758 \uc2e0\uc911\ud55c \uc791\uc131 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4."})]}),(0,Ee.jsx)("button",{onClick:()=>w(!1),className:"w-full mt-6 py-3 px-4 bg-[#fb8678] text-white rounded-xl font-medium hover:bg-[#fb8678]/90 transition-colors",children:"\ud655\uc778\ud588\uc2b5\ub2c8\ub2e4"})]})}),(0,Ee.jsx)("div",{className:"bg-white sticky top-0 z-10",children:(0,Ee.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:_,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)(ll,{className:"w-5 h-5 text-gray-700"})}),(0,Ee.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"\uce6d\ucc2c \uc791\uc131"}),(0,Ee.jsx)("div",{className:"w-9"})," "]})}),(0,Ee.jsxs)("div",{className:"space-y-6",children:[(0,Ee.jsxs)("div",{className:"text-center pt-4",children:[(0,Ee.jsx)("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map(e=>(0,Ee.jsx)("button",{onClick:()=>{o(e)},disabled:f,className:"p-2 transition-colors disabled:opacity-50",children:(0,Ee.jsx)(ml,{className:"w-8 h-8 ".concat(e<=i?"text-[#fb8678] fill-current":"text-gray-300")})},e))}),(0,Ee.jsx)("label",{className:"block text-xs font-semibold text-gray-400 mt-2",children:"\ubcc4\uc810\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694 *"}),i>0&&(0,Ee.jsxs)("p",{className:"text-sm text-gray-600 mt-3 font-medium",children:[1===i&&"\ud83d\udc97 \ub9e4\uc6b0 \ubcc4\ub85c\uc608\uc694",2===i&&"\ud83d\udc97\ud83d\udc97 \ubcc4\ub85c\uc608\uc694",3===i&&"\ud83d\udc97\ud83d\udc97\ud83d\udc97 \ubcf4\ud1b5\uc774\uc5d0\uc694",4===i&&"\ud83d\udc97\ud83d\udc97\ud83d\udc97\ud83d\udc97 \uc88b\uc544\uc694",5===i&&"\ud83d\udc97\ud83d\udc97\ud83d\udc97\ud83d\udc97\ud83d\udc97 \ub9e4\uc6b0 \uc88b\uc544\uc694"]})]}),(0,Ee.jsxs)("div",{className:"px-2",children:[(0,Ee.jsx)("label",{className:"block text-base font-bold text-gray-600 mb-2 px-1",children:"\uce6d\ucc2c"}),(0,Ee.jsx)("textarea",{value:l,onChange:e=>c(e.target.value),disabled:f,placeholder:"\uc720\uce58\uc6d0\uc5d0 \ub300\ud55c \uce6d\ucc2c\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694 (\uc120\ud0dd\uc0ac\ud56d)\n\uc608: \uc120\uc0dd\ub2d8\uc774 \uce5c\uc808\ud558\uace0 \uc2dc\uc124\uc774 \uae68\ub057\ud574\uc694. \uc544\uc774\uac00 \ub9e4\uc77c \uc990\uac81\uac8c \ub2e4\ub2c8\uace0 \uc788\uc2b5\ub2c8\ub2e4.",className:"w-full h-60 px-2 py-2 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-[#fb8678] focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed text-sm leading-relaxed",maxLength:500}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs font-semibold text-gray-400",children:[(0,Ee.jsx)("span",{children:"\uc120\ud0dd\uc0ac\ud56d"}),(0,Ee.jsxs)("span",{children:[l.length,"/500"]})]})]}),(0,Ee.jsxs)("div",{className:"px-2",children:[(0,Ee.jsx)("label",{className:"block text-base font-bold text-gray-600 mb-2 px-1",children:"\uc0ac\uc9c4 \ucd94\uac00"}),(0,Ee.jsxs)("div",{className:"grid grid-cols-4 gap-1.5",children:[h.map((e,t)=>(0,Ee.jsxs)("div",{className:"relative aspect-square",children:[(0,Ee.jsx)("img",{src:e,alt:"\ubbf8\ub9ac\ubcf4\uae30 ".concat(t+1),className:"w-full h-full object-cover rounded-xl"}),(0,Ee.jsx)("button",{onClick:()=>(e=>{u(t=>t.filter((t,n)=>n!==e)),m(t=>t.filter((t,n)=>n!==e))})(t),disabled:f,className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600 disabled:opacity-50",children:(0,Ee.jsx)(gl,{className:"w-3 h-3"})})]},t)),h.length<5&&(0,Ee.jsx)("button",{onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.click()},disabled:f,className:"aspect-square bg-gray-100 rounded-xl flex items-center justify-center hover:bg-gray-200 transition-colors disabled:opacity-50",children:(0,Ee.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),(0,Ee.jsx)("input",{ref:j,type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=e.target.files;if(!t)return;const n=Array.from(t);if(d.length+h.length+n.length>5)return void x("\ucd5c\ub300 ".concat(5,"\uc7a5\uae4c\uc9c0\ub9cc \uc5c5\ub85c\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."));n.filter(e=>e.size>5242880).length>0?x("\ud30c\uc77c \ud06c\uae30\ub294 5MB \uc774\ud558\uc5ec\uc57c \ud569\ub2c8\ub2e4."):(u(e=>[...e,...n]),n.forEach(e=>{const t=new FileReader;t.onload=e=>{m(t=>{var n;return[...t,null===(n=e.target)||void 0===n?void 0:n.result]})},t.readAsDataURL(e)}),x(null))},className:"hidden",disabled:f}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs font-semibold text-gray-400 mt-2",children:[(0,Ee.jsx)("span",{children:"\uc120\ud0dd\uc0ac\ud56d (\uc0ac\uc9c4\uc740 \ucd5c\ub300 5\uc7a5\uae4c\uc9c0)"}),(0,Ee.jsxs)("span",{children:[h.length,"/5"]})]})]}),p&&(0,Ee.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,Ee.jsx)("p",{className:"text-sm text-red-600",children:p})})]}),(0,Ee.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4",children:(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("button",{onClick:_,disabled:f,className:"flex-1 py-4 px-4 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(0!==i)if(l.trim().length>0&&l.trim().length<10)x("\uce6d\ucc2c\uc740 \ucd5c\uc18c 10\uc790 \uc774\uc0c1 \uc791\uc131\ud574\uc8fc\uc138\uc694.");else{g(!0),x(null);try{const n={kindergarten_code:e,kindergarten_name:v,rating:i,content:l.trim(),images:d.length>0?d:void 0};await Dl(n);const r="/kindergarten/".concat(e).concat(s&&a?"?sidoCode=".concat(s,"&sggCode=").concat(a):"");t(r,{state:{activeTab:"reviews"}})}catch(n){console.error("\uce6d\ucc2c \uc791\uc131 \uc2e4\ud328:",n),x(n.message||"\uce6d\ucc2c \uc791\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{g(!1)}}else x("\ubcc4\uc810\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")},disabled:f||0===i,className:"flex-1 py-4 px-4 bg-[#fb8678] text-white rounded-xl font-medium hover:bg-[#fb8678]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:f?(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"\uc791\uc131 \uc911..."]}):"\uce6d\ucc2c \uc791\uc131\ud558\uae30"})]})}),(0,Ee.jsx)("div",{className:"h-24"})]})},md=()=>{const{stcode:e}=se(),t=ne(),[n,s]=(0,r.useState)(0),[a,i]=(0,r.useState)(""),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[u,h]=(0,r.useState)(!1),[m,f]=(0,r.useState)(null),[g,p]=(0,r.useState)(""),[x,v]=(0,r.useState)(!0),y=(0,r.useRef)(null);(0,r.useEffect)(()=>{(async()=>{if(e)try{const t=await ad(e);t&&p(t.name||"")}catch(t){}})()},[e]);return(0,Ee.jsxs)("div",{className:"min-h-screen bg-white",children:[x&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-xl",children:[(0,Ee.jsx)("div",{className:"text-center mb-4",children:(0,Ee.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"\uc544\uc774\ub97c \uc704\ud55c \ub530\ub73b\ud55c \uce6d\ucc2c \ubb38\ud654\ub97c \uc751\uc6d0\ud569\ub2c8\ub2e4"})}),(0,Ee.jsxs)("div",{className:"space-y-3 text-sm text-gray-700 leading-relaxed",children:[(0,Ee.jsx)("p",{children:"\uc791\uc131\ud558\uc2dc\ub294 \ub9ac\ubdf0\ub294 \uc2e4\uc81c \uae30\uad00(\uc720\uce58\uc6d0\xb7\uc5b4\ub9b0\uc774\uc9d1\xb7\ub180\uc774\uc2dc\uc124) \uad00\uacc4\uc790\uc5d0\uac8c \uc9c1\uc811\uc801\uc778 \uc601\ud5a5\uc744 \uc904 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{children:"\ud5c8\uc704 \uc0ac\uc2e4, \uacfc\ub3c4\ud55c \ube44\ub09c \ub4f1\uc740 \ud574\ub2f9 \uae30\uad00\uc758 \uc694\uccad\uc73c\ub85c \uc81c\uc7ac\ub098 \ubc95\uc801 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\uc73c\ub2c8"}),(0,Ee.jsx)("p",{className:"font-semibold text-gray-900",children:"\ubd80\ubaa8\ub2d8\uc758 \uc2e0\uc911\ud55c \uc791\uc131 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4."})]}),(0,Ee.jsx)("button",{onClick:()=>v(!1),className:"w-full mt-6 py-3 px-4 bg-[#fb8678] text-white rounded-xl font-medium hover:bg-[#fb8678]/90 transition-colors",children:"\ud655\uc778\ud588\uc2b5\ub2c8\ub2e4"})]})}),(0,Ee.jsx)("div",{className:"bg-white sticky top-0 z-10",children:(0,Ee.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:()=>t(-1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)(ll,{className:"w-5 h-5 text-gray-700"})}),(0,Ee.jsx)("h1",{className:" text-lg font-semibold text-gray-900",children:"\uce6d\ucc2c \uc791\uc131"}),(0,Ee.jsx)("div",{className:"w-9"})]})}),(0,Ee.jsxs)("div",{className:"space-y-6",children:[(0,Ee.jsxs)("div",{className:"text-center pt-4",children:[(0,Ee.jsx)("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map(e=>(0,Ee.jsx)("button",{onClick:()=>s(e),disabled:u,className:"p-2 transition-colors disabled:opacity-50",children:(0,Ee.jsx)(ml,{className:"w-8 h-8 ".concat(e<=n?"text-[#fb8678] fill-current":"text-gray-300")})},e))}),(0,Ee.jsx)("label",{className:"block text-xs font-semibold text-gray-400 mt-2",children:"\ubcc4\uc810\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694 *"}),n>0&&(0,Ee.jsxs)("p",{className:"text-sm text-gray-600 mt-3 font-medium",children:[1===n&&"\ud83d\udc97 \ub9e4\uc6b0 \ubcc4\ub85c\uc608\uc694",2===n&&"\ud83d\udc97\ud83d\udc97 \ubcc4\ub85c\uc608\uc694",3===n&&"\ud83d\udc97\ud83d\udc97\ud83d\udc97 \ubcf4\ud1b5\uc774\uc5d0\uc694",4===n&&"\ud83d\udc97\ud83d\udc97\ud83d\udc97\ud83d\udc97 \uc88b\uc544\uc694",5===n&&"\ud83d\udc97\ud83d\udc97\ud83d\udc97\ud83d\udc97\ud83d\udc97 \ub9e4\uc6b0 \uc88b\uc544\uc694"]})]}),(0,Ee.jsxs)("div",{className:"px-2",children:[(0,Ee.jsx)("label",{className:"block text-base font-bold text-gray-600 mb-2 px-1",children:"\uce6d\ucc2c"}),(0,Ee.jsx)("textarea",{value:a,onChange:e=>i(e.target.value),disabled:u,placeholder:"\uc5b4\ub9b0\uc774\uc9d1\uc5d0 \ub300\ud55c \uce6d\ucc2c\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694 (\uc120\ud0dd\uc0ac\ud56d)",className:"w-full h-60 px-2 py-2 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-[#fb8678] focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed text-sm leading-relaxed",maxLength:500}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs font-semibold text-gray-400",children:[(0,Ee.jsx)("span",{children:"\uc120\ud0dd\uc0ac\ud56d"}),(0,Ee.jsxs)("span",{children:[a.length,"/500"]})]})]}),(0,Ee.jsxs)("div",{className:"px-2",children:[(0,Ee.jsx)("label",{className:"block text-base font-bold text-gray-600 mb-2 px-1",children:"\uc0ac\uc9c4 \ucd94\uac00"}),(0,Ee.jsxs)("div",{className:"grid grid-cols-4 gap-1.5",children:[c.map((e,t)=>(0,Ee.jsxs)("div",{className:"relative aspect-square",children:[(0,Ee.jsx)("img",{src:e,alt:"\ubbf8\ub9ac\ubcf4\uae30 ".concat(t+1),className:"w-full h-full object-cover rounded-xl"}),(0,Ee.jsx)("button",{onClick:()=>{return e=t,l(t=>t.filter((t,n)=>n!==e)),void d(t=>t.filter((t,n)=>n!==e));var e},disabled:u,className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600 disabled:opacity-50",children:(0,Ee.jsx)(gl,{className:"w-3 h-3"})})]},t)),c.length<5&&(0,Ee.jsx)("button",{onClick:()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.click()},disabled:u,className:"aspect-square bg-gray-100 rounded-xl flex items-center justify-center hover:bg-gray-200 transition-colors disabled:opacity-50",children:(0,Ee.jsx)(Sl,{className:"w-6 h-6 text-gray-400"})})]}),(0,Ee.jsx)("input",{ref:y,type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=e.target.files;if(!t)return;if(o.length+t.length>5)return void f("\ucd5c\ub300 ".concat(5,"\uc7a5\uae4c\uc9c0\ub9cc \uc5c5\ub85c\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."));const n=Array.from(t);n.filter(e=>e.size>5242880).length>0?f("\ud30c\uc77c \ud06c\uae30\ub294 5MB \uc774\ud558\uc5ec\uc57c \ud569\ub2c8\ub2e4."):(l(e=>[...e,...n]),n.forEach(e=>{const t=new FileReader;t.onload=e=>d(t=>{var n;return[...t,null===(n=e.target)||void 0===n?void 0:n.result]}),t.readAsDataURL(e)}),f(null))},className:"hidden",disabled:u}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs font-semibold text-gray-400 mt-2",children:[(0,Ee.jsx)("span",{children:"\uc120\ud0dd\uc0ac\ud56d (\uc0ac\uc9c4\uc740 \ucd5c\ub300 5\uc7a5\uae4c\uc9c0)"}),(0,Ee.jsxs)("span",{children:[c.length,"/5"]})]})]}),m&&(0,Ee.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,Ee.jsx)("p",{className:"text-sm text-red-600",children:m})})]}),(0,Ee.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4",children:(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("button",{onClick:()=>t(-1),disabled:u,className:"flex-1 py-4 px-4 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(0!==n){if(a.trim().length>0&&a.trim().length<10)f("\uce6d\ucc2c\uc740 \ucd5c\uc18c 10\uc790 \uc774\uc0c1 \uc791\uc131\ud574\uc8fc\uc138\uc694.");else if(e){h(!0),f(null);try{await ql({childcare_code:e,childcare_name:g,rating:n,content:a.trim(),images:o.length>0?o:void 0}),t("/childcare/".concat(e),{state:{activeTab:"reviews"}})}catch(s){f((null===s||void 0===s?void 0:s.message)||"\uce6d\ucc2c \uc791\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{h(!1)}}}else f("\ubcc4\uc810\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")},disabled:u||0===n,className:"flex-1 py-4 px-4 bg-[#fb8678] text-white rounded-xl font-medium hover:bg-[#fb8678]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:u?(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"\uc791\uc131 \uc911..."]}):"\uce6d\ucc2c \uc791\uc131\ud558\uae30"})]})}),(0,Ee.jsx)("div",{className:"h-24"})]})},fd=()=>{const{playgroundId:e}=se(),t=ne(),[n]=Ce(),[s,a]=(0,r.useState)(0),[i,o]=(0,r.useState)(""),[l,c]=(0,r.useState)([]),[d,u]=(0,r.useState)([]),[h,m]=(0,r.useState)(!1),[f,g]=(0,r.useState)(null),[p,x]=(0,r.useState)(!0),v=n.get("name")||"",y=n.get("sidoCode")||"",b=n.get("sggCode")||"",w=(0,r.useRef)(null),j=()=>{const n=new URLSearchParams;y&&n.set("sidoCode",y),b&&n.set("sggCode",b),t("/playground/".concat(encodeURIComponent(e||"")).concat(n.toString()?"?".concat(n.toString()):""))};return(0,Ee.jsxs)("div",{className:"min-h-screen bg-white",children:[p&&(0,Ee.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Ee.jsxs)("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-xl",children:[(0,Ee.jsx)("div",{className:"text-center mb-4",children:(0,Ee.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"\uc544\uc774\ub97c \uc704\ud55c \ub530\ub73b\ud55c \uce6d\ucc2c \ubb38\ud654\ub97c \uc751\uc6d0\ud569\ub2c8\ub2e4"})}),(0,Ee.jsxs)("div",{className:"space-y-3 text-sm text-gray-700 leading-relaxed",children:[(0,Ee.jsx)("p",{children:"\uc791\uc131\ud558\uc2dc\ub294 \ub9ac\ubdf0\ub294 \uc2e4\uc81c \uae30\uad00(\uc720\uce58\uc6d0\xb7\uc5b4\ub9b0\uc774\uc9d1\xb7\ub180\uc774\uc2dc\uc124) \uad00\uacc4\uc790\uc5d0\uac8c \uc9c1\uc811\uc801\uc778 \uc601\ud5a5\uc744 \uc904 \uc218 \uc788\uc2b5\ub2c8\ub2e4."}),(0,Ee.jsx)("p",{children:"\ud5c8\uc704 \uc0ac\uc2e4, \uacfc\ub3c4\ud55c \ube44\ub09c \ub4f1\uc740 \ud574\ub2f9 \uae30\uad00\uc758 \uc694\uccad\uc73c\ub85c \uc81c\uc7ac\ub098 \ubc95\uc801 \ubb38\uc81c\uac00 \ubc1c\uc0dd\ud560 \uc218 \uc788\uc73c\ub2c8"}),(0,Ee.jsx)("p",{className:"font-semibold text-gray-900",children:"\ubd80\ubaa8\ub2d8\uc758 \uc2e0\uc911\ud55c \uc791\uc131 \ubd80\ud0c1\ub4dc\ub9bd\ub2c8\ub2e4."})]}),(0,Ee.jsx)("button",{onClick:()=>x(!1),className:"w-full mt-6 py-3 px-4 bg-[#fb8678] text-white rounded-xl font-medium hover:bg-[#fb8678]/90 transition-colors",children:"\ud655\uc778\ud588\uc2b5\ub2c8\ub2e4"})]})}),(0,Ee.jsx)("div",{className:"bg-white sticky top-0 z-10",children:(0,Ee.jsxs)("div",{className:"px-4 py-3 flex items-center justify-between",children:[(0,Ee.jsx)("button",{onClick:j,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,Ee.jsx)(ll,{className:"w-5 h-5 text-gray-700"})}),(0,Ee.jsx)("h1",{className:"text-lg font-semibold text-gray-900",children:"\uce6d\ucc2c \uc791\uc131"}),(0,Ee.jsx)("div",{className:"w-9"})]})}),(0,Ee.jsxs)("div",{className:"space-y-6",children:[(0,Ee.jsxs)("div",{className:"text-center pt-4",children:[(0,Ee.jsx)("div",{className:"flex justify-center space-x-2",children:[1,2,3,4,5].map(e=>(0,Ee.jsx)("button",{onClick:()=>(e=>a(e))(e),disabled:h,className:"p-2 transition-colors disabled:opacity-50",children:(0,Ee.jsx)(ml,{className:"w-8 h-8 ".concat(e<=s?"text-[#fb8678] fill-current":"text-gray-300")})},e))}),(0,Ee.jsx)("label",{className:"block text-xs font-semibold text-gray-400 mt-2",children:"\ubcc4\uc810\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694 *"}),s>0&&(0,Ee.jsxs)("p",{className:"text-sm text-gray-600 mt-3 font-medium",children:[1===s&&"\ud83d\udc97 \ub9e4\uc6b0 \ubcc4\ub85c\uc608\uc694",2===s&&"\ud83d\udc97\ud83d\udc97 \ubcc4\ub85c\uc608\uc694",3===s&&"\ud83d\udc97\ud83d\udc97\ud83d\udc97 \ubcf4\ud1b5\uc774\uc5d0\uc694",4===s&&"\ud83d\udc97\ud83d\udc97\ud83d\udc97\ud83d\udc97 \uc88b\uc544\uc694",5===s&&"\ud83d\udc97\ud83d\udc97\ud83d\udc97\ud83d\udc97\ud83d\udc97 \ub9e4\uc6b0 \uc88b\uc544\uc694"]})]}),(0,Ee.jsxs)("div",{className:"px-2",children:[(0,Ee.jsx)("label",{className:"block text-base font-bold text-gray-600 mb-2 px-1",children:"\uce6d\ucc2c"}),(0,Ee.jsx)("textarea",{value:i,onChange:e=>o(e.target.value),disabled:h,placeholder:"\ub180\uc774\uc2dc\uc124\uc5d0 \ub300\ud55c \uce6d\ucc2c\uc744 \uc791\uc131\ud574\uc8fc\uc138\uc694 (\uc120\ud0dd\uc0ac\ud56d)\n\uc608: \uc2dc\uc124\uc774 \uae68\ub057\ud558\uace0 \uad00\ub9ac\uac00 \uc798 \ub3fc\uc694. \uc544\uc774\uac00 \uc990\uac81\uac8c \ub180\uc558\uc2b5\ub2c8\ub2e4.",className:"w-full h-60 px-2 py-2 border border-gray-300 rounded-xl resize-none focus:ring-2 focus:ring-[#fb8678] focus:border-transparent disabled:opacity-50 disabled:cursor-not-allowed text-sm leading-relaxed",maxLength:500}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs font-semibold text-gray-400",children:[(0,Ee.jsx)("span",{children:"\uc120\ud0dd\uc0ac\ud56d"}),(0,Ee.jsxs)("span",{children:[i.length,"/500"]})]})]}),(0,Ee.jsxs)("div",{className:"px-2",children:[(0,Ee.jsx)("label",{className:"block text-base font-bold text-gray-600 mb-2 px-1",children:"\uc0ac\uc9c4 \ucd94\uac00"}),(0,Ee.jsxs)("div",{className:"grid grid-cols-4 gap-1.5",children:[d.map((e,t)=>(0,Ee.jsxs)("div",{className:"relative aspect-square",children:[(0,Ee.jsx)("img",{src:e,alt:"\ubbf8\ub9ac\ubcf4\uae30 ".concat(t+1),className:"w-full h-full object-cover rounded-xl"}),(0,Ee.jsx)("button",{onClick:()=>(e=>{c(t=>t.filter((t,n)=>n!==e)),u(t=>t.filter((t,n)=>n!==e))})(t),disabled:h,className:"absolute top-1 right-1 bg-red-500 text-white rounded-full w-5 h-5 flex items-center justify-center text-xs hover:bg-red-600 disabled:opacity-50",children:(0,Ee.jsx)(gl,{className:"w-3 h-3"})})]},t)),d.length<5&&(0,Ee.jsx)("button",{onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},disabled:h,className:"aspect-square bg-gray-100 rounded-xl flex items-center justify-center hover:bg-gray-200 transition-colors disabled:opacity-50",children:(0,Ee.jsx)("svg",{className:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,Ee.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})})]}),(0,Ee.jsx)("input",{ref:w,type:"file",accept:"image/*",multiple:!0,onChange:e=>{const t=e.target.files;if(!t)return;const n=Array.from(t);if(l.length+d.length+n.length>5)return void g("\ucd5c\ub300 ".concat(5,"\uc7a5\uae4c\uc9c0\ub9cc \uc5c5\ub85c\ub4dc\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."));n.filter(e=>e.size>5242880).length>0?g("\ud30c\uc77c \ud06c\uae30\ub294 5MB \uc774\ud558\uc5ec\uc57c \ud569\ub2c8\ub2e4."):(c(e=>[...e,...n]),n.forEach(e=>{const t=new FileReader;t.onload=e=>u(t=>{var n;return[...t,null===(n=e.target)||void 0===n?void 0:n.result]}),t.readAsDataURL(e)}),g(null))},className:"hidden",disabled:h}),(0,Ee.jsxs)("div",{className:"flex justify-between text-xs font-semibold text-gray-400 mt-2",children:[(0,Ee.jsx)("span",{children:"\uc120\ud0dd\uc0ac\ud56d (\uc0ac\uc9c4\uc740 \ucd5c\ub300 5\uc7a5\uae4c\uc9c0)"}),(0,Ee.jsxs)("span",{children:[d.length,"/5"]})]})]}),f&&(0,Ee.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:(0,Ee.jsx)("p",{className:"text-sm text-red-600",children:f})})]}),(0,Ee.jsx)("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4",children:(0,Ee.jsxs)("div",{className:"flex space-x-3",children:[(0,Ee.jsx)("button",{onClick:j,disabled:h,className:"flex-1 py-4 px-4 bg-gray-100 text-gray-700 rounded-xl font-medium hover:bg-gray-200 transition-colors disabled:opacity-50",children:"\ucde8\uc18c"}),(0,Ee.jsx)("button",{onClick:async()=>{if(e)if(0!==s)if(i.trim().length>0&&i.trim().length<10)g("\uce6d\ucc2c\uc740 \ucd5c\uc18c 10\uc790 \uc774\uc0c1 \uc791\uc131\ud574\uc8fc\uc138\uc694.");else{m(!0),g(null);try{await Bl({playground_id:decodeURIComponent(e),playground_name:v||void 0,rating:s,content:i.trim(),images:l.length?l:void 0});const n=new URLSearchParams;y&&n.set("sidoCode",y),b&&n.set("sggCode",b);const r="/playground/".concat(encodeURIComponent(e)).concat(n.toString()?"?".concat(n.toString()):"");t(r,{state:{activeTab:"praise"}})}catch(n){console.error("\uce6d\ucc2c \uc791\uc131 \uc2e4\ud328:",n),g((null===n||void 0===n?void 0:n.message)||"\uce6d\ucc2c \uc791\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}finally{m(!1)}}else g("\ubcc4\uc810\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");else g("\uc798\ubabb\ub41c \uc811\uadfc\uc785\ub2c8\ub2e4.")},disabled:h||0===s,className:"flex-1 py-4 px-4 bg-[#fb8678] text-white rounded-xl font-medium hover:bg-[#fb8678]/90 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:h?(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"\uc791\uc131 \uc911..."]}):"\uce6d\ucc2c \uc791\uc131\ud558\uae30"})]})}),(0,Ee.jsx)("div",{className:"h-24"})]})},gd=()=>{const{playgroundId:e}=se(),[t]=Ce(),n=ne(),[s,a]=(0,r.useState)(!0),[i,o]=(0,r.useState)(null),[l,c]=(0,r.useState)([]),d=(0,r.useMemo)(()=>{if(!e)return"";try{return decodeURIComponent(e)}catch(t){return e}},[e]),u=(0,r.useMemo)(()=>t.get("name")||"\uce6d\ucc2c \uc0ac\uc9c4",[t]);(0,r.useEffect)(()=>{let e=!1;return(async()=>{if(!d)return o("\ub300\uc0c1 \ub180\uc774\uc2dc\uc124\uc744 \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."),void a(!1);a(!0),o(null);try{const t=await Vl(d,1,200);e||c(t)}catch(yd){e||o("\uce6d\ucc2c \uc0ac\uc9c4\uc744 \ubd88\ub7ec\uc624\uc9c0 \ubabb\ud588\uc2b5\ub2c8\ub2e4.")}finally{e||a(!1)}})(),()=>{e=!0}},[d]);const h=(0,r.useMemo)(()=>{const e=[];for(const t of l){const n=(null===t||void 0===t?void 0:t.images)||[];for(const s of n)e.push({id:s.id,url:s.image_url,rating:Number((null===t||void 0===t?void 0:t.rating)||0)})}return e},[l]);return(0,Ee.jsxs)("div",{className:"min-h-screen bg-white",children:[(0,Ee.jsx)("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-100",children:(0,Ee.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,Ee.jsx)("button",{onClick:()=>{const e=new URLSearchParams,s=t.get("name"),r=t.get("sidoCode"),a=t.get("sggCode");s&&e.set("name",s),r&&e.set("sidoCode",r),a&&e.set("sggCode",a),n("/playground/".concat(encodeURIComponent(d),"?").concat(e.toString()),{state:{activeTab:"praise"}})},className:"p-2 rounded-lg hover:bg-gray-100",children:(0,Ee.jsx)(ll,{className:"w-5 h-5 text-gray-700"})}),(0,Ee.jsx)("h1",{className:"text-base font-semibold text-gray-900",children:u}),(0,Ee.jsx)("div",{className:"w-9"})]})}),s?(0,Ee.jsx)("div",{className:"flex items-center justify-center py-16 text-gray-600",children:"\ubd88\ub7ec\uc624\ub294 \uc911..."}):i?(0,Ee.jsx)("div",{className:"px-4 py-8 text-center text-red-600",children:i}):0===h.length?(0,Ee.jsx)("div",{className:"px-4 py-12 text-center text-gray-600",children:"\ub4f1\ub85d\ub41c \uc0ac\uc9c4\uc774 \uc5c6\uc2b5\ub2c8\ub2e4"}):(0,Ee.jsx)("div",{className:"px-4 py-4 grid grid-cols-3 gap-3",children:h.map(e=>(0,Ee.jsxs)("div",{className:"relative rounded-lg overflow-hidden bg-gray-100",children:[(0,Ee.jsx)("div",{className:"w-full",style:{paddingTop:"100%"}}),(0,Ee.jsx)("img",{src:e.url,alt:"\uce6d\ucc2c \uc0ac\uc9c4",className:"absolute inset-0 w-full h-full object-cover"}),(0,Ee.jsx)("div",{className:"absolute top-1 right-1 bg-black/60 text-white text-xs px-1 py-0.5 rounded",children:"".concat(Math.max(0,Math.min(5,Math.round(e.rating))),"\uc810")})]},e.id))}),(0,Ee.jsx)("div",{className:"h-4"})]})},pd=e=>{let{children:t}=e;const[n,s]=(0,r.useState)(!0),[a,i]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{(async()=>{try{const e=localStorage.getItem("isLoggedIn"),t=localStorage.getItem("userProfile");if("true"===e&&t){const e=JSON.parse(t),{data:n,error:r}=await Se.supabase.from("profiles").select("is_active").eq("id",e.id).single();return r||!n?(console.error("\ud504\ub85c\ud544 \uc870\ud68c \uc624\ub958:",r),localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userProfile"),alert("\uacc4\uc815 \uc815\ubcf4\ub97c \ubd88\ub7ec\uc62c \uc218 \uc5c6\uc2b5\ub2c8\ub2e4. \ub2e4\uc2dc \ub85c\uadf8\uc778\ud574\uc8fc\uc138\uc694."),void(window.location.href="/login")):!1===n.is_active?(localStorage.removeItem("isLoggedIn"),localStorage.removeItem("userProfile"),alert("\uc774 \uacc4\uc815\uc740 \ube44\ud65c\uc131\ud654 \uc870\uce58\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\uace0\uac1d\uc13c\ud130\uc5d0 \ubb38\uc758\ud574\uc8fc\uc138\uc694."),void(window.location.href="/login")):(i(!0),void s(!1))}const{data:{session:n}}=await Se.supabase.auth.getSession();if(null===n||void 0===n||!n.user)return void(window.location.href="/login");{const{data:e,error:t}=await Se.supabase.from("profiles").select("auth_user_id, is_active").eq("auth_user_id",n.user.id).maybeSingle();if(t)return console.error("\ud504\ub85c\ud544 \uc870\ud68c \uc624\ub958:",t),void(window.location.href="/signup?step=profile&oauth=success");if(!e||!e.auth_user_id)return void(window.location.href="/signup?step=profile&oauth=success");if(!1===e.is_active)return await Se.supabase.auth.signOut(),alert("\uc774 \uacc4\uc815\uc740 \ube44\ud65c\uc131\ud654 \uc870\uce58\ub418\uc5c8\uc2b5\ub2c8\ub2e4.\n\uace0\uac1d\uc13c\ud130\uc5d0 \ubb38\uc758\ud574\uc8fc\uc138\uc694."),void(window.location.href="/login");i(!0)}}catch(e){return console.error("\uc778\uc99d \ud655\uc778 \uc624\ub958:",e),void(window.location.href="/login")}finally{s(!1)}})()},[]),n?(0,Ee.jsx)("div",{className:"min-h-screen bg-white flex items-center justify-center",children:(0,Ee.jsxs)("div",{className:"text-center",children:[(0,Ee.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\ub85c\ub529 \uc911..."})]})}):a?(0,Ee.jsx)(Ee.Fragment,{children:t}):null},xd=()=>{const{currentPage:e,setCurrentPage:t}=tl(),[n]=Ce(),s=ee(),[a,i]=(0,r.useState)(!1),[o,l]=(0,r.useState)([]),[c,d]=(0,r.useState)([]),[u,h]=(0,r.useState)(0),[m,f]=(0,r.useState)(!1),[g,p]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=s.pathname,r=n.get("category");"/application"===e?t("apply"):"/search"===e?t("search"):"/main"===e||"/"===e?t(r?"community":"home"):"/community"===e&&t("community")},[s.pathname,n,t]),(0,r.useEffect)(()=>{try{const e=s.pathname,t=g?"adModalShown:".concat(g):"adModalShown";"1"===sessionStorage.getItem(t)||"/main"!==e||i(!0)}catch(e){}},[s.pathname,g]),(0,r.useEffect)(()=>{(async()=>{try{const{data:{user:e}}=await Se.supabase.auth.getUser();if(null!==e&&void 0!==e&&e.id)return void p("supabase:".concat(e.id))}catch(e){}try{const e=localStorage.getItem("userProfile");if(e)try{const t=JSON.parse(e),n=(null===t||void 0===t?void 0:t.id)||(null===t||void 0===t?void 0:t.user_id)||(null===t||void 0===t?void 0:t.phone)||String(t);return void p("local:".concat(n))}catch(t){return void p("local:".concat(e))}}catch(n){}p("anonymous")})()},[]),(0,r.useEffect)(()=>{(async()=>{try{const{data:e,error:t}=await Se.supabase.from("ad_banners").select("*").eq("banner_type","modal").eq("is_active",!0).order("order_index",{ascending:!0});if(t)console.error("\ubaa8\ub2ec \uad11\uace0 \uc870\ud68c \uc624\ub958:",t),d([]),l([]);else if(e&&e.length>0){d(e);const t=e.map(e=>e.image_url).filter(e=>e);l(t),h(0),f(!1)}else d([]),l([])}catch(e){console.error("\ubaa8\ub2ec \uad11\uace0 \uac00\uc838\uc624\uae30 \uc624\ub958:",e),d([]),l([])}})()},[]),(0,r.useEffect)(()=>{f(!1)},[u]);return(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)(ol,{}),(0,Ee.jsx)("main",{children:(()=>{if("/application"===s.pathname)return(0,Ee.jsx)(wc,{});switch(e){case"home":default:return(0,Ee.jsx)(dl,{});case"search":return(0,Ee.jsxs)("div",{className:"p-6 bg-white m-4 rounded-xl shadow-sm border border-gray-100",children:[(0,Ee.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\ud83d\udd0d \uc2dc\uc124 \uac80\uc0c9"}),(0,Ee.jsx)("p",{className:"text-gray-600",children:"\uac80\uc0c9 \uae30\ub2a5\uc774 \uace7 \ucd94\uac00\ub420 \uc608\uc815\uc785\ub2c8\ub2e4."})]});case"apply":return(0,Ee.jsx)(wc,{});case"community":return(0,Ee.jsx)(jl,{})}})()}),a&&o.length>0&&(0,Ee.jsxs)("div",{className:"fixed inset-0 z-50",children:[(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/40",onClick:()=>{try{const e=g?"adModalShown:".concat(g):"adModalShown";sessionStorage.setItem(e,"1")}catch(e){}i(!1)}}),(0,Ee.jsx)("div",{className:"absolute left-0 right-0 bottom-0 h-[30vh] rounded-t-2xl overflow-hidden z-10",children:(0,Ee.jsxs)("div",{className:"relative w-full h-full",children:[o.length>1&&(0,Ee.jsxs)("div",{className:"absolute top-2 left-2 z-20 px-3 py-1 bg-black/50 text-white text-xs font-medium rounded-full backdrop-blur-sm",children:[u+1," / ",o.length]}),(0,Ee.jsx)("button",{onClick:()=>{try{const e=g?"adModalShown:".concat(g):"adModalShown";sessionStorage.setItem(e,"1")}catch(e){}i(!1)},className:"absolute top-2 right-2 z-20 w-12 h-12 flex items-center justify-center text-white text-3xl font-bold bg-transparent hover:bg-transparent drop-shadow-lg","aria-label":"\ub2eb\uae30",children:"\xd7"}),(0,Ee.jsxs)("div",{className:"absolute inset-0",children:[(()=>{const e=c[u],t=o[u]||"";return m||(!t||"/headericon.png"===t)?(0,Ee.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-200 text-gray-500 text-sm",children:"\uc0ac\uc9c4\uc5c6\uc74c"}):(0,Ee.jsxs)("div",{className:"relative w-full h-full cursor-pointer",onClick:()=>{null!==e&&void 0!==e&&e.link_url&&window.open(e.link_url,"_blank")},children:[(0,Ee.jsx)("img",{src:t,alt:"\ud504\ub85c\ubaa8\uc158",className:"w-full h-full object-cover select-none",draggable:!1,onError:()=>f(!0)}),(0,Ee.jsx)("div",{className:"absolute inset-0 bg-black/20"}),e&&(e.title||e.description||e.show_click_text)&&(0,Ee.jsx)("div",{className:"absolute bottom-0 left-0 right-0 p-4 bg-gradient-to-t from-black/70 to-transparent",children:(0,Ee.jsxs)("div",{className:"text-white",children:[e.title&&(0,Ee.jsx)("h3",{className:"font-bold text-lg mb-1 drop-shadow-lg",children:e.title}),e.description&&(0,Ee.jsx)("p",{className:"text-sm text-white/95 drop-shadow-md",children:e.description}),e.show_click_text&&(0,Ee.jsx)("p",{className:"text-xs text-white/80 mt-1 drop-shadow-md",children:"\ud074\ub9ad\ud558\uc5ec \uc790\uc138\ud788 \ubcf4\uae30"})]})})]})})(),o.length>1&&(0,Ee.jsxs)(Ee.Fragment,{children:[(0,Ee.jsx)("button",{onClick:()=>h(e=>(e-1+o.length)%o.length),className:"absolute left-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/30 hover:bg-black/40 text-white flex items-center justify-center z-10","aria-label":"\uc774\uc804",children:"\u2039"}),(0,Ee.jsx)("button",{onClick:()=>h(e=>(e+1)%o.length),className:"absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/30 hover:bg-black/40 text-white flex items-center justify-center z-10","aria-label":"\ub2e4\uc74c",children:"\u203a"}),(0,Ee.jsx)("div",{className:"absolute bottom-2 left-0 right-0 flex items-center justify-center gap-2 z-10",children:o.map((e,t)=>(0,Ee.jsx)("span",{className:"w-2 h-2 rounded-full ".concat(t===u?"bg-[#fb8678]":"bg-white/70")},t))})]})]})]})})]})]})};const vd=function(){return(0,Ee.jsx)(nl,{children:(0,Ee.jsx)(wl,{children:(0,Ee.jsx)(il,{children:(0,Ee.jsx)(_e,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:(0,Ee.jsx)("div",{className:"App bg-white min-h-screen",children:(0,Ee.jsxs)(ye,{children:[(0,Ee.jsx)(xe,{path:"/",element:(0,Ee.jsx)(Pe,{})}),(0,Ee.jsx)(xe,{path:"/signup",element:(0,Ee.jsx)(Yo,{})}),(0,Ee.jsx)(xe,{path:"/login",element:(0,Ee.jsx)(Ko,{})}),(0,Ee.jsx)(xe,{path:"/phone-login",element:(0,Ee.jsx)(Go,{})}),(0,Ee.jsx)(xe,{path:"/main",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(xd,{})})}),(0,Ee.jsx)(xe,{path:"/community",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(xd,{})})}),(0,Ee.jsx)(xe,{path:"/search",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(xd,{})})}),(0,Ee.jsx)(xe,{path:"/community/post/:postId",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(Zl,{})})}),(0,Ee.jsx)(xe,{path:"/auth/callback",element:(0,Ee.jsx)(Cl,{})}),(0,Ee.jsx)(xe,{path:"/profile",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(Jl,{})})}),(0,Ee.jsx)(xe,{path:"/profile/posts",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(Gl,{})})}),(0,Ee.jsx)(xe,{path:"/profile/favorites",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(Xl,{})})}),(0,Ee.jsx)(xe,{path:"/post/write",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(tc,{})})}),(0,Ee.jsx)(xe,{path:"/notifications",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(sc,{})})}),(0,Ee.jsx)(xe,{path:"/notifications/settings",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(ic,{})})}),(0,Ee.jsx)(xe,{path:"/kindergarten-map",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(qc,{})})}),(0,Ee.jsx)(xe,{path:"/kindergarten/:kindercode",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(nd,{})})}),(0,Ee.jsx)(xe,{path:"/childcare/:stcode",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(od,{})})}),(0,Ee.jsx)(xe,{path:"/playground/:playgroundId",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(dd,{})})}),(0,Ee.jsx)(xe,{path:"/kindergarten/:kindercode/meal-calendar",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(ud,{})})}),(0,Ee.jsx)(xe,{path:"/childcare/:stcode/meal-calendar",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(ud,{})})}),(0,Ee.jsx)(xe,{path:"/kindergarten/:kindercode/review",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(hd,{})})}),(0,Ee.jsx)(xe,{path:"/childcare/:stcode/review",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(md,{})})}),(0,Ee.jsx)(xe,{path:"/playground/:playgroundId/review/write",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(fd,{})})}),(0,Ee.jsx)(xe,{path:"/playground/:playgroundId/review/photos",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(gd,{})})}),(0,Ee.jsx)(xe,{path:"/application",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(xd,{})})}),(0,Ee.jsx)(xe,{path:"/childcare-apply",element:(0,Ee.jsx)(pd,{children:(0,Ee.jsx)(bc,{})})})]})})})})})})};(0,i.H)(document.getElementById("root")).render((0,Ee.jsx)(r.StrictMode,{children:(0,Ee.jsx)(vd,{})}))})();
//# sourceMappingURL=main.a9b7aaf2.js.map